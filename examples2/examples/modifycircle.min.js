webpackJsonp([9],{11:function(t,e,i){"use strict";e.a="1.3.0"},12:function(t,e,i){"use strict";e.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},126:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),s=l(i(131)),o=l(i(87)),r=l(i(72)),a=l(i(30));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t,e,i){var s=i||{};o.default.call(this,s),this.continueMsg,void 0!==s.continueMsg?this.continueMsg=s.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to finish."),this.numberFormat=n.default.assert(e),this.unitPrefixFormat=n.default.assert(t)};ol.inherits(u,o.default),u.prototype.createDrawInteraction=function(t,e){return new s.default({source:e,style:t})},u.prototype.handleMeasure=function(t){var e=n.default.assertInstanceof(this.sketchFeature.getGeometry(),r.default),i=n.default.assertInstanceof(e.getGeometries()[0],a.default);t(u.getFormattedAzimutRadius(i,n.default.assertInstanceof(this.getMap().getView().getProjection(),ol.proj.Projection),this.decimals,this.precision,this.unitPrefixFormat,this.numberFormat),i.getLastCoordinate())},u.getFormattedAzimutRadius=function(t,e,i,n,s,r){var a=u.getFormattedAzimut(t,i,r);return a+=", "+o.default.getFormattedLength(t,e,n,s)},u.getFormattedAzimut=function(t,e,i){return i(u.getAzimut(t),e)+"Â°"},u.getAzimut=function(t){var e=t.getCoordinates(),i=e[1][0]-e[0][0],n=e[1][1]-e[0][1],s=Math.acos(n/Math.sqrt(i*i+n*n));return(i>0?1:-1)*s*180/Math.PI%360},e.default=u},131:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=p(i(3)),s=p(i(40)),o=(p(i(108)),p(i(2))),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(66)),a=p(i(81)),l=p(i(72)),u=p(i(30)),h=p(i(27)),d=p(i(76)),c=p(i(78)),f=p(i(20)),_=p(i(18));function p(t){return t&&t.__esModule?t:{default:t}}var g=function t(e){c.default.call(this,{handleDownEvent:t.handleDownEvent_,handleEvent:t.handleEvent_,handleUpEvent:t.handleUpEvent_}),this.downPx_=null,this.source_=void 0!==e.source?e.source:null,this.started_=!1,this.sketchFeature_=null,this.sketchPoint_=null,this.squaredClickTolerance_=4,this.sketchLayer_=new f.default({source:new _.default({useSpatialIndex:!1,wrapX:!1}),style:void 0!==e.style?e.style:d.default.getDefaultStyleFunction()}),o.default.listen(this,"change:active",this.updateState_,this)};ol.inherits(g,c.default),g.handleDownEvent_=function(t){return this.downPx_=t.pixel,!0},g.handleUpEvent_=function(t){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],s=e[1]-i[1],o=!0;return n*n+s*s<=this.squaredClickTolerance_&&(this.handlePointerMove_(t),this.started_?this.finishDrawing_():this.startDrawing_(t),o=!1),o},g.handleEvent_=function(t){var e=!0;return"pointermove"===t.type?e=this.handlePointerMove_(t):"dblclick"===t.type&&(e=!1),c.default.handleEvent.call(this,t)&&e},g.prototype.handlePointerMove_=function(t){return this.started_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},g.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();if(null===this.sketchPoint_)this.sketchPoint_=new s.default(new h.default(e)),this.updateSketchFeatures_();else{var i=this.sketchPoint_.getGeometry();n.default.assertInstanceof(i,h.default),i.setCoordinates(e)}},g.prototype.updateSketchFeatures_=function(){var t=[];null!==this.sketchFeature_&&t.push(this.sketchFeature_),null!==this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.sketchLayer_.getSource();e.clear(!0),e.addFeatures(t)},g.prototype.startDrawing_=function(t){var e=t.coordinate;this.started_=!0;var i=new u.default([e.slice(),e.slice()]),o=new a.default(e,0),r=new l.default([i,o]);n.default.assert(void 0!==r),this.sketchFeature_=new s.default,this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new d.default.Event("drawstart",this.sketchFeature_))},g.prototype.modifyDrawing_=function(t){var e=t.coordinate,i=n.default.assertInstanceof(this.sketchFeature_.getGeometry(),l.default).getGeometriesArray(),s=i[0];n.default.assertInstanceof(s,u.default);var o=s.getCoordinates(),r=this.sketchPoint_.getGeometry();n.default.assertInstanceof(r,h.default),r.setCoordinates(e);var d=o[o.length-1];d[0]=e[0],d[1]=e[1],n.default.assertInstanceof(s,u.default),s.setCoordinates(o),n.default.assertInstanceof(i[1],a.default).setRadius(s.getLength()),this.updateSketchFeatures_()},g.prototype.abortDrawing_=function(){this.started_=!1;var t=this.sketchFeature_;return null!==t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLayer_.getSource().clear(!0)),t},g.prototype.shouldStopEvent=r.FALSE,g.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();null!==t&&e||this.abortDrawing_(),this.sketchLayer_.setMap(e?t:null)},g.prototype.finishDrawing_=function(){var t=this.abortDrawing_();n.default.assert(null!==t),null!==this.source_&&this.source_.addFeature(t),this.dispatchEvent(new d.default.Event("drawend",t))},g.prototype.setMap=function(t){c.default.prototype.setMap.call(this,t),this.updateState_()},e.default=g},16:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),s=i(0),o=i(63),r=i(56),a=i(2),l=i(9),u=i(4);const h=function(t,e,i,n,s,a){o.a.call(this,t,e,i,r.a.IDLE),this.src_=n,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.imageListenerKeys_=null,this.state=r.a.IDLE,this.imageLoadFunction_=a};Object(s.inherits)(h,o.a),h.prototype.getImage=function(){return this.image_},h.prototype.handleImageError_=function(){this.state=r.a.ERROR,this.unlistenImage_(),this.changed()},h.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(u.getHeight)(this.extent)/this.image_.height),this.state=r.a.LOADED,this.unlistenImage_(),this.changed()},h.prototype.load=function(){this.state!=r.a.IDLE&&this.state!=r.a.ERROR||(this.state=r.a.LOADING,this.changed(),this.imageListenerKeys_=[a.default.listenOnce(this.image_,l.a.ERROR,this.handleImageError_,this),a.default.listenOnce(this.image_,l.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},h.prototype.setImage=function(t){this.image_=t},h.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.default.unlistenByKey),this.imageListenerKeys_=null};var d=h,c=i(10),f=i(5),_=i(6),p=i(28),g=i(57),m=i(12),y=i(15),v=i(22);const E=function(t){const e=t||{};g.default.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:g.default.defaultImageLoadFunction,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};Object(s.inherits)(E,g.default),E.GETFEATUREINFO_IMAGE_SIZE_=[101,101],E.prototype.getGetFeatureInfoUrl=function(t,e,i,s){if(void 0===this.url_)return;const o=Object(_.get)(i),r=this.getProjection();r&&r!==o&&(e=p.a.calculateSourceResolution(r,o,t,e),t=Object(_.transform)(t,o,r));const a=Object(u.getForViewAndSize)(t,e,0,E.GETFEATUREINFO_IMAGE_SIZE_),l={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(f.assign)(l,this.params_,s);const h=Math.floor((t[0]-a[0])/e),d=Math.floor((a[3]-t[1])/e);return l[this.v13_?"I":"X"]=h,l[this.v13_?"J":"Y"]=d,this.getRequestUrl_(a,E.GETFEATUREINFO_IMAGE_SIZE_,1,r||o,l)},E.prototype.getParams=function(){return this.params_},E.prototype.getImageInternal=function(t,e,i,s){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);const o=e/i,r=Object(u.getCenter)(t),h=Math.ceil(Object(u.getWidth)(t)/o),c=Math.ceil(Object(u.getHeight)(t)/o),_=Object(u.getForViewAndSize)(r,o,0,[h,c]),p=Math.ceil(this.ratio_*Object(u.getWidth)(t)/o),g=Math.ceil(this.ratio_*Object(u.getHeight)(t)/o),m=Object(u.getForViewAndSize)(r,o,0,[p,g]),y=this.image_;if(y&&this.renderedRevision_==this.getRevision()&&y.getResolution()==e&&y.getPixelRatio()==i&&Object(u.containsExtent)(y.getExtent(),_))return y;const v={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(f.assign)(v,this.params_),this.imageSize_[0]=Math.round(Object(u.getWidth)(m)/o),this.imageSize_[1]=Math.round(Object(u.getHeight)(m)/o);const E=this.getRequestUrl_(m,this.imageSize_,i,s,v);return this.image_=new d(m,e,i,E,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),a.default.listen(this.image_,l.a.CHANGE,this.handleImageChange,this),this.image_},E.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},E.prototype.getRequestUrl_=function(t,e,i,n,s){if(Object(c.a)(void 0!==this.url_,9),s[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=i)switch(this.serverType_){case m.a.GEOSERVER:const t=90*i+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+t:s.FORMAT_OPTIONS="dpi:"+t;break;case m.a.MAPSERVER:s.MAP_RESOLUTION=90*i;break;case m.a.CARMENTA_SERVER:case m.a.QGIS:s.DPI=90*i;break;default:Object(c.a)(!1,8)}s.WIDTH=e[0],s.HEIGHT=e[1];const o=n.getAxisOrientation();let r;return r=this.v13_&&"ne"==o.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,s.BBOX=r.join(","),Object(v.appendParams)(this.url_,s)},E.prototype.getUrl=function(){return this.url_},E.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},E.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},E.prototype.updateParams=function(t){Object(f.assign)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},E.prototype.updateV13_=function(){const t=this.params_.VERSION||n.a;this.v13_=y.default.compareVersions(t,"1.3")>=0};e.default=E},181:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(47),o=i(144),r=i(40),a=i(88),l=i(90),u=i(8),h=i(86),d=i(2),c=i(43),f=i(9),_=i(85),p=i(4),g=i(13),m=i(27),y="modifystart",v="modifyend",E=i(78),C=i(20),S=i(18),O=i(189),F=i(155),T=i(17);const M=function(t){let e;if(E.default.call(this,{handleDownEvent:M.handleDownEvent_,handleDragEvent:M.handleDragEvent_,handleEvent:M.handleEvent,handleUpEvent:M.handleUpEvent_}),this.condition_=t.condition?t.condition:_.default.primaryAction,this.defaultDeleteCondition_=function(t){return _.default.altKeyOnly(t)&&_.default.singleClick(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:_.default.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new F.default,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new C.default({source:new S.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:M.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,t.source?(this.source_=t.source,e=new s.default(this.source_.getFeatures()),d.default.listen(this.source_,O.a.ADDFEATURE,this.handleSourceAdd_,this),d.default.listen(this.source_,O.a.REMOVEFEATURE,this.handleSourceRemove_,this)):e=t.features,!e)throw new Error("The modify interaction requires features or a source");this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),d.default.listen(this.features_,o.a.ADD,this.handleFeatureAdd_,this),d.default.listen(this.features_,o.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null};Object(n.inherits)(M,E.default),M.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,M.prototype.addFeature_=function(t){const e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),d.default.listen(t,f.a.CHANGE,this.handleFeatureChange_,this)},M.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new M.Event(y,this.features_,t)))},M.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.default.unlisten(t,f.a.CHANGE,this.handleFeatureChange_,this)},M.prototype.removeFeatureSegmentData_=function(t){const e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(let t=i.length-1;t>=0;--t)e.remove(i[t])},M.prototype.setActive=function(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),E.default.prototype.setActive.call(this,t)},M.prototype.setMap=function(t){this.overlay_.setMap(t),E.default.prototype.setMap.call(this,t)},M.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},M.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},M.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},M.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}},M.prototype.handleFeatureRemove_=function(t){const e=t.element;this.removeFeature_(e)},M.prototype.writePointGeometry_=function(t,e){const i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},M.prototype.writeMultiPointGeometry_=function(t,e){const i=e.getCoordinates();let n,s,o,r;for(s=0,o=i.length;s<o;++s)r={feature:t,geometry:e,depth:[s],index:s,segment:[n=i[s],n]},this.rBush_.insert(e.getExtent(),r)},M.prototype.writeLineStringGeometry_=function(t,e){const i=e.getCoordinates();let n,s,o,r;for(n=0,s=i.length-1;n<s;++n)r={feature:t,geometry:e,index:n,segment:o=i.slice(n,n+2)},this.rBush_.insert(Object(p.boundingExtent)(o),r)},M.prototype.writeMultiLineStringGeometry_=function(t,e){const i=e.getCoordinates();let n,s,o,r,a,l,u;for(r=0,a=i.length;r<a;++r)for(s=0,o=(n=i[r]).length-1;s<o;++s)u={feature:t,geometry:e,depth:[r],index:s,segment:l=n.slice(s,s+2)},this.rBush_.insert(Object(p.boundingExtent)(l),u)},M.prototype.writePolygonGeometry_=function(t,e){const i=e.getCoordinates();let n,s,o,r,a,l,u;for(r=0,a=i.length;r<a;++r)for(s=0,o=(n=i[r]).length-1;s<o;++s)u={feature:t,geometry:e,depth:[r],index:s,segment:l=n.slice(s,s+2)},this.rBush_.insert(Object(p.boundingExtent)(l),u)},M.prototype.writeMultiPolygonGeometry_=function(t,e){const i=e.getCoordinates();let n,s,o,r,a,l,u,h,d,c;for(l=0,u=i.length;l<u;++l)for(r=0,a=(h=i[l]).length;r<a;++r)for(s=0,o=(n=h[r]).length-1;s<o;++s)c={feature:t,geometry:e,depth:[r,l],index:s,segment:d=n.slice(s,s+2)},this.rBush_.insert(Object(p.boundingExtent)(d),c)},M.prototype.writeCircleGeometry_=function(t,e){const i=e.getCenter(),n={feature:t,geometry:e,index:M.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX,segment:[i,i]},s={feature:t,geometry:e,index:M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX,segment:[i,i]},o=[n,s];n.featureSegments=s.featureSegments=o,this.rBush_.insert(Object(p.createOrUpdateFromCoordinate)(i),n),this.rBush_.insert(e.getExtent(),s)},M.prototype.writeGeometryCollectionGeometry_=function(t,e){const i=e.getGeometriesArray();for(let e=0;e<i.length;++e)this.SEGMENT_WRITERS_[i[e].getType()].call(this,t,i[e])},M.prototype.createOrUpdateVertexFeature_=function(t){let e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new r.default(new m.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},M.compareIndexes_=function(t,e){return t.index-e.index},M.handleDownEvent_=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);const e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;const i=this.vertexFeature_;if(i){const s=[],o=i.getGeometry().getCoordinates(),r=Object(p.boundingExtent)([o]),a=this.rBush_.getInExtent(r),l={};a.sort(M.compareIndexes_);for(let i=0,r=a.length;i<r;++i){const r=a[i],u=r.segment;let d=Object(n.getUid)(r.feature);const c=r.depth;if(c&&(d+="-"+c.join("-")),l[d]||(l[d]=new Array(2)),r.geometry.getType()===g.default.CIRCLE&&r.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){const t=M.closestOnSegmentData_(e,r);h.default.equals(t,o)&&!l[d][0]&&(this.dragSegments_.push([r,0]),l[d][0]=r)}else if(h.default.equals(u[0],o)&&!l[d][0])this.dragSegments_.push([r,0]),l[d][0]=r;else if(h.default.equals(u[1],o)&&!l[d][1]){if((r.geometry.getType()===g.default.LINE_STRING||r.geometry.getType()===g.default.MULTI_LINE_STRING)&&l[d][0]&&0===l[d][0].index)continue;this.dragSegments_.push([r,1]),l[d][1]=r}else this.insertVertexCondition_(t)&&Object(n.getUid)(u)in this.vertexSegments_&&!l[d][0]&&!l[d][1]&&s.push([r,o])}s.length&&this.willModifyFeatures_(t);for(let t=s.length-1;t>=0;--t)this.insertVertex_.apply(this,s[t])}return!!this.vertexFeature_},M.handleDragEvent_=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);const e=t.coordinate;for(let t=0,i=this.dragSegments_.length;t<i;++t){const i=this.dragSegments_[t],n=i[0],s=n.depth,o=n.geometry;let r;const a=n.segment,l=i[1];for(;e.length<o.getStride();)e.push(a[l][e.length]);switch(o.getType()){case g.default.POINT:r=e,a[0]=a[1]=e;break;case g.default.MULTI_POINT:(r=o.getCoordinates())[n.index]=e,a[0]=a[1]=e;break;case g.default.LINE_STRING:(r=o.getCoordinates())[n.index+l]=e,a[l]=e;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(r=o.getCoordinates())[s[0]][n.index+l]=e,a[l]=e;break;case g.default.MULTI_POLYGON:(r=o.getCoordinates())[s[1]][s[0]][n.index+l]=e,a[l]=e;break;case g.default.CIRCLE:a[0]=a[1]=e,n.index===M.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this.changingFeature_=!0,o.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,o.setRadius(h.default.distance(o.getCenter(),e)),this.changingFeature_=!1)}r&&this.setGeometryCoordinates_(o,r)}this.createOrUpdateVertexFeature_(e)},M.handleUpEvent_=function(t){let e,i;for(let t=this.dragSegments_.length-1;t>=0;--t)if((i=(e=this.dragSegments_[t][0]).geometry).getType()===g.default.CIRCLE){const t=i.getCenter(),n=e.featureSegments[0],s=e.featureSegments[1];n.segment[0]=n.segment[1]=t,s.segment[0]=s.segment[1]=t,this.rBush_.update(Object(p.createOrUpdateFromCoordinate)(t),n),this.rBush_.update(i.getExtent(),s)}else this.rBush_.update(Object(p.boundingExtent)(e.segment),e);return this.modified_&&(this.dispatchEvent(new M.Event(v,this.features_,t)),this.modified_=!1),!1},M.handleEvent=function(t){if(!(t instanceof l.default))return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=a.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=a.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==a.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),E.default.handleEvent.call(this,t)&&!e},M.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},M.prototype.handlePointerAtPixel_=function(t,e){const i=e.getCoordinateFromPixel(t),s=function(t,e){return M.pointDistanceToSegmentDataSquared_(i,t)-M.pointDistanceToSegmentDataSquared_(i,e)},o=Object(p.buffer)(Object(p.createOrUpdateFromCoordinate)(i),e.getView().getResolution()*this.pixelTolerance_),r=this.rBush_.getInExtent(o);if(r.length>0){r.sort(s);const o=r[0],a=o.segment;let l=M.closestOnSegmentData_(i,o);const u=e.getPixelFromCoordinate(l);let d=h.default.distance(t,u);if(d<=this.pixelTolerance_){const t={};if(o.geometry.getType()===g.default.CIRCLE&&o.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{const i=e.getPixelFromCoordinate(a[0]),s=e.getPixelFromCoordinate(a[1]),o=h.default.squaredDistance(u,i),c=h.default.squaredDistance(u,s);let f;d=Math.sqrt(Math.min(o,c)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(l=o>c?a[1]:a[0]),this.createOrUpdateVertexFeature_(l);for(let e=1,i=r.length;e<i&&(f=r[e].segment,h.default.equals(a[0],f[0])&&h.default.equals(a[1],f[1])||h.default.equals(a[0],f[1])&&h.default.equals(a[1],f[0]));++e)t[Object(n.getUid)(f)]=!0}return t[Object(n.getUid)(a)]=!0,void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},M.pointDistanceToSegmentDataSquared_=function(t,e){const i=e.geometry;if(i.getType()===g.default.CIRCLE){const n=i;if(e.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){const e=h.default.squaredDistance(n.getCenter(),t),i=Math.sqrt(e)-n.getRadius();return i*i}}return h.default.squaredDistanceToSegment(t,e.segment)},M.closestOnSegmentData_=function(t,e){const i=e.geometry;return i.getType()===g.default.CIRCLE&&e.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX?i.getClosestPoint(t):h.default.closestOnSegment(t,e.segment)},M.prototype.insertVertex_=function(t,e){const i=t.segment,n=t.feature,s=t.geometry,o=t.depth,r=t.index;let a;for(;e.length<s.getStride();)e.push(0);switch(s.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(a=s.getCoordinates())[o[0]].splice(r+1,0,e);break;case g.default.MULTI_POLYGON:(a=s.getCoordinates())[o[1]][o[0]].splice(r+1,0,e);break;case g.default.LINE_STRING:(a=s.getCoordinates()).splice(r+1,0,e);break;default:return}this.setGeometryCoordinates_(s,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(s,r,o,1);const u={segment:[i[0],e],feature:n,geometry:s,depth:o,index:r};l.insert(Object(p.boundingExtent)(u.segment),u),this.dragSegments_.push([u,1]);const h={segment:[e,i[1]],feature:n,geometry:s,depth:o,index:r+1};l.insert(Object(p.boundingExtent)(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0},M.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.a.POINTERDRAG){const t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new M.Event(v,this.features_,t)),this.modified_=!1,!0}return!1},M.prototype.removeVertex_=function(){const t=this.dragSegments_,e={};let i,s,o,r,a,l,u,h,d,c,f,_=!1;for(a=t.length-1;a>=0;--a)c=(o=t[a])[0],f=Object(n.getUid)(c.feature),c.depth&&(f+="-"+c.depth.join("-")),f in e||(e[f]={}),0===o[1]?(e[f].right=c,e[f].index=c.index):1==o[1]&&(e[f].left=c,e[f].index=c.index+1);for(f in e){switch(d=e[f].right,u=e[f].left,h=(l=e[f].index)-1,c=void 0!==u?u:d,h<0&&(h=0),i=s=(r=c.geometry).getCoordinates(),_=!1,r.getType()){case g.default.MULTI_LINE_STRING:s[c.depth[0]].length>2&&(s[c.depth[0]].splice(l,1),_=!0);break;case g.default.LINE_STRING:s.length>2&&(s.splice(l,1),_=!0);break;case g.default.MULTI_POLYGON:i=i[c.depth[1]];case g.default.POLYGON:(i=i[c.depth[0]]).length>4&&(l==i.length-1&&(l=0),i.splice(l,1),_=!0,0===l&&(i.pop(),i.push(i[0]),h=i.length-1))}if(_){this.setGeometryCoordinates_(r,s);const e=[];if(void 0!==u&&(this.rBush_.remove(u),e.push(u.segment[0])),void 0!==d&&(this.rBush_.remove(d),e.push(d.segment[1])),void 0!==u&&void 0!==d){const t={depth:c.depth,feature:c.feature,geometry:c.geometry,index:h,segment:e};this.rBush_.insert(Object(p.boundingExtent)(t.segment),t)}this.updateSegmentIndices_(r,l,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return _},M.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},M.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),function(s){s.geometry===t&&(void 0===i||void 0===s.depth||Object(u.equals)(s.depth,i))&&s.index>e&&(s.index+=n)})},M.getDefaultStyleFunction=function(){const t=T.default.createDefaultEditing();return function(e,i){return t[g.default.POINT]}},M.Event=function(t,e,i){c.default.call(this,t),this.features=e,this.mapBrowserEvent=i},Object(n.inherits)(M.Event,c.default);e.default=M},21:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0)),o=i(43),r=(n=o)&&n.__esModule?n:{default:n};var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.default.call(this,t),this.detail=e};s.inherits(a,r.default),e.default=a},23:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),s=i(0),o=i(10),r=i(4),a=i(5),l=i(14),u=i(6),h=i(28),d=i(60),c=i(42),f=i(12),_=i(61),p=i(15),g=i(22);const m=function(t){const e=t||{},i=e.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;c.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=Object(r.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(s.inherits)(m,c.a),m.prototype.getGetFeatureInfoUrl=function(t,e,i,s){const o=Object(u.get)(i),l=this.getProjection();let c=this.getTileGrid();c||(c=this.getTileGridForProjection(o));const f=c.getTileCoordForCoordAndResolution(t,e);if(c.getResolutions().length<=f[0])return;let _=c.getResolution(f[0]),p=c.getTileCoordExtent(f,this.tmpExtent_),g=d.default.toSize(c.getTileSize(f[0]),this.tmpSize);const m=this.gutter_;0!==m&&(g=d.default.buffer(g,m,this.tmpSize),p=Object(r.buffer)(p,_*m,p)),l&&l!==o&&(_=h.a.calculateSourceResolution(l,o,t,_),p=Object(u.transformExtent)(p,o,l),t=Object(u.transform)(t,o,l));const y={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(a.assign)(y,this.params_,s);const v=Math.floor((t[0]-p[0])/_),E=Math.floor((p[3]-t[1])/_);return y[this.v13_?"I":"X"]=v,y[this.v13_?"J":"Y"]=E,this.getRequestUrl_(f,g,p,1,l||o,y)},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(t,e,i,n,s,r){const a=this.urls;if(!a)return;if(r.WIDTH=e[0],r.HEIGHT=e[1],r[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=n)switch(this.serverType_){case f.a.GEOSERVER:const t=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+t:r.FORMAT_OPTIONS="dpi:"+t;break;case f.a.MAPSERVER:r.MAP_RESOLUTION=90*n;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:r.DPI=90*n;break;default:Object(o.a)(!1,52)}const u=s.getAxisOrientation(),h=i;let d,c;this.v13_&&"ne"==u.substr(0,2)&&(d=i[0],h[0]=i[1],h[1]=d,d=i[2],h[2]=i[3],h[3]=d);(r.BBOX=h.join(","),1==a.length)?c=a[0]:c=a[Object(l.modulo)(_.a.hash(t),a.length)];return Object(g.appendParams)(c,r)},m.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},m.prototype.getKeyForParams_=function(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},m.prototype.fixedTileUrlFunction=function(t,e,i){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),s.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const o=s.getResolution(t[0]);let l=s.getTileCoordExtent(t,this.tmpExtent_),u=d.default.toSize(s.getTileSize(t[0]),this.tmpSize);const h=this.gutter_;0!==h&&(u=d.default.buffer(u,h,this.tmpSize),l=Object(r.buffer)(l,o*h,l)),1!=e&&(u=d.default.scale(u,e,this.tmpSize));const c={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(a.assign)(c,this.params_),this.getRequestUrl_(t,u,l,e,i,c)},m.prototype.updateParams=function(t){Object(a.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){const t=this.params_.VERSION||n.a;this.v13_=p.default.compareVersions(t,"1.3")>=0},e.default=m},24:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(1)),s=o(i(47));function o(t){return t&&t.__esModule?t:{default:t}}var r={};r.module=angular.module("ngeoDataSources",[]),r.module.value("ngeoDataSources",new s.default),n.default.module.requires.push(r.module.name),e.default=r},26:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(1);(n=o)&&n.__esModule;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.inRange_=!1!==e.inRange,this.visible_=!0===e.visible,this.attributes=e.attributes||null,this.id_=e.id,this.identifierAttribute_=e.identifierAttribute,this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.name_=e.name}return s(t,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(t){this.attributes=t}},{key:"inRange",get:function(){return this.inRange_},set:function(t){this.inRange_=t}},{key:"visible",get:function(){return this.visible_},set:function(t){this.visible_=t}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),t}();e.default=r},29:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=c(i(1)),s=d(i(0)),o=c(i(20)),r=d(i(5)),a=c(i(18)),l=c(i(17)),u=c(i(3)),h=c(i(36));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var f=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new a.default({useSpatialIndex:!1}),this.layer_=new o.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};f.prototype.addFeature=function(t,e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length);var i=s.getUid(t).toString();this.featureUidToGroupIndex_[i]=e,this.groups_[e].features[i]=t,this.source_.addFeature(t)},f.prototype.removeFeature=function(t,e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length);var i=s.getUid(t).toString();delete this.featureUidToGroupIndex_[i],delete this.groups_[e].features[i],this.source_.removeFeature(t)},f.prototype.clear=function(t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length);var e=this.groups_[t];for(var i in e.features)this.removeFeature(e.features[i],t);u.default.assert(r.isEmpty(e.features))},f.prototype.getLayer=function(){return this.layer_},f.prototype.getFeatureOverlay=function(){var t=this.groups_.length;return this.groups_.push({styleFunction:l.default.defaultFunction,features:{}}),new h.default(this,t)},f.prototype.init=function(t){this.layer_.setMap(t)},f.prototype.setStyle=function(t,e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length),this.groups_[e].styleFunction=null===t?l.default.defaultFunction:l.default.createFunction(t)},f.prototype.styleFunction_=function(t,e){var i=s.getUid(t).toString();u.default.assert(i in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[i];return this.groups_[n].styleFunction(t,e)},(f.module=angular.module("ngeoFeatureOverlayMgr",[h.default.module.name])).service("ngeoFeatureOverlayMgr",f),n.default.module.requires.push(f.module.name),e.default=f},3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s={doAssertFailure_:function(t,e,i,n){var o="Assertion failed",r=void 0;i?(o+=": "+i,r=n):t&&(o+=": "+t,r=e);var a=new s.AssertionError(""+o,r||[]);s.errorHandler_(a)},setErrorHandler:function(t){s.ENABLE_ASSERTS&&(s.errorHandler_=t)},assert:function(t,e,i){return s.ENABLE_ASSERTS&&!t&&s.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},fail:function(t,e){s.ENABLE_ASSERTS&&s.errorHandler_(new s.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},assertNumber:function(t,e,i){return s.ENABLE_ASSERTS&&!goog.isNumber(t)&&s.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},assertString:function(t,e,i){return s.ENABLE_ASSERTS&&!goog.isString(t)&&s.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},assertFunction:function(t,e,i){return s.ENABLE_ASSERTS&&!goog.isFunction(t)&&s.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},assertObject:function(t,e,i){return s.ENABLE_ASSERTS&&!goog.isObject(t)&&s.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},assertArray:function(t,e,i){return s.ENABLE_ASSERTS&&!goog.isArray(t)&&s.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},assertBoolean:function(t,e,i){return s.ENABLE_ASSERTS&&!goog.isBoolean(t)&&s.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},assertElement:function(t,e,i){return!s.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||s.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},assertInstanceof:function(t,e,i,n){return!s.ENABLE_ASSERTS||t instanceof e||s.doAssertFailure_("Expected instanceof %s but got %s.",[s.getType_(e),s.getType_(t)],i,Array.prototype.slice.call(arguments,3)),t},assertObjectPrototypeIsIntact:function(){for(var t in Object.prototype)s.fail(t+" should not be enumerable in Object.prototype.")},getType_:function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):null===t?"null":void 0===t?"undefined":n(t)}};e.default=s},32:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(1)),s=h(i(33)),o=h(i(34)),r=h(i(29)),a=h(i(37)),l=h(i(38)),u=h(i(39));function h(t){return t&&t.__esModule?t:{default:t}}var d=angular.module("ngeoMapModule",[n.default.module.name,s.default.module.name,o.default.name,r.default.module.name,a.default.name,l.default.name,u.default.name]);e.default=d},33:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(3)),s=f(i(1)),o=f(i(21)),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(0)),a=f(i(19)),l=f(i(52)),u=f(i(50)),h=f(i(16)),d=f(i(23)),c=f(i(58));function f(t){return t&&t.__esModule?t:{default:t}}var _=function(){a.default.call(this),this.mapUids_={}};r.inherits(_,a.default),_.prototype.get=function(t){return r.getUid(t).toString()in this.mapUids_?t.getLayers().item(0):null},_.prototype.set=function(t,e){var i=r.getUid(t).toString(),s=this.get(t);null!==s?(n.default.assert(i in this.mapUids_),null!==e?t.getLayers().setAt(0,e):(t.getLayers().removeAt(0),delete this.mapUids_[i])):null!==e&&(t.getLayers().insertAt(0,e),this.mapUids_[i]=!0);var a=new o.default("change",{current:e,previous:s});return this.dispatchEvent(a),s},_.prototype.updateDimensions=function(t,e){var i=this.get(t);if(i){var s=[i];i instanceof l.default&&(s=i.getLayers().getArray()),s.forEach(function(t){if(n.default.assertInstanceof(t,u.default),t){var i=!1,s={};for(var o in t.get("dimensions")){var r=e[o];void 0!==r&&(s[o]=r,i=!0)}if(i){var a=t.getSource();a instanceof c.default?(a.updateDimensions(s),a.refresh()):(a instanceof d.default||a instanceof h.default)&&(a.updateParams(s),a.refresh())}}})}},(_.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",_),s.default.module.requires.push(_.module.name),e.default=_},34:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(i(3)),s=l(i(1)),o=l(i(35)),r=l(i(2)),a=l(i(7));function l(t){return t&&t.__esModule?t:{default:t}}var u=angular.module("ngeoMap",[o.default.module.name]);s.default.module.requires.push(u.name),u.directive_=function(t,e){return{restrict:"A",link:function(i,s,o){var l=o.ngeoMap,u=i.$eval(l);n.default.assertInstanceof(u,a.default),u.setTarget(s[0]),e.map=u;var h=o.ngeoMapManageResize;if(i.$eval(h)){var d=o.ngeoMapResizeTransition,c=i.$eval(d);r.default.listen(t,"resize",function(){if(c){var e=Date.now(),i=!0;!function n(){u.updateSize(),u.renderSync(),i&&t.requestAnimationFrame(n),Date.now()-e>c&&(i=!1)}()}else u.updateSize()})}}}},u.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],u.directive("ngeoMap",u.directive_),e.default=u},35:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=d(i(1)),o=d(i(26)),r=d(i(24)),a=d(i(2)),l=d(i(19)),u=d(i(31)),h=d(i(3));function d(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ngeoDataSources_=e,this.map_=null,this.listenerKeys_=[],a.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return t.$inject=["ngeoDataSources"],n(t,[{key:"bindMap_",value:function(t){var e=t.getView();this.listenerKeys_.push(a.default.listen(e,"change:resolution",this.handleViewResolutionChange_,this));var i=e.getResolution();h.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"unbindMap_",value:function(t){l.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(t){var e=t.target;h.default.assertInstanceof(e,u.default);var i=e.getResolution();h.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"syncDataSourcesToResolution_",value:function(t){var e=this;this.ngeoDataSources_.forEach(function(i){e.syncDataSourceToResolution_(i,t)})}},{key:"syncDataSourceToResolution_",value:function(t,e){if(t.supportsDynamicInRange){var i=t.maxResolution,n=t.minResolution,s=(null===n||void 0===n||e>=n)&&(null===i||void 0===i||e<=i);t.inRange=s}}},{key:"handleDataSourcesAdd_",value:function(t){var e=h.default.assertInstanceof(t.element,o.default);if(this.map_){var i=this.map_.getView().getResolution();h.default.assertNumber(i),this.syncDataSourceToResolution_(e,i)}}},{key:"map",set:function(t){this.map_&&this.unbindMap_(this.map_),this.map_=t,t&&this.bindMap_(t)}}]),t}();c.module=angular.module("ngeoSyncDataSourcesMap",[r.default.module.name]),c.module.service("ngeoSyncDataSourcesMap",c),s.default.module.requires.push(c.module.name),e.default=c},36:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(i(1)),s=(function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);e.default=t}(i(0)),o(i(2)));function o(t){return t&&t.__esModule?t:{default:t}}var r=function(t,e){this.manager_=t,this.features_=null,this.index_=e};r.prototype.addFeature=function(t){this.manager_.addFeature(t,this.index_)},r.prototype.removeFeature=function(t){this.manager_.removeFeature(t,this.index_)},r.prototype.clear=function(){this.manager_.clear(this.index_)},r.prototype.setFeatures=function(t){null!==this.features_&&(this.features_.clear(),s.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),s.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==t&&(t.forEach(function(t){this.addFeature(t)},this),s.default.listen(t,"add",this.handleFeatureAdd_,this),s.default.listen(t,"remove",this.handleFeatureRemove_,this)),this.features_=t},r.prototype.setStyle=function(t){this.manager_.setStyle(t,this.index_)},r.prototype.handleFeatureAdd_=function(t){var e=t.element;this.addFeature(e)},r.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature(e)},r.module=angular.module("ngeoFeatureOverlay",[]),n.default.module.requires.push(r.module.name),e.default=r},369:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(370),i(59);var n=_(i(371)),s=_(i(7)),o=_(i(31)),r=_(i(62)),a=_(i(20)),l=_(i(48)),u=_(i(18)),h=_(i(81)),d=_(i(47)),c=_(i(40)),f=_(i(32));function _(t){return t&&t.__esModule?t:{default:t}}var p=angular.module("app",[ngeo.module.name,f.default.name]);app.MainController=function(){this.map=new s.default({layers:[new r.default({source:new l.default})],view:new o.default({center:[-10997148,4569099],zoom:4})});var t=this.map,e=new h.default([-10691093,4966327],465e3);this.features=new d.default;var i=new c.default({geometry:ol.geom.Polygon.fromCircle(e),color:"#000000",label:"Circle 1",opacity:"0.5",stroke:"2"});i.set(ngeo.FeatureProperties.IS_CIRCLE,!0),this.features.push(i);var f=new u.default({features:this.features});new a.default({source:f}).setMap(t),this.interaction=new n.default({features:this.features});var _=this.interaction;_.setActive(!0),t.addInteraction(_)},p.controller("MainController",app.MainController),e.default={}},37:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,s=i(1),o=(n=s)&&n.__esModule?n:{default:n};var r=angular.module("ngeoRecenter",[]);o.default.module.requires.push(r.name),r.directive_=function(){return{restrict:"A",link:function(t,e,i){var n=i.ngeoRecenterMap,s=t.$eval(n);function o(e){var i=e.attr("ngeo-extent");if(void 0!==i){var n=s.getSize();s.getView().fit(t.$eval(i),{size:n})}var o=e.attr("ngeo-zoom");void 0!==o&&s.getView().setZoom(t.$eval(o))}e.on("click","*",function(t){o(angular.element($(this)))}),e.on("change",function(t){var e=t.target.options[t.target.selectedIndex];o(angular.element(e))})}}},r.directive("ngeoRecenter",r.directive_),e.default=r},370:function(t,e){},371:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=S(i(3)),s=S(i(126)),o=C(i(0)),r=(S(i(47)),S(i(40))),a=S(i(90)),l=S(i(86)),u=S(i(2)),h=C(i(4)),d=S(i(81)),c=S(i(30)),f=S(i(27)),_=S(i(41)),p=S(i(181)),g=S(i(78)),m=S(i(20)),y=S(i(18)),v=S(i(155)),E=S(i(17));function C(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}var O=function t(e){n.default.assert(e.features),g.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleEvent:t.handleEvent,handleUpEvent:t.handleUpEvent_}),this.vertexFeature_=null,this.lastPixel_=[0,0],this.modified_=!1,this.rBush_=new v.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=null,this.overlay_=new m.default({source:new y.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:t.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.features_=e.features,this.features_.forEach(this.addFeature_,this),u.default.listen(this.features_,"add",this.handleFeatureAdd_,this),u.default.listen(this.features_,"remove",this.handleFeatureRemove_,this)};o.inherits(O,g.default),O.prototype.addFeature_=function(t){if("Polygon"===t.getGeometry().getType()&&t.get(ngeo.FeatureProperties.IS_CIRCLE)){var e=t.getGeometry();this.writeCircleGeometry_(t,e);var i=this.getMap();i&&this.handlePointerAtPixel_(this.lastPixel_,i)}},O.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new p.default.Event("modifystart",this.features_,t)))},O.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},O.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var n=i.length-1;n>=0;--n)e.remove(i[n])},O.prototype.setMap=function(t){this.overlay_.setMap(t),g.default.prototype.setMap.call(this,t)},O.prototype.handleFeatureAdd_=function(t){var e=t.element;n.default.assertInstanceof(e,r.default,"feature should be an ol.Feature"),this.addFeature_(e)},O.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},O.prototype.writeCircleGeometry_=function(t,e){var i,n=e.getCoordinates(),s=void 0,o=void 0,r=void 0,a=void 0,l=void 0,u=void 0;for(a=0,i=n.length;a<i;++a)for(o=0,r=(s=n[a]).length-1;o<r;++o)u={feature:t,geometry:e,depth:[a],index:o,segment:l=s.slice(o,o+2)},this.rBush_.insert(h.boundingExtent(l),u)},O.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;e?e.getGeometry().setCoordinates(t):(e=new r.default(new f.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e));return e},O.compareIndexes_=function(t,e){return t.index-e.index},O.handleDownEvent_=function(t){this.handlePointerAtPixel_(t.pixel,t.map),this.dragSegments_=[],this.modified_=!1;var e=this.vertexFeature_;if(e){var i=e.getGeometry().getCoordinates(),n=h.boundingExtent([i]),s=this.rBush_.getInExtent(n),r={};s.sort(O.compareIndexes_);for(var a=0,u=s.length;a<u;++a){var d=s[a],c=d.segment,f=o.getUid(d.feature),_=d.depth;_&&(f+="-"+_.join("-")),r[f]||(r[f]=new Array(2)),l.default.equals(c[0],i)&&!r[f][0]?(this.dragSegments_.push([d,0]),r[f][0]=d):l.default.equals(c[1],i)&&!r[f][1]&&(this.dragSegments_.push([d,1]),r[f][1]=d)}}return!!this.vertexFeature_},O.handleDragEvent_=function(t){this.willModifyFeatures_(t);var e=t.coordinate,i=this.dragSegments_[0][0].geometry,n=h.getCenter(i.getExtent()),o=new c.default([n,e]),r=new d.default(n,o.getLength()),a=_.default.fromCircle(r,64).getCoordinates();this.setGeometryCoordinates_(i,a);var l=s.default.getAzimut(o);this.features_.getArray()[0].set(ngeo.FeatureProperties.AZIMUT,l),this.createOrUpdateVertexFeature_(e)},O.handleUpEvent_=function(t){return this.rBush_.clear(),this.writeCircleGeometry_(this.dragSegments_[0][0].feature,this.dragSegments_[0][0].geometry),this.modified_&&(this.dispatchEvent(new p.default.Event("modifyend",this.features_,t)),this.modified_=!1),!1},O.handleEvent=function(t){if(!(t instanceof a.default))return!0;return t.map.getView().getInteracting()||"pointermove"!=t.type||this.handlingDownUpSequence||this.handlePointerMove_(t),g.default.handleEvent.call(this,t)&&!0},O.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},O.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),n=e.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),s=e.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),r=h.boundingExtent([n,s]),a=this.rBush_.getInExtent(r);if(a.length>0){a.sort(function(t,e){return l.default.squaredDistanceToSegment(i,t.segment)-l.default.squaredDistanceToSegment(i,e.segment)});var u=a[0].segment,d=l.default.closestOnSegment(i,u),c=e.getPixelFromCoordinate(d);if(Math.sqrt(l.default.squaredDistance(t,c))<=this.pixelTolerance_){var f=e.getPixelFromCoordinate(u[0]),_=e.getPixelFromCoordinate(u[1]),p=l.default.squaredDistance(c,f),g=l.default.squaredDistance(c,_),m=Math.sqrt(Math.min(p,g));if(this.snappedToVertex_=m<=this.pixelTolerance_,this.snappedToVertex_){d=p>g?u[1]:u[0],this.createOrUpdateVertexFeature_(d);var y={};y[o.getUid(u)]=!0;for(var v=void 0,E=1,C=a.length;E<C&&(v=a[E].segment,l.default.equals(u[0],v[0])&&l.default.equals(u[1],v[1])||l.default.equals(u[0],v[1])&&l.default.equals(u[1],v[0]));++E)y[o.getUid(v)]=!0;return}}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},O.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},O.getDefaultStyleFunction=function(){var t=E.default.createDefaultEditing();return function(e,i){return t.Point}},e.default=O},38:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(3)),s=r(i(1)),o=r(i(7));function r(t){return t&&t.__esModule?t:{default:t}}var a=angular.module("ngeoResizemap",[]);s.default.module.requires.push(a.name),a.directive_=function(t){return{restrict:"A",link:function(e,i,s){var r=s.ngeoResizemap,a=e.$eval(r);n.default.assertInstanceof(a,o.default);var l=s.ngeoResizemapState;n.default.assert(void 0!==l);var u=void 0,h=void 0,d=function e(){a.updateSize(),a.renderSync(),Date.now()-u<1e3&&(h=t.requestAnimationFrame(e))};i.on("transitionend",function(){a.updateSize(),a.renderSync()}),e.$watch(l,function(e,i){e!=i&&(u=Date.now(),t.cancelAnimationFrame(h),h=t.requestAnimationFrame(d))})}}},a.directive("ngeoResizemap",a.directive_),e.default=a},39:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(1)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(8)),o=a(i(7)),r=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var l=angular.module("ngeoScaleselector",[]);n.default.module.requires.push(l.name),l.value("ngeoScaleselectorTemplateUrl",function(t,e){var i=e.ngeoScaleselectorTemplateurl;return void 0!==i?i:n.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),l.directive_=function(t){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:t}},l.directive("ngeoScaleselector",l.directive_),l.ScaleselectorController_=function(t,e,i){var n=this,a=i.ngeoScaleselector;this.scales=t.$eval(a),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,t.$watch(function(){return Object.keys(n.scales).length},function(t){n.zoomLevels=Object.keys(n.scales).map(Number),n.zoomLevels.sort(s.numberSafeCompareFunction)});var u=i.ngeoScaleselectorMap;this.map_=t.$eval(u),goog.asserts.assertInstanceof(this.map_,o.default);var h=i.ngeoScaleselectorOptions,d=t.$eval(h);if(this.options=l.ScaleselectorController_.getOptions_(d),this.$scope_=t,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var c=this.map_.getView().getZoom();void 0!==c&&(this.currentScale=this.getScale(c))}r.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),t.scaleselectorCtrl=this},l.ScaleselectorController_.getOptions_=function(t){var e=!1;return void 0!==t&&(e=1==t.dropup),{dropup:e}},l.ScaleselectorController_.prototype.getScale=function(t){return this.scales[t]},l.ScaleselectorController_.prototype.changeZoom=function(t){this.map_.getView().setZoom(t)},l.ScaleselectorController_.prototype.handleResolutionChange_=function(t){var e=this,i=this.map_.getView(),n=this.scales[i.getZoom()];void 0!==n&&this.$scope_.$applyAsync(function(){e.currentScale=n})},l.ScaleselectorController_.prototype.handleViewChange_=function(t){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},l.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&r.default.unlistenByKey(this.resolutionChangeKey_);var t=this.map_.getView();this.resolutionChangeKey_=r.default.listen(t,"change:resolution",this.handleResolutionChange_,this)},l.controller("NgeoScaleselectorController",l.ScaleselectorController_),e.default=l},45:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(8),o=i(4),r=i(25),a=i(13),l=i(27),u=i(44),h=i(46),d=i(54),c=i(14);const f=function(t,e){u.a.call(this),this.setCoordinates(t,e)};Object(n.inherits)(f,u.a),f.prototype.appendPoint=function(t){this.flatCoordinates?Object(s.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},f.prototype.clone=function(){const t=new f(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},f.prototype.closestPointXY=function(t,e,i,n){if(n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;const s=this.flatCoordinates,r=this.stride;let a,l,u;for(a=0,l=s.length;a<l;a+=r){const o=Object(c.squaredDistance)(t,e,s[a],s[a+1]);if(o<n){for(n=o,u=0;u<r;++u)i[u]=s[a+u];i.length=r}}return n},f.prototype.getCoordinates=function(){return d.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getPoint=function(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(t<0||e<=t)return null;const i=new l.default(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),i},f.prototype.getPoints=function(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];let s,o;for(s=0,o=t.length;s<o;s+=i){const o=new l.default(null);o.setFlatCoordinates(e,t.slice(s,s+i)),n.push(o)}return n},f.prototype.getType=function(){return a.default.MULTI_POINT},f.prototype.intersectsExtent=function(t){const e=this.flatCoordinates,i=this.stride;let n,s,r,a;for(n=0,s=e.length;n<s;n+=i)if(r=e[n],a=e[n+1],Object(o.containsXY)(t,r,a))return!0;return!1},f.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=h.a.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(r.default.XY,null)},f.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=f},48:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(49);const o=function(t){const e=t||{};let i;i=void 0!==e.attributions?e.attributions:[o.ATTRIBUTION];const n=void 0!==e.crossOrigin?e.crossOrigin:"anonymous",r=void 0!==e.url?e.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";s.a.call(this,{attributions:i,cacheSize:e.cacheSize,crossOrigin:n,opaque:void 0===e.opaque||e.opaque,maxZoom:void 0!==e.maxZoom?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:r,wrapX:e.wrapX})};Object(n.inherits)(o,s.a),o.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',e.default=o},49:function(t,e,i){"use strict";var n=i(0),s=i(42),o=i(71);const r=function(t){const e=t||{},i=void 0!==e.projection?e.projection:"EPSG:3857",n=void 0!==e.tileGrid?e.tileGrid:o.a.createXYZ({extent:o.a.extentFromProjection(i),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});s.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};Object(n.inherits)(r,s.a),e.a=r},51:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(8),o=i(4),r=i(25),a=i(13),l=i(30),u=i(44),h=i(67),d=i(46),c=i(54),f=i(101),_=i(70),p=i(64);const g=function(t,e){u.a.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};Object(n.inherits)(g,u.a),g.prototype.appendLineString=function(t){this.flatCoordinates?Object(s.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},g.prototype.clone=function(){const t=new g(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},g.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),h.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},g.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=r.default.XYM&&this.layout!=r.default.XYZM||0===this.flatCoordinates.length)return null;const n=void 0!==e&&e,s=void 0!==i&&i;return f.a.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,t,n,s)},g.prototype.getCoordinates=function(){return c.a.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},g.prototype.getEnds=function(){return this.ends_},g.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;const e=new l.default(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},g.prototype.getLineStrings=function(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let s,o,r=0;for(s=0,o=e.length;s<o;++s){const o=e[s],a=new l.default(null);a.setFlatCoordinates(i,t.slice(r,o)),n.push(a),r=o}return n},g.prototype.getFlatMidpoints=function(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,o=this.stride;let r,a;for(r=0,a=n.length;r<a;++r){const a=n[r],l=f.a.lineString(e,i,a,o,.5);Object(s.extend)(t,l),i=a}return t},g.prototype.getSimplifiedGeometryInternal=function(t){const e=[],i=[];e.length=p.a.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i);const n=new g(null);return n.setFlatCoordinates(r.default.XY,e,i),n},g.prototype.getType=function(){return a.default.MULTI_LINE_STRING},g.prototype.intersectsExtent=function(t){return _.a.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,t)},g.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=d.a.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(r.default.XY,null,this.ends_)},g.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},g.prototype.setLineStrings=function(t){let e=this.getLayout();const i=[],n=[];let o,r;for(o=0,r=t.length;o<r;++o){const r=t[o];0===o&&(e=r.getLayout()),Object(s.extend)(i,r.getFlatCoordinates()),n.push(i.length)}this.setFlatCoordinates(e,i,n)},e.default=g},53:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(8),o=i(4),r=i(25),a=i(13),l=i(45),u=i(41),h=i(44),d=i(96),c=i(105),f=i(67),_=i(91),p=i(46),g=i(54),m=i(100),y=i(70),v=i(97),E=i(64);const C=function(t,e){h.a.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};Object(n.inherits)(C,h.a),C.prototype.appendPolygon=function(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;let n,o;for(Object(s.extend)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice(),n=0,o=e.length;n<o;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},C.prototype.clone=function(){const t=new C(null),e=this.endss_.length,i=new Array(e);for(let t=0;t<e;++t)i[t]=this.endss_[t].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),t},C.prototype.closestPointXY=function(t,e,i,n){return n<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f.a.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f.a.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},C.prototype.containsXY=function(t,e){return _.a.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},C.prototype.getArea=function(){return d.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},C.prototype.getCoordinates=function(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),v.a.orientLinearRingss(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,g.a.coordinatesss(e,0,this.endss_,this.stride)},C.prototype.getEndss=function(){return this.endss_},C.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=c.a.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=m.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},C.prototype.getInteriorPoints=function(){const t=new l.default(null);return t.setFlatCoordinates(r.default.XYM,this.getFlatInteriorPoints().slice()),t},C.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;v.a.linearRingssAreOriented(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=v.a.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},C.prototype.getSimplifiedGeometryInternal=function(t){const e=[],i=[];e.length=E.a.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i);const n=new C(null);return n.setFlatCoordinates(r.default.XY,e,i),n},C.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];let s,o;if(0!==e)for(s=0,o=i.length;s<o;++s)i[s]-=e;const r=new u.default(null);return r.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,n),i),r},C.prototype.getPolygons=function(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let s,o,r,a,l=0;for(s=0,o=i.length;s<o;++s){const o=i[s].slice(),h=o[o.length-1];if(0!==l)for(r=0,a=o.length;r<a;++r)o[r]-=l;const d=new u.default(null);d.setFlatCoordinates(t,e.slice(l,h),o),n.push(d),l=h}return n},C.prototype.getType=function(){return a.default.MULTI_POLYGON},C.prototype.intersectsExtent=function(t){return y.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},C.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=p.a.coordinatesss(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}else this.setFlatCoordinates(r.default.XY,null,this.endss_)},C.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.endss_=i,this.changed()},C.prototype.setPolygons=function(t){let e=this.getLayout();const i=[],n=[];for(let o=0,r=t.length;o<r;++o){const r=t[o];0===o&&(e=r.getLayout());const a=i.length,l=r.getEnds();for(let t=0,e=l.length;t<e;++t)l[t]+=a;Object(s.extend)(i,r.getFlatCoordinates()),n.push(l)}this.setFlatCoordinates(e,i,n)},e.default=C},72:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(2),o=i(9),r=i(4),a=i(82),l=i(13),u=i(5);const h=function(t){a.default.call(this),this.geometries_=t||null,this.listenGeometriesChange_()};Object(n.inherits)(h,a.default),h.cloneGeometries_=function(t){const e=[];let i,n;for(i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e},h.prototype.unlistenGeometriesChange_=function(){let t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)s.default.unlisten(this.geometries_[t],o.a.CHANGE,this.changed,this)},h.prototype.listenGeometriesChange_=function(){let t,e;if(this.geometries_)for(t=0,e=this.geometries_.length;t<e;++t)s.default.listen(this.geometries_[t],o.a.CHANGE,this.changed,this)},h.prototype.clone=function(){const t=new h(null);return t.setGeometries(this.geometries_),t},h.prototype.closestPointXY=function(t,e,i,n){if(n<Object(r.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;const s=this.geometries_;let o,a;for(o=0,a=s.length;o<a;++o)n=s[o].closestPointXY(t,e,i,n);return n},h.prototype.containsXY=function(t,e){const i=this.geometries_;let n,s;for(n=0,s=i.length;n<s;++n)if(i[n].containsXY(t,e))return!0;return!1},h.prototype.computeExtent=function(t){Object(r.createOrUpdateEmpty)(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)Object(r.extend)(t,e[i].getExtent());return t},h.prototype.getGeometries=function(){return h.cloneGeometries_(this.geometries_)},h.prototype.getGeometriesArray=function(){return this.geometries_},h.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(u.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];{const i=[],n=this.geometries_;let s,o,r=!1;for(s=0,o=n.length;s<o;++s){const e=n[s],o=e.getSimplifiedGeometry(t);i.push(o),o!==e&&(r=!0)}if(r){const t=new h(null);return t.setGeometriesArray(i),this.simplifiedGeometryCache[e]=t,t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}},h.prototype.getType=function(){return l.default.GEOMETRY_COLLECTION},h.prototype.intersectsExtent=function(t){const e=this.geometries_;let i,n;for(i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1},h.prototype.isEmpty=function(){return 0===this.geometries_.length},h.prototype.rotate=function(t,e){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].rotate(t,e);this.changed()},h.prototype.scale=function(t,e,i){let n=i;n||(n=Object(r.getCenter)(this.getExtent()));const s=this.geometries_;for(let i=0,o=s.length;i<o;++i)s[i].scale(t,e,n);this.changed()},h.prototype.setGeometries=function(t){this.setGeometriesArray(h.cloneGeometries_(t))},h.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},h.prototype.applyTransform=function(t){const e=this.geometries_;let i,n;for(i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()},h.prototype.translate=function(t,e){const i=this.geometries_;let n,s;for(n=0,s=i.length;n<s;++n)i[n].translate(t,e);this.changed()},h.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),a.default.prototype.disposeInternal.call(this)},e.default=h},76:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(9),o=i(40),r=i(88),a=i(90),l=i(77),u=i(86),h=i(2),d=i(43),c=i(85),f=i(4),_=i(66),p=i(81),g=i(13),m=i(30),y=i(51),v=i(45),E=i(53),C=i(116),S=i(27),O=i(41),F="drawstart",T="drawend",M=i(78),R=i(124),I=i(20),w=i(18),x=i(17);const P=function(t){M.default.call(this,{handleDownEvent:P.handleDownEvent_,handleEvent:P.handleEvent,handleUpEvent:P.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=P.getMode_(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===P.Mode_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:_.TRUE;let e=t.geometryFunction;if(!e)if(this.type_===g.default.CIRCLE)e=function(t,e){const i=e||new p.default([NaN,NaN]),n=u.default.squaredDistance(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(n)),i};else{let t;const i=this.mode_;i===P.Mode_.POINT?t=S.default:i===P.Mode_.LINE_STRING?t=m.default:i===P.Mode_.POLYGON&&(t=O.default),e=function(e,n){let s=n;return s?i===P.Mode_.POLYGON?e[0].length?s.setCoordinates([e[0].concat([e[0][0]])]):s.setCoordinates([]):s.setCoordinates(e):s=new t(e),s}}this.geometryFunction_=e,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new I.default({source:new w.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:P.getDefaultStyleFunction(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:c.default.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=c.default.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:c.default.shiftKeyOnly,h.default.listen(this,l.a.getChangeEventType(R.a.ACTIVE),this.updateState_,this)};Object(n.inherits)(P,M.default),P.getDefaultStyleFunction=function(){const t=x.default.createDefaultEditing();return function(e,i){return t[e.getGeometry().getType()]}},P.prototype.setMap=function(t){M.default.prototype.setMap.call(this,t),this.updateState_()},P.handleEvent=function(t){t.originalEvent.type===s.a.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==P.Mode_.POINT&&this.freehandCondition_(t);let e=t.type===r.a.POINTERMOVE,i=!0;this.lastDragTime_&&t.type===r.a.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===r.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),i=!1):this.freehand_&&t.type===r.a.POINTERDOWN?i=!1:e?(i=t.type===r.a.POINTERMOVE)&&this.freehand_?i=this.handlePointerMove_(t):(t.pointerEvent.pointerType==C.a.POINTER_TYPE||t.type===r.a.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===r.a.DBLCLICK&&(i=!1),M.default.handleEvent.call(this,t)&&i},P.handleDownEvent_=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.default(r.a.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},P.handleUpEvent_=function(t){let e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.mode_===P.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===P.Mode_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},P.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],s=e[1]-i[1],o=n*n+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},P.prototype.atFinish_=function(t){let e=!1;if(this.sketchFeature_){let i=!1,n=[this.finishCoordinate_];if(this.mode_===P.Mode_.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===P.Mode_.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,n=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i){const i=t.map;for(let s=0,o=n.length;s<o;s++){const o=n[s],r=i.getPixelFromCoordinate(o),a=t.pixel,l=a[0]-r[0],u=a[1]-r[1],h=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(l*l+u*u)<=h){this.finishCoordinate_=o;break}}}}return e},P.prototype.createOrUpdateSketchPoint_=function(t){const e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.default(new S.default(e)),this.updateSketchFeatures_())},P.prototype.startDrawing_=function(t){const e=t.coordinate;this.finishCoordinate_=e,this.mode_===P.Mode_.POINT?this.sketchCoords_=e.slice():this.mode_===P.Mode_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.default(new m.default(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new P.Event(F,this.sketchFeature_))},P.prototype.modifyDrawing_=function(t){let e=t.coordinate;const i=this.sketchFeature_.getGeometry();let n,s;(this.mode_===P.Mode_.POINT?s=this.sketchCoords_:this.mode_===P.Mode_.POLYGON?(s=(n=this.sketchCoords_[0])[n.length-1],this.atFinish_(t)&&(e=this.finishCoordinate_.slice())):s=(n=this.sketchCoords_)[n.length-1],s[0]=e[0],s[1]=e[1],this.geometryFunction_(this.sketchCoords_,i),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(e);let r;if(i instanceof O.default&&this.mode_!==P.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new o.default(new m.default(null)));const t=i.getLinearRing(0);(r=this.sketchLine_.getGeometry()).setFlatCoordinates(t.getLayout(),t.getFlatCoordinates())}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},P.prototype.addToDrawing_=function(t){const e=t.coordinate,i=this.sketchFeature_.getGeometry();let n,s;this.mode_===P.Mode_.LINE_STRING?(this.finishCoordinate_=e.slice(),(s=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),this.geometryFunction_(s,i)):this.mode_===P.Mode_.POLYGON&&((s=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),n&&this.finishDrawing()},P.prototype.removeLastPoint=function(){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry();let e,i;this.mode_===P.Mode_.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===P.Mode_.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),(i=this.sketchLine_.getGeometry()).setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()},P.prototype.finishDrawing=function(){const t=this.abortDrawing_();let e=this.sketchCoords_;const i=t.getGeometry();this.mode_===P.Mode_.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===P.Mode_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===g.default.MULTI_POINT?t.setGeometry(new v.default([e])):this.type_===g.default.MULTI_LINE_STRING?t.setGeometry(new y.default([e])):this.type_===g.default.MULTI_POLYGON&&t.setGeometry(new E.default([e])),this.dispatchEvent(new P.Event(T,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},P.prototype.abortDrawing_=function(){this.finishCoordinate_=null;const t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},P.prototype.extend=function(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new P.Event(F,this.sketchFeature_))},P.prototype.shouldStopEvent=_.FALSE,P.prototype.updateSketchFeatures_=function(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},P.prototype.updateState_=function(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},P.createRegularPolygon=function(t,e){return function(i,n){const s=i[0],o=i[1],r=Math.sqrt(u.default.squaredDistance(s,o)),a=n||Object(O.fromCircle)(new p.default(s),t),l=e||Math.atan((o[1]-s[1])/(o[0]-s[0]));return Object(O.makeRegular)(a,s,r,l),a}},P.createBox=function(){return function(t,e){const i=Object(f.boundingExtent)(t),n=e||new O.default(null);return n.setCoordinates([[Object(f.getBottomLeft)(i),Object(f.getBottomRight)(i),Object(f.getTopRight)(i),Object(f.getTopLeft)(i),Object(f.getBottomLeft)(i)]]),n}},P.getMode_=function(t){let e;return t===g.default.POINT||t===g.default.MULTI_POINT?e=P.Mode_.POINT:t===g.default.LINE_STRING||t===g.default.MULTI_LINE_STRING?e=P.Mode_.LINE_STRING:t===g.default.POLYGON||t===g.default.MULTI_POLYGON?e=P.Mode_.POLYGON:t===g.default.CIRCLE&&(e=P.Mode_.CIRCLE),e},P.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},P.Event=function(t,e){d.default.call(this,t),this.feature=e},Object(n.inherits)(P.Event,d.default);e.default=P},81:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=i(4),o=i(25),r=i(13),a=i(44),l=i(46);const u=function(t,e,i){a.a.call(this);const n=e||0;this.setCenterAndRadius(t,n,i)};Object(n.inherits)(u,a.a),u.prototype.clone=function(){const t=new u(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},u.prototype.closestPointXY=function(t,e,i,n){const s=this.flatCoordinates,o=t-s[0],r=e-s[1],a=o*o+r*r;if(a<n){if(0===a)for(let t=0;t<this.stride;++t)i[t]=s[t];else{const t=this.getRadius()/Math.sqrt(a);i[0]=s[0]+t*o,i[1]=s[1]+t*r;for(let t=2;t<this.stride;++t)i[t]=s[t]}return i.length=this.stride,a}return n},u.prototype.containsXY=function(t,e){const i=this.flatCoordinates,n=t-i[0],s=e-i[1];return n*n+s*s<=this.getRadiusSquared_()},u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},u.prototype.computeExtent=function(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(s.createOrUpdate)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},u.prototype.getRadiusSquared_=function(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},u.prototype.getType=function(){return r.default.CIRCLE},u.prototype.intersectsExtent=function(t){const e=this.getExtent();if(Object(s.intersects)(t,e)){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||Object(s.forEachCorner)(t,this.intersectsCoordinate,this))}return!1},u.prototype.setCenter=function(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(let i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n)},u.prototype.setCenterAndRadius=function(t,e,i){if(t){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=l.a.coordinate(n,0,t,this.stride);n[s++]=n[0]+e;for(let t=1,e=this.stride;t<e;++t)n[s++]=n[t];n.length=s,this.changed()}else this.setFlatCoordinates(o.default.XY,null)},u.prototype.getCoordinates=function(){},u.prototype.setCoordinates=function(t,e){},u.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},u.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},u.prototype.transform,e.default=u},87:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=m(i(21)),s=m(i(3)),o=g(i(68)),r=(m(i(40)),m(i(108)),m(i(140))),a=g(i(134)),l=m(i(2)),u=m(i(84)),h=m(i(20)),d=m(i(146)),c=m(i(18)),f=m(i(65)),_=m(i(79)),p=m(i(17));function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}ngeo.interaction.MeasureBaseOptions;var y=function t(e){var i=void 0!==e?e:{};u.default.call(this,{handleEvent:t.handleEvent_}),this.helpTooltipElement_=null,this.helpTooltipOverlay_=null,this.measureTooltipElement_=null,this.measureTooltipOverlay_=null,this.measureTooltipOverlayCoord_=null,this.sketchFeature=null,this.continueMsg=null,this.decimals=i.decimals,this.precision=i.precision,this.displayHelpTooltip_=void 0===i.displayHelpTooltip||i.displayHelpTooltip,this.startMsg,void 0!==i.startMsg?this.startMsg=i.startMsg:(this.startMsg=document.createElement("span"),this.startMsg.textContent="Click to start drawing."),this.changeEventKey_=null,this.postcomposeEventKey_=null;var n=void 0!==i.style?i.style:[new p.default({fill:new f.default({color:"rgba(255, 255, 255, 0.2)"})}),new p.default({stroke:new _.default({color:"white",width:5})}),new p.default({stroke:new _.default({color:"#ffcc33",width:3})})];this.vectorLayer_=new h.default({source:new c.default,style:n}),this.drawInteraction_=this.createDrawInteraction(i.sketchStyle,this.vectorLayer_.getSource()),this.shouldHandleDrawInteractionActiveChange_=!0,l.default.listen(this.drawInteraction_,"change:active",this.handleDrawInteractionActiveChange_,this),l.default.listen(this.drawInteraction_,"drawstart",this.onDrawStart_,this),l.default.listen(this.drawInteraction_,"drawend",this.onDrawEnd_,this),l.default.listen(this,"change:active",this.updateState_,this)};ol.inherits(y,u.default),y.SPHERE_WGS84=new a(d.default.RADIUS),y.getFormattedArea=function(t,e,i,n){var s=t.clone().transform(e,"EPSG:4326").getLinearRing(0).getCoordinates();return n(Math.abs(y.SPHERE_WGS84.geodesicArea(s)),"mÂ²","square",i)},y.getFormattedCircleArea=function(t,e,i){return i(Math.PI*Math.pow(t.getRadius(),2),"mÂ²","square",e)},y.getFormattedLength=function(t,e,i,n){for(var s=0,o=t.getCoordinates(),r=0,a=o.length-1;r<a;++r){var l=ol.proj.transform(o[r],e,"EPSG:4326"),u=ol.proj.transform(o[r+1],e,"EPSG:4326");s+=y.SPHERE_WGS84.haversineDistance(l,u)}return n(s,"m","unit",i)},y.getFormattedPoint=function(t,e,i,n){return i(t.getCoordinates(),e,n)},y.handleEvent_=function(t){if("pointermove"!=t.type||t.dragging)return!0;var e=this.startMsg;return null!==this.sketchFeature&&(e=this.continueMsg),this.displayHelpTooltip_&&(o.removeChildren(this.helpTooltipElement_),this.helpTooltipElement_.appendChild(e),this.helpTooltipOverlay_.setPosition(t.coordinate)),!0},y.prototype.getDrawInteraction=function(){return this.drawInteraction_},y.prototype.createDrawInteraction=function(t,e){},y.prototype.setMap=function(t){u.default.prototype.setMap.call(this,t),this.vectorLayer_.setMap(t);var e=this.drawInteraction_.getMap();null!==e&&e.removeInteraction(this.drawInteraction_),null!==t&&t.addInteraction(this.drawInteraction_)},y.prototype.onDrawStart_=function(t){var e=this;this.sketchFeature=t.feature,this.vectorLayer_.getSource().clear(!0),this.createMeasureTooltip_();var i=this.sketchFeature.getGeometry();s.default.assert(void 0!==i),this.changeEventKey_=l.default.listen(i,"change",function(){e.handleMeasure(function(t,i){null!==i&&(e.measureTooltipElement_.innerHTML=t,e.measureTooltipOverlayCoord_=i)})}),this.postcomposeEventKey_=l.default.listen(this.getMap(),"postcompose",function(){e.measureTooltipOverlay_.setPosition(e.measureTooltipOverlayCoord_)})},y.prototype.onDrawEnd_=function(t){this.measureTooltipElement_.classList.add("ngeo-tooltip-static"),this.measureTooltipOverlay_.setOffset([0,-7]);var e=new n.default("measureend",{feature:this.sketchFeature});this.dispatchEvent(e),this.sketchFeature=null,this.unlistenerEvent_()},y.prototype.unlistenerEvent_=function(){null!==this.changeEventKey_&&null!==this.postcomposeEventKey_&&(l.default.unlistenByKey(this.changeEventKey_),l.default.unlistenByKey(this.postcomposeEventKey_),this.changeEventKey_=null,this.postcomposeEventKey_=null)},y.prototype.createHelpTooltip_=function(){this.removeHelpTooltip_(),this.displayHelpTooltip_&&(this.helpTooltipElement_=document.createElement("div"),this.helpTooltipElement_.classList.add("tooltip"),this.helpTooltipOverlay_=new r.default({element:this.helpTooltipElement_,offset:[15,0],positioning:"center-left"}),this.getMap().addOverlay(this.helpTooltipOverlay_))},y.prototype.removeHelpTooltip_=function(){this.displayHelpTooltip_&&(this.getMap().removeOverlay(this.helpTooltipOverlay_),null!==this.helpTooltipElement_&&this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_),this.helpTooltipElement_=null,this.helpTooltipOverlay_=null)},y.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_(),this.measureTooltipElement_=document.createElement("div"),this.measureTooltipElement_.classList.add("tooltip"),this.measureTooltipElement_.classList.add("ngeo-tooltip-measure"),this.measureTooltipOverlay_=new r.default({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),this.getMap().addOverlay(this.measureTooltipOverlay_)},y.prototype.removeMeasureTooltip_=function(){null!==this.measureTooltipElement_&&(this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_),this.measureTooltipElement_=null,this.measureTooltipOverlay_=null,this.measureTooltipOverlayCoord_=null)},y.prototype.updateState_=function(){var t=this.getActive();this.shouldHandleDrawInteractionActiveChange_=!1,this.drawInteraction_.setActive(t),this.shouldHandleDrawInteractionActiveChange_=!0,this.getMap()&&(t?this.measureTooltipOverlay_||(this.createMeasureTooltip_(),this.createHelpTooltip_()):(this.vectorLayer_.getSource().clear(!0),this.getMap().removeOverlay(this.measureTooltipOverlay_),this.removeMeasureTooltip_(),this.removeHelpTooltip_(),this.unlistenerEvent_()))},y.prototype.handleMeasure=function(t){},y.prototype.getTooltipElement=function(){return this.measureTooltipElement_},y.prototype.handleDrawInteractionActiveChange_=function(){this.shouldHandleDrawInteractionActiveChange_&&this.setActive(this.drawInteraction_.getActive())},e.default=y}},[369]);
//# sourceMappingURL=modifycircle.min.js.map