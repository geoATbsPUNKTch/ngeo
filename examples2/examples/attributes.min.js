webpackJsonp([20],{106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(55);const r=function(){};r.prototype.read=function(e){if(i.default.isDocument(e))return this.readFromDocument(e);if(i.default.isNode(e))return this.readFromNode(e);if("string"==typeof e){const t=i.default.parse(e);return this.readFromDocument(t)}return null},r.prototype.readFromDocument=function(e){},r.prototype.readFromNode=function(e){},t.default=r},11:function(e,t,n){"use strict";t.a="1.3.0"},12:function(e,t,n){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),o=(i=r)&&i.__esModule?i:{default:i};var a=function(){};a.prototype.getOptions=function(e){var t=new Date(e.minValue),n=new Date(e.maxValue),i=e.minDefValue?new Date(e.minDefValue):t,r=e.maxDefValue?new Date(e.maxDefValue):n,o="range"===e.mode?[i.getTime(),r.getTime()]:i.getTime();return{minDate:t.getTime(),maxDate:n.getTime(),values:o}},a.prototype.getUTCDate=function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},(a.module=angular.module("ngeoTime",[])).service("ngeoTime",a),o.default.module.requires.push(a.module.name),t.default=a},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=n(0),o=n(63),a=n(56),s=n(2),u=n(9),l=n(4);const c=function(e,t,n,i,r,s){o.a.call(this,e,t,n,a.a.IDLE),this.src_=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.state=a.a.IDLE,this.imageLoadFunction_=s};Object(r.inherits)(c,o.a),c.prototype.getImage=function(){return this.image_},c.prototype.handleImageError_=function(){this.state=a.a.ERROR,this.unlistenImage_(),this.changed()},c.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.getHeight)(this.extent)/this.image_.height),this.state=a.a.LOADED,this.unlistenImage_(),this.changed()},c.prototype.load=function(){this.state!=a.a.IDLE&&this.state!=a.a.ERROR||(this.state=a.a.LOADING,this.changed(),this.imageListenerKeys_=[s.default.listenOnce(this.image_,u.a.ERROR,this.handleImageError_,this),s.default.listenOnce(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},c.prototype.setImage=function(e){this.image_=e},c.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.default.unlistenByKey),this.imageListenerKeys_=null};var d=c,f=n(10),p=n(5),h=n(6),g=n(28),_=n(57),m=n(12),y=n(15),v=n(22);const b=function(e){const t=e||{};_.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:_.default.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(r.inherits)(b,_.default),b.GETFEATUREINFO_IMAGE_SIZE_=[101,101],b.prototype.getGetFeatureInfoUrl=function(e,t,n,r){if(void 0===this.url_)return;const o=Object(h.get)(n),a=this.getProjection();a&&a!==o&&(t=g.a.calculateSourceResolution(a,o,e,t),e=Object(h.transform)(e,o,a));const s=Object(l.getForViewAndSize)(e,t,0,b.GETFEATUREINFO_IMAGE_SIZE_),u={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(p.assign)(u,this.params_,r);const c=Math.floor((e[0]-s[0])/t),d=Math.floor((s[3]-e[1])/t);return u[this.v13_?"I":"X"]=c,u[this.v13_?"J":"Y"]=d,this.getRequestUrl_(s,b.GETFEATUREINFO_IMAGE_SIZE_,1,a||o,u)},b.prototype.getParams=function(){return this.params_},b.prototype.getImageInternal=function(e,t,n,r){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==n||this.hidpi_&&void 0!==this.serverType_||(n=1);const o=t/n,a=Object(l.getCenter)(e),c=Math.ceil(Object(l.getWidth)(e)/o),f=Math.ceil(Object(l.getHeight)(e)/o),h=Object(l.getForViewAndSize)(a,o,0,[c,f]),g=Math.ceil(this.ratio_*Object(l.getWidth)(e)/o),_=Math.ceil(this.ratio_*Object(l.getHeight)(e)/o),m=Object(l.getForViewAndSize)(a,o,0,[g,_]),y=this.image_;if(y&&this.renderedRevision_==this.getRevision()&&y.getResolution()==t&&y.getPixelRatio()==n&&Object(l.containsExtent)(y.getExtent(),h))return y;const v={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(p.assign)(v,this.params_),this.imageSize_[0]=Math.round(Object(l.getWidth)(m)/o),this.imageSize_[1]=Math.round(Object(l.getHeight)(m)/o);const b=this.getRequestUrl_(m,this.imageSize_,n,r,v);return this.image_=new d(m,t,n,b,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s.default.listen(this.image_,u.a.CHANGE,this.handleImageChange,this),this.image_},b.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},b.prototype.getRequestUrl_=function(e,t,n,i,r){if(Object(f.a)(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=n)switch(this.serverType_){case m.a.GEOSERVER:const e=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+e:r.FORMAT_OPTIONS="dpi:"+e;break;case m.a.MAPSERVER:r.MAP_RESOLUTION=90*n;break;case m.a.CARMENTA_SERVER:case m.a.QGIS:r.DPI=90*n;break;default:Object(f.a)(!1,8)}r.WIDTH=t[0],r.HEIGHT=t[1];const o=i.getAxisOrientation();let a;return a=this.v13_&&"ne"==o.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r.BBOX=a.join(","),Object(v.appendParams)(this.url_,r)},b.prototype.getUrl=function(){return this.url_},b.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},b.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},b.prototype.updateParams=function(e){Object(p.assign)(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},b.prototype.updateV13_=function(){const e=this.params_.VERSION||i.a;this.v13_=y.default.compareVersions(e,"1.3")>=0};t.default=b},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={setGeometryType:function(e,t){return/gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/.exec(t)&&(e.type=ngeo.AttributeType.GEOMETRY,/^gml:Point/.exec(t)?e.geomType="Point":/^gml:LineString|^gml:Curve/.exec(t)?e.geomType="LineString":/^gml:Polygon|^gml:Surface/.exec(t)?e.geomType="Polygon":/^gml:MultiPoint/.exec(t)?e.geomType="MultiPoint":/^gml:MultiLineString|^gml:MultiCurve/.exec(t)?e.geomType="MultiLineString":/^gml:MultiPolygon|^gml:MultiSurface/.exec(t)&&(e.geomType="MultiPolygon")),!!e.type&&!!e.geomType}};t.default=i},201:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(1)),r=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){this.listenerKeys_={}};a.prototype.addListenerKey=function(e,t){this.listenerKeys_[e]||this.initListenerKey_(e),this.listenerKeys_[e].push(t)},a.prototype.clearListenerKey=function(e){this.initListenerKey_(e)},a.prototype.initListenerKey_=function(e){this.listenerKeys_[e]?this.listenerKeys_[e].length&&(this.listenerKeys_[e].forEach(r.default.unlistenByKey),this.listenerKeys_[e].length=0):this.listenerKeys_[e]=[]},(a.module=angular.module("ngeoEventHelper",[])).service("ngeoEventHelper",a),i.default.module.requires.push(a.module.name),t.default=a},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=n(43),a=(i=o)&&i.__esModule?i:{default:i};var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.default.call(this,e),this.detail=t};r.inherits(s,a.default),t.default=s},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=n(0),o=n(10),a=n(4),s=n(5),u=n(14),l=n(6),c=n(28),d=n(60),f=n(42),p=n(12),h=n(61),g=n(15),_=n(22);const m=function(e){const t=e||{},n=t.params||{},i=!("TRANSPARENT"in n)||n.TRANSPARENT;f.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=n,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(a.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(r.inherits)(m,f.a),m.prototype.getGetFeatureInfoUrl=function(e,t,n,r){const o=Object(l.get)(n),u=this.getProjection();let f=this.getTileGrid();f||(f=this.getTileGridForProjection(o));const p=f.getTileCoordForCoordAndResolution(e,t);if(f.getResolutions().length<=p[0])return;let h=f.getResolution(p[0]),g=f.getTileCoordExtent(p,this.tmpExtent_),_=d.default.toSize(f.getTileSize(p[0]),this.tmpSize);const m=this.gutter_;0!==m&&(_=d.default.buffer(_,m,this.tmpSize),g=Object(a.buffer)(g,h*m,g)),u&&u!==o&&(h=c.a.calculateSourceResolution(u,o,e,h),g=Object(l.transformExtent)(g,o,u),e=Object(l.transform)(e,o,u));const y={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(s.assign)(y,this.params_,r);const v=Math.floor((e[0]-g[0])/h),b=Math.floor((g[3]-e[1])/h);return y[this.v13_?"I":"X"]=v,y[this.v13_?"J":"Y"]=b,this.getRequestUrl_(p,_,g,1,u||o,y)},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(e,t,n,i,r,a){const s=this.urls;if(!s)return;if(a.WIDTH=t[0],a.HEIGHT=t[1],a[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=i)switch(this.serverType_){case p.a.GEOSERVER:const e=90*i+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+e:a.FORMAT_OPTIONS="dpi:"+e;break;case p.a.MAPSERVER:a.MAP_RESOLUTION=90*i;break;case p.a.CARMENTA_SERVER:case p.a.QGIS:a.DPI=90*i;break;default:Object(o.a)(!1,52)}const l=r.getAxisOrientation(),c=n;let d,f;this.v13_&&"ne"==l.substr(0,2)&&(d=n[0],c[0]=n[1],c[1]=d,d=n[2],c[2]=n[3],c[3]=d);(a.BBOX=c.join(","),1==s.length)?f=s[0]:f=s[Object(u.modulo)(h.a.hash(e),s.length)];return Object(_.appendParams)(f,a)},m.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},m.prototype.getKeyForParams_=function(){let e=0;const t=[];for(const n in this.params_)t[e++]=n+"-"+this.params_[n];return t.join("/")},m.prototype.fixedTileUrlFunction=function(e,t,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=e[0])return;1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);const o=r.getResolution(e[0]);let u=r.getTileCoordExtent(e,this.tmpExtent_),l=d.default.toSize(r.getTileSize(e[0]),this.tmpSize);const c=this.gutter_;0!==c&&(l=d.default.buffer(l,c,this.tmpSize),u=Object(a.buffer)(u,o*c,u)),1!=t&&(l=d.default.scale(l,t,this.tmpSize));const f={SERVICE:"WMS",VERSION:i.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(s.assign)(f,this.params_),this.getRequestUrl_(e,l,u,t,n,f)},m.prototype.updateParams=function(e){Object(s.assign)(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){const e=this.params_.VERSION||i.a;this.v13_=g.default.compareVersions(e,"1.3")>=0},t.default=m},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(1)),r=o(n(47));function o(e){return e&&e.__esModule?e:{default:e}}var a={};a.module=angular.module("ngeoDataSources",[]),a.module.value("ngeoDataSources",new r.default),i.default.module.requires.push(a.module.name),t.default=a},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1);(i=o)&&i.__esModule;var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inRange_=!1!==t.inRange,this.visible_=!0===t.visible,this.attributes=t.attributes||null,this.id_=t.id,this.identifierAttribute_=t.identifierAttribute,this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.name_=t.name}return r(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e}},{key:"inRange",get:function(){return this.inRange_},set:function(e){this.inRange_=e}},{key:"visible",get:function(){return this.visible_},set:function(e){this.visible_=e}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),e}();t.default=a},284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(285),n(59);var i=s(n(286)),r=s(n(287)),o=s(n(40)),a=s(n(32));function s(e){return e&&e.__esModule?e:{default:e}}app.module=angular.module("app",[ngeo.module.name,a.default.name,r.default.name]),app.MainController=function(e,t,n){var i=this;this.timeout_=t,this.attributes=null,this.disabled=!1,this.feature=new o.default({name:"A feature",kind:"house"}),e.get("data/xsdattributes.xml").then(this.handleXSDAttributeGet_.bind(this)),this.log="",n.$watch(function(){return i.feature.get("name")},function(e,t){e!==t&&i.appendLog("name changed from '"+t+"' to '"+e+"'")}),n.$watch(function(){return i.feature.get("kind")},function(e,t){e!==t&&i.appendLog("kind changed from '"+t+"' to '"+e+"'")})},app.MainController.prototype.handleXSDAttributeGet_=function(e){var t=(new i.default).read(e.data);return this.attributes=t,t},app.MainController.prototype.updateName=function(){var e=this;this.timeout_(function(){e.feature.set("name","An alternate name")},0)},app.MainController.prototype.appendLog=function(e){this.log=e+"\n"+this.log},app.module.controller("MainController",app.MainController),t.default={}},285:function(e,t){},286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(1)),r=s(n(165)),o=s(n(106)),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){o.default.call(this)};ol.inherits(u,o.default),u.prototype.read=function(e){return o.default.prototype.read.call(this,e)},u.prototype.readFromDocument=function(e){a.default.assert(e.nodeType==Node.DOCUMENT_NODE,"doc.nodeType should be DOCUMENT");for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},u.prototype.readFromNode=function(e){a.default.assert(e.nodeType==Node.ELEMENT_NODE,"node.nodeType should be ELEMENT"),a.default.assert("schema"==e.localName,"localName should be schema");var t=e.getElementsByTagName("element");t.length||(t=e.getElementsByTagName("xsd:element"));for(var n=[],i=void 0,r=0,o=t.length;r<o;r++)(i=this.readFromElementNode_(t[r]))&&n.push(i);return n},u.prototype.readFromElementNode_=function(e){var t=e.getAttribute("name");a.default.assertString(t,"name should be defined in element node.");var n=e.getAttribute("alias"),o=e.getAttribute("nillable"),s={name:t,alias:n,required:!(!0===o||"true"===o)},u=e.getAttribute("type");if(u)r.default.setGeometryType(s,u)||this.setAttributeByXsdType_(s,u);else{var l=e.getElementsByTagName("enumeration");if(l.length||(l=e.getElementsByTagName("xsd:enumeration")),l.length){s.type=i.default.AttributeType.SELECT;for(var c=[],d=0,f=l.length;d<f;d++)c.push(l[d].getAttribute("value"));s.choices=c}else{var p=e.getElementsByTagName("restriction");if(p.length||(p=e.getElementsByTagName("xsd:restriction")),p.length&&p[0]){var h=p[0];this.setAttributeByXsdType_(s,h.getAttribute("base"));var g=e.getElementsByTagName("maxLength");g.length||(g=e.getElementsByTagName("xsd:maxLength")),g.length&&g[0]&&(s.maxLength=Number(g[0].getAttribute("value")))}}}return s.type?(a.default.assert(s.type),s):null},u.prototype.setAttributeByXsdType_=function(e,t){"xsd:boolean"===t?e.type=i.default.AttributeType.BOOLEAN:"xsd:date"===t?e.type=i.default.AttributeType.DATE:"xsd:dateTime"===t?e.type=i.default.AttributeType.DATETIME:"xsd:time"===t?e.type=i.default.AttributeType.TIME:"xsd:decimal"===t?(e.type=i.default.AttributeType.NUMBER,e.numType=i.default.NumberType.FLOAT):"xsd:integer"===t?(e.type=i.default.AttributeType.NUMBER,e.numType=i.default.NumberType.INTEGER):"xsd:string"===t&&(e.type=i.default.AttributeType.TEXT)},u.getGeometryAttribute=function(e){for(var t=null,n=0,r=e.length;n<r;n++)if(e[n].type===i.default.AttributeType.GEOMETRY){t=e[n];break}return t},t.default=u},287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=s(n(2)),o=s(n(1)),a=s(n(201));s(n(288));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoAttributes",[a.default.module.name]);o.default.module.requires.push(u.name),u.component_={controller:"ngeoAttributesController as attrCtrl",bindings:{attributes:"=ngeoAttributesAttributes",disabled:"<ngeoAttributesDisabled",feature:"=ngeoAttributesFeature"},require:{form:"^"},templateUrl:function(){return o.default.baseModuleTemplateUrl+"/editing/attributescomponent.html"}},u.component("ngeoAttributes",u.component_),u.Controller_=function(e,t){this.attributes,this.disabled=!1,this.feature,this.properties,this.scope_=e,this.ngeoEventHelper_=t,this.updating_=!1},u.Controller_.prototype.$onInit=function(){this.properties=this.feature.getProperties();var e=i.getUid(this);this.ngeoEventHelper_.addListenerKey(e,r.default.listen(this.feature,"propertychange",this.handleFeaturePropertyChange_,this))},u.Controller_.prototype.handleInputChange=function(e){this.updating_=!0;var t=this.properties[e];this.feature.set(e,t),this.updating_=!1},u.Controller_.prototype.$onDestroy=function(){var e=i.getUid(this);this.ngeoEventHelper_.clearListenerKey(e)},u.Controller_.prototype.handleFeaturePropertyChange_=function(e){this.updating_||(this.properties[e.key]=e.target.get(e.key),this.scope_.$apply())},u.controller("ngeoAttributesController",u.Controller_),t.default=u},288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(1)),r=o(n(141));function o(e){return e&&e.__esModule?e:{default:e}}var a=angular.module("ngeoDateTimePicker",[r.default.module.name]);i.default.module.requires.push(a.name),a.component_=function(){return{restrict:"A",controller:a.component_,bindToController:!0,scope:{options:"<ngeoDatetimepickerOptions"}}},a.directive("ngeoDateTimePicker",a.component_),a.Controller_=function(e,t){this.element_=e,this.gettextCatalog_=t,this.options},a.Controller_.prototype.$onInit=function(){var e=this.gettextCatalog_.getCurrentLanguage();$.datetimepicker.setLocale(e),"string"==typeof this.options&&(this.options=angular.fromJson(this.options)),this.element_.datetimepicker(this.options)},a.controller("ngeoDateTimePickerController",a.Controller_),t.default=a},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=f(n(1)),r=d(n(0)),o=f(n(20)),a=d(n(5)),s=f(n(18)),u=f(n(17)),l=f(n(3)),c=f(n(36));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var p=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new s.default({useSpatialIndex:!1}),this.layer_=new o.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};p.prototype.addFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var n=r.getUid(e).toString();this.featureUidToGroupIndex_[n]=t,this.groups_[t].features[n]=e,this.source_.addFeature(e)},p.prototype.removeFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var n=r.getUid(e).toString();delete this.featureUidToGroupIndex_[n],delete this.groups_[t].features[n],this.source_.removeFeature(e)},p.prototype.clear=function(e){l.default.assert(e>=0),l.default.assert(e<this.groups_.length);var t=this.groups_[e];for(var n in t.features)this.removeFeature(t.features[n],e);l.default.assert(a.isEmpty(t.features))},p.prototype.getLayer=function(){return this.layer_},p.prototype.getFeatureOverlay=function(){var e=this.groups_.length;return this.groups_.push({styleFunction:u.default.defaultFunction,features:{}}),new c.default(this,e)},p.prototype.init=function(e){this.layer_.setMap(e)},p.prototype.setStyle=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length),this.groups_[t].styleFunction=null===e?u.default.defaultFunction:u.default.createFunction(e)},p.prototype.styleFunction_=function(e,t){var n=r.getUid(e).toString();l.default.assert(n in this.featureUidToGroupIndex_);var i=this.featureUidToGroupIndex_[n];return this.groups_[i].styleFunction(e,t)},(p.module=angular.module("ngeoFeatureOverlayMgr",[c.default.module.name])).service("ngeoFeatureOverlayMgr",p),i.default.module.requires.push(p.module.name),t.default=p},3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={doAssertFailure_:function(e,t,n,i){var o="Assertion failed",a=void 0;n?(o+=": "+n,a=i):e&&(o+=": "+e,a=t);var s=new r.AssertionError(""+o,a||[]);r.errorHandler_(s)},setErrorHandler:function(e){r.ENABLE_ASSERTS&&(r.errorHandler_=e)},assert:function(e,t,n){return r.ENABLE_ASSERTS&&!e&&r.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},fail:function(e,t){r.ENABLE_ASSERTS&&r.errorHandler_(new r.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},assertNumber:function(e,t,n){return r.ENABLE_ASSERTS&&!goog.isNumber(e)&&r.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertString:function(e,t,n){return r.ENABLE_ASSERTS&&!goog.isString(e)&&r.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertFunction:function(e,t,n){return r.ENABLE_ASSERTS&&!goog.isFunction(e)&&r.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertObject:function(e,t,n){return r.ENABLE_ASSERTS&&!goog.isObject(e)&&r.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertArray:function(e,t,n){return r.ENABLE_ASSERTS&&!goog.isArray(e)&&r.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertBoolean:function(e,t,n){return r.ENABLE_ASSERTS&&!goog.isBoolean(e)&&r.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertElement:function(e,t,n){return!r.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||r.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},assertInstanceof:function(e,t,n,i){return!r.ENABLE_ASSERTS||e instanceof t||r.doAssertFailure_("Expected instanceof %s but got %s.",[r.getType_(t),r.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},assertObjectPrototypeIsIntact:function(){for(var e in Object.prototype)r.fail(e+" should not be enumerable in Object.prototype.")},getType_:function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":void 0===e?"undefined":i(e)}};t.default=r},32:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=c(n(1)),r=c(n(33)),o=c(n(34)),a=c(n(29)),s=c(n(37)),u=c(n(38)),l=c(n(39));function c(e){return e&&e.__esModule?e:{default:e}}var d=angular.module("ngeoMapModule",[i.default.module.name,r.default.module.name,o.default.name,a.default.module.name,s.default.name,u.default.name,l.default.name]);t.default=d},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=p(n(3)),r=p(n(1)),o=p(n(21)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),s=p(n(19)),u=p(n(52)),l=p(n(50)),c=p(n(16)),d=p(n(23)),f=p(n(58));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(){s.default.call(this),this.mapUids_={}};a.inherits(h,s.default),h.prototype.get=function(e){return a.getUid(e).toString()in this.mapUids_?e.getLayers().item(0):null},h.prototype.set=function(e,t){var n=a.getUid(e).toString(),r=this.get(e);null!==r?(i.default.assert(n in this.mapUids_),null!==t?e.getLayers().setAt(0,t):(e.getLayers().removeAt(0),delete this.mapUids_[n])):null!==t&&(e.getLayers().insertAt(0,t),this.mapUids_[n]=!0);var s=new o.default("change",{current:t,previous:r});return this.dispatchEvent(s),r},h.prototype.updateDimensions=function(e,t){var n=this.get(e);if(n){var r=[n];n instanceof u.default&&(r=n.getLayers().getArray()),r.forEach(function(e){if(i.default.assertInstanceof(e,l.default),e){var n=!1,r={};for(var o in e.get("dimensions")){var a=t[o];void 0!==a&&(r[o]=a,n=!0)}if(n){var s=e.getSource();s instanceof f.default?(s.updateDimensions(r),s.refresh()):(s instanceof d.default||s instanceof c.default)&&(s.updateParams(r),s.refresh())}}})}},(h.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",h),r.default.module.requires.push(h.module.name),t.default=h},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(3)),r=u(n(1)),o=u(n(35)),a=u(n(2)),s=u(n(7));function u(e){return e&&e.__esModule?e:{default:e}}var l=angular.module("ngeoMap",[o.default.module.name]);r.default.module.requires.push(l.name),l.directive_=function(e,t){return{restrict:"A",link:function(n,r,o){var u=o.ngeoMap,l=n.$eval(u);i.default.assertInstanceof(l,s.default),l.setTarget(r[0]),t.map=l;var c=o.ngeoMapManageResize;if(n.$eval(c)){var d=o.ngeoMapResizeTransition,f=n.$eval(d);a.default.listen(e,"resize",function(){if(f){var t=Date.now(),n=!0;!function i(){l.updateSize(),l.renderSync(),n&&e.requestAnimationFrame(i),Date.now()-t>f&&(n=!1)}()}else l.updateSize()})}}}},l.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],l.directive("ngeoMap",l.directive_),t.default=l},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=d(n(1)),o=d(n(26)),a=d(n(24)),s=d(n(2)),u=d(n(19)),l=d(n(31)),c=d(n(3));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ngeoDataSources_=t,this.map_=null,this.listenerKeys_=[],s.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return e.$inject=["ngeoDataSources"],i(e,[{key:"bindMap_",value:function(e){var t=e.getView();this.listenerKeys_.push(s.default.listen(t,"change:resolution",this.handleViewResolutionChange_,this));var n=t.getResolution();c.default.assertNumber(n),this.syncDataSourcesToResolution_(n)}},{key:"unbindMap_",value:function(e){u.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(e){var t=e.target;c.default.assertInstanceof(t,l.default);var n=t.getResolution();c.default.assertNumber(n),this.syncDataSourcesToResolution_(n)}},{key:"syncDataSourcesToResolution_",value:function(e){var t=this;this.ngeoDataSources_.forEach(function(n){t.syncDataSourceToResolution_(n,e)})}},{key:"syncDataSourceToResolution_",value:function(e,t){if(e.supportsDynamicInRange){var n=e.maxResolution,i=e.minResolution,r=(null===i||void 0===i||t>=i)&&(null===n||void 0===n||t<=n);e.inRange=r}}},{key:"handleDataSourcesAdd_",value:function(e){var t=c.default.assertInstanceof(e.element,o.default);if(this.map_){var n=this.map_.getView().getResolution();c.default.assertNumber(n),this.syncDataSourceToResolution_(t,n)}}},{key:"map",set:function(e){this.map_&&this.unbindMap_(this.map_),this.map_=e,e&&this.bindMap_(e)}}]),e}();f.module=angular.module("ngeoSyncDataSourcesMap",[a.default.module.name]),f.module.service("ngeoSyncDataSourcesMap",f),r.default.module.requires.push(f.module.name),t.default=f},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(1)),r=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(0)),o(n(2)));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t){this.manager_=e,this.features_=null,this.index_=t};a.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)},a.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)},a.prototype.clear=function(){this.manager_.clear(this.index_)},a.prototype.setFeatures=function(e){null!==this.features_&&(this.features_.clear(),r.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),r.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==e&&(e.forEach(function(e){this.addFeature(e)},this),r.default.listen(e,"add",this.handleFeatureAdd_,this),r.default.listen(e,"remove",this.handleFeatureRemove_,this)),this.features_=e},a.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)},a.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)},a.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)},a.module=angular.module("ngeoFeatureOverlay",[]),i.default.module.requires.push(a.module.name),t.default=a},37:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(1),o=(i=r)&&i.__esModule?i:{default:i};var a=angular.module("ngeoRecenter",[]);o.default.module.requires.push(a.name),a.directive_=function(){return{restrict:"A",link:function(e,t,n){var i=n.ngeoRecenterMap,r=e.$eval(i);function o(t){var n=t.attr("ngeo-extent");if(void 0!==n){var i=r.getSize();r.getView().fit(e.$eval(n),{size:i})}var o=t.attr("ngeo-zoom");void 0!==o&&r.getView().setZoom(e.$eval(o))}t.on("click","*",function(e){o(angular.element($(this)))}),t.on("change",function(e){var t=e.target.options[e.target.selectedIndex];o(angular.element(t))})}}},a.directive("ngeoRecenter",a.directive_),t.default=a},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(3)),r=a(n(1)),o=a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("ngeoResizemap",[]);r.default.module.requires.push(s.name),s.directive_=function(e){return{restrict:"A",link:function(t,n,r){var a=r.ngeoResizemap,s=t.$eval(a);i.default.assertInstanceof(s,o.default);var u=r.ngeoResizemapState;i.default.assert(void 0!==u);var l=void 0,c=void 0,d=function t(){s.updateSize(),s.renderSync(),Date.now()-l<1e3&&(c=e.requestAnimationFrame(t))};n.on("transitionend",function(){s.updateSize(),s.renderSync()}),t.$watch(u,function(t,n){t!=n&&(l=Date.now(),e.cancelAnimationFrame(c),c=e.requestAnimationFrame(d))})}}},s.directive("ngeoResizemap",s.directive_),t.default=s},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(n(1)),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8)),o=s(n(7)),a=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoScaleselector",[]);i.default.module.requires.push(u.name),u.value("ngeoScaleselectorTemplateUrl",function(e,t){var n=t.ngeoScaleselectorTemplateurl;return void 0!==n?n:i.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),u.directive_=function(e){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:e}},u.directive("ngeoScaleselector",u.directive_),u.ScaleselectorController_=function(e,t,n){var i=this,s=n.ngeoScaleselector;this.scales=e.$eval(s),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,e.$watch(function(){return Object.keys(i.scales).length},function(e){i.zoomLevels=Object.keys(i.scales).map(Number),i.zoomLevels.sort(r.numberSafeCompareFunction)});var l=n.ngeoScaleselectorMap;this.map_=e.$eval(l),goog.asserts.assertInstanceof(this.map_,o.default);var c=n.ngeoScaleselectorOptions,d=e.$eval(c);if(this.options=u.ScaleselectorController_.getOptions_(d),this.$scope_=e,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var f=this.map_.getView().getZoom();void 0!==f&&(this.currentScale=this.getScale(f))}a.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),e.scaleselectorCtrl=this},u.ScaleselectorController_.getOptions_=function(e){var t=!1;return void 0!==e&&(t=1==e.dropup),{dropup:t}},u.ScaleselectorController_.prototype.getScale=function(e){return this.scales[e]},u.ScaleselectorController_.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)},u.ScaleselectorController_.prototype.handleResolutionChange_=function(e){var t=this,n=this.map_.getView(),i=this.scales[n.getZoom()];void 0!==i&&this.$scope_.$applyAsync(function(){t.currentScale=i})},u.ScaleselectorController_.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},u.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&a.default.unlistenByKey(this.resolutionChangeKey_);var e=this.map_.getView();this.resolutionChangeKey_=a.default.listen(e,"change:resolution",this.handleResolutionChange_,this)},u.controller("NgeoScaleselectorController",u.ScaleselectorController_),t.default=u}},[284]);
//# sourceMappingURL=attributes.min.js.map