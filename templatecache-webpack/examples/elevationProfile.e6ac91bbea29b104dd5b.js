webpackJsonp([37],{316:function(e,t,i){i(7),e.exports=i(317)},317:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=g(i(63)),n=g(i(15)),a=g(i(9)),r=g(i(13)),s=g(i(30)),l=g(i(21)),d=g(i(56)),p=g(i(25)),u=g(i(52)),f=g(i(22)),c=g(i(12)),h=g(i(227));function g(e){return e&&e.__esModule?e:{default:e}}var m={};m.module=angular.module("app",[c.default.name,h.default.name]),m.MainController=function(e,t){var i=this;this.scope_=t;var c=new f.default;this.map=new a.default({layers:[new d.default({source:new u.default({url:"http://wms.geo.admin.ch/",crossOrigin:"anonymous",attributions:'&copy; <a href="http://www.geo.admin.ch/internet/geoportal/en/home.html">Pixelmap 1:500000 / geo.admin.ch</a>',params:{LAYERS:"ch.swisstopo.pixelkarte-farbe-pk1000.noscale",FORMAT:"image/jpeg"},serverType:"mapserver"})}),new p.default({source:c})],view:new r.default({projection:o.default,extent:[42e4,3e4,9e5,35e4],zoom:0,center:[0,0]})});var h=this.map,g=new p.default({source:new f.default});this.snappedPoint_=new n.default,g.getSource().addFeature(this.snappedPoint_),g.setMap(h),this.profilePoisData=[{sort:1,dist:1e3,title:"First POI",id:12345},{sort:2,dist:3e3,title:"Second POI",id:12346}],this.profileData=void 0,e.get("data/profile.json").then(function(e){var t=e.data.profile;i.profileData=t;var o=void 0,a=t.length,r=new s.default([],"XYM");for(o=0;o<a;o++){var l=t[o];r.appendCoordinate([l.x,l.y,l.dist])}c.addFeature(new n.default(r));var d=i.map.getSize();h.getView().fit(c.getExtent(),{size:d})}),h.on("pointermove",function(e){if(!e.dragging){var t=h.getEventCoordinate(e.originalEvent);i.snapToGeometry(t,c.getFeatures()[0].getGeometry())}});var m=function(e,t,i){return function(e){return void 0!==i&&(e=e[i]),e[t]}},v=m(0,"dist"),w={line1:{style:{},zExtractor:m(0,"mnt","values")}},y={sort:m(0,"sort"),id:m(0,"id"),dist:m(0,"dist"),title:m(0,"title"),z:function(e,t){return void 0!==t&&(e.z=t),e.z}},C=function(e){this.point=e,this.snappedPoint_.setGeometry(new l.default([e.x,e.y]))}.bind(this),M=function(){this.point=null,this.snappedPoint_.setGeometry(null)}.bind(this);this.profileOptions={distanceExtractor:v,linesConfiguration:w,poiExtractor:y,hoverCallback:C,outCallback:M},this.point=null,this.profileHighlight=void 0},m.MainController.$inject=["$http","$scope"],m.MainController.prototype.snapToGeometry=function(e,t){var i=t.getClosestPoint(e),o=i[0]-e[0],n=i[1]-e[1],a=Math.sqrt(o*o+n*n)/this.map.getView().getResolution();this.profileHighlight=a<8?i[2]:-1,this.scope_.$apply()},m.module.controller("MainController",m.MainController),t.default=m}},[316]);
//# sourceMappingURL=elevationProfile.e6ac91bbea29b104dd5b.js.map