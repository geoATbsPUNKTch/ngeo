{"version":3,"sources":["webpack:///./examples/simple3d.js","webpack:///./src/olcs/olcsModule.js","webpack:///./src/olcs/Service.js","webpack:///./src/olcs/constants.js","webpack:///./src/olcs/controls3d.js","webpack:///./src/olcs/Manager.js","webpack:///./node_modules/olcs/contrib/LazyLoader.js","webpack:///./node_modules/olcs/util.js","webpack:///./node_modules/olcs/AutoRenderLoop.js","webpack:///./node_modules/olcs/Camera.js","webpack:///./node_modules/olcs/AbstractSynchronizer.js","webpack:///./node_modules/olcs/RasterSynchronizer.js","webpack:///./node_modules/openlayers/src/ol/source/Cluster.js","webpack:///./node_modules/olcs/core/VectorLayerCounterpart.js","webpack:///./node_modules/olcs/FeatureConverter.js","webpack:///./node_modules/olcs/VectorSynchronizer.js","webpack:///./node_modules/olcs/SynchronizedOverlay.js","webpack:///./node_modules/olcs/OverlaySynchronizer.js","webpack:///./node_modules/olcs/OLCesium.js","webpack:///./node_modules/olcs/contrib/Manager.js","webpack:///./node_modules/openlayers/src/ol/source/OSM.js","webpack:///./node_modules/openlayers/src/ol/source/XYZ.js","webpack:///./node_modules/olcs/core/OLImageryProvider.js","webpack:///./node_modules/olcs/core.js"],"names":["__webpack_require__","exports","module","angular","_module2","default","name","_olcsModule2","MainController","$rootScope","ngeoOlcsService","this","map","_Map2","layers","_Tile2","source","_OSM2","view","_View2","center","zoom","ol3dm","_Manager2","initialize","controller","_controls3d2","_Service2","Service","ngeoDebounce","ngeoLocation","ngeoStateManager","_classCallCheck","manager_","ngeoDebounce_","ngeoLocation_","ngeoStateManager_","$inject","_createClass","key","value","manager","_this","on","cameraToState_","getInitialBooleanValue","initialStateToCamera_","stateManager","lon","getInitialNumberValue","_constants2","Permalink3dParam","LON","lat","LAT","elevation","ELEVATION","heading","HEADING","pitch","PITCH","_asserts2","assert","undefined","set3dWithView","_this2","camera","getOl3d","getCesiumScene","moveEnd","addEventListener","_this2$ngeoStateManag","position","positionCartographic","updateState","_defineProperty","ENABLED","Cesium","Math","toDegrees","longitude","toFixed","latitude","height","event","target","is3dEnabled","remove3dState_","_this3","getParamKeysWithPrefix","PREFIX","forEach","deleteParam","_debounce2","_Location2","service","olEasing","ngeoOlcsControls3dTemplateUrlInjectable","$attrs","ngeoOlcsControls3dTemplateUrl","templateUrl","_index2","baseModuleTemplateUrl","component","bindings","minTilt","maxTilt","Controller","$element","element_","tiltRightEl_","tiltLeftEl_","rotation3dEl_","angle3dEl_","previousRotation_","previousViewMatrix_","animationFrameRequestId_","olcsService_","older","newer","newRotation","getOlView","getRotation","Number","isFinite","abs","rotateElement_","newViewMatrix","getCesiumViewMatrix","Matrix4","equalsEpsilon","newTilt","getTiltOnGlobe","clone","addClass","hasClass","removeClass","requestAnimationFrame","updateWidget_","cancelAnimationFrame","PI","getManager","find","element","angle","r","css","-moz-transform","-webkit-transform","-o-transform","-ms-transform","transform","toRadians","setHeading","tiltOnGlobe","scene","_core2","rotateAroundBottomCenter","delta","cur","getResolution","newResolution","constrainResolution","getAnimating","cancelAnimations","animate","resolution","duration","easing","easeOut","_Manager","Manager","url","options","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","rootScope_","_inherits","promise","then","$apply","LazyLoader","[object Object]","url_","Promise","resolve","reject","script","document","createElement","onload","onerror","head","appendChild","src","util_exports","obj","param","supportsImageRenderingPixelatedResult_","imageRenderingValueResult_","supportsImageRenderingPixelated","canvas","setAttribute","tmp","style","imageRenderingValue","util","AutoRenderLoop_exports","ol3d","debug","scene_","canvas_","verboseRendering","_boundNotifyRepaintRequired","notifyRepaintRequired","bind","lastCameraViewMatrix_","lastCameraMoveTime_","stoppedRendering","_removePostRenderListener","postRender","repaintEventNames_","CameraPrototype","Camera","prototype","interceptedAPIs_","originalAPIs_","tuple","originalLoadWithXhr_","loadWithXhr","load","originalScheduleTask_","TaskProcessor","scheduleTask","enable","repaintKey","window","that","responseType","method","data","headers","deferred","overrideMimeType","preferText","timeout","arguments","parameters","transferableObjects","result","taskProcessor","_originalWorkerMessageSinkRepaint","worker","onmessage","i","length","api","parent","original","args","apply","getOlMap","getLayerGroup","disable","removeEventListener","un","date","now","Date","viewMatrix","cameraMovedInLastSecond","surface","globe","tilesWaiting","ready","tweens","console","log","setBlockCesiumRendering","restartRenderLoop","setDebug","AutoRenderLoop","Camera_exports","cam_","map_","view_","viewListenKey_","toLonLat_","identityProjection","fromLonLat_","tilt_","distance_","viewUpdateInProgress_","e","setView_","getView","input","opt_output","opt_dimension","dim","Observable","unByKey","toLonLat","ol_proj","getTransform","getProjection","fromLonLat","goog_asserts_prod_default","a","events","listen","handleViewEvent_","readFromView","setRotation","getHeading","setTilt","tilt","updateCamera_","getTilt","setDistance","distance","updateView","getDistance","setCenter","getCenter","setPosition","ll","carto","Cartographic","math","getAltitude","Ellipsoid","WGS84","cartographicToCartesian","getPosition","cartesianToCartographic","pos","setAltitude","altitude","lookAt","fromDegrees","core","getHeight","destination","orientation","PI_OVER_TWO","roll","setView","moveBackward","checkCameraChange","calcDistanceForResolution","ellipsoid","pickCenterPoint","bestTarget","Cartesian3","bestTargetCartographic","setResolution","calcResolutionForDistance","targetNormal","geocentricSurfaceNormal","targetToCamera","subtract","normalize","up","right","normal","y","x","angleBetween","cross","z","tiltAngle","acos","dot","isNaN","opt_dontSync","old","current","fovy","frustum","metersPerUnit","getMetersPerUnit","clientHeight","cos","tan","AbstractSynchronizer_exports","olLayers","getLayers","mapLayerGroup","layerMap","olLayerListenKeys","olGroupListenKeys_","synchronize","destroyAll","addLayers_","orderLayers","root","fifo","layer","parents","olLayerWithParents","splice","olLayer","olLayerId","ol","getUid","toString","cesiumObjects","Group","listenForGroupChanges_","createSingleLayerCounterparts","l","newOlLayerWithParents","concat","push","cesiumObject","addCesiumObject","removeAndDestroySingleLayer_","uid","counterparts","counterpart","removeSingleCesiumObject","destroyCesiumObject","unlistenSingleGroup_","group","removeLayer_","done","uuid","listenKeyArray","contentKeys","listenAddRemove","collection","el","indexOf","objKey","removeAllCesiumObjects","object","destroy","AbstractSynchronizer","RasterSynchronizer_exports","cesiumLayers_","imageryLayers","ourLayers_","ImageryLayerCollection","inherits","add","remove","get","removeAll","convertLayerToCesiumImageries","viewProj","tileLayerToImageryLayer","olLayerItem","updateCesiumLayerProperties","Array","isArray","zIndices","queue","getZIndex","sublayers","unshift","getArray","array","stableSort","layer1","layer2","raiseToTop","RasterSynchronizer","Cluster","Vector","attributions","extent","projection","wrapX","features","geometryFunction","feature","geometry","getGeometry","asserts","Point","EventType","CHANGE","refresh","getSource","loadFeatures","clear","cluster","addFeatures","ol_extent","mapDistance","getFeatures","clustered","ii","coordinates","getCoordinates","neighbors","getFeaturesInExtent","filter","neighbor","createCluster","centroid","coordinate","scale","Feature","set","source_Cluster","VectorLayerCounterpart_exports","layerProjection","billboards","BillboardCollection","primitives","PrimitiveCollection","olListenKeys","rootCollection_","context","featureToCesiumMap","getRootPrimitive","VectorLayerCounterpart","FeatureConverter_exports","boundOnRemoveOrClearFeatureListener_","onRemoveOrClearFeature_","evt","assertInstanceof","cancellers","id","canceller","hasOwnProperty","setReferenceForPicking","primitive","olFeature","createColoredPrimitive","olGeometry","color","opt_lineWidth","flat","renderState","depthTest","enabled","lineWidth","instances","GeometryInstance","attributes","ColorGeometryInstanceAttribute","fromColor","createInstance","getHeightReference","HeightReference","CLAMP_TO_GROUND","ctor","constructor","GroundPrimitive","geometryInstances","appearance","PerInstanceColorAppearance","Primitive","extractColorFromOlStyle","outline","fillColor","getFill","getColor","strokeColor","getStroke","olColor","convertColorToCesium","extractLineWidthFromOlStyle","width","getWidth","wrapFillAndOutlineGeometries","fillGeometry","outlineGeometry","olStyle","outlineColor","p1","p2","addTextStyle","getText","text","label","olGeometry4326TextPartToCesium","csAddBillboard","bbOptions","bb","olCircleGeometryToCesium","olGeometryCloneTo4326","getType","point","slice","getRadius","ol4326CoordinateToCesiumCartesian","radius","CircleGeometry","CircleOutlineGeometry","extrudedHeight","olLineStringGeometryToCesium","positions","ol4326CoordinateArrayToCsCartesians","PolylineMaterialAppearance","material","olStyleToCesium","geometryOptions","vertexFormat","outlinePrimitive","CorridorGeometry","PolylineGeometry","olPolygonGeometryToCesium","boundingExtent","rectangle","Rectangle","maxHeight","c","max","RectangleGeometry","RectangleOutlineGeometry","rings","getLinearRings","hierarchy","polygonHierarchy","olPos","holes","PolygonGeometry","perPositionHeight","PolygonOutlineGeometry","altitudeMode","heightReference","NONE","RELATIVE_TO_GROUND","olPointGeometryToCesium","opt_newBillboardCallback","imageStyle","getImage","Icon","image","isImageLoaded","naturalHeight","naturalWidth","complete","reallyCreateBillboard","HTMLCanvasElement","Image","HTMLImageElement","opacity","getOpacity","Color","getScale","verticalOrigin","VerticalOrigin","BOTTOM","cancelled","fuid","listener","isDestroyed","listenOnce","olMultiGeometryToCesium","accumulate","geometries","functor","subgeos","getPoints","getLineStrings","getPolygons","fail","labels","LabelCollection","extentCenter","getExtent","SimpleGeometry","first","getFirstCoordinate","offsetX","getOffsetX","offsetY","getOffsetY","offset","Cartesian2","pixelOffset","font","getFont","horizontalOrigin","labelStyle","LabelStyle","FILL","outlineWidth","OUTLINE","FILL_AND_OUTLINE","getTextAlign","HorizontalOrigin","LEFT","RIGHT","CENTER","getTextBaseline","TOP","fill","stroke","getLineDash","Material","fromType","horizontal","repeat","evenColor","oddColor","computePlainStyle","fallbackStyleFunction","featureStyleFunction","getStyleFunction","getGeometryFromFeature","opt_geom","geom3d","Geometry","geomFuncRes","getGeometryFunction","olFeatureToCesium","geom","proj","newBillboardAddedCallback","getGeometries","prims","bbs","result2","Error","olVectorLayerToCesium","olView","featurePrimitiveMap","layerStyle","styles","prim","convert","FeatureConverter","VectorSynchronizer_exports","opt_converter","converter","csAllPrimitives_","destroyPrimitives","updateLayerVisibility","csPrimitive","visible","layerVisible","getVisible","show","layer_Vector","Layer","csPrimitives","onAddFeature","layer_Image","onRemoveFeature","Billboard","VectorSynchronizer","SynchronizedOverlay_exports","scenePostRenderListenerRemover_","synchronizer_","synchronizer","parent_","positionWGS84_","observer_","MutationObserver","handleElementChanged","attributeObserver_","listenerKeys_","setPropertyFromEvent_","Overlay","getOptions","setProperties","getProperties","handleMapChanged","observeTarget_","disconnect","observe","childList","characterData","subtree","observer","childNodes","node","nodeType","getScene","dom","removeNode","updatePixelPosition","container","stopEvent","getOverlayContainerStopEvent","getOverlayContainer","insertFirst","insertBefore","handlePositionChanged","sourceProjection","getMap","cloneNode","Node","TEXT_NODE","dispatchEvent","MouseEvent","stopPropagation","nodes","removeChildren","getElement","parentNode","clonedNode","setVisible","cartesian","fromDegreesArray","fromDegreesArrayHeights","ellipsoidBoundingSphere","BoundingSphere","Occluder","isPointVisible","computeCullingVolume","direction","computeVisibility","pixelCartesian","cartesianToCanvasCoordinates","pixel","mapSize","updateRenderedPosition","SynchronizedOverlay","OverlaySynchronizer_exports","overlays_","getOverlays","overlayContainerStopEvent_","className","CLICK","DBLCLICK","MOUSEDOWN","TOUCHSTART","MSPOINTERDOWN","MapBrowserEventType","POINTERDOWN","MOUSEWHEEL","WHEEL","Event","parentElement","overlayContainer_","overlayMap_","addOverlays","addOverlayFromEvent_","removeOverlayFromEvent_","overlay","addOverlay","cesiumOverlay","overlayId","removedOverlay","removeOverlay","csOverlay","keys","OverlaySynchronizer","OLCesium_exports","autoRenderLoop_","time_","time","JulianDate","to4326Transform_","resolutionScale_","canvasClientWidth_","canvasClientHeight_","resolutionScaleChanged_","fillArea","container_","containerAttribute","createAttribute","setAttributeNode","targetElement","getElementById","oc","getViewport","querySelector","isOverMap_","stopOpenLayersEventsPropagation","overlayEvents","canvasAttribute","oncontextmenu","onselectstart","enabled_","pausedInteractions_","hiddenRootGroup_","sceneOptions","scene3DOnly","Scene","sscc","screenSpaceCameraController","tiltEventTypes","eventType","CameraEventType","LEFT_DRAG","modifier","KeyboardEventModifier","SHIFT","ALT","enableLook","constrainedAxis","UNIT_Z","camera_","globe_","Globe","baseColor","WHITE","skyAtmosphere","SkyAtmosphere","firstImageryProvider","SingleTileImageryProvider","addImageryProvider","dataSourceCollection_","DataSourceCollection","dataSourceDisplay_","DataSourceDisplay","dataSourceCollection","synchronizers","createSynchronizers","handleResize_","credits","nextElementSibling","display","lastFrameTime_","renderId_","targetFrameRate_","POSITIVE_INFINITY","blockCesiumRendering_","warmingUp_","trackedFeature_","trackedEntity_","entityView_","needTrackedEntityUpdate_","boundingSphereScratch_","EventHelper","updateTrackedEntity_","enableSuspendTerrainAdjustment","defineProperties","trackedFeature","enableTilt","defaultDataSource","entities","lookAtTransform","IDENTITY","to4326Transform","toCesiumPosition","coo","coo4326","CallbackProperty","pixelSize","TRANSPARENT","render_","onAnimationFrame_","frameTime","interval","julianDate","initializeFrame","update","trackedEntity","getBoundingSphere","BoundingSphereState","DONE","render","state","PENDING","bs","FAILED","EntityView","mapProjection","clientWidth","resolutionScale","devicePixelRatio","aspectRatio","getCamera","getDataSources","getDataSourceDisplay","getEnabled","setEnabled","interactions","visibility","throwOnUnitializedMap_","getInteractions","arr","rootGroup","classList","interaction","warmUp","csCamera","setTimeout","block","enableAutoRenderLoop","getAutoRenderLoop","setResolutionScale","setTargetFrameRate","isDef","OLCesium","__webpack_exports__","cesiumUrl","cameraExtentInRadians","super","cesiumUrl_","boundingSphere_","blockLimiter_","promise_","cesiumInitialTilt_","fogDensity","fogSSEFactor","minimumZoomDistance","maximumZoomDistance","limitCameraToBoundingSphereRatio","cesiumLazyLoader","onCesiumLoaded","rect","DEFAULT_VIEW_RECTANGLE","fromRectangle3D","instantiateOLCesium","configureForUsability","configureForPerformance","terrainProvider","CesiumTerrainProvider","fog","density","screenSpaceErrorFactor","sscController","depthTestAgainstTerrain","backgroundColor","limitCameraToBoundingSphere","fromCartesian","ratio","flying","unblockLimiter","flyToBoundingSphere","cancel","is3DCurrentlyEnabled","resetToNorthZenith","headingDeg","pitchDeg","computeSignedTiltAngleOnGlobe","bottom","pickBottomPoint","setHeadingUsingBottomCenter","getRectangleCameraCoordinates","mag","magnitude","multiplyByScalar","flyTo","endTransform","__WEBPACK_IMPORTED_MODULE_1__source_XYZ_js__","OSM","opt_options","ATTRIBUTION","crossOrigin","cacheSize","opaque","maxZoom","reprojectionErrorThreshold","tileLoadFunction","__WEBPACK_IMPORTED_MODULE_0__index_js__","__WEBPACK_IMPORTED_MODULE_2__tilegrid_js__","XYZ","tileGrid","createXYZ","extentFromProjection","minZoom","tileSize","__WEBPACK_IMPORTED_MODULE_1__source_TileImage_js__","tilePixelRatio","tileUrlFunction","urls","transition","OLImageryProvider_exports","opt_fallbackProj","source_","projection_","fallbackProj_","ready_","credit_","tilingScheme_","rectangle_","proxy","proxy_","getURL","DefaultProxy","errorEvent_","emptyCanvas_","handleSourceChanged_","tileWidth","tg","getTileGrid","getTileSize","tileHeight","maximumLevel","getMaxZoom","minimumLevel","tilingScheme","tileDiscardPolicy","errorEvent","credit","hasAlphaChannel","pickFeatures","getState","GeographicTilingScheme","WebMercatorTilingScheme","createCreditForSource","getAttributions","imageUrl","link","getHTML","replace","logo","getLogo","href","Credit","getTileCredits","level","requestImage","getTileUrlFunction","z_","y_","ImageryProvider","loadImage","OLImageryProvider","core_exports","computePixelSizeAtCoordinate","getPixelDimensions","computeBoundingBoxAtTarget","amount","Transforms","eastNorthUpToFixedFrame","bottomLeft","multiplyByPoint","topRight","cartesianArrayToCartographicArray","applyHeightOffsetToGeometry","applyTransform","output","stride","rotateAroundAxis","axis","clamp","defaultValue","ol_easing","linear","callback","lastProgress","oldTransform","start","step","timestamp","progress","stepAngle","rotate","bottomCenter","angleToZenith","computeAngleToZenith","quaternion","Quaternion","fromAxisAngle","rotation","Matrix3","fromQuaternion","vector","zenith","multiplyByVector","fromTranslation","pickOnTerrainOrEllipsoid","ray","getPickRay","pick","pickEllipsoid","Ray","IntersectionTests","rayEllipsoid","getPoint","signedAngleBetween","convertLongitudeRange","bottomFovRay","fovy2","matrix","second","b","cosine","sine","sign","atan2","pivot","fy","negate","left","opt_globe","targetb","extentToRectangle","ext","transformExtent","Tile","provider","ImageWMS","getUrl","getImageLoadFunction","source_Image","defaultImageLoadFunction","TileWMS","params","getParams","olcs.proxy","olcs.imagesource","TileImage","is3857","is4326","layerOptions","ImageryLayer","csLayer","layerOpacity","alpha","toCartesian","cartesians","proj4326","properties","byteToFloat","fromCssColorString","convertUrlToCesium","subdomains","re","match","exec","startCharCode","charCodeAt","stopCharCode","charCode","String","fromCharCode","currentHeading","normalizeView"],"mappings":"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","file":"simple3d.19697638549ae0b1c9e1.js","sourcesContent":["/**\n * @module app.simple3d\n */\nconst exports = {};\n\n// webpack: import './simple3d.css';\n// webpack: import './common_dependencies.js';\n/** @suppress {extraRequire} */\nimport olMap from 'ol/Map.js';\n\nimport olView from 'ol/View.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olSourceOSM from 'ol/source/OSM.js';\nimport ngeoOlcsOlcsModule from 'ngeo/olcs/olcsModule.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapModule from 'ngeo/map/module.js';\nimport ngeoOlcsManager from 'ngeo/olcs/Manager.js';\n\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('app', [\n  ngeoMapModule.name,\n  ngeoOlcsOlcsModule.name\n]);\n\n\n/**\n * @constructor\n * @ngInject\n * @param {angular.Scope} $rootScope Root scope.\n * @param {ngeo.olcs.Service} ngeoOlcsService The service.\n */\nexports.MainController = function($rootScope, ngeoOlcsService) {\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = new olMap({\n    layers: [\n      new olLayerTile({\n        source: new olSourceOSM()\n      })\n    ],\n    view: new olView({\n      center: [0, 0],\n      zoom: 4\n    })\n  });\n\n  // TODO: detect and use different URL for DEBUG MODE\n  const cesiumUrl = '../node_modules/@camptocamp/cesium/Build/Cesium/Cesium.js';\n\n  /**\n   * @export\n   * @type {olcs.contrib.Manager}\n   */\n  this.ol3dm = new ngeoOlcsManager(cesiumUrl, $rootScope, {\n    map: this.map\n  });\n\n  // Optionally, the manager can be registered into the olcs service\n  ngeoOlcsService.initialize(this.ol3dm);\n};\n\nexports.module.controller('MainController', exports.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/simple3d.js","/**\n * @module ngeo.olcs.olcsModule\n */\nimport Service from 'ngeo/olcs/Service.js';\nimport control from 'ngeo/olcs/controls3d.js';\n\n\n/**\n * @type {!angular.Module}\n */\nconst m = angular.module('ngeoOlcsModule', [\n  control.name,\n  Service.module.name\n]);\n\nconst exports = m;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/olcsModule.js","/**\n * @module ngeo.olcs.Service\n */\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMiscDebounce from 'ngeo/misc/debounce.js';\nimport ngeoStatemanagerLocation from 'ngeo/statemanager/Location.js';\nimport ngeoOlcsConstants from 'ngeo/olcs/constants.js';\nimport ngeoStatemanagerService from 'ngeo/statemanager/Service.js';\n\nconst Service = class {\n\n  /**\n   * @ngInject\n   * @param {!ngeox.miscDebounce} ngeoDebounce ngeo debounce service.\n   * @param {!ngeo.statemanager.Location} ngeoLocation ngeo location service.\n   * @param {ngeo.statemanager.Service} ngeoStateManager The ngeo StateManager service.\n   */\n  constructor(ngeoDebounce, ngeoLocation, ngeoStateManager) {\n    /**\n     * @private\n     * @type {olcs.contrib.Manager|undefined}\n     */\n    this.manager_;\n\n    /**\n     * @private\n     * @type {!ngeox.miscDebounce}\n     */\n    this.ngeoDebounce_ = ngeoDebounce;\n\n    /**\n     * @private\n     * @type {!ngeo.statemanager.Location}\n     */\n    this.ngeoLocation_ = ngeoLocation;\n\n    /**\n     * @private\n     * @type {ngeo.statemanager.Service}\n     */\n    this.ngeoStateManager_ = ngeoStateManager;\n\n  }\n\n  /**\n   * @export\n   * @param {olcs.contrib.Manager} manager Manager.\n   */\n  initialize(manager) {\n    this.manager_ = manager;\n\n    this.manager_.on('load', () => {\n      this.cameraToState_();\n    });\n\n    if (this.ngeoStateManager_.getInitialBooleanValue('3d_enabled')) {\n      this.initialStateToCamera_();\n    }\n  }\n\n  /**\n   * @export\n   * @return {olcs.contrib.Manager|undefined} the manager.\n   */\n  getManager() {\n    return this.manager_;\n  }\n\n  /**\n   * @private\n   * @return {Promise<undefined>} A promise after load & enabled.\n   */\n  initialStateToCamera_() {\n    const stateManager = this.ngeoStateManager_;\n\n    const lon = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.LON);\n    const lat = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.LAT);\n    const elevation = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.ELEVATION);\n    const heading = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.HEADING) || 0;\n    const pitch = stateManager.getInitialNumberValue(ngeoOlcsConstants.Permalink3dParam.PITCH) || 0;\n\n    googAsserts.assert(lon !== undefined);\n    googAsserts.assert(lat !== undefined);\n    googAsserts.assert(elevation !== undefined);\n    return this.manager_.set3dWithView(lon, lat, elevation, heading, pitch);\n  }\n\n  /**\n   * @private\n   */\n  cameraToState_() {\n    const manager = this.manager_;\n    const scene = manager.getOl3d().getCesiumScene();\n    const camera = scene.camera;\n\n    camera.moveEnd.addEventListener(this.ngeoDebounce_(() => {\n      const position = camera.positionCartographic;\n      this.ngeoStateManager_.updateState({\n        [ngeoOlcsConstants.Permalink3dParam.ENABLED]: true,\n        [ngeoOlcsConstants.Permalink3dParam.LON]: Cesium.Math.toDegrees(position.longitude).toFixed(5),\n        [ngeoOlcsConstants.Permalink3dParam.LAT]: Cesium.Math.toDegrees(position.latitude).toFixed(5),\n        [ngeoOlcsConstants.Permalink3dParam.ELEVATION]: position.height.toFixed(0),\n        [ngeoOlcsConstants.Permalink3dParam.HEADING]: Cesium.Math.toDegrees(camera.heading).toFixed(3),\n        [ngeoOlcsConstants.Permalink3dParam.PITCH]: Cesium.Math.toDegrees(camera.pitch).toFixed(3)\n      });\n    }, 1000, true));\n\n    this.manager_.on('toggle', (event) => {\n      if (!event.target.is3dEnabled()) {\n        this.remove3dState_();\n      }\n    });\n  }\n\n  /**\n   * @private\n   */\n  remove3dState_() {\n    this.ngeoLocation_.getParamKeysWithPrefix(ngeoOlcsConstants.Permalink3dParam.PREFIX).forEach((key) => {\n      this.ngeoStateManager_.deleteParam(key);\n    });\n  }\n\n};\n\nconst name = 'ngeoOlcsService';\nService.module = angular.module(name, [\n  ngeoMiscDebounce.name,\n  ngeoStatemanagerLocation.module.name,\n  ngeoStatemanagerService.module.name,\n]).service(name, Service);\n\nconst exports = Service;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/Service.js","/**\n * @module ngeo.olcs.constants\n */\nconst exports = {};\n\n/**\n * @enum {string}\n * @export\n */\nexports.Permalink3dParam = {\n  /**\n   * @type {string}\n   * @export\n   */\n  ENABLED: '3d_enabled',\n  /**\n   * @type {string}\n   * @export\n   */\n  LON: '3d_lon',\n  /**\n   * @type {string}\n   * @export\n   */\n  LAT: '3d_lat',\n  /**\n   * @type {string}\n   * @export\n   */\n  ELEVATION: '3d_elevation',\n  /**\n   * @type {string}\n   * @export\n   */\n  HEADING: '3d_heading',\n  /**\n   * @type {string}\n   * @export\n   */\n  PITCH: '3d_pitch',\n  /**\n   * @type {string}\n   * @export\n   */\n  PREFIX: '3d_'\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/constants.js","/**\n * @module ngeo.olcs.controls3d\n */\nimport googAsserts from 'goog/asserts.js';\nimport * as olEasing from 'ol/easing.js';\nimport olcsCore from 'olcs/core.js';\nimport ngeoBase from 'ngeo/index.js';\n\n\nfunction shouldUpdate(older, newer) {\n  return Number.isFinite(newer) && (!Number.isFinite(older) || Math.abs(newer - older) > 0.05);\n}\n\n\nconst Controller = class {\n\n  /**\n   * @ngInject\n   * @param {!jQuery} $element The element\n   * @param {ngeo.olcs.Service} ngeoOlcsService The ol-cesium service.\n   */\n  constructor($element, ngeoOlcsService) {\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.element_ = $element;\n\n    /**\n     * @type {olcs.contrib.Manager}\n     * @export\n     */\n    this.ol3dm;\n\n    /**\n     * @type {number}\n     * @export\n     */\n    this.minTilt;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilt;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.tiltRightEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.tiltLeftEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.rotation3dEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.angle3dEl_;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.previousRotation_;\n\n    /**\n     * @type {Cesium.Matrix4}\n     * @private\n     */\n    this.previousViewMatrix_;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.animationFrameRequestId_;\n\n    /**\n     * @type {ngeo.olcs.Service}\n     * @private\n     */\n    this.olcsService_ = ngeoOlcsService;\n  }\n\n  updateWidget_() {\n    const newRotation = this.ol3dm.getOl3d().getOlView().getRotation();\n    if (shouldUpdate(this.previousRotation_, newRotation)) {\n      this.rotateElement_(this.rotation3dEl_, newRotation);\n      this.previousRotation_ = newRotation;\n    }\n\n    const newViewMatrix = this.ol3dm.getCesiumViewMatrix();\n    if (!Cesium.Matrix4.equalsEpsilon(this.previousViewMatrix_, newViewMatrix, 1e-5)) {\n      const newTilt = this.ol3dm.getTiltOnGlobe(); // this is expensive!!\n      if (Number.isFinite(newTilt || 0)) { // Workaround https://github.com/google/closure-compiler/pull/2712\n        this.rotateElement_(this.angle3dEl_, newTilt);\n        this.previousViewMatrix_ = Cesium.Matrix4.clone(newViewMatrix);\n\n        // if min or max tilt is reached, disable the tilting buttons\n        const buffer = 0.01; // rad\n        if (newTilt - this.minTilt < buffer) {\n          this.tiltRightEl_.addClass('ngeo-right-inactive');\n        } else if (this.tiltRightEl_.hasClass('ngeo-right-inactive')) {\n          this.tiltRightEl_.removeClass('ngeo-right-inactive');\n        }\n        if (this.maxTilt - newTilt < buffer) {\n          this.tiltLeftEl_.addClass('ngeo-left-inactive');\n        } else if (this.tiltLeftEl_.hasClass('ngeo-left-inactive')) {\n          this.tiltLeftEl_.removeClass('ngeo-left-inactive');\n        }\n      }\n    }\n\n    this.animationFrameRequestId_ = requestAnimationFrame(() => this.updateWidget_());\n  }\n\n  $onDestroy() {\n    if (this.animationFrameRequestId_) {\n      cancelAnimationFrame(this.animationFrameRequestId_);\n    }\n  }\n\n  $onInit() {\n    if (this.minTilt === undefined) {\n      this.minTilt = 0;\n    }\n    if (this.maxTilt === undefined) {\n      this.maxTilt = 7 * Math.PI / 16;\n    }\n    if (!this.ol3dm) {\n      this.ol3dm = googAsserts.assert(this.olcsService_.getManager());\n    }\n    this.tiltRightEl_ = this.element_.find('.ngeo-tilt-right');\n    this.tiltLeftEl_ = this.element_.find('.ngeo-tilt-left');\n    this.rotation3dEl_ = this.element_.find('.ngeo-rotation3d');\n    this.angle3dEl_ = this.element_.find('.ngeo-angle3d');\n    this.updateWidget_();\n  }\n\n\n  /**\n   * @param {jQuery} element Element to rotate.\n   * @param {(number|undefined)} angle Angle in radians\n   * @private\n   */\n  rotateElement_(element, angle) {\n    const r = `rotate(${angle}rad)`;\n    element.css({\n      '-moz-transform': r,\n      '-webkit-transform': r,\n      '-o-transform': r,\n      '-ms-transform': r,\n      'transform': r\n    });\n  }\n\n\n  /**\n   * @param {number} angle Angle in degrees.\n   * @export\n   */\n  rotate(angle) {\n    angle = Cesium.Math.toRadians(angle);\n    this.ol3dm.setHeading(angle);\n  }\n\n\n  /**\n   * @param {number} angle Angle in degrees.\n   * @export\n   */\n  tilt(angle) {\n    angle = Cesium.Math.toRadians(angle);\n    const tiltOnGlobe = this.ol3dm.getTiltOnGlobe();\n    if (tiltOnGlobe + angle < this.minTilt) {\n      angle = this.minTilt - tiltOnGlobe;\n    } else if (tiltOnGlobe + angle > this.maxTilt) {\n      angle = this.maxTilt - tiltOnGlobe;\n    }\n    const scene = this.ol3dm.getCesiumScene();\n    olcsCore.rotateAroundBottomCenter(scene, angle);\n  }\n\n\n  /**\n   * @param {number} delta -1 to zoom out and 1 to zoom in.\n   * @export\n   */\n  zoom(delta) {\n    const view = this.ol3dm.getOlView();\n    const cur = view.getResolution();\n    const newResolution = view.constrainResolution(cur, delta);\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    view.animate({\n      resolution: newResolution,\n      duration: 250,\n      easing: olEasing.easeOut\n    });\n  }\n};\n\n\n/**\n * @param {!angular.Attributes} $attrs Attributes.\n * @param {!string} ngeoOlcsControls3dTemplateUrl Template function.\n * @return {string} Template URL.\n * @ngInject\n */\nfunction ngeoOlcsControls3dTemplateUrlInjectable($attrs, ngeoOlcsControls3dTemplateUrl) {\n  if (ngeoOlcsControls3dTemplateUrl) {\n    return ngeoOlcsControls3dTemplateUrl;\n  }\n  const templateUrl = $attrs['ngeoOlcsControls3dTemplateUrl'];\n  return templateUrl ? templateUrl : `${ngeoBase.baseModuleTemplateUrl}/olcs/controls3d.html`;\n}\n\n/**\n * Provides the \"ngeoOlcsControls3d\" component, a widget for\n * controlling the 3D camera.\n *\n * Example:\n *\n *     <ngeo-olcs-controls3d ng-if=\"$ctrl.manager && $ctrl.manager.is3dEnabled()\">\n *     </ngeo-olcs-controls3d>\n *\n * By default the directive uses \"controls3d.html\" as its templateUrl. This\n * can be changed by redefining the \"ngeoOlcsControls3dTemplateUrl\" value.\n *\n * See our live example: [../examples/simple3d.html](../examples/simple3d.html)\n *\n * @htmlAttribute {olcs.contrib.Manager} ngeo-olcs-manager The OL-Cesium manager.\n * @type {!angular.Component}\n * @ngdoc component\n * @ngname ngeoOlcsControls3d\n */\nconst component = {\n  bindings: {\n    'minTilt': '<?',\n    'maxTilt': '<?',\n    'ol3dm': '<?'\n  },\n  controller: Controller,\n  templateUrl: ngeoOlcsControls3dTemplateUrlInjectable\n};\n\nconst name = 'ngeoOlcsControls3d';\n\nconst exports = angular.module(name, [])\n  .component(name, component)\n  .value('ngeoOlcsControls3dTemplateUrl', '');\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/controls3d.js","/**\n * @module ngeo.olcs.Manager\n */\nimport olcsContribManager from 'olcs/contrib/Manager.js';\n\nconst Manager = class extends olcsContribManager {\n  /**\n   * @param {string} url .\n   * @param {angular.Scope} $rootScope .\n   * @param {olcsx.contrib.ManagerOptions} options .\n   */\n  constructor(url, $rootScope, options) {\n    super(url, options);\n    /**\n     * @type {angular.Scope}\n     * @private\n     */\n    this.rootScope_ = $rootScope;\n  }\n\n\n  /**\n   * @override\n   * @export\n   */\n  toggle3d() {\n    // The transition is asynchronous and at the end of it the state of OLCesium is changed.\n    // In order to have all code dependent on OLCesium state updated, we kick an Angular digest cycle.\n    const promise = super.toggle3d();\n    return promise.then(() => {\n      this.rootScope_.$apply();\n    });\n  }\n};\n\nconst exports = Manager;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/Manager.js","/**\n * @module\n */\nconst exports = class {\n  /**\n   * @param {string} url\n   * @struct\n   * @api\n   */\n  constructor(url) {\n    /**\n     * @type {Promise<undefined>}\n     * @protected\n     */\n    this.promise;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = url;\n  }\n\n  /**\n   * @return {Promise<undefined>}\n   * @api\n   */\n  load() {\n    if (!this.promise) {\n      // not yet loading\n      this.promise = new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.onload = () => resolve();\n        script.onerror = () => reject();\n        document.head.appendChild(script);\n        script.src = this.url_;\n      });\n    }\n    return this.promise;\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/contrib/LazyLoader.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nconst exports = {};\n\n\n/**\n * Cast to object.\n * @param {Object} param\n * @return {Object}\n */\nexports.obj = function(param) {\n  return param;\n};\n\n\n/**\n * @type {boolean|undefined}\n * @private\n */\nexports.supportsImageRenderingPixelatedResult_ = undefined;\n\n\n/**\n * @type {string|undefined}\n * @private\n */\nexports.imageRenderingValueResult_ = undefined;\n\n\n/**\n * @return {boolean}\n */\nexports.supportsImageRenderingPixelated = function() {\n  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');\n    // canvas.style.imageRendering will be undefined, null or an\n    // empty string on unsupported browsers.\n    const tmp = canvas.style['imageRendering']; // non standard\n    exports.supportsImageRenderingPixelatedResult_ = !!tmp;\n    if (exports.supportsImageRenderingPixelatedResult_) {\n      exports.imageRenderingValueResult_ = tmp;\n    }\n  }\n  return exports.supportsImageRenderingPixelatedResult_;\n};\n\n\n/**\n * @return {string}\n */\nexports.imageRenderingValue = function() {\n  exports.supportsImageRenderingPixelated();\n  return exports.imageRenderingValueResult_ || '';\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/util.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\n// Apache v2 license\n// https://github.com/TerriaJS/terriajs/blob/\n// ebd382a8278a817fce316730d9e459bbb9b829e9/lib/Models/Cesium.js\n\nconst exports = function(ol3d, debug) {\n  this.ol3d = ol3d;\n  this.scene_ = ol3d.getCesiumScene();\n  this.canvas_ = this.scene_.canvas;\n  this.verboseRendering = debug;\n  this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);\n\n  this.lastCameraViewMatrix_ = new Cesium.Matrix4();\n  this.lastCameraMoveTime_ = 0;\n  this.stoppedRendering = false;\n\n  this._removePostRenderListener = this.scene_.postRender.addEventListener(this.postRender.bind(this));\n\n  this.repaintEventNames_ = [\n    'mousemove', 'mousedown', 'mouseup',\n    'touchstart', 'touchend', 'touchmove',\n    'pointerdown', 'pointerup', 'pointermove',\n    'wheel'\n  ];\n\n  const CameraPrototype = Cesium.Camera.prototype;\n  this.interceptedAPIs_ = [\n    [CameraPrototype, 'setView'],\n    [CameraPrototype, 'move'],\n    [CameraPrototype, 'rotate'],\n    [CameraPrototype, 'lookAt'],\n    [CameraPrototype, 'flyTo'],\n    [CameraPrototype, 'flyToHome'],\n    [CameraPrototype, 'flyToBoundingSphere']\n  ];\n\n  this.originalAPIs_ = this.interceptedAPIs_.map(tuple => tuple[0][tuple[1]]);\n\n  this.originalLoadWithXhr_ = Cesium.loadWithXhr.load;\n  this.originalScheduleTask_ = Cesium.TaskProcessor.prototype.scheduleTask;\n  this.enable();\n};\n\n\n/**\n * Enable.\n */\nexports.prototype.enable = function() {\n  for (const repaintKey of this.repaintEventNames_) {\n    this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n  }\n\n  window.addEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n  // Hacky way to force a repaint when an async load request completes\n  const that = this;\n  Cesium.loadWithXhr.load = function(url, responseType, method, data, headers, deferred, overrideMimeType, preferText, timeout) {\n    deferred['promise']['always'](that._boundNotifyRepaintRequired);\n    that.originalLoadWithXhr_(...arguments); // eslint-disable-line prefer-rest-params\n  };\n\n  // Hacky way to force a repaint when a web worker sends something back.\n  Cesium.TaskProcessor.prototype.scheduleTask = function(parameters, transferableObjects) {\n    const result = that.originalScheduleTask_.call(this, parameters, transferableObjects);\n\n    const taskProcessor = this;\n    if (!taskProcessor._originalWorkerMessageSinkRepaint) {\n      const worker = taskProcessor['_worker'];\n      taskProcessor._originalWorkerMessageSinkRepaint = worker.onmessage;\n      worker.onmessage = function(event) {\n        taskProcessor._originalWorkerMessageSinkRepaint(event);\n        that.notifyRepaintRequired();\n      };\n    }\n\n    return result;\n  };\n\n  // Intercept API calls to trigger a repaint\n  for (let i = 0; i < this.interceptedAPIs_.length; ++i) {\n    const api = this.interceptedAPIs_[i];\n    const parent = api[0];\n    const original = this.originalAPIs_[i];\n    // Not using an arrow function to keep the \"this\" unbounded.\n    parent[api[1]] = function(...args) {\n      original.apply(this, args);\n      that.notifyRepaintRequired();\n    };\n  }\n\n  // Listen for changes on the layer group\n  this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);\n};\n\n\n/**\n * Disable.\n */\nexports.prototype.disable = function() {\n  if (!!this._removePostRenderListener) {\n    this._removePostRenderListener();\n    this._removePostRenderListener = undefined;\n  }\n  for (const repaintKey of this.repaintEventNames_) {\n    this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n  }\n\n  window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n  Cesium.loadWithXhr.load = this.originalLoadWithXhr_;\n  Cesium.TaskProcessor.prototype.scheduleTask = this.originalScheduleTask_;\n\n  // Restore original APIs\n  for (let i = 0; i < this.interceptedAPIs_.length; ++i) {\n    const api = this.interceptedAPIs_[i];\n    const parent = api[0];\n    const original = this.originalAPIs_[i];\n    parent[api[1]] = original;\n  }\n\n  this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);\n};\n\n\n/**\n * @param {number} date\n */\nexports.prototype.postRender = function(date) {\n  // We can safely stop rendering when:\n  //  - the camera position hasn't changed in over a second,\n  //  - there are no tiles waiting to load, and\n  //  - the clock is not animating\n  //  - there are no tweens in progress\n\n  const now = Date.now();\n\n  const scene = this.scene_;\n  const camera = scene.camera;\n\n  if (!Cesium.Matrix4.equalsEpsilon(this.lastCameraViewMatrix_, camera.viewMatrix, 1e-5)) {\n    this.lastCameraMoveTime_ = now;\n  }\n\n  const cameraMovedInLastSecond = now - this.lastCameraMoveTime_ < 1000;\n\n  const surface = scene.globe['_surface'];\n  const tilesWaiting = !surface['tileProvider'].ready ||\n      surface['_tileLoadQueueHigh'].length > 0 ||\n      surface['_tileLoadQueueMedium'].length > 0 ||\n      surface['_tileLoadQueueLow'].length > 0 ||\n      surface['_debug']['tilesWaitingForChildren'] > 0;\n\n  const tweens = scene['tweens'];\n  if (!cameraMovedInLastSecond && !tilesWaiting && tweens.length == 0) {\n    if (this.verboseRendering) {\n      console.log(`stopping rendering @ ${Date.now()}`);\n    }\n    this.ol3d.setBlockCesiumRendering(true);\n    this.stoppedRendering = true;\n  }\n\n  Cesium.Matrix4.clone(camera.viewMatrix, this.lastCameraViewMatrix_);\n};\n\n\n/**\n * Restart render loop.\n * Force a restart of the render loop.\n * @api\n */\nexports.prototype.restartRenderLoop = function() {\n  this.notifyRepaintRequired();\n};\n\n\n/**\n * Notifies the viewer that a repaint is required.\n */\nexports.prototype.notifyRepaintRequired = function() {\n  if (this.verboseRendering && this.stoppedRendering) {\n    console.log(`starting rendering @ ${Date.now()}`);\n  }\n  this.lastCameraMoveTime_ = Date.now();\n  // TODO: do not unblock if not blocked by us\n  this.ol3d.setBlockCesiumRendering(false);\n  this.stoppedRendering = false;\n};\n\n\n/**\n * @param {boolean} debug\n * @api\n */\nexports.prototype.setDebug = function(debug) {\n  this.verboseRendering = debug;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/AutoRenderLoop.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport googAsserts from 'goog/asserts';\nimport olObservable from 'ol/Observable';\nimport olEvents from 'ol/events';\nimport olMath from 'ol/math';\nimport olProj from 'ol/proj';\nimport olcsCore from './core.js';\n\nconst exports = function(scene, map) {\n  /**\n   * @type {!Cesium.Scene}\n   * @private\n   */\n  this.scene_ = scene;\n\n  /**\n   * @type {!Cesium.Camera}\n   * @private\n   */\n  this.cam_ = scene.camera;\n\n  /**\n   * @type {!ol.Map}\n   * @private\n   */\n  this.map_ = map;\n\n  /**\n   * @type {?ol.View}\n   * @private\n   */\n  this.view_ = null;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.viewListenKey_ = null;\n\n  /**\n   * @type {!ol.TransformFunction}\n   * @private\n   */\n  this.toLonLat_ = exports.identityProjection;\n\n  /**\n   * @type {!ol.TransformFunction}\n   * @private\n   */\n  this.fromLonLat_ = exports.identityProjection;\n\n  /**\n   * 0 -- topdown, PI/2 -- the horizon\n   * @type {number}\n   * @private\n   */\n  this.tilt_ = 0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.distance_ = 0;\n\n  /**\n   * @type {?Cesium.Matrix4}\n   * @private\n   */\n  this.lastCameraViewMatrix_ = null;\n\n  /**\n   * This is used to discard change events on view caused by updateView method.\n   * @type {boolean}\n   * @private\n   */\n  this.viewUpdateInProgress_ = false;\n\n  this.map_.on('change:view', function(e) {\n    this.setView_(this.map_.getView());\n  }, this);\n  this.setView_(this.map_.getView());\n};\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Input coordinate array (same array as input).\n */\nexports.identityProjection = function(input, opt_output, opt_dimension) {\n  const dim = opt_dimension || input.length;\n  if (opt_output) {\n    for (let i = 0; i < dim; ++i) {\n      opt_output[i] = input[i];\n    }\n  }\n  return input;\n};\n\n\n/**\n * @param {?ol.View} view New view to use.\n * @private\n */\nexports.prototype.setView_ = function(view) {\n  if (this.view_) {\n    olObservable.unByKey(this.viewListenKey_);\n    this.viewListenKey_ = null;\n  }\n\n  this.view_ = view;\n  if (view) {\n    const toLonLat = olProj.getTransform(view.getProjection(), 'EPSG:4326');\n    const fromLonLat = olProj.getTransform('EPSG:4326', view.getProjection());\n    googAsserts.assert(toLonLat && fromLonLat);\n\n    this.toLonLat_ = toLonLat;\n    this.fromLonLat_ = fromLonLat;\n\n    this.viewListenKey_ = olEvents.listen(view, 'propertychange',\n        this.handleViewEvent_, this);\n\n    this.readFromView();\n  } else {\n    this.toLonLat_ = exports.identityProjection;\n    this.fromLonLat_ = exports.identityProjection;\n  }\n};\n\n\n/**\n * @param {?} e\n * @private\n */\nexports.prototype.handleViewEvent_ = function(e) {\n  if (!this.viewUpdateInProgress_) {\n    this.readFromView();\n  }\n};\n\n\n/**\n * @param {number} heading In radians.\n * @api\n */\nexports.prototype.setHeading = function(heading) {\n  if (!this.view_) {\n    return;\n  }\n\n  this.view_.setRotation(heading);\n};\n\n\n/**\n * @return {number|undefined} Heading in radians.\n * @api\n */\nexports.prototype.getHeading = function() {\n  if (!this.view_) {\n    return undefined;\n  }\n  const rotation = this.view_.getRotation();\n  return rotation || 0;\n};\n\n\n/**\n * @param {number} tilt In radians.\n * @api\n */\nexports.prototype.setTilt = function(tilt) {\n  this.tilt_ = tilt;\n  this.updateCamera_();\n};\n\n\n/**\n * @return {number} Tilt in radians.\n * @api\n */\nexports.prototype.getTilt = function() {\n  return this.tilt_;\n};\n\n\n/**\n * @param {number} distance In meters.\n * @api\n */\nexports.prototype.setDistance = function(distance) {\n  this.distance_ = distance;\n  this.updateCamera_();\n  this.updateView();\n};\n\n\n/**\n * @return {number} Distance in meters.\n * @api\n */\nexports.prototype.getDistance = function() {\n  return this.distance_;\n};\n\n\n/**\n * Shortcut for ol.View.setCenter().\n * @param {!ol.Coordinate} center Same projection as the ol.View.\n * @api\n */\nexports.prototype.setCenter = function(center) {\n  if (!this.view_) {\n    return;\n  }\n  this.view_.setCenter(center);\n};\n\n\n/**\n * Shortcut for ol.View.getCenter().\n * @return {ol.Coordinate|undefined} Same projection as the ol.View.\n * @api\n */\nexports.prototype.getCenter = function() {\n  if (!this.view_) {\n    return undefined;\n  }\n  return this.view_.getCenter();\n};\n\n\n/**\n * Sets the position of the camera.\n * @param {!ol.Coordinate} position Same projection as the ol.View.\n * @api\n */\nexports.prototype.setPosition = function(position) {\n  if (!this.toLonLat_) {\n    return;\n  }\n  const ll = this.toLonLat_(position);\n  googAsserts.assert(ll);\n\n  const carto = new Cesium.Cartographic(\n      olMath.toRadians(ll[0]),\n      olMath.toRadians(ll[1]),\n      this.getAltitude());\n\n  this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n  this.updateView();\n};\n\n\n/**\n * Calculates position under the camera.\n * @return {!ol.Coordinate|undefined} Same projection as the ol.View.\n * @api\n */\nexports.prototype.getPosition = function() {\n  if (!this.fromLonLat_) {\n    return undefined;\n  }\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);\n\n  const pos = this.fromLonLat_([\n    olMath.toDegrees(carto.longitude),\n    olMath.toDegrees(carto.latitude)\n  ]);\n  googAsserts.assert(pos);\n  return pos;\n};\n\n\n/**\n * @param {number} altitude In meters.\n * @api\n */\nexports.prototype.setAltitude = function(altitude) {\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n      this.cam_.position);\n  carto.height = altitude;\n  this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n  this.updateView();\n};\n\n\n/**\n * @return {number} Altitude in meters.\n * @api\n */\nexports.prototype.getAltitude = function() {\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n      this.cam_.position);\n\n  return carto.height;\n};\n\n\n/**\n * Rotates the camera to point at the specified target.\n * @param {!ol.Coordinate} position Same projection as the ol.View.\n * @api\n */\nexports.prototype.lookAt = function(position) {\n  if (!this.toLonLat_) {\n    return;\n  }\n  const ll = this.toLonLat_(position);\n  googAsserts.assert(ll);\n\n  const carto = Cesium.Cartographic.fromDegrees(ll[0], ll[1]);\n  olcsCore.lookAt(this.cam_, carto, this.scene_.globe);\n\n  this.updateView();\n};\n\n\n/**\n * Updates the state of the underlying Cesium.Camera\n * according to the current values of the properties.\n * @private\n */\nexports.prototype.updateCamera_ = function() {\n  if (!this.view_ || !this.toLonLat_) {\n    return;\n  }\n  const center = this.view_.getCenter();\n  if (!center) {\n    return;\n  }\n  const ll = this.toLonLat_(center);\n  googAsserts.assert(ll);\n\n  const carto = new Cesium.Cartographic(olMath.toRadians(ll[0]),\n      olMath.toRadians(ll[1]));\n  if (this.scene_.globe) {\n    const height = this.scene_.globe.getHeight(carto);\n    carto.height = height || 0;\n  }\n\n  const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n  /** @type {Cesium.optionsOrientation} */\n  const orientation = {\n    pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,\n    heading: -this.view_.getRotation(),\n    roll: undefined\n  };\n  this.cam_.setView({\n    destination,\n    orientation\n  });\n\n  this.cam_.moveBackward(this.distance_);\n\n  this.checkCameraChange(true);\n};\n\n\n/**\n * Calculates the values of the properties from the current ol.View state.\n * @api\n */\nexports.prototype.readFromView = function() {\n  if (!this.view_ || !this.toLonLat_) {\n    return;\n  }\n  const center = this.view_.getCenter();\n  if (center === undefined || center === null) {\n    return;\n  }\n  const ll = this.toLonLat_(center);\n  googAsserts.assert(ll);\n\n  const resolution = this.view_.getResolution();\n  this.distance_ = this.calcDistanceForResolution(\n      resolution || 0, olMath.toRadians(ll[1]));\n\n  this.updateCamera_();\n};\n\n\n/**\n * Calculates the values of the properties from the current Cesium.Camera state.\n * Modifies the center, resolution and rotation properties of the view.\n * @api\n */\nexports.prototype.updateView = function() {\n  if (!this.view_ || !this.fromLonLat_) {\n    return;\n  }\n  this.viewUpdateInProgress_ = true;\n\n  // target & distance\n  const ellipsoid = Cesium.Ellipsoid.WGS84;\n  const scene = this.scene_;\n  const target = olcsCore.pickCenterPoint(scene);\n\n  let bestTarget = target;\n  if (!bestTarget) {\n    //TODO: how to handle this properly ?\n    const globe = scene.globe;\n    const carto = this.cam_.positionCartographic.clone();\n    const height = globe.getHeight(carto);\n    carto.height = height || 0;\n    bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n  }\n  this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);\n  const bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);\n  this.view_.setCenter(this.fromLonLat_([\n    olMath.toDegrees(bestTargetCartographic.longitude),\n    olMath.toDegrees(bestTargetCartographic.latitude)]));\n\n  // resolution\n  this.view_.setResolution(\n      this.calcResolutionForDistance(this.distance_,\n          bestTargetCartographic ? bestTargetCartographic.latitude : 0));\n\n\n  /*\n   * Since we are positioning the target, the values of heading and tilt\n   * need to be calculated _at the target_.\n   */\n  if (target) {\n    const pos = this.cam_.position;\n\n    // normal to the ellipsoid at the target\n    const targetNormal = new Cesium.Cartesian3();\n    ellipsoid.geocentricSurfaceNormal(target, targetNormal);\n\n    // vector from the target to the camera\n    const targetToCamera = new Cesium.Cartesian3();\n    Cesium.Cartesian3.subtract(pos, target, targetToCamera);\n    Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);\n\n\n    // HEADING\n    const up = this.cam_.up;\n    const right = this.cam_.right;\n    const normal = new Cesium.Cartesian3(-target.y, target.x, 0); // what is it?\n    const heading = Cesium.Cartesian3.angleBetween(right, normal);\n    const cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());\n    const orientation = cross.z;\n\n    this.view_.setRotation((orientation < 0 ? heading : -heading));\n\n    // TILT\n    const tiltAngle = Math.acos(\n        Cesium.Cartesian3.dot(targetNormal, targetToCamera));\n    this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;\n  } else {\n    // fallback when there is no target\n    this.view_.setRotation(this.cam_.heading);\n    this.tilt_ = -this.cam_.pitch + Math.PI / 2;\n  }\n\n  this.viewUpdateInProgress_ = false;\n};\n\n\n/**\n * Check if the underlying camera state has changed and ensure synchronization.\n * @param {boolean=} opt_dontSync Do not synchronize the view.\n */\nexports.prototype.checkCameraChange = function(opt_dontSync) {\n  const old = this.lastCameraViewMatrix_;\n  const current = this.cam_.viewMatrix;\n\n  if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {\n    this.lastCameraViewMatrix_ = current.clone();\n    if (opt_dontSync !== true) {\n      this.updateView();\n    }\n  }\n};\n\n\n/**\n * calculate the distance between camera and centerpoint based on the resolution and latitude value\n * @param {number} resolution Number of map units per pixel.\n * @param {number} latitude Latitude in radians.\n * @return {number} The calculated distance.\n * @api\n */\nexports.prototype.calcDistanceForResolution = function(resolution, latitude) {\n  const canvas = this.scene_.canvas;\n  const fovy = this.cam_.frustum.fovy; // vertical field of view\n  googAsserts.assert(!isNaN(fovy));\n  const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n  // number of \"map units\" visible in 2D (vertically)\n  const visibleMapUnits = resolution * canvas.clientHeight;\n\n  // The metersPerUnit does not take latitude into account, but it should\n  // be lower with increasing latitude -- we have to compensate.\n  // In 3D it is not possible to maintain the resolution at more than one point,\n  // so it only makes sense to use the latitude of the \"target\" point.\n  const relativeCircumference = Math.cos(Math.abs(latitude));\n\n  // how many meters should be visible in 3D\n  const visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;\n\n  // distance required to view the calculated length in meters\n  //\n  //  fovy/2\n  //    |\\\n  //  x | \\\n  //    |--\\\n  // visibleMeters/2\n  const requiredDistance = (visibleMeters / 2) / Math.tan(fovy / 2);\n\n  // NOTE: This calculation is not absolutely precise, because metersPerUnit\n  // is a great simplification. It does not take ellipsoid/terrain into account.\n\n  return requiredDistance;\n};\n\n\n/**\n * calculate the resolution based on a distance(camera to position) and latitude value\n * @param {number} distance\n * @param {number} latitude\n * @return {number} The calculated resolution.\n * @api\n */\nexports.prototype.calcResolutionForDistance = function(distance, latitude) {\n  // See the reverse calculation (calcDistanceForResolution) for details\n  const canvas = this.scene_.canvas;\n  const fovy = this.cam_.frustum.fovy;\n  const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n  const visibleMeters = 2 * distance * Math.tan(fovy / 2);\n  const relativeCircumference = Math.cos(Math.abs(latitude));\n  const visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;\n  const resolution = visibleMapUnits / canvas.clientHeight;\n\n  return resolution;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/Camera.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olObservable from 'ol/Observable';\nimport olEvents from 'ol/events';\nimport olLayerGroup from 'ol/layer/Group';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!ol.Map}\n   * @protected\n   */\n  this.map = map;\n\n  /**\n   * @type {ol.View}\n   * @protected\n   */\n  this.view = map.getView();\n\n  /**\n   * @type {!Cesium.Scene}\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * @type {ol.Collection.<ol.layer.Base>}\n   * @protected\n   */\n  this.olLayers = map.getLayerGroup().getLayers();\n\n  /**\n   * @type {ol.layer.Group}\n   */\n  this.mapLayerGroup = map.getLayerGroup();\n\n  /**\n   * Map of OpenLayers layer ids (from ol.getUid) to the Cesium ImageryLayers.\n   * Null value means, that we are unable to create equivalent layers.\n   * @type {Object.<string, ?Array.<T>>}\n   * @protected\n   */\n  this.layerMap = {};\n\n  /**\n   * Map of listen keys for OpenLayers layer layers ids (from ol.getUid).\n   * @type {!Object.<string, Array<ol.EventsKey>>}\n   * @protected\n   */\n  this.olLayerListenKeys = {};\n\n  /**\n   * Map of listen keys for OpenLayers layer groups ids (from ol.getUid).\n   * @type {!Object.<string, !Array.<ol.EventsKey>>}\n   * @private\n   */\n  this.olGroupListenKeys_ = {};\n};\n\n\n/**\n * Destroy all and perform complete synchronization of the layers.\n * @api\n */\nexports.prototype.synchronize = function() {\n  this.destroyAll();\n  this.addLayers_(this.mapLayerGroup);\n};\n\n\n/**\n * Order counterparts using the same algorithm as the Openlayers renderer:\n * z-index then original sequence order.\n * @protected\n */\nexports.prototype.orderLayers = function() {\n  // Ordering logics is handled in subclasses.\n};\n\n\n/**\n * Add a layer hierarchy.\n * @param {ol.layer.Base} root\n * @private\n */\nexports.prototype.addLayers_ = function(root) {\n  /** @type {Array<olcsx.LayerWithParents>} */\n  const fifo = [{\n    layer: root,\n    parents: []\n  }];\n  while (fifo.length > 0) {\n    const olLayerWithParents = fifo.splice(0, 1)[0];\n    const olLayer = olLayerWithParents.layer;\n    const olLayerId = olBase.getUid(olLayer).toString();\n    this.olLayerListenKeys[olLayerId] = [];\n    googAsserts.assert(!this.layerMap[olLayerId]);\n\n    let cesiumObjects = null;\n    if (olLayer instanceof olLayerGroup) {\n      this.listenForGroupChanges_(olLayer);\n      if (olLayer !== this.mapLayerGroup) {\n        cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n      }\n      if (!cesiumObjects) {\n        olLayer.getLayers().forEach((l) => {\n          if (l) {\n            const newOlLayerWithParents = {\n              layer: l,\n              parents: olLayer === this.mapLayerGroup ?\n                [] :\n                [olLayerWithParents.layer].concat(olLayerWithParents.parents)\n            };\n            fifo.push(newOlLayerWithParents);\n          }\n        });\n      }\n    } else {\n      cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n    }\n    // add Cesium layers\n    if (cesiumObjects) {\n      this.layerMap[olLayerId] = cesiumObjects;\n      this.olLayerListenKeys[olLayerId].push(olEvents.listen(olLayer, 'change:zIndex', this.orderLayers, this));\n      cesiumObjects.forEach(function(cesiumObject) {\n        this.addCesiumObject(cesiumObject);\n      }, this);\n    }\n  }\n\n  this.orderLayers();\n};\n\n\n/**\n * Remove and destroy a single layer.\n * @param {ol.layer.Layer} layer\n * @return {boolean} counterpart destroyed\n * @private\n */\nexports.prototype.removeAndDestroySingleLayer_ = function(layer) {\n  const uid = olBase.getUid(layer).toString();\n  const counterparts = this.layerMap[uid];\n  if (!!counterparts) {\n    counterparts.forEach(function(counterpart) {\n      this.removeSingleCesiumObject(counterpart, false);\n      this.destroyCesiumObject(counterpart);\n    }, this);\n    this.olLayerListenKeys[uid].forEach(olObservable.unByKey);\n    delete this.olLayerListenKeys[uid];\n  }\n  delete this.layerMap[uid];\n  return !!counterparts;\n};\n\n\n/**\n * Unlisten a single layer group.\n * @param {ol.layer.Group} group\n * @private\n */\nexports.prototype.unlistenSingleGroup_ = function(group) {\n  if (group === this.mapLayerGroup) {\n    return;\n  }\n  const uid = olBase.getUid(group).toString();\n  const keys = this.olGroupListenKeys_[uid];\n  keys.forEach((key) => {\n    olObservable.unByKey(key);\n  });\n  delete this.olGroupListenKeys_[uid];\n  delete this.layerMap[uid];\n};\n\n\n/**\n * Remove layer hierarchy.\n * @param {ol.layer.Base} root\n * @private\n */\nexports.prototype.removeLayer_ = function(root) {\n  if (!!root) {\n    const fifo = [root];\n    while (fifo.length > 0) {\n      const olLayer = fifo.splice(0, 1)[0];\n      const done = this.removeAndDestroySingleLayer_(olLayer);\n      if (olLayer instanceof olLayerGroup) {\n        this.unlistenSingleGroup_(olLayer);\n        if (!done) {\n          // No counterpart for the group itself so removing\n          // each of the child layers.\n          olLayer.getLayers().forEach((l) => {\n            fifo.push(l);\n          });\n        }\n      }\n    }\n  }\n};\n\n\n/**\n * Register listeners for single layer group change.\n * @param {ol.layer.Group} group\n * @private\n */\nexports.prototype.listenForGroupChanges_ = function(group) {\n  const uuid = olBase.getUid(group).toString();\n\n  googAsserts.assert(this.olGroupListenKeys_[uuid] === undefined);\n\n  const listenKeyArray = [];\n  this.olGroupListenKeys_[uuid] = listenKeyArray;\n\n  // only the keys that need to be relistened when collection changes\n  let contentKeys = [];\n  const listenAddRemove = (function() {\n    const collection = group.getLayers();\n    if (collection) {\n      contentKeys = [\n        collection.on('add', function(event) {\n          this.addLayers_(event.element);\n        }, this),\n        collection.on('remove', function(event) {\n          this.removeLayer_(event.element);\n        }, this)\n      ];\n      listenKeyArray.push(...contentKeys);\n    }\n  }).bind(this);\n\n  listenAddRemove();\n\n  listenKeyArray.push(group.on('change:layers', (e) => {\n    contentKeys.forEach((el) => {\n      const i = listenKeyArray.indexOf(el);\n      if (i >= 0) {\n        listenKeyArray.splice(i, 1);\n      }\n      olObservable.unByKey(el);\n    });\n    listenAddRemove();\n  }));\n};\n\n\n/**\n * Destroys all the created Cesium objects.\n * @protected\n */\nexports.prototype.destroyAll = function() {\n  this.removeAllCesiumObjects(true); // destroy\n  let objKey;\n  for (objKey in this.olGroupListenKeys_) {\n    const keys = this.olGroupListenKeys_[objKey];\n    keys.forEach(olObservable.unByKey);\n  }\n  for (objKey in this.olLayerListenKeys) {\n    this.olLayerListenKeys[objKey].forEach(olObservable.unByKey);\n  }\n  this.olGroupListenKeys_ = {};\n  this.olLayerListenKeys = {};\n  this.layerMap = {};\n};\n\n\n/**\n * Adds a single Cesium object to the collection.\n * @param {!T} object\n * @abstract\n * @protected\n */\nexports.prototype.addCesiumObject = function(object) {};\n\n\n/**\n * @param {!T} object\n * @abstract\n * @protected\n */\nexports.prototype.destroyCesiumObject = function(object) {};\n\n\n/**\n * Remove single Cesium object from the collection.\n * @param {!T} object\n * @param {boolean} destroy\n * @abstract\n * @protected\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {};\n\n\n/**\n * Remove all Cesium objects from the collection.\n * @param {boolean} destroy\n * @abstract\n * @protected\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {};\n\n\n/**\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @return {?Array.<T>}\n * @abstract\n * @protected\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/AbstractSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olLayerGroup from 'ol/layer/Group';\nimport googAsserts from 'goog/asserts';\nimport olArray from 'ol/array';\nimport olBase from 'ol';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsCore from './core.js';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!Cesium.ImageryLayerCollection}\n   * @private\n   */\n  this.cesiumLayers_ = scene.imageryLayers;\n\n  /**\n   * @type {!Cesium.ImageryLayerCollection}\n   * @private\n   */\n  this.ourLayers_ = new Cesium.ImageryLayerCollection();\n\n  olcsAbstractSynchronizer.call(this, map, scene);\n};\n\nolBase.inherits(exports, olcsAbstractSynchronizer);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.addCesiumObject = function(object) {\n  this.cesiumLayers_.add(object);\n  this.ourLayers_.add(object);\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.destroyCesiumObject = function(object) {\n  object.destroy();\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {\n  this.cesiumLayers_.remove(object, destroy);\n  this.ourLayers_.remove(object, false);\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {\n  for (let i = 0; i < this.ourLayers_.length; ++i) {\n    this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);\n  }\n  this.ourLayers_.removeAll(false);\n};\n\n\n/**\n * Creates an array of Cesium.ImageryLayer.\n * May be overriden by child classes to implement custom behavior.\n * The default implementation handles tiled imageries in EPSG:4326 or\n * EPSG:3859.\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Array.<!Cesium.ImageryLayer>} array or null if not possible\n * (or supported)\n * @protected\n */\nexports.prototype.convertLayerToCesiumImageries = function(olLayer, viewProj) {\n  const result = olcsCore.tileLayerToImageryLayer(olLayer, viewProj);\n  return result ? [result] : null;\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {\n  const olLayer = olLayerWithParents.layer;\n  const uid = olBase.getUid(olLayer).toString();\n  const viewProj = this.view.getProjection();\n  googAsserts.assert(viewProj);\n  const cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);\n  if (cesiumObjects) {\n    const listenKeyArray = [];\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n      listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], () => {\n        // the compiler does not seem to be able to infer this\n        googAsserts.assert(cesiumObjects);\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n        }\n      }));\n    });\n\n    for (let i = 0; i < cesiumObjects.length; ++i) {\n      olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n    }\n\n    // there is no way to modify Cesium layer extent,\n    // we have to recreate when OpenLayers layer extent changes:\n    listenKeyArray.push(olLayer.on('change:extent', function(e) {\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        this.cesiumLayers_.remove(cesiumObjects[i], true); // destroy\n        this.ourLayers_.remove(cesiumObjects[i], false);\n      }\n      delete this.layerMap[olBase.getUid(olLayer)]; // invalidate the map entry\n      this.synchronize();\n    }, this));\n\n    listenKeyArray.push(olLayer.on('change', function(e) {\n      // when the source changes, re-add the layer to force update\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        const position = this.cesiumLayers_.indexOf(cesiumObjects[i]);\n        if (position >= 0) {\n          this.cesiumLayers_.remove(cesiumObjects[i], false);\n          this.cesiumLayers_.add(cesiumObjects[i], position);\n        }\n      }\n    }, this));\n\n    this.olLayerListenKeys[uid].push(...listenKeyArray);\n  }\n\n  return Array.isArray(cesiumObjects) ? cesiumObjects : null;\n};\n\n\n/**\n * Order counterparts using the same algorithm as the Openlayers renderer:\n * z-index then original sequence order.\n * @override\n * @protected\n */\nexports.prototype.orderLayers = function() {\n  const layers = [];\n  const zIndices = {};\n  const queue = [this.mapLayerGroup];\n\n  while (queue.length > 0) {\n    const olLayer = queue.splice(0, 1)[0];\n    layers.push(olLayer);\n    zIndices[olBase.getUid(olLayer)] = olLayer.getZIndex();\n\n    if (olLayer instanceof olLayerGroup) {\n      const sublayers = olLayer.getLayers();\n      if (sublayers) {\n        // Prepend queue with sublayers in order\n        queue.unshift(...sublayers.getArray());\n      }\n    }\n  }\n\n  olArray.stableSort(layers, (layer1, layer2) =>\n    zIndices[olBase.getUid(layer1)] - zIndices[olBase.getUid(layer2)]\n  );\n\n  layers.forEach(function(olLayer) {\n    const olLayerId = olBase.getUid(olLayer).toString();\n    const cesiumObjects = this.layerMap[olLayerId];\n    if (cesiumObjects) {\n      cesiumObjects.forEach(this.raiseToTop, this);\n    }\n  }, this);\n};\n\n\n/**\n * @param {Cesium.ImageryLayer} counterpart\n */\nexports.prototype.raiseToTop = function(counterpart) {\n  this.cesiumLayers_.raiseToTop(counterpart);\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/RasterSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid, inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport _ol_coordinate_ from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from '../source/Vector.js';\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n *\n * @constructor\n * @param {olx.source.ClusterOptions} options Constructor options.\n * @extends {ol.source.Vector}\n * @api\n */\nconst Cluster = function(options) {\n  VectorSource.call(this, {\n    attributions: options.attributions,\n    extent: options.extent,\n    projection: options.projection,\n    wrapX: options.wrapX\n  });\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.resolution = undefined;\n\n  /**\n   * @type {number}\n   * @protected\n   */\n  this.distance = options.distance !== undefined ? options.distance : 20;\n\n  /**\n   * @type {Array.<ol.Feature>}\n   * @protected\n   */\n  this.features = [];\n\n  /**\n   * @param {ol.Feature} feature Feature.\n   * @return {ol.geom.Point} Cluster calculation point.\n   * @protected\n   */\n  this.geometryFunction = options.geometryFunction || function(feature) {\n    const geometry = /** @type {ol.geom.Point} */ (feature.getGeometry());\n    assert(geometry instanceof Point,\n      10); // The default `geometryFunction` can only handle `ol.geom.Point` geometries\n    return geometry;\n  };\n\n  /**\n   * @type {ol.source.Vector}\n   * @protected\n   */\n  this.source = options.source;\n\n  this.source.on(EventType.CHANGE,\n    Cluster.prototype.refresh, this);\n};\n\ninherits(Cluster, VectorSource);\n\n\n/**\n * Get the distance in pixels between clusters.\n * @return {number} Distance.\n * @api\n */\nCluster.prototype.getDistance = function() {\n  return this.distance;\n};\n\n\n/**\n * Get a reference to the wrapped source.\n * @return {ol.source.Vector} Source.\n * @api\n */\nCluster.prototype.getSource = function() {\n  return this.source;\n};\n\n\n/**\n * @inheritDoc\n */\nCluster.prototype.loadFeatures = function(extent, resolution,\n  projection) {\n  this.source.loadFeatures(extent, resolution, projection);\n  if (resolution !== this.resolution) {\n    this.clear();\n    this.resolution = resolution;\n    this.cluster();\n    this.addFeatures(this.features);\n  }\n};\n\n\n/**\n * Set the distance in pixels between clusters.\n * @param {number} distance The distance in pixels.\n * @api\n */\nCluster.prototype.setDistance = function(distance) {\n  this.distance = distance;\n  this.refresh();\n};\n\n\n/**\n * handle the source changing\n * @override\n */\nCluster.prototype.refresh = function() {\n  this.clear();\n  this.cluster();\n  this.addFeatures(this.features);\n  VectorSource.prototype.refresh.call(this);\n};\n\n\n/**\n * @protected\n */\nCluster.prototype.cluster = function() {\n  if (this.resolution === undefined) {\n    return;\n  }\n  this.features.length = 0;\n  const extent = createEmpty();\n  const mapDistance = this.distance * this.resolution;\n  const features = this.source.getFeatures();\n\n  /**\n   * @type {!Object.<string, boolean>}\n   */\n  const clustered = {};\n\n  for (let i = 0, ii = features.length; i < ii; i++) {\n    const feature = features[i];\n    if (!(getUid(feature).toString() in clustered)) {\n      const geometry = this.geometryFunction(feature);\n      if (geometry) {\n        const coordinates = geometry.getCoordinates();\n        createOrUpdateFromCoordinate(coordinates, extent);\n        buffer(extent, mapDistance, extent);\n\n        let neighbors = this.source.getFeaturesInExtent(extent);\n        neighbors = neighbors.filter(function(neighbor) {\n          const uid = getUid(neighbor).toString();\n          if (!(uid in clustered)) {\n            clustered[uid] = true;\n            return true;\n          } else {\n            return false;\n          }\n        });\n        this.features.push(this.createCluster(neighbors));\n      }\n    }\n  }\n};\n\n\n/**\n * @param {Array.<ol.Feature>} features Features\n * @return {ol.Feature} The cluster feature.\n * @protected\n */\nCluster.prototype.createCluster = function(features) {\n  const centroid = [0, 0];\n  for (let i = features.length - 1; i >= 0; --i) {\n    const geometry = this.geometryFunction(features[i]);\n    if (geometry) {\n      _ol_coordinate_.add(centroid, geometry.getCoordinates());\n    } else {\n      features.splice(i, 1);\n    }\n  }\n  _ol_coordinate_.scale(centroid, 1 / features.length);\n\n  const cluster = new Feature(new Point(centroid));\n  cluster.set('features', features);\n  return cluster;\n};\nexport default Cluster;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/Cluster.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olObservable from 'ol/Observable';\n\nconst exports = function(layerProjection, scene) {\n  const billboards = new Cesium.BillboardCollection({scene});\n  const primitives = new Cesium.PrimitiveCollection();\n\n  /**\n   * @type {!Array.<ol.EventsKey>}\n   */\n  this.olListenKeys = [];\n\n  this.rootCollection_ = new Cesium.PrimitiveCollection();\n  /**\n   * @type {!olcsx.core.OlFeatureToCesiumContext}\n   */\n  this.context = {\n    projection: layerProjection,\n    billboards,\n    featureToCesiumMap: {},\n    primitives\n  };\n\n  this.rootCollection_.add(billboards);\n  this.rootCollection_.add(primitives);\n};\n\n\n/**\n * Unlisten.\n */\nexports.prototype.destroy = function() {\n  this.olListenKeys.forEach(olObservable.unByKey);\n  this.olListenKeys.length = 0;\n};\n\n\n/**\n * @return {!Cesium.Primitive}\n */\nexports.prototype.getRootPrimitive = function() {\n  return this.rootCollection_;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core/VectorLayerCounterpart.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olGeomGeometry from 'ol/geom/Geometry';\nimport olStyleIcon from 'ol/style/Icon';\nimport olSourceVector from 'ol/source/Vector';\nimport olSourceCluster from 'ol/source/Cluster';\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\nimport olExtent from 'ol/extent';\nimport olGeomSimpleGeometry from 'ol/geom/SimpleGeometry';\nimport olcsCore from './core.js';\nimport olcsCoreVectorLayerCounterpart from './core/VectorLayerCounterpart.js';\nimport olcsUtil from './util.js';\n\nconst exports = function(scene) {\n\n  /**\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * Bind once to have a unique function for using as a listener\n   * @type {function(ol.source.Vector.Event)}\n   * @private\n   */\n  this.boundOnRemoveOrClearFeatureListener_ =\n      this.onRemoveOrClearFeature_.bind(this);\n};\n\n\n/**\n * @param {ol.source.Vector.Event} evt\n * @private\n */\nexports.prototype.onRemoveOrClearFeature_ = function(evt) {\n  const source = evt.target;\n  googAsserts.assertInstanceof(source, olSourceVector);\n\n  const cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n  if (cancellers) {\n    const feature = evt.feature;\n    if (feature) {\n      // remove\n      const id = olBase.getUid(feature);\n      const canceller = cancellers[id];\n      if (canceller) {\n        canceller();\n        delete cancellers[id];\n      }\n    } else {\n      // clear\n      for (const key in cancellers) {\n        if (cancellers.hasOwnProperty(key)) {\n          cancellers[key]();\n        }\n      }\n      olcsUtil.obj(source)['olcs_cancellers'] = {};\n    }\n  }\n};\n\n\n/**\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!Cesium.Primitive|Cesium.Label|Cesium.Billboard} primitive\n * @protected\n */\nexports.prototype.setReferenceForPicking = function(layer, feature, primitive) {\n  primitive.olLayer = layer;\n  primitive.olFeature = feature;\n};\n\n\n/**\n * Basics primitive creation using a color attribute.\n * Note that Cesium has 'interior' and outline geometries.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n * @param {!Cesium.Geometry} geometry\n * @param {!Cesium.Color} color\n * @param {number=} opt_lineWidth\n * @return {Cesium.Primitive}\n * @protected\n */\nexports.prototype.createColoredPrimitive = function(layer, feature, olGeometry, geometry, color, opt_lineWidth) {\n  const createInstance = function(geometry, color) {\n    return new Cesium.GeometryInstance({\n      // always update Cesium externs before adding a property\n      geometry,\n      attributes: {\n        color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n      }\n    });\n  };\n\n  const options = {\n    // always update Cesium externs before adding a property\n    flat: true, // work with all geometries\n    renderState: {\n      depthTest: {\n        enabled: true\n      }\n    }\n  };\n\n  if (opt_lineWidth !== undefined) {\n    if (!options.renderState) {\n      options.renderState = {};\n    }\n    options.renderState.lineWidth = opt_lineWidth;\n  }\n\n  const instances = createInstance(geometry, color);\n\n  const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n  let primitive;\n\n  if (heightReference == Cesium.HeightReference.CLAMP_TO_GROUND) {\n    const ctor = instances.geometry.constructor;\n    if (ctor && !ctor['createShadowVolume']) {\n      return null;\n    }\n    primitive = new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: instances\n    });\n  } else {\n    const appearance = new Cesium.PerInstanceColorAppearance(options);\n    primitive = new Cesium.Primitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: instances,\n      appearance\n    });\n  }\n\n  this.setReferenceForPicking(layer, feature, primitive);\n  return primitive;\n};\n\n\n/**\n * Return the fill or stroke color from a plain ol style.\n * @param {!ol.style.Style|ol.style.Text} style\n * @param {boolean} outline\n * @return {!Cesium.Color}\n * @protected\n */\nexports.prototype.extractColorFromOlStyle = function(style, outline) {\n  const fillColor = style.getFill() ? style.getFill().getColor() : null;\n  const strokeColor = style.getStroke() ? style.getStroke().getColor() : null;\n\n  let olColor = 'black';\n  if (strokeColor && outline) {\n    olColor = strokeColor;\n  } else if (fillColor) {\n    olColor = fillColor;\n  }\n\n  return olcsCore.convertColorToCesium(olColor);\n};\n\n\n/**\n * Return the width of stroke from a plain ol style.\n * @param {!ol.style.Style|ol.style.Text} style\n * @return {number}\n * @protected\n */\nexports.prototype.extractLineWidthFromOlStyle = function(style) {\n  // Handling of line width WebGL limitations is handled by Cesium.\n  const width = style.getStroke() ? style.getStroke().getWidth() : undefined;\n  return width !== undefined ? width : 1;\n};\n\n\n/**\n * Create a primitive collection out of two Cesium geometries.\n * Only the OpenLayers style colors will be used.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n * @param {!Cesium.Geometry} fillGeometry\n * @param {!Cesium.Geometry} outlineGeometry\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection}\n * @protected\n */\nexports.prototype.wrapFillAndOutlineGeometries = function(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {\n  const fillColor = this.extractColorFromOlStyle(olStyle, false);\n  const outlineColor = this.extractColorFromOlStyle(olStyle, true);\n\n  const primitives = new Cesium.PrimitiveCollection();\n  if (olStyle.getFill()) {\n    const p1 = this.createColoredPrimitive(layer, feature, olGeometry,\n        fillGeometry, fillColor);\n    googAsserts.assert(!!p1);\n    primitives.add(p1);\n  }\n\n  if (olStyle.getStroke()) {\n    const width = this.extractLineWidthFromOlStyle(olStyle);\n    const p2 = this.createColoredPrimitive(layer, feature, olGeometry,\n        outlineGeometry, outlineColor, width);\n    if (p2) {\n      // Some outline geometries are not supported by Cesium in clamp to ground\n      // mode. These primitives are skipped.\n      primitives.add(p2);\n    }\n  }\n\n  return primitives;\n};\n\n\n// Geometry converters\n/**\n * Create a Cesium primitive if style has a text component.\n * Eventually return a PrimitiveCollection including current primitive.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Style} style\n * @param {!Cesium.Primitive} primitive current primitive\n * @return {!Cesium.PrimitiveCollection}\n * @protected\n */\nexports.prototype.addTextStyle = function(layer, feature, geometry, style, primitive) {\n  let primitives;\n  if (!(primitive instanceof Cesium.PrimitiveCollection)) {\n    primitives = new Cesium.PrimitiveCollection();\n    primitives.add(primitive);\n  } else {\n    primitives = primitive;\n  }\n\n  if (!style.getText()) {\n    return primitives;\n  }\n\n  const text = /** @type {!ol.style.Text} */ (style.getText());\n  const label = this.olGeometry4326TextPartToCesium(layer, feature, geometry,\n      text);\n  if (label) {\n    primitives.add(label);\n  }\n  return primitives;\n};\n\n\n/**\n * Add a billboard to a Cesium.BillboardCollection.\n * Overriding this wrapper allows manipulating the billboard options.\n * @param {!Cesium.BillboardCollection} billboards\n * @param {!Cesium.optionsBillboardCollectionAdd} bbOptions\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Style} style\n * @return {!Cesium.Billboard} newly created billboard\n * @api\n */\nexports.prototype.csAddBillboard = function(billboards, bbOptions, layer, feature, geometry, style) {\n  const bb = billboards.add(bbOptions);\n  this.setReferenceForPicking(layer, feature, bb);\n  return bb;\n};\n\n\n/**\n * Convert an OpenLayers circle geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Circle} olGeometry OpenLayers circle geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olCircleGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'Circle');\n\n  // ol.Coordinate\n  let center = olGeometry.getCenter();\n  const height = center.length == 3 ? center[2] : 0.0;\n  let point = center.slice();\n  point[0] += olGeometry.getRadius();\n\n  // Cesium\n  center = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n  point = olcsCore.ol4326CoordinateToCesiumCartesian(point);\n\n  // Accurate computation of straight distance\n  const radius = Cesium.Cartesian3.distance(center, point);\n\n  const fillGeometry = new Cesium.CircleGeometry({\n    // always update Cesium externs before adding a property\n    center,\n    radius,\n    height\n  });\n\n  const outlineGeometry = new Cesium.CircleOutlineGeometry({\n    // always update Cesium externs before adding a property\n    center,\n    radius,\n    extrudedHeight: height,\n    height\n  });\n\n  const primitives = this.wrapFillAndOutlineGeometries(\n      layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n};\n\n\n/**\n * Convert an OpenLayers line string geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.LineString} olGeometry OpenLayers line string geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olLineStringGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'LineString');\n\n  const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(\n      olGeometry.getCoordinates());\n\n  const appearance = new Cesium.PolylineMaterialAppearance({\n    // always update Cesium externs before adding a property\n    material: this.olStyleToCesium(feature, olStyle, true)\n  });\n\n  const geometryOptions = {\n    // always update Cesium externs before adding a property\n    positions,\n    width: this.extractLineWidthFromOlStyle(olStyle),\n    vertexFormat: appearance.vertexFormat\n  };\n\n  let outlinePrimitive;\n  const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n  if (heightReference == Cesium.HeightReference.CLAMP_TO_GROUND) {\n    const color = this.extractColorFromOlStyle(olStyle, true);\n    outlinePrimitive = new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: new Cesium.GeometryInstance({\n        geometry: new Cesium.CorridorGeometry(geometryOptions),\n        attributes: {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n        }\n      })\n    });\n  } else {\n    outlinePrimitive = new Cesium.Primitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: new Cesium.GeometryInstance({\n        geometry: new Cesium.PolylineGeometry(geometryOptions)\n      }),\n      appearance\n    });\n  }\n\n  this.setReferenceForPicking(layer, feature, outlinePrimitive);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle,\n      outlinePrimitive);\n};\n\n\n/**\n * Convert an OpenLayers polygon geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Polygon} olGeometry OpenLayers polygon geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olPolygonGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'Polygon');\n\n  let fillGeometry, outlineGeometry;\n  if ((olGeometry.getCoordinates()[0].length == 5) &&\n      (feature.getGeometry().get('olcs.polygon_kind') === 'rectangle')) {\n    // Create a rectangle according to the longitude and latitude curves\n    const coordinates = olGeometry.getCoordinates()[0];\n    // Extract the West, South, East, North coordinates\n    const extent = olExtent.boundingExtent(coordinates);\n    const rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1],\n        extent[2], extent[3]);\n\n    // Extract the average height of the vertices\n    let maxHeight = 0.0;\n    if (coordinates[0].length == 3) {\n      for (let c = 0; c < coordinates.length; c++) {\n        maxHeight = Math.max(maxHeight, coordinates[c][2]);\n      }\n    }\n\n    // Render the cartographic rectangle\n    fillGeometry = new Cesium.RectangleGeometry({\n      ellipsoid: Cesium.Ellipsoid.WGS84,\n      rectangle,\n      height: maxHeight\n    });\n\n    outlineGeometry = new Cesium.RectangleOutlineGeometry({\n      ellipsoid: Cesium.Ellipsoid.WGS84,\n      rectangle,\n      height: maxHeight\n    });\n  } else {\n    const rings = olGeometry.getLinearRings();\n    // always update Cesium externs before adding a property\n    const hierarchy = {};\n    const polygonHierarchy = hierarchy;\n    googAsserts.assert(rings.length > 0);\n\n    for (let i = 0; i < rings.length; ++i) {\n      const olPos = rings[i].getCoordinates();\n      const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olPos);\n      googAsserts.assert(positions && positions.length > 0);\n      if (i == 0) {\n        hierarchy.positions = positions;\n      } else {\n        if (!hierarchy.holes) {\n          hierarchy.holes = [];\n        }\n        hierarchy.holes.push({\n          positions\n        });\n      }\n    }\n\n    fillGeometry = new Cesium.PolygonGeometry({\n      // always update Cesium externs before adding a property\n      polygonHierarchy,\n      perPositionHeight: true\n    });\n\n    outlineGeometry = new Cesium.PolygonOutlineGeometry({\n      // always update Cesium externs before adding a property\n      polygonHierarchy: hierarchy,\n      perPositionHeight: true\n    });\n  }\n\n  const primitives = this.wrapFillAndOutlineGeometries(\n      layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n};\n\n\n/**\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @return {!Cesium.HeightReference}\n * @api\n */\nexports.prototype.getHeightReference = function(layer, feature, geometry) {\n\n  // Read from the geometry\n  let altitudeMode = geometry.get('altitudeMode');\n\n  // Or from the feature\n  if (altitudeMode === undefined) {\n    altitudeMode = feature.get('altitudeMode');\n  }\n\n  // Or from the layer\n  if (altitudeMode === undefined) {\n    altitudeMode = layer.get('altitudeMode');\n  }\n\n  let heightReference = Cesium.HeightReference.NONE;\n  if (altitudeMode === 'clampToGround') {\n    heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;\n  } else if (altitudeMode === 'relativeToGround') {\n    heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;\n  }\n\n  return heightReference;\n};\n\n\n/**\n * Convert a point geometry to a Cesium BillboardCollection.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} style\n * @param {!Cesium.BillboardCollection} billboards\n * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n * the new billboard is added.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olPointGeometryToCesium = function(layer, feature, olGeometry, projection, style, billboards,\n    opt_newBillboardCallback) {\n  googAsserts.assert(olGeometry.getType() == 'Point');\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle instanceof olStyleIcon) {\n      // make sure the image is scheduled for load\n      imageStyle.load();\n    }\n\n    const image = imageStyle.getImage(1); // get normal density\n    const isImageLoaded = function(image) {\n      return image.src != '' &&\n          image.naturalHeight != 0 &&\n          image.naturalWidth != 0 &&\n          image.complete;\n    };\n    const reallyCreateBillboard = (function() {\n      if (!image) {\n        return;\n      }\n      if (!(image instanceof HTMLCanvasElement ||\n          image instanceof Image ||\n          image instanceof HTMLImageElement)) {\n        return;\n      }\n      const center = olGeometry.getCoordinates();\n      const position = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n      let color;\n      const opacity = imageStyle.getOpacity();\n      if (opacity !== undefined) {\n        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);\n      }\n\n      const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n      const bbOptions = /** @type {Cesium.optionsBillboardCollectionAdd} */ ({\n        // always update Cesium externs before adding a property\n        image,\n        color,\n        scale: imageStyle.getScale(),\n        heightReference,\n        verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n        position\n      });\n      const bb = this.csAddBillboard(billboards, bbOptions, layer, feature,\n          olGeometry, style);\n      if (opt_newBillboardCallback) {\n        opt_newBillboardCallback(bb);\n      }\n    }).bind(this);\n\n    if (image instanceof Image && !isImageLoaded(image)) {\n      // Cesium requires the image to be loaded\n      let cancelled = false;\n      const source = layer.getSource();\n      const canceller = function() {\n        cancelled = true;\n      };\n      source.on(['removefeature', 'clear'],\n          this.boundOnRemoveOrClearFeatureListener_);\n      let cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n      if (!cancellers) {\n        cancellers = olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n\n      const fuid = olBase.getUid(feature);\n      if (cancellers[fuid]) {\n        // When the feature change quickly, a canceller may still be present so\n        // we cancel it here to prevent creation of a billboard.\n        cancellers[fuid]();\n      }\n      cancellers[fuid] = canceller;\n\n      const listener = function() {\n        if (!billboards.isDestroyed() && !cancelled) {\n          // Create billboard if the feature is still displayed on the map.\n          reallyCreateBillboard();\n        }\n      };\n\n      olEvents.listenOnce(image, 'load', listener);\n    } else {\n      reallyCreateBillboard();\n    }\n  }\n\n  if (style.getText()) {\n    return this.addTextStyle(layer, feature, olGeometry, style,\n        new Cesium.Primitive());\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Convert an OpenLayers multi-something geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry OpenLayers geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @param {!Cesium.BillboardCollection} billboards\n * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n * the new billboard is added.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olMultiGeometryToCesium = function(layer, feature, geometry, projection, olStyle, billboards,\n    opt_newBillboardCallback) {\n  // Do not reproject to 4326 now because it will be done later.\n\n  // FIXME: would be better to combine all child geometries in one primitive\n  // instead we create n primitives for simplicity.\n  const accumulate = function(geometries, functor) {\n    const primitives = new Cesium.PrimitiveCollection();\n    geometries.forEach((geometry) => {\n      primitives.add(functor(layer, feature, geometry, projection, olStyle));\n    });\n    return primitives;\n  };\n\n  let subgeos;\n  switch (geometry.getType()) {\n    case 'MultiPoint':\n      geometry = /** @type {!ol.geom.MultiPoint} */ (geometry);\n      subgeos = geometry.getPoints();\n      if (olStyle.getText()) {\n        const primitives = new Cesium.PrimitiveCollection();\n        subgeos.forEach((geometry) => {\n          googAsserts.assert(geometry);\n          const result = this.olPointGeometryToCesium(layer, feature, geometry,\n              projection, olStyle, billboards, opt_newBillboardCallback);\n          if (result) {\n            primitives.add(result);\n          }\n        });\n        return primitives;\n      } else {\n        subgeos.forEach((geometry) => {\n          googAsserts.assert(geometry);\n          this.olPointGeometryToCesium(layer, feature, geometry, projection,\n              olStyle, billboards, opt_newBillboardCallback);\n        });\n        return null;\n      }\n    case 'MultiLineString':\n      geometry = /** @type {!ol.geom.MultiLineString} */ (geometry);\n      subgeos = geometry.getLineStrings();\n      return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));\n    case 'MultiPolygon':\n      geometry = /** @type {!ol.geom.MultiPolygon} */ (geometry);\n      subgeos = geometry.getPolygons();\n      return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));\n    default:\n      googAsserts.fail(`Unhandled multi geometry type${geometry.getType()}`);\n  }\n};\n\n\n/**\n * Convert an OpenLayers text style to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Text} style\n * @return {Cesium.LabelCollection} Cesium primitive\n * @api\n */\nexports.prototype.olGeometry4326TextPartToCesium = function(layer, feature, geometry, style) {\n  const text = style.getText();\n  googAsserts.assert(text !== undefined);\n\n\n  const labels = new Cesium.LabelCollection({scene: this.scene});\n  // TODO: export and use the text draw position from OpenLayers .\n  // See src/ol/render/vector.js\n  const extentCenter = olExtent.getCenter(geometry.getExtent());\n  if (geometry instanceof olGeomSimpleGeometry) {\n    const first = geometry.getFirstCoordinate();\n    extentCenter[2] = first.length == 3 ? first[2] : 0.0;\n  }\n  const options = /** @type {Cesium.optionsLabelCollection} */ ({});\n\n  options.position = olcsCore.ol4326CoordinateToCesiumCartesian(extentCenter);\n\n  options.text = text;\n\n  options.heightReference = this.getHeightReference(layer, feature, geometry);\n\n  const offsetX = style.getOffsetX();\n  const offsetY = style.getOffsetY();\n  if (offsetX != 0 && offsetY != 0) {\n    const offset = new Cesium.Cartesian2(offsetX, offsetY);\n    options.pixelOffset = offset;\n  }\n\n  const font = style.getFont();\n  if (font !== undefined) {\n    options.font = font;\n  }\n\n  let labelStyle = undefined;\n  if (style.getFill()) {\n    options.fillColor = this.extractColorFromOlStyle(style, false);\n    labelStyle = Cesium.LabelStyle.FILL;\n  }\n  if (style.getStroke()) {\n    options.outlineWidth = this.extractLineWidthFromOlStyle(style);\n    options.outlineColor = this.extractColorFromOlStyle(style, true);\n    labelStyle = Cesium.LabelStyle.OUTLINE;\n  }\n  if (style.getFill() && style.getStroke()) {\n    labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;\n  }\n  options.style = labelStyle;\n\n  let horizontalOrigin;\n  switch (style.getTextAlign()) {\n    case 'left':\n      horizontalOrigin = Cesium.HorizontalOrigin.LEFT;\n      break;\n    case 'right':\n      horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n      break;\n    case 'center':\n    default:\n      horizontalOrigin = Cesium.HorizontalOrigin.CENTER;\n  }\n  options.horizontalOrigin = horizontalOrigin;\n\n  if (style.getTextBaseline()) {\n    let verticalOrigin;\n    switch (style.getTextBaseline()) {\n      case 'top':\n        verticalOrigin = Cesium.VerticalOrigin.TOP;\n        break;\n      case 'middle':\n        verticalOrigin = Cesium.VerticalOrigin.CENTER;\n        break;\n      case 'bottom':\n        verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n        break;\n      case 'alphabetic':\n        verticalOrigin = Cesium.VerticalOrigin.TOP;\n        break;\n      case 'hanging':\n        verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n        break;\n      default:\n        googAsserts.fail(`unhandled baseline ${style.getTextBaseline()}`);\n    }\n    options.verticalOrigin = verticalOrigin;\n  }\n\n\n  const l = labels.add(options);\n  this.setReferenceForPicking(layer, feature, l);\n  return labels;\n};\n\n\n/**\n * Convert an OpenLayers style to a Cesium Material.\n * @param {ol.Feature} feature OpenLayers feature..\n * @param {!ol.style.Style} style\n * @param {boolean} outline\n * @return {Cesium.Material}\n * @api\n */\nexports.prototype.olStyleToCesium = function(feature, style, outline) {\n  const fill = style.getFill();\n  const stroke = style.getStroke();\n  if ((outline && !stroke) || (!outline && !fill)) {\n    return null; // FIXME use a default style? Developer error?\n  }\n\n  let color = outline ? stroke.getColor() : fill.getColor();\n  color = olcsCore.convertColorToCesium(color);\n\n  if (outline && stroke.getLineDash()) {\n    return Cesium.Material.fromType('Stripe', {\n      // always update Cesium externs before adding a property\n      horizontal: false,\n      repeat: 500, // TODO how to calculate this?\n      evenColor: color,\n      oddColor: new Cesium.Color(0, 0, 0, 0) // transparent\n    });\n  } else {\n    return Cesium.Material.fromType('Color', {\n      // always update Cesium externs before adding a property\n      color\n    });\n  }\n\n};\n\n\n/**\n * Compute OpenLayers plain style.\n * Evaluates style function, blend arrays, get default style.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature\n * @param {ol.StyleFunction|undefined} fallbackStyleFunction\n * @param {number} resolution\n * @return {Array.<!ol.style.Style>} null if no style is available\n * @api\n */\nexports.prototype.computePlainStyle = function(layer, feature, fallbackStyleFunction, resolution) {\n  /**\n   * @type {ol.FeatureStyleFunction|undefined}\n   */\n  const featureStyleFunction = feature.getStyleFunction();\n\n  /**\n   * @type {ol.style.Style|Array.<ol.style.Style>}\n   */\n  let style = null;\n\n  if (featureStyleFunction) {\n    style = featureStyleFunction.call(feature, resolution);\n  }\n\n  if (!style && fallbackStyleFunction) {\n    style = fallbackStyleFunction(feature, resolution);\n  }\n\n  if (!style) {\n    // The feature must not be displayed\n    return null;\n  }\n\n  // FIXME combine materials as in cesium-materials-pack?\n  // then this function must return a custom material\n  // More simply, could blend the colors like described in\n  // http://en.wikipedia.org/wiki/Alpha_compositing\n  return Array.isArray(style) ? style : [style];\n};\n\n\n/**\n * @protected\n * @param {!ol.Feature} feature\n * @param {!ol.style.Style} style\n * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n * @return {ol.geom.Geometry|undefined}\n */\nexports.prototype.getGeometryFromFeature = function(feature, style, opt_geom) {\n  if (opt_geom) {\n    return opt_geom;\n  }\n\n  const geom3d = /** @type {!ol.geom.Geometry} */(feature.get('olcs.3d_geometry'));\n  if (geom3d && geom3d instanceof olGeomGeometry) {\n    return geom3d;\n  }\n\n  if (style) {\n    const geomFuncRes = style.getGeometryFunction()(feature);\n    if (geomFuncRes instanceof olGeomGeometry) {\n      return geomFuncRes;\n    }\n  }\n\n  return feature.getGeometry();\n};\n\n\n/**\n * Convert one OpenLayers feature up to a collection of Cesium primitives.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.style.Style} style\n * @param {!olcsx.core.OlFeatureToCesiumContext} context\n * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olFeatureToCesium = function(layer, feature, style, context, opt_geom) {\n  let geom = this.getGeometryFromFeature(feature, style, opt_geom);\n\n  if (!geom) {\n    // OpenLayers features may not have a geometry\n    // See http://geojson.org/geojson-spec.html#feature-objects\n    return null;\n  }\n\n  const proj = context.projection;\n  const newBillboardAddedCallback = function(bb) {\n    context.featureToCesiumMap[olBase.getUid(feature)] = bb;\n  };\n\n  switch (geom.getType()) {\n    case 'GeometryCollection':\n      const primitives = new Cesium.PrimitiveCollection();\n      const collection = /** @type {!ol.geom.GeometryCollection} */ (geom);\n      // TODO: use getGeometriesArray() instead\n      collection.getGeometries().forEach((geom) => {\n        if (geom) {\n          const prims = this.olFeatureToCesium(layer, feature, style, context,\n              geom);\n          if (prims) {\n            primitives.add(prims);\n          }\n        }\n      });\n      return primitives;\n    case 'Point':\n      geom = /** @type {!ol.geom.Point} */ (geom);\n      const bbs = context.billboards;\n      const result = this.olPointGeometryToCesium(layer, feature, geom, proj,\n          style, bbs, newBillboardAddedCallback);\n      if (!result) {\n        // no wrapping primitive\n        return null;\n      } else {\n        return result;\n      }\n    case 'Circle':\n      geom = /** @type {!ol.geom.Circle} */ (geom);\n      return this.olCircleGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'LineString':\n      geom = /** @type {!ol.geom.LineString} */ (geom);\n      return this.olLineStringGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'Polygon':\n      geom = /** @type {!ol.geom.Polygon} */ (geom);\n      return this.olPolygonGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'MultiPoint':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n      const result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj,\n          style, context.billboards, newBillboardAddedCallback);\n      if (!result2) {\n        // no wrapping primitive\n        return null;\n      } else {\n        return result2;\n      }\n    case 'LinearRing':\n      throw new Error('LinearRing should only be part of polygon.');\n    default:\n      throw new Error(`Ol geom type not handled : ${geom.getType()}`);\n  }\n};\n\n\n/**\n * Convert an OpenLayers vector layer to Cesium primitive collection.\n * For each feature, the associated primitive will be stored in\n * `featurePrimitiveMap`.\n * @param {!(ol.layer.Vector|ol.layer.Image)} olLayer\n * @param {!ol.View} olView\n * @param {!Object.<number, !Cesium.Primitive>} featurePrimitiveMap\n * @return {!olcs.core.VectorLayerCounterpart}\n * @api\n */\nexports.prototype.olVectorLayerToCesium = function(olLayer, olView, featurePrimitiveMap) {\n  const proj = olView.getProjection();\n  const resolution = olView.getResolution();\n\n  if (resolution === undefined || !proj) {\n    googAsserts.fail('View not ready');\n    // an assertion is not enough for closure to assume resolution and proj\n    // are defined\n    throw new Error('View not ready');\n  }\n\n  let source = olLayer.getSource();\n  if (source instanceof olSourceCluster) {\n    source = source.getSource();\n  }\n\n  googAsserts.assertInstanceof(source, olSourceVector);\n  const features = source.getFeatures();\n  const counterpart = new olcsCoreVectorLayerCounterpart(proj, this.scene);\n  const context = counterpart.context;\n  for (let i = 0; i < features.length; ++i) {\n    const feature = features[i];\n    if (!feature) {\n      continue;\n    }\n    /**\n     * @type {ol.StyleFunction|undefined}\n     */\n    const layerStyle = olLayer.getStyleFunction();\n    const styles = this.computePlainStyle(olLayer, feature, layerStyle,\n        resolution);\n    if (!styles || !styles.length) {\n      // only 'render' features with a style\n      continue;\n    }\n\n    /**\n     * @type {Cesium.Primitive|null}\n     */\n    let primitives = null;\n    for (let i = 0; i < styles.length; i++) {\n      const prims = this.olFeatureToCesium(olLayer, feature, styles[i], context);\n      if (prims) {\n        if (!primitives) {\n          primitives = prims;\n        } else if (prims) {\n          let i = 0, prim;\n          while ((prim = prims.get(i))) {\n            primitives.add(prim);\n            i++;\n          }\n        }\n      }\n    }\n    if (!primitives) {\n      continue;\n    }\n    featurePrimitiveMap[olBase.getUid(feature)] = primitives;\n    counterpart.getRootPrimitive().add(primitives);\n  }\n\n  return counterpart;\n};\n\n\n/**\n * Convert an OpenLayers feature to Cesium primitive collection.\n * @param {!(ol.layer.Vector|ol.layer.Image)} layer\n * @param {!ol.View} view\n * @param {!ol.Feature} feature\n * @param {!olcsx.core.OlFeatureToCesiumContext} context\n * @return {Cesium.Primitive}\n * @api\n */\nexports.prototype.convert = function(layer, view, feature, context) {\n  const proj = view.getProjection();\n  const resolution = view.getResolution();\n\n  if (resolution == undefined || !proj) {\n    return null;\n  }\n\n  /**\n   * @type {ol.StyleFunction|undefined}\n   */\n  const layerStyle = layer.getStyleFunction();\n\n  const styles = this.computePlainStyle(layer, feature, layerStyle, resolution);\n\n  if (!styles.length) {\n    // only 'render' features with a style\n    return null;\n  }\n\n  context.projection = proj;\n\n  /**\n   * @type {Cesium.Primitive|null}\n   */\n  let primitives = null;\n  for (let i = 0; i < styles.length; i++) {\n    const prims = this.olFeatureToCesium(layer, feature, styles[i], context);\n    if (!primitives) {\n      primitives = prims;\n    } else if (prims) {\n      let i = 0, prim;\n      while ((prim = prims.get(i))) {\n        primitives.add(prim);\n        i++;\n      }\n    }\n  }\n  return primitives;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/FeatureConverter.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olSourceVector from 'ol/source/Vector';\nimport olLayerLayer from 'ol/layer/Layer';\nimport olSourceCluster from 'ol/source/Cluster';\nimport olLayerImage from 'ol/layer/Image';\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\nimport olLayerVector from 'ol/layer/Vector';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsFeatureConverter from './FeatureConverter.js';\n\nconst exports = function(map, scene, opt_converter) {\n\n  /**\n   * @protected\n   */\n  this.converter = opt_converter || new olcsFeatureConverter(scene);\n\n  /**\n   * @private\n   */\n  this.csAllPrimitives_ = new Cesium.PrimitiveCollection();\n  scene.primitives.add(this.csAllPrimitives_);\n  this.csAllPrimitives_.destroyPrimitives = false;\n\n  olcsAbstractSynchronizer.call(this, map, scene);\n};\n\nolBase.inherits(exports, olcsAbstractSynchronizer);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.addCesiumObject = function(counterpart) {\n  googAsserts.assert(counterpart);\n  counterpart.getRootPrimitive()['counterpart'] = counterpart;\n  this.csAllPrimitives_.add(counterpart.getRootPrimitive());\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.destroyCesiumObject = function(object) {\n  object.getRootPrimitive().destroy();\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {\n  object.destroy();\n  this.csAllPrimitives_.destroyPrimitives = destroy;\n  this.csAllPrimitives_.remove(object.getRootPrimitive());\n  this.csAllPrimitives_.destroyPrimitives = false;\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {\n  this.csAllPrimitives_.destroyPrimitives = destroy;\n  if (destroy) {\n    for (let i = 0; i < this.csAllPrimitives_.length; ++i) {\n      this.csAllPrimitives_.get(i)['counterpart'].destroy();\n    }\n  }\n  this.csAllPrimitives_.removeAll();\n  this.csAllPrimitives_.destroyPrimitives = false;\n};\n\n/**\n * Synchronizes the layer visibility properties\n * to the given Cesium Primitive.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.Primitive} csPrimitive\n */\nexports.prototype.updateLayerVisibility = function(olLayerWithParents, csPrimitive) {\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    } else {\n      visible = false;\n    }\n  });\n  csPrimitive.show = visible;\n};\n/**\n * @inheritDoc\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {\n  const olLayer = olLayerWithParents.layer;\n  if (!(olLayer instanceof olLayerVector)) {\n    return null;\n  }\n  googAsserts.assertInstanceof(olLayer, olLayerLayer);\n\n  let source = olLayer.getSource();\n  if (source instanceof olSourceCluster) {\n    source = source.getSource();\n  }\n\n  googAsserts.assertInstanceof(source, olSourceVector);\n  googAsserts.assert(this.view);\n\n  const view = this.view;\n  const featurePrimitiveMap = {};\n  const counterpart = this.converter.olVectorLayerToCesium(olLayer, view,\n      featurePrimitiveMap);\n  const csPrimitives = counterpart.getRootPrimitive();\n  const olListenKeys = counterpart.olListenKeys;\n\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n    olListenKeys.push(olEvents.listen(olLayerItem, 'change:visible', () => {\n      this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n    }));\n  });\n  this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n\n  const onAddFeature = (function(feature) {\n    googAsserts.assert(\n        (olLayer instanceof olLayerVector) ||\n        (olLayer instanceof olLayerImage)\n    );\n    const context = counterpart.context;\n    const prim = this.converter.convert(olLayer, view, feature, context);\n    if (prim) {\n      featurePrimitiveMap[olBase.getUid(feature)] = prim;\n      csPrimitives.add(prim);\n    }\n  }).bind(this);\n\n  const onRemoveFeature = (function(feature) {\n    const geometry = feature.getGeometry();\n    const id = olBase.getUid(feature);\n    if (!geometry || geometry.getType() == 'Point') {\n      const context = counterpart.context;\n      const bb = context.featureToCesiumMap[id];\n      delete context.featureToCesiumMap[id];\n      if (bb instanceof Cesium.Billboard) {\n        context.billboards.remove(bb);\n      }\n    }\n    const csPrimitive = featurePrimitiveMap[id];\n    delete featurePrimitiveMap[id];\n    if (csPrimitive) {\n      csPrimitives.remove(csPrimitive);\n    }\n  }).bind(this);\n\n  olListenKeys.push(olEvents.listen(source, 'addfeature', (e) => {\n    googAsserts.assert(e.feature);\n    onAddFeature(e.feature);\n  }, this));\n\n  olListenKeys.push(olEvents.listen(source, 'removefeature', (e) => {\n    googAsserts.assert(e.feature);\n    onRemoveFeature(e.feature);\n  }, this));\n\n  olListenKeys.push(olEvents.listen(source, 'changefeature', (e) => {\n    const feature = e.feature;\n    googAsserts.assert(feature);\n    onRemoveFeature(feature);\n    onAddFeature(feature);\n  }, this));\n\n  return counterpart ? [counterpart] : null;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/VectorSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olBase from 'ol';\nimport olOverlay from 'ol/Overlay';\nimport olProj from 'ol/proj';\nimport olDom from 'ol/dom';\nimport olObservable from 'ol/Observable';\n\nconst exports = function(options) {\n  /**\n   * @private\n   * @type {?Function}\n   */\n  this.scenePostRenderListenerRemover_ = null;\n\n  /**\n   * @private\n   * @type {!Cesium.Scene}\n   */\n  this.scene_ = options.scene;\n\n  /**\n   * @private\n   * @type {!olcs.OverlaySynchronizer}\n   */\n  this.synchronizer_ = options.synchronizer;\n\n  /**\n   * @private\n   * @type {!ol.Overlay}\n   */\n  this.parent_ = options.parent;\n\n  /**\n   * @private\n   * @type {ol.Coordinate|undefined}\n   */\n  this.positionWGS84_ = undefined;\n\n  /**\n   * @private\n   * @type {MutationObserver}\n   */\n  this.observer_ = new MutationObserver(this.handleElementChanged.bind(this));\n  /**\n   * @private\n   * @type {Array.<MutationObserver>}\n   */\n  this.attributeObserver_ = [];\n\n  /**\n   * @private\n   * @type {Array<ol.EventsKey>}\n   */\n  this.listenerKeys_ = [];\n  // synchronize our Overlay with the parent Overlay\n  this.listenerKeys_.push(this.parent_.on('change:position', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:element', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:offset', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:position', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:positioning', this.setPropertyFromEvent_.bind(this)));\n\n  olOverlay.call(this, this.parent_.getOptions());\n  this.setProperties(this.parent_.getProperties());\n\n  this.handleMapChanged();\n};\n\nolBase.inherits(exports, olOverlay);\n\n/**\n * @param {Node} target\n * @private\n */\nexports.prototype.observeTarget_ = function(target) {\n  this.observer_.disconnect();\n  this.observer_.observe(target, {\n    attributes: false,\n    childList: true,\n    characterData: true,\n    subtree: true\n  });\n  this.attributeObserver_.forEach((observer) => {\n    observer.disconnect();\n  });\n  this.attributeObserver_.length = 0;\n  for (let i = 0; i < target.childNodes.length; i++) {\n    const node = target.childNodes[i];\n    if (node.nodeType === 1) {\n      const observer = new MutationObserver(this.handleElementChanged.bind(this));\n      observer.observe(node, {\n        attributes: true,\n        subtree: true\n      });\n      this.attributeObserver_.push(observer);\n    }\n  }\n};\n\n/**\n *\n * @param {ol.Object.Event} event\n * @private\n */\nexports.prototype.setPropertyFromEvent_ = function(event) {\n  if (event.target && event.key) {\n    this.set(event.key, event.target.get(event.key));\n  }\n};\n/**\n * Get the scene associated with this overlay.\n * @see ol.Overlay.prototype.getMap\n * @return {!Cesium.Scene} The scene that the overlay is part of.\n * @api\n */\nexports.prototype.getScene = function() {\n  return this.scene_;\n};\n\n\n\n/**\n * @override\n */\nexports.prototype.handleMapChanged = function() {\n  if (this.scenePostRenderListenerRemover_) {\n    this.scenePostRenderListenerRemover_();\n    olDom.removeNode(this.element);\n  }\n  this.scenePostRenderListenerRemover_ = null;\n  const scene = this.getScene();\n  if (scene) {\n    this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));\n    this.updatePixelPosition();\n    const container = this.stopEvent ?\n      this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();\n    if (this.insertFirst) {\n      container.insertBefore(this.element, container.childNodes[0] || null);\n    } else {\n      container.appendChild(this.element);\n    }\n  }\n};\n\n/**\n * @override\n */\nexports.prototype.handlePositionChanged = function() {\n  // transform position to WGS84\n  const position = this.getPosition();\n  if (position) {\n    const sourceProjection = this.parent_.getMap().getView().getProjection();\n    this.positionWGS84_ = olProj.transform(position, sourceProjection, 'EPSG:4326');\n  } else {\n    this.positionWGS84_ = undefined;\n  }\n  this.updatePixelPosition();\n};\n\n/**\n * @override\n */\nexports.prototype.handleElementChanged = function() {\n  function cloneNode(node, parent) {\n    const clone = node.cloneNode();\n    if (parent) {\n      parent.appendChild(clone);\n    }\n    if (node.nodeType != Node.TEXT_NODE) {\n      clone.addEventListener('click', (event) => {\n        node.dispatchEvent(new MouseEvent('click', event));\n        event.stopPropagation();\n      });\n    }\n    const nodes = node.childNodes;\n    for (let i = 0; i < nodes.length; i++) {\n      if (!nodes[i]) {\n        continue;\n      }\n      cloneNode(nodes[i], clone);\n    }\n    return clone;\n  }\n  olDom.removeChildren(this.element);\n  const element = this.getElement();\n  if (element) {\n    if (element.parentNode && element.parentNode.childNodes) {\n      for (const node of element.parentNode.childNodes) {\n        const clonedNode = cloneNode(node, null);\n        this.element.appendChild(clonedNode);\n      }\n    }\n  }\n  if (element.parentNode) {\n    // set new Observer\n    this.observeTarget_(element.parentNode);\n  }\n};\n\n\n/**\n * @override\n */\nexports.prototype.updatePixelPosition = function() {\n  const position = this.positionWGS84_;\n  if (!this.scene_ || !position) {\n    this.setVisible(false);\n    return;\n  }\n  let cartesian;\n  if (position.length === 2) {\n    cartesian = Cesium.Cartesian3.fromDegreesArray(position)[0];\n  } else {\n    cartesian = Cesium.Cartesian3.fromDegreesArrayHeights(position)[0];\n  }\n  const camera = this.scene_.camera;\n  const ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);\n  const occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);\n  // check if overlay position is behind the horizon\n  if (!occluder.isPointVisible(cartesian)) {\n    this.setVisible(false);\n    return;\n  }\n  const cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);\n  // check if overlay position is visible from the camera\n  if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {\n    this.setVisible(false);\n    return;\n  }\n  this.setVisible(true);\n\n  const pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);\n  const pixel = [pixelCartesian.x, pixelCartesian.y];\n  const mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];\n  this.updateRenderedPosition(pixel, mapSize);\n};\n\n/**\n * Destroys the overlay, removing all its listeners and elements\n * @api\n */\nexports.prototype.destroy = function() {\n  if (this.scenePostRenderListenerRemover_) {\n    this.scenePostRenderListenerRemover_();\n  }\n  if (this.observer_) {\n    this.observer_.disconnect();\n  }\n  olObservable.unByKey(this.listenerKeys_);\n  this.listenerKeys_.splice(0);\n  if (this.element.removeNode) {\n    this.element.removeNode(true);\n  } else {\n    this.element.remove();\n  }\n  this.element = null;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/SynchronizedOverlay.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olcsSynchronizedOverlay from './SynchronizedOverlay.js';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!ol.Map}\n   * @protected\n   */\n  this.map = map;\n\n  /**\n   * @type {ol.Collection.<ol.Overlay>}\n   * @private\n   */\n  this.overlays_ = this.map.getOverlays();\n\n  /**\n   * @type {!Cesium.Scene}\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainerStopEvent_ = document.createElement('DIV');\n  this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n  const overlayEvents = [\n    olEvents.EventType.CLICK,\n    olEvents.EventType.DBLCLICK,\n    olEvents.EventType.MOUSEDOWN,\n    olEvents.EventType.TOUCHSTART,\n    olEvents.EventType.MSPOINTERDOWN,\n    olBase.MapBrowserEventType.POINTERDOWN,\n    olEvents.EventType.MOUSEWHEEL,\n    olEvents.EventType.WHEEL\n  ];\n  overlayEvents.forEach((event) => {\n    olEvents.listen(this.overlayContainerStopEvent_, event, olEvents.Event.stopPropagation);\n  });\n  this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainer_ = document.createElement('DIV');\n  this.overlayContainer_.className = 'ol-overlaycontainer';\n  this.scene.canvas.parentElement.appendChild(this.overlayContainer_);\n\n\n  /**\n   * @type {!Object<?,olcs.SynchronizedOverlay>}\n   * @private\n   */\n  this.overlayMap_ = {};\n};\n\n\n\n/**\n * Get the element that serves as a container for overlays that don't allow\n * event propagation. Elements added to this container won't let mousedown and\n * touchstart events through to the map, so clicks and gestures on an overlay\n * don't trigger any {@link ol.MapBrowserEvent}.\n * @return {!Element} The map's overlay container that stops events.\n */\nexports.prototype.getOverlayContainerStopEvent = function() {\n  return this.overlayContainerStopEvent_;\n};\n\n/**\n * Get the element that serves as a container for overlays.\n * @return {!Element} The map's overlay container.\n */\nexports.prototype.getOverlayContainer = function() {\n  return this.overlayContainer_;\n};\n\n/**\n * Destroy all and perform complete synchronization of the overlays.\n * @api\n */\nexports.prototype.synchronize = function() {\n  this.destroyAll();\n  this.addOverlays();\n  this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));\n  this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));\n};\n\n/**\n * @param {ol.Collection.Event} event\n * @private\n */\nexports.prototype.addOverlayFromEvent_ = function(event) {\n  const overlay = /** @type {ol.Overlay} */ (event.element);\n  this.addOverlay(overlay);\n};\n\n/**\n * @api\n */\nexports.prototype.addOverlays = function() {\n  this.overlays_.forEach(this.addOverlay, this);\n};\n\n/**\n * @param {ol.Overlay} overlay\n * @api\n */\nexports.prototype.addOverlay = function(overlay) {\n  if (!overlay) {\n    return;\n  }\n  const cesiumOverlay = new olcsSynchronizedOverlay({\n    scene: this.scene,\n    synchronizer: this,\n    parent: overlay\n  });\n\n  const overlayId = olBase.getUid(overlay).toString();\n  this.overlayMap_[overlayId] = cesiumOverlay;\n};\n\n/**\n * @param {ol.Collection.Event} event\n * @private\n */\nexports.prototype.removeOverlayFromEvent_ = function(event) {\n  const removedOverlay = /** @type {ol.Overlay} */ (event.element);\n  this.removeOverlay(removedOverlay);\n};\n\n/**\n * Removes an overlay from the scene\n * @param {ol.Overlay} overlay\n * @api\n */\nexports.prototype.removeOverlay = function(overlay) {\n  const overlayId = olBase.getUid(overlay).toString();\n  const csOverlay = this.overlayMap_[overlayId];\n  if (csOverlay) {\n    csOverlay.destroy();\n    delete this.overlayMap_[overlayId];\n  }\n};\n\n/**\n * Destroys all the created Cesium objects.\n * @protected\n */\nexports.prototype.destroyAll = function() {\n  Object.keys(this.overlayMap_).forEach((key) => {\n    const overlay = this.overlayMap_[key];\n    overlay.destroy();\n    delete this.overlayMap_[key];\n  });\n};\n\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/OverlaySynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olGeomPoint from 'ol/geom/Point';\nimport googAsserts from 'goog/asserts';\nimport olProj from 'ol/proj';\nimport olEvents from 'ol/events';\nimport olMapBrowserEventType from 'ol/MapBrowserEventType';\nimport olcsUtil from './util.js';\nimport olcsCore from './core.js';\nimport olcsAutoRenderLoop from './AutoRenderLoop.js';\nimport olcsCamera from './Camera.js';\nimport olcsRasterSynchronizer from './RasterSynchronizer.js';\nimport olcsVectorSynchronizer from './VectorSynchronizer.js';\nimport olcsOverlaySynchronizer from './OverlaySynchronizer.js';\n\nconst exports = function(options) {\n\n  /**\n   * @type {olcs.AutoRenderLoop}\n   * @private\n   */\n  this.autoRenderLoop_ = null;\n\n  /**\n   * @type {!ol.Map}\n   * @private\n   */\n  this.map_ = options.map;\n\n  /**\n   * @type {!function(): Cesium.JulianDate}\n   * @private\n   */\n  this.time_ = options.time || function() {\n    return Cesium.JulianDate.now();\n  };\n\n  /**\n   * No change of the view projection.\n   * @private\n   */\n  this.to4326Transform_ = olProj.getTransform(this.map_.getView().getProjection(), 'EPSG:4326');\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.resolutionScale_ = 1.0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.canvasClientWidth_ = 0.0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.canvasClientHeight_ = 0.0;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.resolutionScaleChanged_ = true; // force resize\n\n  const fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';\n\n  /**\n   * @type {!Element}\n   * @private\n   */\n  this.container_ = document.createElement('DIV');\n  const containerAttribute = document.createAttribute('style');\n  containerAttribute.value = `${fillArea}visibility:hidden;`;\n  this.container_.setAttributeNode(containerAttribute);\n\n  let targetElement = options.target || null;\n  if (targetElement) {\n    if (typeof targetElement === 'string') {\n      targetElement = document.getElementById(targetElement);\n    }\n    targetElement.appendChild(this.container_);\n  } else {\n    const oc = this.map_.getViewport().querySelector('.ol-overlaycontainer');\n    if (oc && oc.parentNode) {\n      oc.parentNode.insertBefore(this.container_, oc);\n    }\n  }\n\n  /**\n   * Whether the Cesium container is placed over the ol map.\n   * @type {boolean}\n   * @private\n   */\n  this.isOverMap_ = !targetElement;\n\n\n  if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {\n    const overlayEvents = [\n      olEvents.EventType.CLICK,\n      olEvents.EventType.DBLCLICK,\n      olEvents.EventType.MOUSEDOWN,\n      olEvents.EventType.TOUCHSTART,\n      olEvents.EventType.MSPOINTERDOWN,\n      olMapBrowserEventType.POINTERDOWN,\n      olEvents.EventType.MOUSEWHEEL,\n      olEvents.EventType.WHEEL\n    ];\n    for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n      olEvents.listen(this.container_, overlayEvents[i], olEvents.Event.stopPropagation);\n    }\n  }\n\n\n  /**\n   * @type {!HTMLCanvasElement}\n   * @private\n   */\n  this.canvas_ = /** @type {!HTMLCanvasElement} */ (document.createElement('CANVAS'));\n  const canvasAttribute = document.createAttribute('style');\n  canvasAttribute.value = fillArea;\n  this.canvas_.setAttributeNode(canvasAttribute);\n\n  if (olcsUtil.supportsImageRenderingPixelated()) {\n    // non standard CSS4\n    this.canvas_.style['imageRendering'] = olcsUtil.imageRenderingValue();\n  }\n\n  this.canvas_.oncontextmenu = function() { return false; };\n  this.canvas_.onselectstart = function() { return false; };\n\n  this.container_.appendChild(this.canvas_);\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.enabled_ = false;\n\n  /**\n   * @type {!Array.<ol.interaction.Interaction>}\n   * @private\n   */\n  this.pausedInteractions_ = [];\n\n  /**\n   * @type {?ol.layer.Group}\n   * @private\n   */\n  this.hiddenRootGroup_ = null;\n\n  const sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions :\n    /** @type {Cesium.SceneOptions} */ ({});\n  sceneOptions.canvas = this.canvas_;\n  sceneOptions.scene3DOnly = true;\n\n  /**\n   * @type {!Cesium.Scene}\n   * @private\n   */\n  this.scene_ = new Cesium.Scene(sceneOptions);\n\n  const sscc = this.scene_.screenSpaceCameraController;\n\n  sscc.tiltEventTypes.push({\n    'eventType': Cesium.CameraEventType.LEFT_DRAG,\n    'modifier': Cesium.KeyboardEventModifier.SHIFT\n  });\n\n  sscc.tiltEventTypes.push({\n    'eventType': Cesium.CameraEventType.LEFT_DRAG,\n    'modifier': Cesium.KeyboardEventModifier.ALT\n  });\n\n  sscc.enableLook = false;\n\n  this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n\n  /**\n   * @type {!olcs.Camera}\n   * @private\n   */\n  this.camera_ = new olcsCamera(this.scene_, this.map_);\n\n  /**\n   * @type {!Cesium.Globe}\n   * @private\n   */\n  this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n  this.globe_.baseColor = Cesium.Color.WHITE;\n  this.scene_.globe = this.globe_;\n  this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();\n\n  // The first layer of Cesium is special; using a 1x1 transparent image to workaround it.\n  // See https://github.com/AnalyticalGraphicsInc/cesium/issues/1323 for details.\n  const firstImageryProvider = new Cesium.SingleTileImageryProvider({\n    url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\n    rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1) // the Rectangle dimensions are arbitrary\n  });\n  this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);\n\n  this.dataSourceCollection_ = new Cesium.DataSourceCollection();\n  this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({\n    scene: this.scene_,\n    dataSourceCollection: this.dataSourceCollection_\n  });\n\n  const synchronizers = options.createSynchronizers ?\n    options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [\n      new olcsRasterSynchronizer(this.map_, this.scene_),\n      new olcsVectorSynchronizer(this.map_, this.scene_),\n      new olcsOverlaySynchronizer(this.map_, this.scene_)\n    ];\n\n  // Assures correct canvas size after initialisation\n  this.handleResize_();\n\n  for (let i = synchronizers.length - 1; i >= 0; --i) {\n    synchronizers[i].synchronize();\n  }\n\n  if (this.isOverMap_) {\n    // if in \"stacked mode\", hide everything except canvas (including credits)\n    const credits = this.canvas_.nextElementSibling;\n    if (credits) {\n      credits.style.display = 'none';\n    }\n  }\n\n  /**\n   * Time of the last rendered frame, as returned by `performance.now()`.\n   * @type {number}\n   * @private\n   */\n  this.lastFrameTime_ = 0;\n\n  /**\n   * The identifier returned by `requestAnimationFrame`.\n   * @type {number|undefined}\n   * @private\n   */\n  this.renderId_ = undefined;\n\n  /**\n   * Target frame rate for the render loop.\n   * @type {number}\n   * @private\n   */\n  this.targetFrameRate_ = Number.POSITIVE_INFINITY;\n\n  /**\n   * If the Cesium render loop is being blocked.\n   * @type {boolean}\n   * @private\n   */\n  this.blockCesiumRendering_ = false;\n\n  /**\n   * If the warmup routine is active.\n   * @type {boolean}\n   * @private\n   */\n  this.warmingUp_ = false;\n\n  /**\n   * @type {ol.Feature}\n   * @private\n   */\n  this.trackedFeature_ = null;\n\n  /**\n   * @type {Cesium.Entity}\n   * @private\n   */\n  this.trackedEntity_ = null;\n\n  /**\n   * @type {Cesium.EntityView}\n   * @private\n   */\n  this.entityView_ = null;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.needTrackedEntityUpdate_ = false;\n\n  /**\n   * @type {!Cesium.BoundingSphere}\n   */\n  this.boundingSphereScratch_ = new Cesium.BoundingSphere();\n\n  const eventHelper = new Cesium.EventHelper();\n  eventHelper.add(this.scene_.postRender, exports.prototype.updateTrackedEntity_, this);\n\n  // Cesium has a mechanism to prevent the camera to go under the terrain.\n  // Unfortunately, it is only active when all the terrain has been loaded, which:\n  // - does not prevent the camera to sink under terrain anymore;\n  // - introduce a jumping effect once all terrain has been loaded and the position of the camera is finally fixed.\n  // The property below enables a workaround found in the Camptocamp Cesium fork.\n  // See also https://github.com/AnalyticalGraphicsInc/cesium/issues/5999.\n  Cesium.Camera.enableSuspendTerrainAdjustment = false;\n};\n\n\nObject.defineProperties(exports.prototype, {\n  'trackedFeature': {\n    'get': /** @this {olcs.OLCesium} */ function() {\n      return this.trackedFeature_;\n    },\n    'set': /** @this {olcs.OLCesium} */ function(feature) {\n      if (this.trackedFeature_ !== feature) {\n\n        const scene = this.scene_;\n\n        //Stop tracking\n        if (!feature || !feature.getGeometry()) {\n          this.needTrackedEntityUpdate_ = false;\n          scene.screenSpaceCameraController.enableTilt = true;\n\n          if (this.trackedEntity_) {\n            this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);\n          }\n          this.trackedEntity_ = null;\n          this.trackedFeature_ = null;\n          this.entityView_ = null;\n          scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n          return;\n        }\n\n        this.trackedFeature_ = feature;\n\n        //We can't start tracking immediately, so we set a flag and start tracking\n        //when the bounding sphere is ready (most likely next frame).\n        this.needTrackedEntityUpdate_ = true;\n\n        const to4326Transform = this.to4326Transform_;\n        const toCesiumPosition = function() {\n          const geometry = feature.getGeometry();\n          googAsserts.assertInstanceof(geometry, olGeomPoint);\n          const coo = geometry.getCoordinates();\n          const coo4326 = to4326Transform(coo, undefined, coo.length);\n          return olcsCore.ol4326CoordinateToCesiumCartesian(coo4326);\n        };\n\n        // Create an invisible point entity for tracking.\n        // It is independant from the primitive/geometry created by the vector synchronizer.\n        const options = {\n          'position': new Cesium.CallbackProperty((time, result) => toCesiumPosition(), false),\n          'point': {\n            'pixelSize': 1,\n            'color': Cesium.Color.TRANSPARENT\n          }\n        };\n\n        this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);\n      }\n    }\n  }\n});\n\n\n/**\n * Render the Cesium scene.\n * @private\n */\nexports.prototype.render_ = function() {\n  // if a call to `requestAnimationFrame` is pending, cancel it\n  if (this.renderId_ !== undefined) {\n    cancelAnimationFrame(this.renderId_);\n    this.renderId_ = undefined;\n  }\n\n  // only render if Cesium is enabled/warming and rendering hasn't been blocked\n  if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {\n    this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));\n  }\n};\n\n\n/**\n * Callback for `requestAnimationFrame`.\n * @param {number} frameTime The frame time, from `performance.now()`.\n * @private\n */\nexports.prototype.onAnimationFrame_ = function(frameTime) {\n  this.renderId_ = undefined;\n\n  // check if a frame was rendered within the target frame rate\n  const interval = 1000.0 / this.targetFrameRate_;\n  const delta = frameTime - this.lastFrameTime_;\n  if (delta < interval) {\n    // too soon, don't render yet\n    this.render_();\n    return;\n  }\n\n  // time to render a frame, save the time\n  this.lastFrameTime_ = frameTime;\n\n  const julianDate = this.time_();\n  this.scene_.initializeFrame();\n  this.handleResize_();\n  this.dataSourceDisplay_.update(julianDate);\n\n  // Update tracked entity\n  if (this.entityView_) {\n    const trackedEntity = this.trackedEntity_;\n    const trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n    if (trackedState === Cesium.BoundingSphereState.DONE) {\n      this.boundingSphereScratch_.radius = 1; // a radius of 1 is enough for tracking points\n      this.entityView_.update(julianDate, this.boundingSphereScratch_);\n    }\n  }\n\n  this.scene_.render(julianDate);\n  this.camera_.checkCameraChange();\n\n  // request the next render call after this one completes to ensure the browser doesn't get backed up\n  this.render_();\n};\n\n\n/**\n * @private\n */\nexports.prototype.updateTrackedEntity_ = function() {\n  if (!this.needTrackedEntityUpdate_) {\n    return;\n  }\n\n  const trackedEntity = this.trackedEntity_;\n  const scene = this.scene_;\n\n  const state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n  if (state === Cesium.BoundingSphereState.PENDING) {\n    return;\n  }\n\n  scene.screenSpaceCameraController.enableTilt = false;\n\n  const bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;\n  if (bs) {\n    bs.radius = 1;\n  }\n  this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);\n  this.entityView_.update(this.time_(), bs);\n  this.needTrackedEntityUpdate_ = false;\n};\n\n\n/**\n * @private\n */\nexports.prototype.handleResize_ = function() {\n  let width = this.canvas_.clientWidth;\n  let height = this.canvas_.clientHeight;\n\n  if (width === 0 | height === 0) {\n    // The canvas DOM element is not ready yet.\n    return;\n  }\n\n  if (width === this.canvasClientWidth_ &&\n      height === this.canvasClientHeight_ &&\n      !this.resolutionScaleChanged_) {\n    return;\n  }\n\n  let resolutionScale = this.resolutionScale_;\n  if (!olcsUtil.supportsImageRenderingPixelated()) {\n    resolutionScale *= window.devicePixelRatio || 1.0;\n  }\n  this.resolutionScaleChanged_ = false;\n\n  this.canvasClientWidth_ = width;\n  this.canvasClientHeight_ = height;\n\n  width *= resolutionScale;\n  height *= resolutionScale;\n\n  this.canvas_.width = width;\n  this.canvas_.height = height;\n  this.scene_.camera.frustum.aspectRatio = width / height;\n};\n\n\n/**\n * @return {!olcs.Camera}\n * @api\n */\nexports.prototype.getCamera = function() {\n  return this.camera_;\n};\n\n\n/**\n * @return {!ol.Map}\n * @api\n */\nexports.prototype.getOlMap = function() {\n  return this.map_;\n};\n\n/**\n * @return {!ol.View}\n * @api\n */\nexports.prototype.getOlView = function() {\n  const view = this.map_.getView();\n  googAsserts.assert(view);\n  return view;\n};\n\n/**\n * @return {!Cesium.Scene}\n * @api\n */\nexports.prototype.getCesiumScene = function() {\n  return this.scene_;\n};\n\n\n/**\n * @return {!Cesium.DataSourceCollection}\n * @api\n */\nexports.prototype.getDataSources = function() {\n  return this.dataSourceCollection_;\n};\n\n\n/**\n * @return {!Cesium.DataSourceDisplay}\n * @api\n */\nexports.prototype.getDataSourceDisplay = function() {\n  return this.dataSourceDisplay_;\n};\n\n\n/**\n * @return {boolean}\n * @api\n */\nexports.prototype.getEnabled = function() {\n  return this.enabled_;\n};\n\n\n/**\n * Enables/disables the Cesium.\n * This modifies the visibility style of the container element.\n * @param {boolean} enable\n * @api\n */\nexports.prototype.setEnabled = function(enable) {\n  if (this.enabled_ === enable) {\n    return;\n  }\n  this.enabled_ = enable;\n\n  // some Cesium operations are operating with canvas.clientWidth,\n  // so we can't remove it from DOM or even make display:none;\n  this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';\n  let interactions;\n  if (this.enabled_) {\n    this.throwOnUnitializedMap_();\n    if (this.isOverMap_) {\n      interactions = this.map_.getInteractions();\n      interactions.forEach(function(el, i, arr) {\n        this.pausedInteractions_.push(el);\n      }, this);\n      interactions.clear();\n\n      const rootGroup = this.map_.getLayerGroup();\n      if (rootGroup.getVisible()) {\n        this.hiddenRootGroup_ = rootGroup;\n        this.hiddenRootGroup_.setVisible(false);\n      }\n\n      this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');\n      this.map_.getOverlayContainerStopEvent().classList.add('olcs-hideoverlay');\n    }\n\n    this.camera_.readFromView();\n    this.render_();\n  } else {\n    if (this.isOverMap_) {\n      interactions = this.map_.getInteractions();\n      this.pausedInteractions_.forEach((interaction) => {\n        interactions.push(interaction);\n      });\n      this.pausedInteractions_.length = 0;\n      this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');\n      this.map_.getOverlayContainerStopEvent().classList.remove('olcs-hideoverlay');\n      if (this.hiddenRootGroup_) {\n        this.hiddenRootGroup_.setVisible(true);\n        this.hiddenRootGroup_ = null;\n      }\n    }\n\n    this.camera_.updateView();\n  }\n};\n\n\n/**\n * Preload Cesium so that it is ready when transitioning from 2D to 3D.\n * @param {number} height Target height of the camera\n * @param {number} timeout Milliseconds after which the warming will stop\n * @api\n*/\nexports.prototype.warmUp = function(height, timeout) {\n  if (this.enabled_) {\n    // already enabled\n    return;\n  }\n  this.throwOnUnitializedMap_();\n  this.camera_.readFromView();\n  const ellipsoid = this.globe_.ellipsoid;\n  const csCamera = this.scene_.camera;\n  const position = ellipsoid.cartesianToCartographic(csCamera.position);\n  if (position.height < height) {\n    position.height = height;\n    csCamera.position = ellipsoid.cartographicToCartesian(position);\n  }\n\n  this.warmingUp_ = true;\n  this.render_();\n\n  setTimeout(() => {\n    this.warmingUp_ = false;\n  }, timeout);\n};\n\n\n/**\n * Block Cesium rendering to save resources.\n * @param {boolean} block True to block.\n * @api\n*/\nexports.prototype.setBlockCesiumRendering = function(block) {\n  if (this.blockCesiumRendering_ !== block) {\n    this.blockCesiumRendering_ = block;\n\n    // reset the render loop\n    this.render_();\n  }\n};\n\n\n/**\n * Render the globe only when necessary in order to save resources.\n * Experimental.\n * @api\n */\nexports.prototype.enableAutoRenderLoop = function() {\n  if (!this.autoRenderLoop_) {\n    this.autoRenderLoop_ = new olcsAutoRenderLoop(this, false);\n  }\n};\n\n\n/**\n * Get the autorender loop.\n * @return {?olcs.AutoRenderLoop}\n * @api\n*/\nexports.prototype.getAutoRenderLoop = function() {\n  return this.autoRenderLoop_;\n};\n\n\n/**\n * The 3D Cesium globe is rendered in a canvas with two different dimensions:\n * clientWidth and clientHeight which are the dimension on the screen and\n * width and height which are the dimensions of the drawing buffer.\n *\n * By using a resolution scale lower than 1.0, it is possible to render the\n * globe in a buffer smaller than the canvas client dimensions and improve\n * performance, at the cost of quality.\n *\n * Pixel ratio should also be taken into account; by default, a device with\n * pixel ratio of 2.0 will have a buffer surface 4 times bigger than the client\n * surface.\n *\n * @param {number} value\n * @this {olcs.OLCesium}\n * @api\n */\nexports.prototype.setResolutionScale = function(value) {\n  value = Math.max(0, value);\n  if (value !== this.resolutionScale_) {\n    this.resolutionScale_ = Math.max(0, value);\n    this.resolutionScaleChanged_ = true;\n    if (this.autoRenderLoop_) {\n      this.autoRenderLoop_.restartRenderLoop();\n    }\n  }\n};\n\n\n/**\n * Set the target frame rate for the renderer. Set to `Number.POSITIVE_INFINITY`\n * to render as quickly as possible.\n * @param {number} value The frame rate, in frames per second.\n * @api\n */\nexports.prototype.setTargetFrameRate = function(value) {\n  if (this.targetFrameRate_ !== value) {\n    this.targetFrameRate_ = value;\n\n    // reset the render loop\n    this.render_();\n  }\n};\n\n\n/**\n * Check if OpenLayers map is not properly initialized.\n * @private\n */\nexports.prototype.throwOnUnitializedMap_ = function() {\n  const map = this.map_;\n  const view = map.getView();\n  const center = view.getCenter();\n  if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {\n    throw new Error(`The OpenLayers map is not properly initialized: ${center} / ${view.getResolution()}`);\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/OLCesium.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olcsContribLazyLoader from '../contrib/LazyLoader.js';\nimport olcsOLCesium from '../OLCesium.js';\nimport olcsCore from '../core.js';\nimport olMath from 'ol/math';\nimport olObservable from 'ol/Observable';\nimport googAsserts from 'goog/asserts';\n\nconst exports = class extends olObservable {\n  /**\n   * @param {string} cesiumUrl\n   * @param {olcsx.contrib.ManagerOptions} options\n   * @api\n   */\n  constructor(cesiumUrl, {map, cameraExtentInRadians} = {}) {\n\n    super();\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.cesiumUrl_ = cesiumUrl;\n\n    /**\n     * @type {ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.Extent}\n     * @protected\n     */\n    this.cameraExtentInRadians = cameraExtentInRadians || null;\n\n    /**\n     * @private\n     * @type {Cesium.BoundingSphere}\n     */\n    this.boundingSphere_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.blockLimiter_ = false;\n\n    /**\n     * @type {Promise.<olcs.OLCesium>}\n     * @private\n     */\n    this.promise_;\n\n    /**\n     * @type {olcs.OLCesium}\n     * @protected\n     */\n    this.ol3d;\n\n\n    /**\n     * @const {number} Tilt angle in radians\n     * @private\n     */\n    this.cesiumInitialTilt_ = olMath.toRadians(50);\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogDensity = 0.0001;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogSSEFactor = 25;\n\n    /**\n     * Limit the minimum distance to the terrain to 2m.\n     * @protected\n     * @type {number}\n     */\n    this.minimumZoomDistance = 2;\n\n    /**\n     * Limit the maximum distance to the earth to 10'000km.\n     * @protected\n     * @type {number}\n     */\n    this.maximumZoomDistance = 10000000;\n\n    // when closer to 3000m, restrict the available positions harder\n    /**\n     * @protected\n     * @param {number} height\n     */\n    this.limitCameraToBoundingSphereRatio = height => (height > 3000 ? 9 : 3);\n  }\n\n\n  /**\n   * @return {Promise.<olcs.OLCesium>}\n   */\n  load() {\n    if (!this.promise_) {\n      const cesiumLazyLoader = new olcsContribLazyLoader(this.cesiumUrl_);\n      this.promise_ = cesiumLazyLoader.load().then(() => this.onCesiumLoaded());\n    }\n    return this.promise_;\n  }\n\n\n  /**\n   * @protected\n   * @return {olcs.OLCesium}\n   */\n  onCesiumLoaded() {\n    if (this.cameraExtentInRadians) {\n      const rect = new Cesium.Rectangle(...this.cameraExtentInRadians);\n      // Set the fly home rectangle\n      Cesium.Camera.DEFAULT_VIEW_RECTANGLE = rect;\n      this.boundingSphere_ = Cesium.BoundingSphere.fromRectangle3D(rect, Cesium.Ellipsoid.WGS84, 300); // lux mean height is 300m\n    }\n\n    this.ol3d = this.instantiateOLCesium();\n    const scene = this.ol3d.getCesiumScene();\n    this.configureForUsability(scene);\n    this.configureForPerformance(scene);\n    this.dispatchEvent('load');\n    return this.ol3d;\n  }\n\n\n  /**\n   * Application code should override this method.\n   * @return {olcs.OLCesium}\n   */\n  instantiateOLCesium() {\n    googAsserts.assert(this.map);\n    const ol3d = new olcsOLCesium({map: this.map});\n    const scene = ol3d.getCesiumScene();\n    const terrainProvider = new Cesium.CesiumTerrainProvider({\n      url: '//assets.agi.com/stk-terrain/world'\n    });\n    scene.terrainProvider = terrainProvider;\n    return ol3d;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForPerformance(scene) {\n    const fog = scene.fog;\n    fog.enabled = true;\n    fog.density = this.fogDensity;\n    fog.screenSpaceErrorFactor = this.fogSSEFactor;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForUsability(scene) {\n    const sscController = scene.screenSpaceCameraController;\n    sscController.minimumZoomDistance = this.minimumZoomDistance;\n    sscController.maximumZoomDistance = this.maximumZoomDistance;\n\n    // Do not see through the terrain. Seeing through the terrain does not make\n    // sense anyway, except for debugging\n    scene.globe.depthTestAgainstTerrain = true;\n\n    // Use white instead of the black default colour for the globe when tiles are missing\n    scene.globe.baseColor = Cesium.Color.WHITE;\n    scene.backgroundColor = Cesium.Color.WHITE;\n\n    if (this.boundingSphere_) {\n      scene.postRender.addEventListener(this.limitCameraToBoundingSphere.bind(this), scene);\n    }\n    // Stop rendering Cesium when there is nothing to do. This drastically reduces CPU/GPU consumption.\n    this.ol3d.enableAutoRenderLoop();\n  }\n\n\n  /**\n   * Constrain the camera so that it stays close to the bounding sphere of the map extent.\n   * Near the ground the allowed distance is shorter.\n   * @protected\n   */\n  limitCameraToBoundingSphere() {\n    if (this.boundingSphere_ && !this.blockLimiter_) {\n      const scene = this.ol3d.getCesiumScene();\n      const camera = scene.camera;\n      const position = camera.position;\n      const carto = Cesium.Cartographic.fromCartesian(position);\n      const ratio = this.limitCameraToBoundingSphereRatio(carto.height);\n      if (Cesium.Cartesian3.distance(this.boundingSphere_.center, position) > this.boundingSphere_.radius * ratio) {\n        const currentlyFlying = camera.flying;\n        if (currentlyFlying === true) {\n          // There is a flying property and its value is true\n          return;\n        } else {\n          this.blockLimiter_ = true;\n          const unblockLimiter = () => this.blockLimiter_ = false;\n          camera.flyToBoundingSphere(this.boundingSphere_, {\n            complete: unblockLimiter,\n            cancel: unblockLimiter\n          });\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Enable or disable ol3d with a default animation.\n   * @export\n   * @return {Promise<undefined>}\n   */\n  toggle3d() {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      if (is3DCurrentlyEnabled) {\n        // Disable 3D\n        googAsserts.assert(this.map);\n        return olcsCore.resetToNorthZenith(this.map, scene).then(() => {\n          ol3d.setEnabled(false);\n          this.dispatchEvent('toggle');\n        });\n      } else {\n        // Enable 3D\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n        return olcsCore.rotateAroundBottomCenter(scene, this.cesiumInitialTilt_);\n      }\n    });\n  }\n\n\n  /**\n   * Enable ol3d with a view built from parameters.\n   *\n   * @export\n   * @param {number} lon\n   * @param {number} lat\n   * @param {number} elevation\n   * @param {number} headingDeg Heading value in degrees.\n   * @param {number} pitchDeg Pitch value in degrees.\n   * @returns {Promise<undefined>}\n   */\n  set3dWithView(lon, lat, elevation, headingDeg, pitchDeg) {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      const camera = scene.camera;\n      const destination = Cesium.Cartesian3.fromDegrees(lon, lat, elevation);\n      const heading = Cesium.Math.toRadians(headingDeg);\n      const pitch = Cesium.Math.toRadians(pitchDeg);\n      const roll = 0;\n      const orientation = {heading, pitch, roll};\n\n      if (!is3DCurrentlyEnabled) {\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n      }\n\n      camera.setView({\n        destination,\n        orientation\n      });\n    });\n  }\n\n\n  /**\n   * @export\n   * @return {boolean}\n   */\n  is3dEnabled() {\n    return !!this.ol3d && this.ol3d.getEnabled();\n  }\n\n\n  /**\n   * @return {number}\n   */\n  getHeading() {\n    return this.map ? this.map.getView().getRotation() || 0 : 0;\n  }\n\n\n  /**\n   * @return {number|undefined}\n   */\n  getTiltOnGlobe() {\n    const scene = this.ol3d.getCesiumScene();\n    const tiltOnGlobe = olcsCore.computeSignedTiltAngleOnGlobe(scene);\n    return -tiltOnGlobe;\n  }\n\n\n  /**\n   * @param {number} angle\n   */\n  setHeading(angle) {\n    const scene = this.ol3d.getCesiumScene();\n    const bottom = olcsCore.pickBottomPoint(scene);\n    if (bottom) {\n      olcsCore.setHeadingUsingBottomCenter(scene, angle, bottom);\n    }\n  }\n\n  /**\n   * @export\n   * @return {olcs.OLCesium}\n   */\n  getOl3d() {\n    return this.ol3d;\n  }\n\n  /**\n   * @export\n   * @return {!ol.View}\n   */\n  getOlView() {\n    const view = this.map.getView();\n    googAsserts.assert(view);\n    return view;\n  }\n\n  /**\n   * @export\n   * @return {Cesium.Matrix4}\n   */\n  getCesiumViewMatrix() {\n    return this.ol3d.getCesiumScene().camera.viewMatrix;\n  }\n\n  /**\n   * @export\n   * @return {!Cesium.Scene}\n   */\n  getCesiumScene() {\n    return this.ol3d.getCesiumScene();\n  }\n\n  /**\n   * @export\n   * @param {!Cesium.Rectangle} rectangle\n   * @param {number=} offset in meters\n   * @return {Promise<undefined>}\n   */\n  flyToRectangle(rectangle, offset = 0) {\n    const camera = this.getCesiumScene().camera;\n    const destination = camera.getRectangleCameraCoordinates(rectangle);\n\n    const mag = Cesium.Cartesian3.magnitude(destination) + offset;\n    Cesium.Cartesian3.normalize(destination, destination);\n    Cesium.Cartesian3.multiplyByScalar(destination, mag, destination);\n\n    return new Promise((resolve, reject) => {\n      if (!this.cameraExtentInRadians) {\n        reject();\n        return;\n      }\n\n      camera.flyTo({\n        destination,\n        complete: () => resolve(),\n        cancel: () => reject(),\n        endTransform: Cesium.Matrix4.IDENTITY\n      });\n    });\n  }\n\n  /**\n   * @protected\n   * @return {Cesium.Rectangle|undefined}\n   */\n  getCameraExtentRectangle() {\n    if (this.cameraExtentInRadians) {\n      return new Cesium.Rectangle(...this.cameraExtentInRadians);\n    }\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/contrib/Manager.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/OSM\n */\nimport {inherits} from '../index.js';\nimport XYZ from '../source/XYZ.js';\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {ol.source.XYZ}\n * @param {olx.source.OSMOptions=} opt_options Open Street Map options.\n * @api\n */\nconst OSM = function(opt_options) {\n\n  const options = opt_options || {};\n\n  let attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [OSM.ATTRIBUTION];\n  }\n\n  const crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  const url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  XYZ.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\ninherits(OSM, XYZ);\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nOSM.ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\nexport default OSM;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/OSM.js\n// module id = 5\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module ol/source/XYZ\n */\nimport {inherits} from '../index.js';\nimport TileImage from '../source/TileImage.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link ol.source.TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.XYZOptions=} opt_options XYZ options.\n * @api\n */\nconst XYZ = function(opt_options) {\n  const options = opt_options || {};\n  const projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    _ol_tilegrid_.createXYZ({\n      extent: _ol_tilegrid_.extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\ninherits(XYZ, TileImage);\nexport default XYZ;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/XYZ.js\n// module id = 6\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24","/**\n * @module\n */\nimport olEvents from 'ol/events';\nimport olProj from 'ol/proj';\n\nconst exports = function(source, opt_fallbackProj) {\n  // Do not ol.inherit() or call super constructor from\n  // Cesium.ImageryProvider since this particular function is a\n  // 'non instanciable interface' which throws on instanciation.\n\n  /**\n   * @type {!ol.source.TileImage}\n   * @private\n   */\n  this.source_ = source;\n\n  /**\n   * @type {?ol.proj.Projection}\n   * @private\n   */\n  this.projection_ = null;\n\n  /**\n   * @type {?ol.proj.Projection}\n   * @private\n   */\n  this.fallbackProj_ = opt_fallbackProj || null;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.ready_ = false;\n\n  /**\n   * @type {?Cesium.Credit}\n   * @private\n   */\n  this.credit_ = null;\n\n  /**\n   * @type {?Cesium.TilingScheme}\n   * @private\n   */\n  this.tilingScheme_ = null;\n\n  /**\n   * @type {?Cesium.Rectangle}\n   * @private\n   */\n  this.rectangle_ = null;\n\n  const proxy = this.source_.get('olcs.proxy');\n  if (proxy) {\n    if (typeof proxy === 'function') {\n      this.proxy_ = {\n        'getURL': proxy\n      };\n    } else if (typeof proxy === 'string') {\n      this.proxy_ = new Cesium.DefaultProxy(proxy);\n    }\n  }\n\n  this.errorEvent_ = new Cesium.Event();\n\n  this.emptyCanvas_ = document.createElement('canvas');\n  this.emptyCanvas_.width = 1;\n  this.emptyCanvas_.height = 1;\n\n  this.source_.on(olEvents.EventType.CHANGE, function(e) {\n    this.handleSourceChanged_();\n  }, this);\n  this.handleSourceChanged_();\n};\n\n\n// definitions of getters that are required to be present\n// in the Cesium.ImageryProvider instance:\nObject.defineProperties(exports.prototype, {\n  'ready': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.ready_;}\n  },\n\n  'rectangle': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.rectangle_;}\n  },\n\n  'tileWidth': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getTileSize(0) : 256;\n        }\n  },\n\n  'tileHeight': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tileWidth;}\n  },\n\n  'maximumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getMaxZoom() : 18;\n        }\n  },\n\n  'minimumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          // WARNING: Do not use the minimum level (at least until the extent is\n          // properly set). Cesium assumes the minimumLevel to contain only\n          // a few tiles and tries to load them all at once -- this can\n          // freeze and/or crash the browser !\n          return 0;\n          //var tg = this.source_.getTileGrid();\n          //return tg ? tg.getMinZoom() : 0;\n        }\n  },\n\n  'tilingScheme': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tilingScheme_;}\n  },\n\n  'tileDiscardPolicy': {\n    'get': function() {return undefined;}\n  },\n\n  'errorEvent': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.errorEvent_;}\n  },\n\n  'credit': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.credit_;}\n  },\n\n  'proxy': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.proxy_;}\n  },\n\n  'hasAlphaChannel': {\n    'get': function() {return true;}\n  },\n\n  'pickFeatures': {\n    'get': function() {return undefined;}\n  }\n});\n\n\n/**\n * Checks if the underlying source is ready and cached required data.\n * @private\n */\nexports.prototype.handleSourceChanged_ = function() {\n  if (!this.ready_ && this.source_.getState() == 'ready') {\n    const proj = this.source_.getProjection();\n    this.projection_ = proj ? proj : this.fallbackProj_;\n    if (this.projection_ == olProj.get('EPSG:4326')) {\n      this.tilingScheme_ = new Cesium.GeographicTilingScheme();\n    } else if (this.projection_ == olProj.get('EPSG:3857')) {\n      this.tilingScheme_ = new Cesium.WebMercatorTilingScheme();\n    } else {\n      return;\n    }\n    this.rectangle_ = this.tilingScheme_.rectangle;\n\n    const credit = exports.createCreditForSource(this.source_);\n    this.credit_ = credit || null;\n\n    this.ready_ = true;\n  }\n};\n\n\n/**\n * Tries to create proper Cesium.Credit for\n * the given ol.source.Source as closely as possible.\n * @param {!ol.source.Source} source\n * @return {?Cesium.Credit}\n */\nexports.createCreditForSource = function(source) {\n  let text = '';\n  const attributions = source.getAttributions();\n  if (attributions) {\n    attributions.forEach((el) => {\n      // strip html tags (not supported in Cesium)\n      text += `${el.getHTML().replace(/<\\/?[^>]+(>|$)/g, '')} `;\n    });\n  }\n\n  let imageUrl, link;\n  if (text.length == 0) {\n    // only use logo if no text is specified\n    // otherwise the Cesium will automatically skip the text:\n    // \"The text to be displayed on the screen if no imageUrl is specified.\"\n    const logo = source.getLogo();\n    if (logo) {\n      if (typeof logo == 'string') {\n        imageUrl = logo;\n      } else {\n        imageUrl = logo.src;\n        link = logo.href;\n      }\n    }\n  }\n\n  return (imageUrl || text.length > 0) ? new Cesium.Credit(text, imageUrl, link) : null;\n};\n\n\n/**\n * TODO: attributions for individual tile ranges\n * @export\n * @override\n */\nexports.prototype.getTileCredits = function(x, y, level) {\n  return undefined;\n};\n\n\n/**\n * @export\n * @override\n */\nexports.prototype.requestImage = function(x, y, level) {\n  const tileUrlFunction = this.source_.getTileUrlFunction();\n  if (tileUrlFunction && this.projection_) {\n\n    // Perform mapping of Cesium tile coordinates to OpenLayers tile coordinates:\n    // 1) Cesium zoom level 0 is OpenLayers zoom level 1 for EPSG:4326\n    const z_ = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n    // 2) OpenLayers tile coordinates increase from bottom to top\n    const y_ = -y - 1;\n\n    let url = tileUrlFunction.call(this.source_,\n        [z_, x, y_], 1, this.projection_);\n    if (this.proxy_) {\n      url = this.proxy_.getURL(url);\n    }\n    return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;\n  } else {\n    // return empty canvas to stop Cesium from retrying later\n    return this.emptyCanvas_;\n  }\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core/OLImageryProvider.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nconst exports = {};\nimport olEasing from 'ol/easing';\nimport googAsserts from 'goog/asserts';\nimport olLayerTile from 'ol/layer/Tile';\nimport olLayerImage from 'ol/layer/Image';\nimport olProj from 'ol/proj';\nimport olSourceImage from 'ol/source/Image';\nimport olSourceImageWMS from 'ol/source/ImageWMS';\nimport olSourceTileImage from 'ol/source/TileImage';\nimport olSourceTileWMS from 'ol/source/TileWMS';\nimport olcsCoreOLImageryProvider from './core/OLImageryProvider.js';\n\n\n/**\n * Compute the pixel width and height of a point in meters using the\n * camera frustum.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @return {!Cesium.Cartesian2} the pixel size\n * @api\n */\nexports.computePixelSizeAtCoordinate = function(scene, target) {\n  const camera = scene.camera;\n  const canvas = scene.canvas;\n  const frustum = camera.frustum;\n  const distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(\n      camera.position, target, new Cesium.Cartesian3()));\n  const pixelSize = new Cesium.Cartesian2();\n  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight,\n      distance, pixelSize);\n};\n\n\n/**\n * Compute bounding box around a target point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @param {number} amount Half the side of the box, in pixels.\n * @return {Array<Cesium.Cartographic>} bottom left and top right\n * coordinates of the box\n */\nexports.computeBoundingBoxAtTarget = function(scene, target, amount) {\n  const pixelSize = exports.computePixelSizeAtCoordinate(scene, target);\n  const transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);\n\n  const bottomLeft = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  const topRight = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray(\n      [bottomLeft, topRight]);\n};\n\n\n/**\n *\n * @param {!ol.geom.Geometry} geometry\n * @param {number} height\n * @api\n */\nexports.applyHeightOffsetToGeometry = function(geometry, height) {\n  geometry.applyTransform((input, output, stride) => {\n    googAsserts.assert(input === output);\n    if (stride !== undefined && stride >= 3) {\n      for (let i = 0; i < output.length; i += stride) {\n        output[i + 2] = output[i + 2] + height;\n      }\n    }\n    return output;\n  });\n};\n\n\n/**\n * @param {!Cesium.Camera} camera\n * @param {number} angle\n * @param {!Cesium.Cartesian3} axis\n * @param {!Cesium.Matrix4} transform\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.rotateAroundAxis = function(camera, angle, axis, transform,\n    opt_options) {\n  const clamp = Cesium.Math.clamp;\n  const defaultValue = Cesium.defaultValue;\n\n  const options = opt_options || {};\n  const duration = defaultValue(options.duration, 500); // ms\n  const easing = defaultValue(options.easing, olEasing.linear);\n  const callback = options.callback;\n\n  let lastProgress = 0;\n  const oldTransform = new Cesium.Matrix4();\n\n  const start = Date.now();\n  const step = function() {\n    const timestamp = Date.now();\n    const timeDifference = timestamp - start;\n    const progress = easing(clamp(timeDifference / duration, 0, 1));\n    googAsserts.assert(progress >= lastProgress);\n\n    camera.transform.clone(oldTransform);\n    const stepAngle = (progress - lastProgress) * angle;\n    lastProgress = progress;\n    camera.lookAtTransform(transform);\n    camera.rotate(axis, stepAngle);\n    camera.lookAtTransform(oldTransform);\n\n    if (progress < 1) {\n      window.requestAnimationFrame(step);\n    } else {\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  window.requestAnimationFrame(step);\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} heading\n * @param {!Cesium.Cartesian3} bottomCenter\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.setHeadingUsingBottomCenter = function(scene, heading,\n    bottomCenter, opt_options) {\n  const camera = scene.camera;\n  // Compute the camera position to zenith quaternion\n  const angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);\n  const axis = camera.right;\n  const quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);\n  const rotation = Cesium.Matrix3.fromQuaternion(quaternion);\n\n  // Get the zenith point from the rotation of the position vector\n  const vector = new Cesium.Cartesian3();\n  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);\n  const zenith = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);\n  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);\n\n  // Actually rotate around the zenith normal\n  const transform = Cesium.Matrix4.fromTranslation(zenith);\n  const rotateAroundAxis = exports.rotateAroundAxis;\n  rotateAroundAxis(camera, heading, zenith, transform, opt_options);\n};\n\n\n/**\n * Get the 3D position of the given pixel of the canvas.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian2} pixel\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickOnTerrainOrEllipsoid = function(scene, pixel) {\n  const ray = scene.camera.getPickRay(pixel);\n  const target = scene.globe.pick(ray, scene);\n  return target || scene.camera.pickEllipsoid(pixel);\n};\n\n\n/**\n * Get the 3D position of the point at the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickBottomPoint = function(scene) {\n  const canvas = scene.canvas;\n  const bottom = new Cesium.Cartesian2(\n      canvas.clientWidth / 2, canvas.clientHeight);\n  return exports.pickOnTerrainOrEllipsoid(scene, bottom);\n};\n\n\n/**\n * Get the 3D position of the point at the center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickCenterPoint = function(scene) {\n  const canvas = scene.canvas;\n  const center = new Cesium.Cartesian2(\n      canvas.clientWidth / 2,\n      canvas.clientHeight / 2);\n  return exports.pickOnTerrainOrEllipsoid(scene, center);\n};\n\n\n/**\n * Compute the signed tilt angle on globe, between the opposite of the\n * camera direction and the target normal. Return undefined if there is no\n * intersection of the camera direction with the globe.\n * @param {!Cesium.Scene} scene\n * @return {number|undefined}\n * @api\n */\nexports.computeSignedTiltAngleOnGlobe = function(scene) {\n  const camera = scene.camera;\n  const ray = new Cesium.Ray(camera.position, camera.direction);\n  let target = scene.globe.pick(ray, scene);\n\n  if (!target) {\n    // no tiles in the area were loaded?\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n    if (obj) {\n      target = Cesium.Ray.getPoint(ray, obj.start);\n    }\n  }\n\n  if (!target) {\n    return undefined;\n  }\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);\n\n  const angleBetween = exports.signedAngleBetween;\n  const angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;\n  return Cesium.Math.convertLongitudeRange(angle);\n};\n\n\n/**\n * Compute the ray from the camera to the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Ray}\n */\nexports.bottomFovRay = function(scene) {\n  const camera = scene.camera;\n  const fovy2 = camera.frustum.fovy / 2;\n  const direction = camera.direction;\n  const rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);\n  const matrix = Cesium.Matrix3.fromQuaternion(rotation);\n  const vector = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);\n  return new Cesium.Ray(camera.position, vector);\n};\n\n\n/**\n * Compute the angle between two Cartesian3.\n * @param {!Cesium.Cartesian3} first\n * @param {!Cesium.Cartesian3} second\n * @param {!Cesium.Cartesian3} normal Normal to test orientation against.\n * @return {number}\n */\nexports.signedAngleBetween = function(first, second, normal) {\n  // We are using the dot for the angle.\n  // Then the cross and the dot for the sign.\n  const a = new Cesium.Cartesian3();\n  const b = new Cesium.Cartesian3();\n  const c = new Cesium.Cartesian3();\n  Cesium.Cartesian3.normalize(first, a);\n  Cesium.Cartesian3.normalize(second, b);\n  Cesium.Cartesian3.cross(a, b, c);\n\n  const cosine = Cesium.Cartesian3.dot(a, b);\n  const sine = Cesium.Cartesian3.magnitude(c);\n\n  // Sign of the vector product and the orientation normal\n  const sign = Cesium.Cartesian3.dot(normal, c);\n  const angle = Math.atan2(sine, cosine);\n  return sign >= 0 ? angle : -angle;\n};\n\n\n/**\n * Compute the rotation angle around a given point, needed to reach the\n * zenith position.\n * At a zenith position, the camera direction is going througth the earth\n * center and the frustrum bottom ray is going through the chosen pivot\n * point.\n * The bottom-center of the screen is a good candidate for the pivot point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} pivot Point around which the camera rotates.\n * @return {number}\n * @api\n */\nexports.computeAngleToZenith = function(scene, pivot) {\n  // This angle is the sum of the angles 'fy' and 'a', which are defined\n  // using the pivot point and its surface normal.\n  //        Zenith |    camera\n  //           \\   |   /\n  //            \\fy|  /\n  //             \\ |a/\n  //              \\|/pivot\n  const camera = scene.camera;\n  const fy = camera.frustum.fovy / 2;\n  const ray = exports.bottomFovRay(scene);\n  const direction = Cesium.Cartesian3.clone(ray.direction);\n  Cesium.Cartesian3.negate(direction, direction);\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);\n\n  const left = new Cesium.Cartesian3();\n  Cesium.Cartesian3.negate(camera.right, left);\n\n  const a = exports.signedAngleBetween(normal, direction, left);\n  return a + fy;\n};\n\n\n/**\n * Rotate the camera so that its direction goes through the target point.\n * If a globe is given, the target height is first interpolated from terrain.\n * @param {!Cesium.Camera} camera\n * @param {!Cesium.Cartographic} target\n * @param {Cesium.Globe=} opt_globe\n * @api\n */\nexports.lookAt = function(camera, target, opt_globe) {\n  if (opt_globe) {\n    const height = opt_globe.getHeight(target);\n    target.height = height || 0;\n  }\n\n  const ellipsoid = Cesium.Ellipsoid.WGS84;\n  const targetb = ellipsoid.cartographicToCartesian(target);\n\n  const position = camera.position;\n  const up = new Cesium.Cartesian3();\n  ellipsoid.geocentricSurfaceNormal(position, up);\n\n  camera.lookAt(position, targetb, up);\n};\n\n\n/**\n * Convert an OpenLayers extent to a Cesium rectangle.\n * @param {ol.Extent} extent Extent.\n * @param {ol.ProjectionLike} projection Extent projection.\n * @return {Cesium.Rectangle} The corresponding Cesium rectangle.\n * @api\n */\nexports.extentToRectangle = function(extent, projection) {\n  if (extent && projection) {\n    const ext = olProj.transformExtent(extent, projection, 'EPSG:4326');\n    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Creates Cesium.ImageryLayer best corresponding to the given ol.layer.Layer.\n * Only supports raster layers\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Cesium.ImageryLayer} null if not possible (or supported)\n * @api\n */\nexports.tileLayerToImageryLayer = function(olLayer, viewProj) {\n\n  if (!(olLayer instanceof olLayerTile) && !(olLayer instanceof olLayerImage)) {\n    return null;\n  }\n\n  let provider = null;\n  let source = olLayer.getSource();\n\n  // Convert ImageWMS to TileWMS\n  if (source instanceof olSourceImageWMS && source.getUrl() &&\n    source.getImageLoadFunction() === olSourceImage.defaultImageLoadFunction) {\n    source = new olSourceTileWMS({\n      url: source.getUrl(),\n      params: source.getParams(),\n      attributions: source.getAttributions(),\n      projection: source.getProjection(),\n      logo: source.getLogo(),\n      'olcs.proxy': source.get('olcs.proxy'),\n      'olcs.imagesource': source\n    });\n  }\n\n  if (source instanceof olSourceTileImage) {\n    let projection = source.getProjection();\n\n    if (!projection) {\n      // if not explicit, assume the same projection as view\n      projection = viewProj;\n    } else if (projection !== viewProj) {\n      return null; // do not sync layers with projections different than view\n    }\n\n    const is3857 = projection === olProj.get('EPSG:3857');\n    const is4326 = projection === olProj.get('EPSG:4326');\n    if (is3857 || is4326) {\n      provider = new olcsCoreOLImageryProvider(source, viewProj);\n    } else {\n      return null;\n    }\n  } else {\n    // sources other than TileImage are currently not supported\n    return null;\n  }\n\n  // the provider is always non-null if we got this far\n\n  const layerOptions = {};\n\n  const forcedExtent = /** @type {ol.Extent} */ (olLayer.get('olcs.extent'));\n  const ext = forcedExtent || olLayer.getExtent();\n  if (ext) {\n    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);\n  }\n\n  const cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);\n  return cesiumLayer;\n};\n\n\n/**\n * Synchronizes the layer rendering properties (opacity, visible)\n * to the given Cesium ImageryLayer.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.ImageryLayer} csLayer\n * @api\n */\nexports.updateCesiumLayerProperties = function(olLayerWithParents, csLayer) {\n  let opacity = 1;\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerOpacity = olLayer.getOpacity();\n    if (layerOpacity !== undefined) {\n      opacity *= layerOpacity;\n    }\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    }\n  });\n  csLayer.alpha = opacity;\n  csLayer.show = visible;\n};\n\n\n/**\n * Convert a 2D or 3D OpenLayers coordinate to Cesium.\n * @param {ol.Coordinate} coordinate Ol3 coordinate.\n * @return {!Cesium.Cartesian3} Cesium cartesian coordinate\n * @api\n */\nexports.ol4326CoordinateToCesiumCartesian = function(coordinate) {\n  const coo = coordinate;\n  return coo.length > 2 ?\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) :\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);\n};\n\n\n/**\n * Convert an array of 2D or 3D OpenLayers coordinates to Cesium.\n * @param {Array.<!ol.Coordinate>} coordinates Ol3 coordinates.\n * @return {!Array.<Cesium.Cartesian3>} Cesium cartesian coordinates\n * @api\n */\nexports.ol4326CoordinateArrayToCsCartesians = function(coordinates) {\n  googAsserts.assert(coordinates !== null);\n  const toCartesian = exports.ol4326CoordinateToCesiumCartesian;\n  const cartesians = [];\n  for (let i = 0; i < coordinates.length; ++i) {\n    cartesians.push(toCartesian(coordinates[i]));\n  }\n  return cartesians;\n};\n\n\n/**\n * Reproject an OpenLayers geometry to EPSG:4326 if needed.\n * The geometry will be cloned only when original projection is not EPSG:4326\n * and the properties will be shallow copied.\n * @param {!T} geometry\n * @param {!ol.ProjectionLike} projection\n * @return {!T}\n * @template T\n * @api\n */\nexports.olGeometryCloneTo4326 = function(geometry, projection) {\n  googAsserts.assert(projection);\n\n  const proj4326 = olProj.get('EPSG:4326');\n  const proj = olProj.get(projection);\n  if (proj !== proj4326) {\n    const properties = geometry.getProperties();\n    geometry = geometry.clone();\n    geometry.transform(proj, proj4326);\n    geometry.setProperties(properties);\n  }\n  return geometry;\n};\n\n\n/**\n * Convert an OpenLayers color to Cesium.\n * @param {ol.Color|CanvasGradient|CanvasPattern|string} olColor\n * @return {!Cesium.Color}\n * @api\n */\nexports.convertColorToCesium = function(olColor) {\n  olColor = olColor || 'black';\n  if (Array.isArray(olColor)) {\n    return new Cesium.Color(\n        Cesium.Color.byteToFloat(olColor[0]),\n        Cesium.Color.byteToFloat(olColor[1]),\n        Cesium.Color.byteToFloat(olColor[2]),\n        olColor[3]\n    );\n  } else if (typeof olColor == 'string') {\n    return Cesium.Color.fromCssColorString(olColor);\n  }\n  googAsserts.fail('impossible');\n};\n\n\n/**\n * Convert an OpenLayers url to Cesium.\n * @param {string} url\n * @return {!olcsx.core.CesiumUrlDefinition}\n * @api\n */\nexports.convertUrlToCesium = function(url) {\n  let subdomains = '';\n  const re = /\\{(\\d|[a-z])-(\\d|[a-z])\\}/;\n  const match = re.exec(url);\n  if (match) {\n    url = url.replace(re, '{s}');\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      subdomains += String.fromCharCode(charCode);\n    }\n  }\n  return {\n    url,\n    subdomains\n  };\n};\n\n\n/**\n * Animate the return to a top-down view from the zenith.\n * The camera is rotated to orient to the North.\n * @param {!ol.Map} map\n * @param {!Cesium.Scene} scene\n * @return {Promise<undefined>}\n * @api\n */\nexports.resetToNorthZenith = function(map, scene) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('Could not get bottom pivot');\n      return;\n    }\n\n    const currentHeading = map.getView().getRotation();\n    if (currentHeading === undefined) {\n      reject('The view is not initialized');\n      return;\n    }\n    const angle = exports.computeAngleToZenith(scene, pivot);\n\n    // Point to North\n    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n      callback: () => {\n        const view = map.getView();\n        exports.normalizeView(view);\n        resolve();\n      }\n    };\n    exports.rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} angle in radian\n * @return {Promise<undefined>}\n * @api\n */\nexports.rotateAroundBottomCenter = function(scene, angle) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('could not get bottom pivot');\n      return;\n    }\n\n    const options = {callback: resolve};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const rotateAroundAxis = exports.rotateAroundAxis;\n    rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * Set the OpenLayers view to a specific rotation and\n * the nearest resolution.\n * @param {ol.View} view\n * @param {number=} angle\n * @api\n */\nexports.normalizeView = function(view, angle = 0) {\n  const resolution = view.getResolution();\n  view.setRotation(angle);\n  view.setResolution(view.constrainResolution(resolution));\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core.js\n// module id = null\n// module chunks = "],"sourceRoot":""}