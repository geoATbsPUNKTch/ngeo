webpackJsonp([4],{111:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(o(!function(){var e=new Error('Cannot find module "goog/asserts.js"');throw e.code="MODULE_NOT_FOUND",e}())),r=(i(o(!function(){var e=new Error('Cannot find module "ngeo/index.js"');throw e.code="MODULE_NOT_FOUND",e}())),i(o(112)));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,o,n){var r=this;this.scope=t.$new(!0),this.scope.$watch(function(){return r.scope.open},function(e){!e&&r.autoDestroy_&&r.timeout_(function(){r.destroy()})}),this.sce_=o,this.timeout_=n,this.element_=angular.element("<div ngeo-popup></div>"),this.autoDestroy_=!1,e(this.element_)(this.scope),angular.element(document.body).append(this.element_)};a.prototype.getOpen=function(){return this.scope.open},a.prototype.setOpen=function(e){this.scope.open=e},a.prototype.destroy=function(){this.scope.$destroy(),this.element_.remove()},a.prototype.setTitle=function(e){var t=this.sce_.trustAsHtml(e);this.scope.title=t},a.prototype.setContent=function(e,t){this.scope.content=t?this.sce_.trustAsHtml(e):e},a.prototype.setUrl=function(e){var t=this.sce_.trustAsHtml('<iframe src="'+e+'" width="100%" height="100%"></iframe>');this.setContent(t)},a.prototype.setWidth=function(e){this.element_.width(e)},a.prototype.setHeight=function(e){this.element_.height(e)},a.prototype.setSize=function(e,t){this.setWidth(e),this.setHeight(t)},a.prototype.setAutoDestroy=function(e){this.autoDestroy_=e},a.prototype.addClass=function(e){this.element_.addClass(e)},a.prototype.open=function(e){e.url?this.setUrl(e.url):e.content?this.setContent(e.content):n.default.fail('ngeo.message.Popup options requirest "url" or "content".'),void 0!==e.autoDestroy&&this.setAutoDestroy(e.autoDestroy),void 0!==e.cls&&this.addClass(e.cls),void 0!==e.height&&this.setHeight(e.height),void 0!==e.title&&this.setTitle(e.title),void 0!==e.width&&this.setWidth(e.width),this.setOpen(!0)},(a.Factory=function(e,t,o,n){return function(){return new a(e,t,o,n)}}).$inject=["$compile","$rootScope","$sce","$timeout"],(a.module=angular.module("ngeoCreatePopup",[r.default.name])).factory("ngeoCreatePopup",a.Factory),t.default=a},112:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=o(!function(){var e=new Error('Cannot find module "ngeo/index.js"');throw e.code="MODULE_NOT_FOUND",e}()),i=(n=r)&&n.__esModule?n:{default:n};var a=angular.module("ngeoPopup",["ngSanitize"]);a.value("ngeoPopupTemplateUrl",function(e,t){var o=t.ngeoPopupTemplateurl;return void 0!==o?o:i.default.baseModuleTemplateUrl+"/message/popupcomponent.html"}),a.directive_=function(e){return{restrict:"A",templateUrl:e,link:function(e,t,o){t.addClass("popover"),e.close=function(e){e&&(e.stopPropagation(),e.preventDefault()),t.addClass("hidden")},e.$watch("open",function(e,o){t.css("display",e?"block":"none")})}}},a.directive_.$inject=["ngeoPopupTemplateUrl"],a.directive("ngeoPopup",a.directive_),t.default=a},3:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(4);const i=function(e){const t=e||{};let o;o=void 0!==t.attributions?t.attributions:[i.ATTRIBUTION];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",a=void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";r.a.call(this,{attributions:o,cacheSize:t.cacheSize,crossOrigin:n,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:a,wrapX:t.wrapX})};Object(n.inherits)(i,r.a),i.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t.default=i},329:function(e,t,o){o(7),e.exports=o(330)},330:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(o(9)),r=c(o(14)),i=c(o(13)),a=c(o(3)),s=c(o(331)),l=(c(o(!function(){var e=new Error('Cannot find module "ngeo/index.js"');throw e.code="MODULE_NOT_FOUND",e}())),c(o(222))),u=c(o(12)),p=c(o(111));function c(e){return e&&e.__esModule?e:{default:e}}var d,m={};m.module=angular.module("app",[l.default.name,u.default.name,p.default.module.name]),m.layertreeComponent={bindings:{map:"=appLayertreeMap"},controller:"AppLayertreeController",controllerAs:"ctrl",template:'<div ngeo-layertree="::ctrl.tree" ngeo-layertree-templateurl="partials/layertree.html" ngeo-layertree-map="ctrl.map" ngeo-layertree-nodelayer="ctrl.getLayer(node)"></div>'},m.module.component("appLayertree",m.layertreeComponent),m.LayertreeController=function(e,t,o,n){var r=this;this.tree=void 0,e.get("data/tree.json").then(function(e){r.tree=e.data}),this.http_=e,this.sce_=t,this.getLayer_=o,this.infoPopup_=n(),this.promises_={}},m.LayertreeController.$inject=["$http","$sce","appGetLayer","ngeoCreatePopup"],m.LayertreeController.prototype.getLayer=function(e){return this.getLayer_(e)},m.LayertreeController.prototype.onButtonClick=function(e,t){var o=this,n=e.layerType;n in this.promises_||(this.promises_[n]=this.http_.get("data/metadata.html").then(function(e){return o.sce_.trustAsHtml(e.data)}));var r=this.infoPopup_;this.promises_[n].then(function(t){r.setTitle(e.name),r.setContent(t),r.setOpen(!0)})},m.module.controller("AppLayertreeController",m.LayertreeController),m.getLayer=(d={},function(e){if(!("layerType"in e))return null;var t=e.layerType;if(t in d)return d[t];var o=void 0;o="stamenWatercolor"==t?new s.default({layer:"watercolor"}):"stamenTerrain-labels"==t?new s.default({layer:"terrain-labels"}):"osmHumanitarian"==t?new a.default({url:"https://tile-{a-c}.openstreetmap.fr/hot/{z}/{x}/{y}.png"}):"osmCycle"==t?new a.default({url:"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png"}):"osmTransport"==t?new a.default({url:"https://{a-c}.tile.thunderforest.com/transport/{z}/{x}/{y}.png"}):new a.default;var n=new i.default({source:o});return n.set("type",t),d[t]=n,n}),m.module.value("appGetLayer",m.getLayer),m.MainController=function(){this.map=new n.default({layers:[new i.default({source:new a.default})],view:new r.default({center:[-10983710.59086991,4686507.078220731],zoom:4})})},m.module.controller("MainController",m.MainController),t.default=m},331:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r=o(3),i=o(4);const a=function(e){const t=e.layer.indexOf("-"),o=-1==t?e.layer:e.layer.slice(0,t),n=a.ProviderConfig[o],r=a.LayerConfig[e.layer],s=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+r.extension;i.a.call(this,{attributions:a.ATTRIBUTIONS,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=e.maxZoom?e.maxZoom:n.maxZoom,minZoom:void 0!=e.minZoom?e.minZoom:n.minZoom,opaque:r.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:s,wrapX:e.wrapX})};Object(n.inherits)(a,i.a),a.ATTRIBUTIONS=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',r.default.ATTRIBUTION],a.LayerConfig={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},a.ProviderConfig={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},t.default=a},4:function(e,t,o){"use strict";var n=o(0),r=o(16),i=o(17);const a=function(e){const t=e||{},o=void 0!==t.projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:i.a.createXYZ({extent:i.a.extentFromProjection(o),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});r.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:o,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(n.inherits)(a,r.a),t.a=a}},[329]);
//# sourceMappingURL=layertree.e822a9d11d308e1d0cb9.js.map