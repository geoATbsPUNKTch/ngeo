webpackJsonp([21],{467:function(t,e,i){i(17),t.exports=i(468)},468:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});u(i(4));var o=u(i(19)),n=u(i(166)),r=u(i(209)),a=u(i(167)),l=u(i(11));function u(t){return t&&t.__esModule?t:{default:t}}var s={};s.module=angular.module("gmfapp",[n.default.module.name,o.default.module.name,r.default.name]),s.module.value("gmfTreeUrl","https://geomapfish-demo.camptocamp.net/2.2/wsgi/themes?version=2&background=background"),s.module.value("gmfLayersUrl","https://geomapfish-demo.camptocamp.net/2.2/wsgi/layers/"),s.constant("angularLocaleScript","../build/angular-locale_{{locale}}.js"),s.MainController=function(t,e,i){var o=this;this.timeout_=t,this.xsdAttributes_=i,this.attributes=null,this.feature=null,this.layers=[];var n=["line","point","polygon"];e.loadThemes(),e.getThemesObject().then(function(t){if(t){var e=[];t.forEach(function(t){t.children.forEach(function(t){o.getDistinctFlatNodes_(t,e)})}),e.forEach(function(t){void 0===t.children&&-1!==n.indexOf(t.name)&&o.layers.push(t)})}})},s.MainController.$inject=["$timeout","gmfThemes","gmfXSDAttributes"],s.MainController.prototype.getSetLayers=function(t){return void 0!==t&&this.xsdAttributes_.getAttributes(t.id).then(this.setAttributes_.bind(this)),this.layers},s.MainController.prototype.setAttributes_=function(t){var e=this;this.feature=null,this.attributes=null,this.timeout_(function(){e.feature=new l.default,e.attributes=t},0)},s.MainController.prototype.getGeomType=function(){var t="N/A";if(this.attributes){var e=a.default.getGeometryAttribute(this.attributes);e&&e.geomType&&(t=e.geomType)}return t},s.MainController.prototype.getDistinctFlatNodes_=function(t,e){var i=void 0,o=t.children;if(void 0!==o)for(i=0;i<o.length;i++)this.getDistinctFlatNodes_(o[i],e);var n=!1;e.some(function(e){if(e.id===t.id)return n=!0}),n||e.push(t)},s.module.controller("MainController",s.MainController),e.default=s}},[467]);
//# sourceMappingURL=xsdattributes.5cd3a249e1750fe95362.js.map