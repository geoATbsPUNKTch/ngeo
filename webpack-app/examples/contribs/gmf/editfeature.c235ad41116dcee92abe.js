webpackJsonp([18],{386:function(e,t,o){o(14),e.exports=o(387)},387:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});m(o(30)),m(o(!function(){var e=new Error('Cannot find module "gmf/index.js"');throw e.code="MODULE_NOT_FOUND",e}()));var i=m(o(112)),r=m(o(130)),n=m(o(24)),a=m(o(9)),l=m(o(13)),s=m(o(17)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}(o(2)),c=m(o(16)),d=m(o(12)),h=m(o(79)),p=m(o(5)),f=m(o(68));function m(e){return e&&e.__esModule?e:{default:e}}var g={};g.module=angular.module("gmfapp",[i.default.name,r.default.module.name,n.default.name]),g.module.value("authenticationBaseUrl","https://geomapfish-demo.camptocamp.net/2.2/wsgi"),g.module.value("gmfLayersUrl","https://geomapfish-demo.camptocamp.net/2.2/wsgi/layers/"),g.constant("defaultTheme","Demo"),g.constant("angularLocaleScript","../build/angular-locale_{{locale}}.js"),g.MainController=function(t,o,i){this.scope_=t,this.editFeature_=o,this.gmfUser=i,this.wmsSource_=new f.default({url:"https://geomapfish-demo.camptocamp.net/2.2/wsgi/mapserv_proxy",params:{LAYERS:"point"}}),this.wmsLayer_=new h.default({source:this.wmsSource_}),this.pixelBuffer_=10,this.layerId_=113,this.feature=null,this.pending=!1,this.map=new l.default({layers:[new d.default({source:new p.default}),this.wmsLayer_],view:new s.default({projection:"EPSG:21781",resolutions:[200,100,50,20,10,5,2.5,2,1,.5],center:[537635,152640],zoom:2})}),this.map.on("singleclick",this.handleMapSingleClick_,this),e('[data-toggle="tooltip"]').tooltip({container:"body",trigger:"hover"})},g.MainController.$inject=["$scope","gmfEditFeature","gmfUser"],g.MainController.prototype.handleMapSingleClick_=function(e){var t=e.coordinate,o=this.map.getView().getResolution()*this.pixelBuffer_,i=u.buffer([t[0],t[1],t[0],t[1]],o);this.editFeature_.getFeaturesInExtent([this.layerId_],i).then(this.handleGetFeatures_.bind(this)),this.feature=null,this.pending=!0,this.scope_.$apply()},g.MainController.prototype.handleGetFeatures_=function(e){this.pending=!1,e.length&&(this.feature=e[0])},g.MainController.prototype.insertFeature=function(){this.pending=!0;var e=this.map,t=e.getView(),o=-50*t.getResolution(),i=e.getSize(),r=u.buffer(t.calculateExtent(i),o),n=u.getBottomLeft(r),l=u.getTopRight(r),s=n[0],d=n[1],h=l[0],p=h-s,f=l[1]-d,m=[s+Math.random()*p,h+Math.random()*f],g=new a.default({geometry:new c.default(m),name:"New point"});this.editFeature_.insertFeatures(this.layerId_,[g]).then(this.handleEditFeature_.bind(this))},g.MainController.prototype.updateFeature=function(){console.assert(this.feature),this.pending=!0,this.feature.set("name","Updated name"),this.editFeature_.updateFeature(this.layerId_,this.feature).then(this.handleEditFeature_.bind(this)),this.feature=null},g.MainController.prototype.deleteFeature=function(){console.assert(this.feature),this.editFeature_.deleteFeature(this.layerId_,this.feature).then(this.handleEditFeature_.bind(this)),this.feature=null},g.MainController.prototype.handleEditFeature_=function(e){this.pending=!1,this.refreshWMSLayer_()},g.MainController.prototype.refreshWMSLayer_=function(){this.wmsSource_.updateParams({random:Math.random()})},g.module.controller("MainController",g.MainController),t.default=g}).call(t,o(31))},5:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(0),r=o(20),n=o(21);const a=function(e){const t=e||{},o=void 0!==t.projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:n.a.createXYZ({extent:n.a.extentFromProjection(o),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});r.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:o,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(i.inherits)(a,r.a);var l=a;const s=function(e){const t=e||{};let o;o=void 0!==t.attributions?t.attributions:[s.ATTRIBUTION];const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",r=void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";l.call(this,{attributions:o,cacheSize:t.cacheSize,crossOrigin:i,opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:r,wrapX:t.wrapX})};Object(i.inherits)(s,l),s.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.';t.default=s}},[386]);
//# sourceMappingURL=editfeature.c235ad41116dcee92abe.js.map