{"version":3,"sources":["webpack:///./src/misc/ToolActivate.js","webpack:///./node_modules/openlayers/src/ol/source/common.js","webpack:///./src/misc/btnComponent.js","webpack:///./node_modules/openlayers/src/ol/source/WMSServerType.js","webpack:///./src/misc/decorate.js","webpack:///./src/misc/ToolActivateMgr.js","webpack:///./node_modules/openlayers/src/ol/Image.js","webpack:///./node_modules/openlayers/src/ol/source/ImageWMS.js","webpack:///./src/CustomEvent.js","webpack:///./node_modules/openlayers/src/ol/source/TileWMS.js","webpack:///./src/datasource/DataSources.js","webpack:///./src/datasource/DataSource.js","webpack:///./src/map/FeatureOverlayMgr.js","webpack:///./src/goog.asserts.js","webpack:///./src/map/module.js","webpack:///./src/map/BackgroundLayerMgr.js","webpack:///./src/map/directive.js","webpack:///./src/datasource/SyncDataSourcesMap.js","webpack:///./src/map/FeatureOverlay.js","webpack:///./src/map/recenter.js","webpack:///./src/map/resizemap.js","webpack:///./src/map/scaleselector.js","webpack:///./examples/toolActivate.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiPoint.js","webpack:///./node_modules/openlayers/src/ol/source/OSM.js","webpack:///./node_modules/openlayers/src/ol/source/XYZ.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiLineString.js","webpack:///./node_modules/openlayers/src/ol/geom/MultiPolygon.js","webpack:///./node_modules/openlayers/src/ol/interaction/DrawEventType.js","webpack:///./node_modules/openlayers/src/ol/interaction/Draw.js","webpack:///./node_modules/openlayers/src/ol/geom/Circle.js"],"names":["_index","__webpack_require__","toolContext","activePropertyName","this","getActive","setActive","newVal","__webpack_exports__","exports","angular","module","_index2","default","requires","push","name","btnGroupComponent_","$parse","restrict","controller","link","scope","element","attrs","assign","$watch","buttons_","some","buttonModel","newValue","directive","BtnGroupController","$scope","scope_","prototype","activate","index","forEach","expressionFn","i","addButton","length","btnComponent_","require","ctrls","buttonsCtrl","ngModelCtrl","indexInGroup","ngModelGet","ngModelSet","undefined","on","$apply","$setViewValue","$viewValue","$render","toggleClass","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","interaction","_asserts2","assertInstanceof","_Interaction2","Object","defineProperty","get","set","val","layer","_Base2","configurable","getVisible","setVisible","getOpacity","setOpacity","source","incrementEvents","decrementEvents","incrementLoadCount_","increment_","load_count","parent","decrementLoadCount_","decrement_","getLayers","olEvent","getSource","fail","$applyAsync","$rootScope","groups_","registerTool","groupName","tool","opt_defaultActivate","_this","entries","unlisten","oldVal","deactivateTools_","activateDefault_","defaultTool","ENABLE_ASSERTS","defaultTools","entry","assert","unregisterTool","splice","unregisterGroup","activateTool","deactivateTool","hasActiveTool","service","_ol_Image_","extent","resolution","pixelRatio","src","crossOrigin","imageLoadFunction","ImageBase","call","ImageState","IDLE","src_","image_","Image","imageListenerKeys_","state","imageLoadFunction_","ol","getImage","handleImageError_","ERROR","unlistenImage_","changed","handleImageLoad_","ol_extent","height","LOADED","load","LOADING","events","listenOnce","EventType","LOAD","setImage","image","unlistenByKey","ol_Image","ImageWMS","opt_options","options","source_Image","attributions","projection","resolutions","crossOrigin_","url_","url","defaultImageLoadFunction","params_","params","v13_","updateV13_","serverType_","hidpi_","hidpi","imageSize_","renderedRevision_","ratio_","ratio","GETFEATUREINFO_IMAGE_SIZE_","getGetFeatureInfoUrl","coordinate","projectionObj","proj","sourceProjectionObj","getProjection","reproj","calculateSourceResolution","baseParams","SERVICE","VERSION","common","REQUEST","FORMAT","TRANSPARENT","QUERY_LAYERS","obj","x","Math","floor","y","getRequestUrl_","getParams","getImageInternal","findNearestResolution","imageResolution","center","viewWidth","ceil","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","getRevision","getResolution","getPixelRatio","getExtent","round","listen","CHANGE","handleImageChange","getImageLoadFunction","size","asserts","getCode","WMSServerType","dpi","axisOrientation","getAxisOrientation","bbox","substr","join","uri","getUrl","setImageLoadFunction","setUrl","updateParams","version","string","compareVersions","olBase","_Event","type","detail","arguments","_Event2","inherits","__WEBPACK_IMPORTED_MODULE_13__uri_js__","TileWMS","transparent","__WEBPACK_IMPORTED_MODULE_9__source_TileImage_js__","cacheSize","opaque","reprojectionErrorThreshold","tileClass","tileGrid","tileLoadFunction","urls","wrapX","transition","gutter_","gutter","tmpExtent_","__WEBPACK_IMPORTED_MODULE_3__extent_js__","setKey","getKeyForParams_","__WEBPACK_IMPORTED_MODULE_1__index_js__","__WEBPACK_IMPORTED_MODULE_6__proj_js__","getTileGrid","getTileGridForProjection","tileCoord","getTileCoordForCoordAndResolution","getResolutions","tileResolution","tileExtent","getTileCoordExtent","tileSize","__WEBPACK_IMPORTED_MODULE_8__size_js__","toSize","getTileSize","tmpSize","buffer","__WEBPACK_IMPORTED_MODULE_7__reproj_js__","__WEBPACK_IMPORTED_MODULE_0__common_js__","__WEBPACK_IMPORTED_MODULE_4__obj_js__","getGutterInternal","__WEBPACK_IMPORTED_MODULE_10__source_WMSServerType_js__","__WEBPACK_IMPORTED_MODULE_2__asserts_js__","tmp","__WEBPACK_IMPORTED_MODULE_5__math_js__","__WEBPACK_IMPORTED_MODULE_11__tilecoord_js__","hash","getTilePixelRatio","res","key","fixedTileUrlFunction","scale","__WEBPACK_IMPORTED_MODULE_12__string_js__","value","_Collection2","_classCallCheck","inRange_","inRange","visible_","visible","attributes","id_","id","identifierAttribute_","identifierAttribute","maxResolution_","maxResolution","minResolution_","minResolution","name_","_createClass","olObj","featureUidToGroupIndex_","source_","_Vector4","useSpatialIndex","layer_","_Vector2","style","styleFunction_","bind","updateWhileAnimating","updateWhileInteracting","addFeature","feature","groupIndex","featureUid","getUid","toString","features","removeFeature","clear","group","isEmpty","getLayer","getFeatureOverlay","styleFunction","_Style2","defaultFunction","_FeatureOverlay2","init","map","setMap","setStyle","createFunction","defaultMessage","defaultArgs","givenMessage","givenArgs","message","args","e","AssertionError","errorHandler_","errorHandler","condition","opt_message","var_args","doAssertFailure_","Array","slice","goog","isNumber","typeOf","isString","isFunction","isObject","isArray","isBoolean","nodeType","dom","NodeType","ELEMENT","getType_","Function","displayName","constructor","_typeof","_BackgroundLayerMgr2","_directive2","_FeatureOverlayMgr2","_recenter2","_resizemap2","_scaleselector2","_Observable2","mapUids_","item","mapUid","previous","setAt","removeAt","insertAt","event","_CustomEvent2","current","dispatchEvent","updateDimensions","dimensions","baseBgLayer","layers","getArray","_Layer2","hasUpdates","updatedDimensions","refresh","_SyncDataSourcesMap2","directive_","$window","ngeoSyncDataSourcesMap","prop","$eval","_Map2","setTarget","manageResizeProp","resizeTransitionProp","resizeTransition","_events2","start","Date","now","loop","adjustSize","updateSize","renderSync","requestAnimationFrame","ngeoDataSources","ngeoDataSources_","map_","listenerKeys_","handleDataSourcesAdd_","$inject","view","getView","handleViewResolutionChange_","assertNumber","syncDataSourcesToResolution_","unByKey","evt","target","_View2","dataSource","syncDataSourceToResolution_","supportsDynamicInRange","_DataSource2","unbindMap_","bindMap_","_DataSources2","manager","manager_","features_","index_","setFeatures","handleFeatureAdd_","handleFeatureRemove_","$element","$attrs","mapExpr","recenter","attr","getSize","fit","zoom","setZoom","$","selected","selectedIndex","stateExpr","animationDelayKey","animationDelay","cancelAnimationFrame","olArray","templateUrl","baseModuleTemplateUrl","ngeoScaleselectorTemplateUrl","ScaleselectorController_","scalesExpr","scales","zoomLevels","keys","newLength","Number","sort","numberSafeCompareFunction","optionsExpr","getOptions_","$scope_","resolutionChangeKey_","currentScale","currentZoom","getZoom","getScale","handleViewChange_","registerResolutionChangeListener_","dropup","changeZoom","handleResolutionChange_","_this2","ngeo","_module2","_btnComponent2","_ToolActivateMgr2","MainController","ngeoFeatureOverlayMgr","ngeoToolActivateMgr","_Tile2","_OSM2","overlay","fill","_Fill2","color","stroke","_Stroke2","width","_Circle2","radius","mapClickIsEnabled","content","document","getElementById","c","_coordinate2","toStringXY","innerHTML","mapClickTool","_ToolActivate2","drawPoint","_Draw2","_decorate2","addInteraction","drawPointTool","drawLine","drawLineTool","drawPolygon","drawPolygonTool","__WEBPACK_IMPORTED_MODULE_9__math_js__","MultiPoint","coordinates","opt_layout","__WEBPACK_IMPORTED_MODULE_6__geom_SimpleGeometry_js__","setCoordinates","__WEBPACK_IMPORTED_MODULE_0__index_js__","appendPoint","point","flatCoordinates","__WEBPACK_IMPORTED_MODULE_1__array_js__","getFlatCoordinates","clone","multiPoint","setFlatCoordinates","layout","closestPointXY","closestPoint","minSquaredDistance","__WEBPACK_IMPORTED_MODULE_2__extent_js__","stride","ii","j","squaredDistance","getCoordinates","__WEBPACK_IMPORTED_MODULE_8__geom_flat_inflate_js__","getPoint","n","__WEBPACK_IMPORTED_MODULE_5__geom_Point_js__","getPoints","points","getType","__WEBPACK_IMPORTED_MODULE_4__geom_GeometryType_js__","MULTI_POINT","intersectsExtent","setLayout","__WEBPACK_IMPORTED_MODULE_7__geom_flat_deflate_js__","__WEBPACK_IMPORTED_MODULE_3__geom_GeometryLayout_js__","XY","setFlatCoordinatesInternal","__WEBPACK_IMPORTED_MODULE_1__source_XYZ_js__","OSM","ATTRIBUTION","maxZoom","__WEBPACK_IMPORTED_MODULE_2__tilegrid_js__","XYZ","createXYZ","extentFromProjection","minZoom","__WEBPACK_IMPORTED_MODULE_1__source_TileImage_js__","tilePixelRatio","tileUrlFunction","__WEBPACK_IMPORTED_MODULE_12__geom_flat_simplify_js__","MultiLineString","ends_","maxDelta_","maxDeltaRevision_","appendLineString","lineString","multiLineString","sqrt","__WEBPACK_IMPORTED_MODULE_7__geom_flat_closest_js__","getsMaxSquaredDelta","getsClosestPoint","getCoordinateAtM","m","opt_extrapolate","opt_interpolate","XYM","XYZM","extrapolate","interpolate","__WEBPACK_IMPORTED_MODULE_10__geom_flat_interpolate_js__","lineStringsCoordinateAtM","__WEBPACK_IMPORTED_MODULE_9__geom_flat_inflate_js__","coordinatess","getEnds","getLineString","__WEBPACK_IMPORTED_MODULE_5__geom_LineString_js__","getLineStrings","ends","lineStrings","offset","end","getFlatMidpoints","midpoints","midpoint","getSimplifiedGeometryInternal","squaredTolerance","simplifiedFlatCoordinates","simplifiedEnds","douglasPeuckers","simplifiedMultiLineString","MULTI_LINE_STRING","__WEBPACK_IMPORTED_MODULE_11__geom_flat_intersectsextent_js__","__WEBPACK_IMPORTED_MODULE_8__geom_flat_deflate_js__","setLineStrings","getLayout","__WEBPACK_IMPORTED_MODULE_17__geom_flat_simplify_js__","MultiPolygon","__WEBPACK_IMPORTED_MODULE_7__geom_SimpleGeometry_js__","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","orientedRevision_","orientedFlatCoordinates_","appendPolygon","polygon","multiPolygon","len","newEndss","__WEBPACK_IMPORTED_MODULE_10__geom_flat_closest_js__","getssMaxSquaredDelta","getssClosestPoint","getOrientedFlatCoordinates","containsXY","__WEBPACK_IMPORTED_MODULE_11__geom_flat_contains_js__","linearRingssContainsXY","getArea","__WEBPACK_IMPORTED_MODULE_8__geom_flat_area_js__","linearRingss","opt_right","__WEBPACK_IMPORTED_MODULE_16__geom_flat_orient_js__","orientLinearRingss","__WEBPACK_IMPORTED_MODULE_13__geom_flat_inflate_js__","coordinatesss","getEndss","getFlatInteriorPoints","flatCenters","__WEBPACK_IMPORTED_MODULE_9__geom_flat_center_js__","__WEBPACK_IMPORTED_MODULE_14__geom_flat_interiorpoint_js__","getInteriorPoints","interiorPoints","__WEBPACK_IMPORTED_MODULE_5__geom_MultiPoint_js__","linearRingssAreOriented","simplifiedEndss","quantizess","simplifiedMultiPolygon","getPolygon","prevEnds","__WEBPACK_IMPORTED_MODULE_6__geom_Polygon_js__","getPolygons","endss","polygons","jj","MULTI_POLYGON","__WEBPACK_IMPORTED_MODULE_15__geom_flat_intersectsextent_js__","__WEBPACK_IMPORTED_MODULE_12__geom_flat_deflate_js__","lastEnds","setPolygons","DrawEventType","Draw","Pointer","handleDownEvent","handleDownEvent_","handleEvent","handleUpEvent","handleUpEvent_","shouldHandle_","downPx_","downTimeout_","lastDragTime_","freehand_","snapTolerance_","snapTolerance","type_","mode_","getMode_","stopClick_","stopClick","minPoints_","minPoints","Mode_","POLYGON","maxPoints_","maxPoints","Infinity","finishCondition_","finishCondition","functions","geometryFunction","GeometryType","CIRCLE","opt_geometry","circle","Circle","NaN","squaredLength","ol_coordinate","setCenterAndRadius","Constructor","mode","POINT","Point","LINE_STRING","LineString","Polygon","geometry","concat","geometryFunction_","dragVertexDelay_","dragVertexDelay","finishCoordinate_","sketchFeature_","sketchPoint_","sketchCoords_","sketchLine_","sketchLineCoords_","squaredClickTolerance_","clickTolerance","overlay_","Vector","source_Vector","getDefaultStyleFunction","geometryName_","geometryName","condition_","noModifierKeys","freehandCondition_","freehand","always","freehandCondition","shiftKeyOnly","ol_Object","getChangeEventType","Property","ACTIVE","updateState_","styles","Style","createDefaultEditing","getGeometry","originalEvent","CONTEXTMENU","preventDefault","move","MapBrowserEventType","POINTERMOVE","pass","POINTERDRAG","pixel","clearTimeout","addToDrawing_","POINTERDOWN","handlePointerMove_","pointerEvent","pointerType","MouseSource","POINTER_TYPE","DBLCLICK","startDrawing_","setTimeout","MapBrowserPointerEvent","frameState","circleMode","finishDrawing","atFinish_","abortDrawing_","stopPropagation","downPx","clickPx","dx","dy","modifyDrawing_","createOrUpdateSketchPoint_","at","potentiallyDone","potentiallyFinishCoordinates","finishCoordinate","finishPixel","getPixelFromCoordinate","Feature","updateSketchFeatures_","setGeometryName","setGeometry","Event","last","sketchLineGeom","ring","getLinearRing","done","pop","removeLastPoint","sketchFeature","extend","shouldStopEvent","sketchFeatures","overlaySource","addFeatures","getMap","active","createRegularPolygon","opt_sides","opt_angle","angle","atan","createBox","__WEBPACK_IMPORTED_MODULE_5__geom_flat_deflate_js__","opt_radius","__WEBPACK_IMPORTED_MODULE_4__geom_SimpleGeometry_js__","delta","getRadius","getRadiusSquared_","getCenter","computeExtent","__WEBPACK_IMPORTED_MODULE_1__extent_js__","__WEBPACK_IMPORTED_MODULE_3__geom_GeometryType_js__","circleExtent","intersectsCoordinate","setCenter","__WEBPACK_IMPORTED_MODULE_2__geom_GeometryLayout_js__","setRadius","transform"],"mappings":"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","file":"toolActivate.9c505c852f07b38ea61d.js","sourcesContent":["/**\n * @module ngeo.misc.ToolActivate\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * A simple object that can be managed by `ngeo.misc.ToolActivateMgr`.\n *\n * See our live examples:\n * [../examples/mapquery.html](../examples/mapquery.html)\n * [../examples/toolActivate.html](../examples/toolActivate.html)\n *\n * @param {Object} toolContext An object which acts as the context for the tool.\n * @param {string} activePropertyName The name of a boolean property on\n *      `toolContext` which represents the active state of the tool.\n * @constructor\n * @struct\n * @ngname ngeoToolActivate\n * @export\n */\nconst exports = function(toolContext, activePropertyName) {\n\n  /**\n   * A getter function to get the active state of the tool.\n   * @return {boolean} Is active.\n   * @export\n   */\n  this.getActive = function() {\n    return toolContext[activePropertyName];\n  };\n\n  /**\n   * A setter function to set the active state of the tool.\n   * @param {boolean} newVal New active state.\n   * @export\n   */\n  this.setActive = function(newVal) {\n    toolContext[activePropertyName] = newVal;\n  };\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/ToolActivate.js","/**\n * @type {string} Default WMS version.\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/common.js\n// module id = 11\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.misc.btnComponent\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoBtnComponent', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * Provides two directives: ngeo-btn-group and ngeo-btn.\n *\n * The ngeo-btn-group directive allows creating \"toggle\" groups. It works with\n * the ngeo-btn directive.\n *\n * Example:\n *\n *     <div ngeo-btn-group>\n *       <button ngeo-btn class=\"btn\" ng-model=\"ctrl.drawPoint.active\"></button>\n *       <button ngeo-btn class=\"btn\" ng-model=\"ctrl.drawLine.active\"></button>\n *     </div>\n *\n * In that example the ngeo-btn are combined together in a \"toggle group\",\n * where activating a button will deactivate the others.\n *\n * One can use `ng-model` directive at the group level in order to know if\n * a button is active.\n *\n * Example:\n *\n *     <div ngeo-btn-group ngeo-btn-group-active=\"ctrl.drawToolActive\">\n *\n * See our live example: [../examples/interactionbtngroup.html](../examples/interactionbtngroup.html)\n *\n * @htmlAttribute {*} ngeo-btn-group-active Any property of the scope.\n * Tells whether at least one button of the group is active.\n * @param {angular.$parse} $parse Angular parse service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoBtnGroup\n */\nexports.btnGroupComponent_ = function($parse) {\n  return {\n    restrict: 'A',\n    controller: 'ngeoBtnGroupController',\n    /**\n     * @param {!angular.Scope} scope Scope.\n     * @param {!angular.JQLite=} element Element.\n     * @param {!angular.Attributes=} attrs Atttributes.\n     * @param {!ngeo.misc.btnComponent.BtnGroupController=} controller Controller.\n     */\n    link: (scope, element, attrs, controller) => {\n      const setActive = $parse(attrs['ngeoBtnGroupActive']).assign;\n\n      if (setActive) {\n        scope.$watch(\n          // return true if at least one button is active otherwise false\n          () => controller.buttons_.some(buttonModel => buttonModel(scope) === true),\n          (newValue) => {\n            setActive(scope, newValue);\n          }\n        );\n      }\n    }\n  };\n};\n\n\nexports.directive('ngeoBtnGroup', exports.btnGroupComponent_);\n\n\n/**\n * @param {!angular.Scope} $scope Scope.\n * @constructor\n * @struct\n *//* @ngInject\n * @ngdoc controller\n * @ngname ngeoBtnGroupController\n */\nexports.BtnGroupController = function($scope) {\n  /**\n   * @type {!Array.<!angular.parse.Expression>}\n   * @private\n   */\n  this.buttons_ = [];\n\n  /**\n   * @type {!angular.Scope}\n   * @private\n   */\n  this.scope_ = $scope;\n};\n\n\n/**\n * @param {number} index Index of the button in buttons array.\n */\nexports.BtnGroupController.prototype.activate = function(index) {\n  this.buttons_.forEach(function(expressionFn, i) {\n    if (i != index) {\n      expressionFn.assign(this.scope_, false);\n    }\n  }, this);\n};\n\n\n/**\n * @param {angular.parse.Expression} expressionFn Expression function.\n * @return {number} Index of the pushed setter.\n */\nexports.BtnGroupController.prototype.addButton = function(expressionFn) {\n  this.buttons_.push(expressionFn);\n  return this.buttons_.length - 1;\n};\n\n\nexports.controller('ngeoBtnGroupController',\n  exports.BtnGroupController);\n\n\n/**\n * The ngeo-btn allows creating toggle buttons working with ng-model. It is\n * typically used with Bootstrap buttons (`btn`).\n *\n * Example:\n *\n *     <button ngeo-btn class=\"btn\" ng-model=\"ctrl.interaction.active\"></button>\n *\n * This example is about creating a Bootstrap button that can pressed/depressed\n * to activate/deactivate an OpenLayers interaction.\n *\n * @htmlAttribute {*} ng-model Any property on the scope. Ideally a boolean.\n * @param {angular.$parse} $parse Angular parse service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoBtn\n */\nexports.btnComponent_ = function($parse) {\n  return {\n    require: ['?^ngeoBtnGroup', 'ngModel'],\n    restrict: 'A',\n    /**\n     * @param {!angular.Scope} scope Scope.\n     * @param {!angular.JQLite=} element Element.\n     * @param {!angular.Attributes=} attrs Atttributes.\n     * @param {!Array.<!Object>=} ctrls Controller.\n     */\n    link: (scope, element, attrs, ctrls) => {\n      const buttonsCtrl = ctrls[0];\n      const ngModelCtrl = ctrls[1];\n      let indexInGroup = -1;\n\n      const ngModelGet = $parse(attrs['ngModel']);\n      const ngModelSet = ngModelGet.assign;\n\n      // Set ng-model value to false if undefined\n      if (ngModelGet(scope) === undefined) {\n        ngModelSet(scope, false);\n      }\n      if (buttonsCtrl !== null) {\n        indexInGroup = buttonsCtrl.addButton(ngModelGet);\n      }\n\n      // UI -> model\n      element.on('click', () => {\n        scope.$apply(() => {\n          ngModelCtrl.$setViewValue(!ngModelCtrl.$viewValue);\n          ngModelCtrl.$render();\n        });\n      });\n\n      // model -> UI\n      ngModelCtrl.$render = function() {\n        if (ngModelCtrl.$viewValue && buttonsCtrl !== null) {\n          buttonsCtrl.activate(indexInGroup);\n        }\n        element.toggleClass('active', ngModelCtrl.$viewValue);\n      };\n    }\n  };\n};\n\n\nexports.directive('ngeoBtn', exports.btnComponent_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/btnComponent.js","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/WMSServerType.js\n// module id = 12\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.misc.decorate\n*/\nconst exports = {};\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport olInteractionInteraction from 'ol/interaction/Interaction.js';\nimport olLayerBase from 'ol/layer/Base.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceImage from 'ol/source/Image.js';\nimport olSourceTile from 'ol/source/Tile.js';\n\n\n/**\n * Provides a function that adds an \"active\" property (using\n * `Object.defineProperty`) to an interaction, making it possible to use ngModel\n * to activate/deactivate interactions.\n *\n * Example:\n *\n *      <input type=\"checkbox\" ngModel=\"interaction.active\" />\n *\n * @param {ol.interaction.Interaction} interaction Interaction to decorate.\n */\nexports.interaction = function(interaction) {\n  googAsserts.assertInstanceof(interaction, olInteractionInteraction);\n\n  Object.defineProperty(interaction, 'active', {\n    get: () => interaction.getActive(),\n    set: (val) => {\n      interaction.setActive(val);\n    }\n  });\n};\n\n\n/**\n * Provides a function that adds properties (using\n * `Object.defineProperty`) to the layer, making it possible to control layer\n * properties with ngModel.\n *\n * Example:\n *\n *      <input type=\"checkbox\" ngModel=\"layer.visible\" />\n *\n * @param {ol.layer.Base} layer Layer to decorate.\n */\nexports.layer = function(layer) {\n  googAsserts.assertInstanceof(layer, olLayerBase);\n\n  Object.defineProperty(layer, 'visible', {\n    configurable: true,\n    /**\n     * @return {boolean} Visible.\n     */\n    get: () => layer.getVisible(),\n    /**\n     * @param {boolean} val Visible.\n     */\n    set: (val) => {\n      layer.setVisible(val);\n    }\n  });\n\n  Object.defineProperty(layer, 'opacity', {\n    configurable: true,\n    /**\n     * @return {number} Opacity.\n     */\n    get: () => layer.getOpacity(),\n    /**\n     * @param {number} val Opacity.\n     */\n    set: (val) => {\n      layer.setOpacity(val);\n    }\n  });\n};\n\n\n/**\n * Provides a function that adds a 'loading 'property (using\n * `Object.defineProperty`) to an ol.layer.Group or a layer with\n * an ol.source.Tile or an ol.source.Image source.\n * This property is true when the layer is loading and false otherwise.\n *\n * Example:\n *\n *      <span ng-if=\"layer.loading\">please wait</span>\n *\n * @param {ol.layer.Base} layer layer.\n * @param {angular.Scope} $scope Scope.\n */\nexports.layerLoading = function(layer, $scope) {\n\n  let source;\n\n  /**\n   * @type {Array<string>|null}\n   */\n  let incrementEvents = null;\n\n  /**\n   * @type {Array<string>|null}\n   */\n  let decrementEvents = null;\n\n  /**\n   * @function\n   * @private\n   */\n  const incrementLoadCount_ = increment_;\n\n  /**\n   * @function\n   * @private\n   */\n  const decrementLoadCount_ = decrement_;\n\n  layer.set('load_count', 0, true);\n\n  if (layer instanceof olLayerGroup) {\n    layer.getLayers().on('add', (olEvent) => {\n      const newLayer = olEvent.element;\n      newLayer.set('parent_group', layer);\n    });\n  }\n\n  if (layer instanceof olLayerLayer) {\n    source = layer.getSource();\n    if (source === null) {\n      return;\n    } else if (source instanceof olSourceTile) {\n      incrementEvents = ['tileloadstart'];\n      decrementEvents = ['tileloadend', 'tileloaderror'];\n    } else if (source instanceof olSourceImage) {\n      incrementEvents = ['imageloadstart'];\n      decrementEvents = ['imageloadend', 'imageloaderror'];\n    } else {\n      googAsserts.fail('unsupported source type');\n    }\n\n    source.on(incrementEvents, () => {\n      incrementLoadCount_(layer);\n      $scope.$applyAsync();\n    });\n\n    source.on(decrementEvents, () => {\n      decrementLoadCount_(layer);\n      $scope.$applyAsync();\n    });\n  }\n\n  Object.defineProperty(layer, 'loading', {\n    configurable: true,\n    get: () => /** @type {number} */ (layer.get('load_count')) > 0\n  });\n\n  /**\n   * @function\n   * @param {ol.layer.Base} layer Layer\n   * @private\n   */\n  function increment_(layer) {\n    let load_count = /** @type {number} */ (layer.get('load_count'));\n    const parent = /** @type {ol.layer.Base} */ (layer.get('parent_group'));\n    layer.set('load_count', ++load_count, true);\n    if (parent) {\n      increment_(parent);\n    }\n  }\n\n  /**\n   * @function\n   * @param {ol.layer.Base} layer Layer\n   * @private\n   */\n  function decrement_(layer) {\n    let load_count = /** @type {number} */ (layer.get('load_count'));\n    const parent = /** @type {ol.layer.Base} */ (layer.get('parent_group'));\n    layer.set('load_count', --load_count, true);\n    if (parent) {\n      decrement_(parent);\n    }\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/decorate.js","/**\n * @module ngeo.misc.ToolActivateMgr\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMiscToolActivate from 'ngeo/misc/ToolActivate.js';\n\n/**\n * Provides a service to manage the activation of `ngeo.misc.ToolActivate` objects.\n *\n * Example:\n *\n * Each tool must be registered before using it.\n *\n *     let tool = new ngeo.misc.ToolActivate(interaction, 'active');\n *     ngeoToolActivateMgr.registerTool('mapTools', tool);\n *\n * A tool will be registered in a group identified by a group name.\n * Once registered a tool can be activated and deactivated. When activating a\n * tool, all others tools in the same group will be deactivated.\n *\n *     ngeoToolActivateMgr.activateTool(tool);\n *     ngeoToolActivateMgr.deactivateTool(tool);\n *\n * See our live examples:\n * [../examples/mapquery.html](../examples/mapquery.html)\n * [../examples/toolActivate.html](../examples/toolActivate.html)\n *\n * @param {angular.Scope} $rootScope The rootScope provider.\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoToolActivateMgr\n *//* @ngInject\n */\nconst exports = function($rootScope) {\n\n  /**\n   * @type {!Object.<string, Array.<ngeox.miscToolActivateMgrEntry>>}\n   * @private\n   */\n  this.groups_ = {};\n\n  /**\n   * The scope.\n   * @type {angular.Scope}\n   * @private\n   */\n  this.scope_ = $rootScope;\n};\n\n\n/**\n * Register a tool.\n * @param {string} groupName Name of the group of this tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to register.\n * @param {boolean=} opt_defaultActivate If true, this tool will be activated\n *     when all other tools in the group are deactivated.\n * @export\n */\nexports.prototype.registerTool = function(groupName, tool,\n  opt_defaultActivate) {\n  let entries = this.groups_[groupName];\n  if (!entries) {\n    entries = this.groups_[groupName] = [];\n  }\n\n  const unlisten = this.scope_.$watch(\n    tool.getActive,\n    (newVal, oldVal) => {\n      if (newVal === oldVal) {\n        return;\n      }\n      if (newVal) {\n        this.deactivateTools_(groupName, tool);\n      } else {\n        this.activateDefault_(groupName);\n      }\n    });\n\n  entries.push({\n    tool: tool,\n    defaultTool: opt_defaultActivate || false,\n    unlisten: unlisten\n  });\n\n  if (googAsserts.ENABLE_ASSERTS) {\n    // check that only one default tool per group exists\n    let defaultTools = 0;\n    entries.forEach((entry) => {\n      if (entry.defaultTool) {\n        defaultTools++;\n      }\n    });\n    googAsserts.assert(\n      defaultTools <= 1, `more than one default tool in group ${groupName}`);\n  }\n};\n\n\n/**\n * Unregister a tool from a group.\n * @param {string} groupName Name of the group of this tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to unregister.\n * @export\n */\nexports.prototype.unregisterTool = function(groupName, tool) {\n  const entries = this.groups_[groupName];\n  if (entries) {\n    for (let i = 0; i < entries.length; i++) {\n      if (entries[i].tool == tool) {\n        entries[i].unlisten();\n        entries.splice(i, 1);\n        break;\n      }\n    }\n  }\n};\n\n\n/**\n * Unregister each tool from a group.\n * @param {string} groupName Name of the group of tools to unregister.\n * @export\n */\nexports.prototype.unregisterGroup = function(groupName) {\n  const entries = this.groups_[groupName];\n  if (entries) {\n    for (let i = 0; i < entries.length; i++) {\n      entries[i].unlisten();\n    }\n    delete this.groups_[groupName];\n  }\n};\n\n\n/**\n * Activate a tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to activate.\n * @export\n */\nexports.prototype.activateTool = function(tool) {\n  tool.setActive(true);\n};\n\n\n/**\n * Deactivate a tool.\n * @param {ngeo.misc.ToolActivate} tool Tool to deactivate.\n * @export\n */\nexports.prototype.deactivateTool = function(tool) {\n  tool.setActive(false);\n};\n\n\n/**\n * Deactivate all tools except the given one.\n *\n * @param {string} groupName Name of the group.\n * @param {ngeo.misc.ToolActivate} tool Tool to activate.\n * @private\n */\nexports.prototype.deactivateTools_ = function(groupName, tool) {\n  const entries = this.groups_[groupName];\n  for (let i = 0; i < entries.length; i++) {\n    if (tool != entries[i].tool) {\n      entries[i].tool.setActive(false);\n    }\n  }\n};\n\n\n/**\n * Activate the default tool in the given group if no other tool is active.\n *\n * @param {string} groupName Name of the group.\n * @private\n */\nexports.prototype.activateDefault_ = function(groupName) {\n  const entries = this.groups_[groupName];\n  let defaultTool = null;\n  let hasActiveTool = false;\n\n  for (let i = 0; i < entries.length; i++) {\n    hasActiveTool = hasActiveTool || entries[i].tool.getActive();\n\n    if (entries[i].defaultTool) {\n      defaultTool = entries[i].tool;\n    }\n  }\n\n  if (!hasActiveTool && defaultTool !== null) {\n    defaultTool.setActive(true);\n  }\n};\n\n\nexports.module = angular.module('ngeoToolActivateMgr', []);\nexports.module.service('ngeoToolActivateMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/ToolActivateMgr.js","/**\n * @module ol/Image\n */\nimport {inherits} from './index.js';\nimport _ol_ImageBase_ from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport _ol_events_ from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n/**\n * @constructor\n * @extends {ol.ImageBase}\n * @param {ol.Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n */\nconst _ol_Image_ = function(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n  _ol_ImageBase_.call(this, extent, resolution, pixelRatio, ImageState.IDLE);\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @protected\n   * @type {ol.ImageState}\n   */\n  this.state = ImageState.IDLE;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = imageLoadFunction;\n\n};\n\ninherits(_ol_Image_, _ol_ImageBase_);\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_Image_.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageError_ = function() {\n  this.state = ImageState.ERROR;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageLoad_ = function() {\n  if (this.resolution === undefined) {\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n  this.state = ImageState.LOADED;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @override\n * @api\n */\n_ol_Image_.prototype.load = function() {\n  if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n    this.state = ImageState.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      _ol_events_.listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      _ol_events_.listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    this.imageLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n */\n_ol_Image_.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\n_ol_Image_.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\nexport default _ol_Image_;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/Image.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport _ol_Image_ from '../Image.js';\nimport {assert} from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport ImageSource from '../source/Image.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @constructor\n * @fires ol.source.Image.Event\n * @extends {ol.source.Image}\n * @param {olx.source.ImageWMSOptions=} opt_options Options.\n * @api\n */\nconst ImageWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  ImageSource.call(this, {\n    attributions: options.attributions,\n    projection: options.projection,\n    resolutions: options.resolutions\n  });\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.url_ = options.url;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n    options.imageLoadFunction : ImageSource.defaultImageLoadFunction;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = options.params || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n  this.updateV13_();\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.imageSize_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n};\n\ninherits(ImageWMS, ImageSource);\n\n\n/**\n * @const\n * @type {ol.Size}\n * @private\n */\nImageWMS.GETFEATUREINFO_IMAGE_SIZE_ = [101, 101];\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nImageWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  if (this.url_ === undefined) {\n    return undefined;\n  }\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    resolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const extent = getForViewAndSize(coordinate, resolution, 0,\n    ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n  const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(\n    extent, ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nImageWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @inheritDoc\n */\nImageWMS.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {\n\n  if (this.url_ === undefined) {\n    return null;\n  }\n\n  resolution = this.findNearestResolution(resolution);\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const imageResolution = resolution / pixelRatio;\n\n  const center = getCenter(extent);\n  const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n  const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n  const viewExtent = getForViewAndSize(center, imageResolution, 0,\n    [viewWidth, viewHeight]);\n  const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n  const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n  const requestExtent = getForViewAndSize(center, imageResolution, 0,\n    [requestWidth, requestHeight]);\n\n  const image = this.image_;\n  if (image &&\n      this.renderedRevision_ == this.getRevision() &&\n      image.getResolution() == resolution &&\n      image.getPixelRatio() == pixelRatio &&\n      containsExtent(image.getExtent(), viewExtent)) {\n    return image;\n  }\n\n  const params = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(params, this.params_);\n\n  this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n  this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n  const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n    projection, params);\n\n  this.image_ = new _ol_Image_(requestExtent, resolution, pixelRatio,\n    url, this.crossOrigin_, this.imageLoadFunction_);\n\n  this.renderedRevision_ = this.getRevision();\n\n  _ol_events_.listen(this.image_, EventType.CHANGE,\n    this.handleImageChange, this);\n\n  return this.image_;\n\n};\n\n\n/**\n * Return the image load function of the source.\n * @return {ol.ImageLoadFunctionType} The image load function.\n * @api\n */\nImageWMS.prototype.getImageLoadFunction = function() {\n  return this.imageLoadFunction_;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string} Request URL.\n * @private\n */\nImageWMS.prototype.getRequestUrl_ = function(extent, size, pixelRatio, projection, params) {\n\n  assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 8); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  params['WIDTH'] = size[0];\n  params['HEIGHT'] = size[1];\n\n  const axisOrientation = projection.getAxisOrientation();\n  let bbox;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    bbox = [extent[1], extent[0], extent[3], extent[2]];\n  } else {\n    bbox = extent;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  return appendParams(/** @type {string} */ (this.url_), params);\n};\n\n\n/**\n * Return the URL used for this WMS source.\n * @return {string|undefined} URL.\n * @api\n */\nImageWMS.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * Set the image load function of the source.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n * @api\n */\nImageWMS.prototype.setImageLoadFunction = function(\n  imageLoadFunction) {\n  this.image_ = null;\n  this.imageLoadFunction_ = imageLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string|undefined} url URL.\n * @api\n */\nImageWMS.prototype.setUrl = function(url) {\n  if (url != this.url_) {\n    this.url_ = url;\n    this.image_ = null;\n    this.changed();\n  }\n};\n\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nImageWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.image_ = null;\n  this.changed();\n};\n\n\n/**\n * @private\n */\nImageWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default ImageWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/ImageWMS.js\n// module id = null\n// module chunks = ","/**\n * @module ngeo.CustomEvent\n*/\nimport * as olBase from 'ol/index.js';\nimport olEventsEvent from 'ol/events/Event.js';\n\n/**\n * @constructor\n * @extends {ol.events.Event}\n * @param {string} type Event type.\n * @param {T} detail Event Detail.\n * @template T\n */\nconst exports = function(type, detail = {}) {\n\n  olEventsEvent.call(this, type);\n\n  /**\n   * @type {T}\n   */\n  this.detail = detail;\n\n};\n\nolBase.inherits(exports, olEventsEvent);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/CustomEvent.js","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport _ol_size_ from '../size.js';\nimport TileImage from '../source/TileImage.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.TileWMSOptions=} opt_options Tile WMS options.\n * @api\n */\nconst TileWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  const params = options.params || {};\n\n  const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: !transparent,\n    projection: options.projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileClass: options.tileClass,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = params;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.tmpExtent_ = createEmpty();\n\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n\n};\n\ninherits(TileWMS, TileImage);\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nTileWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projectionObj);\n  }\n\n  const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  let tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    tileResolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n    tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n  const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getGutterInternal = function() {\n  return this.gutter_;\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nTileWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.Size} tileSize Tile size.\n * @param {ol.Extent} tileExtent Tile extent.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string|undefined} Request URL.\n * @private\n */\nTileWMS.prototype.getRequestUrl_ = function(tileCoord, tileSize, tileExtent,\n  pixelRatio, projection, params) {\n\n  const urls = this.urls;\n  if (!urls) {\n    return undefined;\n  }\n\n  params['WIDTH'] = tileSize[0];\n  params['HEIGHT'] = tileSize[1];\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 52); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  const axisOrientation = projection.getAxisOrientation();\n  const bbox = tileExtent;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    let tmp;\n    tmp = tileExtent[0];\n    bbox[0] = tileExtent[1];\n    bbox[1] = tmp;\n    tmp = tileExtent[2];\n    bbox[2] = tileExtent[3];\n    bbox[3] = tmp;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  let url;\n  if (urls.length == 1) {\n    url = urls[0];\n  } else {\n    const index = modulo(_ol_tilecoord_.hash(tileCoord), urls.length);\n    url = urls[index];\n  }\n  return appendParams(url, params);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getTilePixelRatio = function(pixelRatio) {\n  return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n  /** @type {number} */ (pixelRatio);\n};\n\n\n/**\n * @private\n * @return {string} The key for the current params.\n */\nTileWMS.prototype.getKeyForParams_ = function() {\n  let i = 0;\n  const res = [];\n  for (const key in this.params_) {\n    res[i++] = key + '-' + this.params_[key];\n  }\n  return res.join('/');\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.fixedTileUrlFunction = function(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = _ol_size_.scale(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n};\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nTileWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n};\n\n\n/**\n * @private\n */\nTileWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default TileWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/TileWMS.js\n// module id = 23\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.datasource.DataSources\n*/\nconst exports = {};\nimport ngeoBase from 'ngeo/index.js';\nimport olCollection from 'ol/Collection.js';\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoDataSources', []);\n// DataSources with the ngeox.datasource.DataSources type.\nexports.module.value('ngeoDataSources', new olCollection());\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSources.js","/**\n * @module ngeo.datasource.DataSource\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @implements {ngeox.datasource.DataSource}\n */\nconst exports = class {\n\n  /**\n   * A `ngeo.datasource.DataSource` represents a single source of data, which\n   * can combine different type of servers to display or fetch the data. It can\n   * serve as a point of entry to get all the information about a single data\n   * source.\n   *\n   * You can use the information in a data source to do all sorts of things:\n   *  - create `ol.layer.Layer` objects using the WMS, WMTS or even WFS\n   *    information\n   *  - issue WMS/WFS queries\n   *  - know whether the data is visible or not\n   *  - apply filter rules on it\n   *\n   * @struct\n   * @param {ngeox.datasource.DataSourceOptions} options Options.\n   */\n  constructor(options) {\n\n    // === DYNAMIC properties (i.e. that can change / be watched ===\n\n    /**\n     * A data source is considered 'in range' when it is synchronized to\n     * a map view and the resolution of that view is within the range of\n     * the `maxResolution` and `minResolution`. These 2 properties are\n     * required for the `inRange` property to be dynamic, otherwise its\n     * value is always `true` by default.\n     *\n     * The synchronization is made in the `ngeo.datasource.SyncDataSourcesMap`\n     * service.\n     *\n     * @type {boolean}\n     * @private\n     */\n    this.inRange_ = options.inRange !== false;\n\n    /**\n     * Whether the data source is visible or not, i.e. whether its is ON or OFF.\n     * Defaults to `false`.\n     * @type {boolean}\n     * @private\n     */\n    this.visible_ = options.visible === true;\n\n\n    // === STATIC properties (i.e. that never change) ===\n\n    /**\n     * The attributes of the data source.\n     *\n     * Note: `attributes` is not using the conventionnal getter/setter due\n     * to:  See: https://github.com/google/closure-compiler/issues/1089\n     *\n     * @type {?Array.<ngeox.Attribute>}\n     * @export\n     */\n    this.attributes = options.attributes || null;\n\n    /**\n     * (Required) The data source id.\n     * @type {number}\n     * @private\n     */\n    this.id_ = options.id;\n\n    /**\n     * The name of an attribute among the attributes of the data source.\n     * The value of that attribute, in records, can be used to identify\n     * each record individually.\n     * @type {string|undefined}\n     * @private\n     */\n    this.identifierAttribute_ = options.identifierAttribute;\n\n    /**\n     * Maximum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.maxResolution_ = options.maxResolution;\n\n    /**\n     * Minimum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.minResolution_ = options.minResolution;\n\n    /**\n     * (Required) A human-readable name for the data source.\n     * @type {string}\n     * @private\n     */\n    this.name_ = options.name;\n  }\n\n  // ========================================\n  // === Dynamic property getters/setters ===\n  // ========================================\n\n  /**\n   * @return {boolean} In range\n   * @export\n   */\n  get inRange() {\n    return this.inRange_;\n  }\n\n  /**\n   * @param {boolean} inRange In range\n   * @export\n   */\n  set inRange(inRange) {\n    this.inRange_ = inRange;\n  }\n\n  /**\n   * @return {boolean} Visible\n   * @export\n   */\n  get visible() {\n    return this.visible_;\n  }\n\n  /**\n   * @param {boolean} visible Visible\n   * @export\n   */\n  set visible(visible) {\n    this.visible_ = visible;\n  }\n\n  // =======================================\n  // === Static property getters/setters ===\n  // =======================================\n\n  /**\n   * @return {?Array.<ngeox.Attribute>} Attributes\n   * @export\n   */\n  getAttributes() {\n    return this.attributes;\n  }\n\n  /**\n   * @param {?Array.<ngeox.Attribute>} attributes Attributes\n   * @export\n   */\n  setAttributes(attributes) {\n    this.attributes = attributes;\n  }\n\n  /**\n   * @return {number} Id\n   * @export\n   */\n  get id() {\n    return this.id_;\n  }\n\n  /**\n   * @return {string|undefined} Identifier attribute\n   * @export\n   */\n  get identifierAttribute() {\n    return this.identifierAttribute_;\n  }\n\n  /**\n   * @return {number|undefined} Maximum resolution\n   * @export\n   */\n  get maxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * @return {number|undefined} Minimum resolution\n   * @export\n   */\n  get minResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * @return {string} Name\n   * @export\n   */\n  get name() {\n    return this.name_;\n  }\n\n\n  // ===================================\n  // === Calculated property getters ===\n  // ===================================\n\n  /**\n   * Whether the data source is queryable or not.\n   * @return {boolean} Whether the data source is queryable or not.\n   * @export\n   */\n  get queryable() {\n    return false;\n  }\n\n  /**\n   * @return {boolean} Whether the data source supports a dynamic `inRange`\n   *     property or not, i.e. whether it can be calculated.\n   * @export\n   */\n  get supportsDynamicInRange() {\n    return this.maxResolution !== null || this.minResolution !== null;\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSource.js","/**\n * @module ngeo.map.FeatureOverlayMgr\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olBase from 'ol/index.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport * as olObj from 'ol/obj.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMapFeatureOverlay from 'ngeo/map/FeatureOverlay.js';\n\n/**\n * Provides a service that wraps an \"unmanaged\" vector layer,\n * used as a shared vector layer across the application.\n *\n * Example:\n *\n * The application's main component/controller initializes the feature\n * overlay manager with the map:\n *\n *     ngeoFeatureOverlayMgr.init(map);\n *\n * Once initialized, components of the application can use the manager to\n * create a feature overlay, configuring it with specific styles:\n *\n *     let featureOverlay = ngeoFeatureOverlayMgr.getFeatureOverlay();\n *     featureOverlay.setStyle(myStyle);\n *     featureOverlay.addFeature(myFeature);\n *\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoFeatureOverlayMgr\n */\nconst exports = function() {\n\n  /**\n   * @type {Object.<string, number>}\n   * @private\n   */\n  this.featureUidToGroupIndex_ = {};\n\n  /**\n   * @type {Array.<ngeox.MapFeatureOverlayGroup>}\n   * @private\n   */\n  this.groups_ = [];\n\n  /**\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.source_ = new olSourceVector({\n    useSpatialIndex: false\n  });\n\n  /**\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.layer_ = new olLayerVector({\n    source: this.source_,\n    style: this.styleFunction_.bind(this),\n    updateWhileAnimating: true,\n    updateWhileInteracting: true\n  });\n\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.addFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  this.featureUidToGroupIndex_[featureUid] = groupIndex;\n  this.groups_[groupIndex].features[featureUid] = feature;\n  this.source_.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.removeFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  delete this.featureUidToGroupIndex_[featureUid];\n  delete this.groups_[groupIndex].features[featureUid];\n  this.source_.removeFeature(feature);\n};\n\n\n/**\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.clear = function(groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const group = this.groups_[groupIndex];\n  for (const featureUid in group.features) {\n    this.removeFeature(group.features[featureUid], groupIndex);\n  }\n  googAsserts.assert(olObj.isEmpty(group.features));\n};\n\n\n/**\n * @return {ol.layer.Vector} The vector layer used internally.\n * @export\n */\nexports.prototype.getLayer = function() {\n  return this.layer_;\n};\n\n\n/**\n * @return {ngeo.map.FeatureOverlay} Feature overlay.\n * @export\n */\nexports.prototype.getFeatureOverlay = function() {\n  const groupIndex = this.groups_.length;\n  this.groups_.push({\n    styleFunction: olStyleStyle.defaultFunction,\n    features: {}\n  });\n  return new ngeoMapFeatureOverlay(this, groupIndex);\n};\n\n\n/**\n * @param {ol.Map} map Map.\n * @export\n */\nexports.prototype.init = function(map) {\n  this.layer_.setMap(map);\n};\n\n\n/**\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @param {number} groupIndex Group index.\n * @export\n */\nexports.prototype.setStyle = function(style, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  this.groups_[groupIndex].styleFunction = style === null ?\n    olStyleStyle.defaultFunction : olStyleStyle.createFunction(style);\n};\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.style.Style>|ol.style.Style} Styles.\n * @private\n */\nexports.prototype.styleFunction_ = function(feature, resolution) {\n  const featureUid = olBase.getUid(feature).toString();\n  googAsserts.assert(featureUid in this.featureUidToGroupIndex_);\n  const groupIndex = this.featureUidToGroupIndex_[featureUid];\n  const group = this.groups_[groupIndex];\n  return group.styleFunction(feature, resolution);\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlayMgr', [\n  ngeoMapFeatureOverlay.module.name\n]);\nexports.module.service('ngeoFeatureOverlayMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlayMgr.js","/* eslint valid-jsdoc: 0, prefer-rest-params: 0,  */\n// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Utilities to check the preconditions, postconditions and\n * invariants runtime.\n *\n * Methods in this package should be given special treatment by the compiler\n * for type-inference. For example, <code>goog.asserts.assert(foo)</code>\n * will restrict <code>foo</code> to a truthy value.\n *\n * The compiler has an option to disable asserts. So code like:\n * <code>\n * var x = goog.asserts.assert(foo()); goog.asserts.assert(bar());\n * </code>\n * will be transformed into:\n * <code>\n * var x = foo();\n * </code>\n * The compiler will leave in foo() (because its return value is used),\n * but it will remove bar() because it assumes it does not have side-effects.\n *\n * @author agrieve@google.com (Andrew Grieve)\n */\n\nconst exports = {};\n\n/**\n * Throws an exception with the given message and \"Assertion failed\" prefixed\n * onto it.\n * @param {string} defaultMessage The message to use if givenMessage is empty.\n * @param {Array<*>} defaultArgs The substitution arguments for defaultMessage.\n * @param {string|undefined} givenMessage Message supplied by the caller.\n * @param {Array<*>} givenArgs The substitution arguments for givenMessage.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n * @private\n */\nexports.doAssertFailure_ = function(\n  defaultMessage, defaultArgs, givenMessage, givenArgs) {\n  let message = 'Assertion failed';\n  let args;\n  if (givenMessage) {\n    message += `: ${givenMessage}`;\n    args = givenArgs;\n  } else if (defaultMessage) {\n    message += `: ${defaultMessage}`;\n    args = defaultArgs;\n  }\n  // The '' + works around an Opera 10 bug in the unit tests. Without it,\n  // a stack trace is added to var message above. With this, a stack trace is\n  // not added until this line (it causes the extra garbage to be added after\n  // the assertion message instead of in the middle of it).\n  const e = new exports.AssertionError(`${message}`, args || []);\n  exports.errorHandler_(e);\n};\n\n\n/**\n * Sets a custom error handler that can be used to customize the behavior of\n * assertion failures, for example by turning all assertion failures into log\n * messages.\n * @param {function(!goog.asserts.AssertionError)} errorHandler\n */\nexports.setErrorHandler = function(errorHandler) {\n  if (exports.ENABLE_ASSERTS) {\n    exports.errorHandler_ = errorHandler;\n  }\n};\n\n\n/**\n * Checks if the condition evaluates to true if goog.asserts.ENABLE_ASSERTS is\n * true.\n * @template T\n * @param {T} condition The condition to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {T} The value of the condition.\n * @throws {goog.asserts.AssertionError} When the condition evaluates to false.\n */\nexports.assert = function(condition, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !condition) {\n    exports.doAssertFailure_(\n      '', null, opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return condition;\n};\n\n\n/**\n * Fails if goog.asserts.ENABLE_ASSERTS is true. This function is useful in case\n * when we want to add a check in the unreachable area like switch-case\n * statement:\n *\n * <pre>\n *  switch(type) {\n *    case FOO: doSomething(); break;\n *    case BAR: doSomethingElse(); break;\n *    default: goog.asserts.fail('Unrecognized type: ' + type);\n *      // We have only 2 types - \"default:\" section is unreachable code.\n *  }\n * </pre>\n *\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} Failure.\n */\nexports.fail = function(opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS) {\n    exports.errorHandler_(\n      new exports.AssertionError(\n        `Failure${opt_message ? `: ${opt_message}` : ''}`,\n        Array.prototype.slice.call(arguments, 1)));\n  }\n};\n\n\n/**\n * Checks if the value is a number if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {number} The value, guaranteed to be a number when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n */\nexports.assertNumber = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isNumber(value)) {\n    exports.doAssertFailure_(\n      'Expected number but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {number} */ (value);\n};\n\n\n/**\n * Checks if the value is a string if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {string} The value, guaranteed to be a string when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a string.\n */\nexports.assertString = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isString(value)) {\n    exports.doAssertFailure_(\n      'Expected string but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {string} */ (value);\n};\n\n\n/**\n * Checks if the value is a function if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Function} The value, guaranteed to be a function when asserts\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a function.\n */\nexports.assertFunction = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isFunction(value)) {\n    exports.doAssertFailure_(\n      'Expected function but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Function} */ (value);\n};\n\n\n/**\n * Checks if the value is an Object if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Object} The value, guaranteed to be a non-null object.\n * @throws {goog.asserts.AssertionError} When the value is not an object.\n */\nexports.assertObject = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isObject(value)) {\n    exports.doAssertFailure_(\n      'Expected object but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Object} */ (value);\n};\n\n\n/**\n * Checks if the value is an Array if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Array<?>} The value, guaranteed to be a non-null array.\n * @throws {goog.asserts.AssertionError} When the value is not an array.\n */\nexports.assertArray = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isArray(value)) {\n    exports.doAssertFailure_(\n      'Expected array but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Array<?>} */ (value);\n};\n\n\n/**\n * Checks if the value is a boolean if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {boolean} The value, guaranteed to be a boolean when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a boolean.\n */\nexports.assertBoolean = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isBoolean(value)) {\n    exports.doAssertFailure_(\n      'Expected boolean but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {boolean} */ (value);\n};\n\n\n/**\n * Checks if the value is a DOM Element if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Element} The value, likely to be a DOM Element when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not an Element.\n */\nexports.assertElement = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS &&\n      (!goog.isObject(value) || value.nodeType != goog.dom.NodeType.ELEMENT)) {\n    exports.doAssertFailure_(\n      'Expected Element but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Element} */ (value);\n};\n\n\n/**\n * Checks if the value is an instance of the user-defined type if\n * goog.asserts.ENABLE_ASSERTS is true.\n *\n * The compiler may tighten the type returned by this function.\n *\n * @param {?} value The value to check.\n * @param {function(new: T, ...)} type A user-defined constructor.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} When the value is not an instance of\n *     type.\n * @return {T}\n * @template T\n */\nexports.assertInstanceof = function(value, type, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !(value instanceof type)) {\n    exports.doAssertFailure_(\n      'Expected instanceof %s but got %s.',\n      [exports.getType_(type), exports.getType_(value)],\n      opt_message, Array.prototype.slice.call(arguments, 3));\n  }\n  return value;\n};\n\n\n/**\n * Checks that no enumerable keys are present in Object.prototype. Such keys\n * would break most code that use {@code for (var ... in ...)} loops.\n */\nexports.assertObjectPrototypeIsIntact = function() {\n  for (const key in Object.prototype) {\n    exports.fail(`${key} should not be enumerable in Object.prototype.`);\n  }\n};\n\n\n/**\n * Returns the type of a value. If a constructor is passed, and a suitable\n * string cannot be found, 'unknown type name' will be returned.\n * @param {*} value A constructor, object, or primitive.\n * @return {string} The best display name for the value, or 'unknown type name'.\n * @private\n */\nexports.getType_ = function(value) {\n  if (value instanceof Function) {\n    return value.displayName || value.name || 'unknown type name';\n  } else if (value instanceof Object) {\n    return value.constructor.displayName || value.constructor.name ||\n        Object.prototype.toString.call(value);\n  } else {\n    return value === null ? 'null' : typeof value;\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/goog.asserts.js","/**\n * @module ngeo.map.module\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapBackgroundLayerMgr from 'ngeo/map/BackgroundLayerMgr.js';\nimport ngeoMapDirective from 'ngeo/map/directive.js';\nimport ngeoMapFeatureOverlayMgr from 'ngeo/map/FeatureOverlayMgr.js';\nimport ngeoMapRecenter from 'ngeo/map/recenter.js';\nimport ngeoMapResizemap from 'ngeo/map/resizemap.js';\nimport ngeoMapScaleselector from 'ngeo/map/scaleselector.js';\n\n/**\n * Also related to the map but not included in the module:\n *  - ngeo.map.FeatureOverlay (already required by ngeo.map.FeatureOverlayMgr)\n *\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMapModule', [\n  ngeoBase.module.name, // Change me when all dependencies are in a module.\n  ngeoMapBackgroundLayerMgr.module.name,\n  ngeoMapDirective.name,\n  ngeoMapFeatureOverlayMgr.module.name,\n  ngeoMapRecenter.name,\n  ngeoMapResizemap.name,\n  ngeoMapScaleselector.name\n]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/module.js","/**\n * @module ngeo.map.BackgroundLayerMgr\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoCustomEvent from 'ngeo/CustomEvent.js';\nimport * as olBase from 'ol/index.js';\nimport olObservable from 'ol/Observable.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport olSourceWMTS from 'ol/source/WMTS.js';\n\n/**\n * Provides a service for setting/unsetting background layers\n * in maps.\n *\n * The notion of background/base layers doesn't exist in OpenLayers. This\n * service adds that notion.\n *\n * Setting a background layer to map is done with the `set` function:\n *\n *     ngeoBackgroundLayerMgr.set(map, layer);\n *\n * To unset the background layer pass `null` as the `layer` argument:\n *\n *     ngeoBackgroundLayerMgr.set(map, null);\n *\n * The `get` function returns the current background layer of the map passed\n * as an argument. `null` is returned if the map doesn't have a background\n * layer.\n *\n * The background layer is always added at index 0 in the map's layers\n * collection. When a background layer is set it is inserted (at index 0)\n * if the map does not already have a background layer, otherwise the\n * new background layer replaces the previous one at index 0.\n *\n * Users can subscribe to a 'change' event to get notified when the background\n * layer changes:\n *\n *     ngeoBackgroundLayerMgr.on('change', function(e) {\n *       // do something with the layer\n *       let layer = ngeoBackgroundLayerMgr.get();\n *       // know which layer was used before\n *       let previous = e.previous\n *     });\n *\n * See our live examples:\n * [../examples/backgroundlayer.html](../examples/backgroundlayer.html)\n * [../examples/backgroundlayerdropdown.html](../examples/backgroundlayerdropdown.html)\n *\n * @extends {ol.Observable}\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoBackgroundLayerMgr\n */\nconst exports = function() {\n\n  olObservable.call(this);\n\n  /**\n   * Object used to track if maps have background layers.\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.mapUids_ = {};\n};\n\nolBase.inherits(exports, olObservable);\n\n\n/**\n * Return the current background layer of a given map. `null` is returned if\n * the map does not have a background layer.\n * @param {ol.Map} map Map.\n * @return {ol.layer.Base} layer The background layer.\n * @export\n */\nexports.prototype.get = function(map) {\n  const mapUid = olBase.getUid(map).toString();\n  return mapUid in this.mapUids_ ? map.getLayers().item(0) : null;\n};\n\n\n/**\n * Set the background layer of a map. If `layer` is `null` the background layer\n * is removed.\n * @param {ol.Map} map The map.\n * @param {ol.layer.Base} layer The new background layer.\n * @return {ol.layer.Base} The previous background layer.\n * @export\n */\nexports.prototype.set = function(map, layer) {\n  const mapUid = olBase.getUid(map).toString();\n  const previous = this.get(map);\n  if (previous !== null) {\n    googAsserts.assert(mapUid in this.mapUids_);\n    if (layer !== null) {\n      map.getLayers().setAt(0, layer);\n    } else {\n      map.getLayers().removeAt(0);\n      delete this.mapUids_[mapUid];\n    }\n  } else if (layer !== null) {\n    map.getLayers().insertAt(0, layer);\n    this.mapUids_[mapUid] = true;\n  }\n  /** @type {ngeox.BackgroundEvent} */\n  const event = new ngeoCustomEvent('change', {\n    current: layer,\n    previous: previous\n  });\n  this.dispatchEvent(event);\n\n  return previous;\n};\n\n/**\n * @param {ol.Map} map The map.\n * @param {Object.<string, string>} dimensions The global dimensions object.\n * @export\n */\nexports.prototype.updateDimensions = function(map, dimensions) {\n  const baseBgLayer = this.get(map);\n  if (baseBgLayer) {\n    let layers = [baseBgLayer];\n    if (baseBgLayer instanceof olLayerGroup) {\n      // Handle the first level of layers of the base background layer.\n      layers = baseBgLayer.getLayers().getArray();\n    }\n\n    layers.forEach((layer) => {\n      googAsserts.assertInstanceof(layer, olLayerLayer);\n      if (layer) {\n        let hasUpdates = false;\n        const updatedDimensions = {};\n        for (const key in layer.get('dimensions')) {\n          const value = dimensions[key];\n          if (value !== undefined) {\n            updatedDimensions[key] = value;\n            hasUpdates = true;\n          }\n        }\n        if (hasUpdates) {\n          const source = layer.getSource();\n          if (source instanceof olSourceWMTS) {\n            source.updateDimensions(updatedDimensions);\n            source.refresh();\n          } else if (source instanceof olSourceTileWMS || source instanceof olSourceImageWMS) {\n            source.updateParams(updatedDimensions);\n            source.refresh();\n          }\n        }\n      }\n    });\n  }\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoBackgroundLayerMgr', []);\nexports.module.service('ngeoBackgroundLayerMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/BackgroundLayerMgr.js","/**\n * @module ngeo.map.directive\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\n\n// TODO Remove me, there should not be a dependency on datasources from the map.\nimport ngeoDatasourceSyncDataSourcesMap from 'ngeo/datasource/SyncDataSourcesMap.js';\n\nimport olEvents from 'ol/events.js';\nimport olMap from 'ol/Map.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMap', [\n  ngeoDatasourceSyncDataSourcesMap.module.name\n]);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * Provides a directive used to insert a user-defined OpenLayers\n * map in the DOM. The directive does not create an isolate scope.\n *\n * Examples:\n *\n *   Simple:\n *\n *      <div ngeo-map=\"ctrl.map\"></div>\n *\n *   Manage window resizing:\n *\n *      <div\n *        ngeo-map=\"ctrl.map\"\n *        ngeo-map-manage-resize=\"ctrl.manageResize\"\n *        ngeo-map-resize-transition=\"ctrl.resizeTransition\">\n *      </div>\n *\n * See our live examples:\n * [../examples/permalink.html](../examples/permalink.html)\n * [../examples/simple.html](../examples/simple.html)\n *\n * @htmlAttribute {ol.Map} ngeo-map The map.\n * @param {angular.$window} $window The Angular $window service.\n * @param {ngeo.datasource.SyncDataSourcesMap} ngeoSyncDataSourcesMap Ngeo sync\n *     data sources map service.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoMap\n *//* @ngInject\n */\nexports.directive_ = function($window, ngeoSyncDataSourcesMap) {\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      // Get the 'ol.Map' object from attributes and manage it accordingly\n      const attr = 'ngeoMap';\n      const prop = attrs[attr];\n\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      map.setTarget(element[0]);\n\n      ngeoSyncDataSourcesMap.map = map;\n\n\n      // Get the 'window resize' attributes, which are optionnal. If defined,\n      // the browser window 'resize' event is listened to update the size of\n      // the map when fired. A transition option is also available to let any\n      // animation that may occur on the div of the map to smootly resize the\n      // map while in progress.\n      const manageResizeAttr = 'ngeoMapManageResize';\n      const manageResizeProp = attrs[manageResizeAttr];\n      const manageResize = scope.$eval(manageResizeProp);\n\n      if (manageResize) {\n        const resizeTransitionAttr = 'ngeoMapResizeTransition';\n        const resizeTransitionProp = attrs[resizeTransitionAttr];\n\n        const resizeTransition = /** @type {number|undefined} */ (\n          scope.$eval(resizeTransitionProp));\n\n        olEvents.listen(\n          $window,\n          'resize',\n          () => {\n            if (resizeTransition) {\n              // Resize with transition\n              const start = Date.now();\n              let loop = true;\n              const adjustSize = function() {\n                map.updateSize();\n                map.renderSync();\n                if (loop) {\n                  $window.requestAnimationFrame(adjustSize);\n                }\n                if (Date.now() - start > resizeTransition) {\n                  loop = false;\n                }\n              };\n              adjustSize();\n            } else {\n              // A single plain resize\n              map.updateSize();\n            }\n          }\n        );\n      }\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoMap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/directive.js","/**\n * @module ngeo.datasource.SyncDataSourcesMap\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoDatasourceDataSource from 'ngeo/datasource/DataSource.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDatasourceDataSources from 'ngeo/datasource/DataSources.js';\n\nimport olEvents from 'ol/events.js';\nimport olObservable from 'ol/Observable.js';\nimport olView from 'ol/View.js';\nimport googAsserts from 'goog/asserts.js';\n\nconst exports = class {\n\n  /**\n   * This service is responsible of the synchronization between the ngeo\n   * collection of data sources and a specific map. It listens to events\n   * that come directly or indirectly from the map and update the inner\n   * properties of the data sources.\n   *\n   * The following data sources properties are synchronized here:\n   *\n   * - inRange: The map view 'change:resolution' event is listened and the\n   *   property is updated depending on the current resolution.\n   *\n   * @param {ngeox.datasource.DataSources} ngeoDataSources Ngeo collection of\n   *     data sources objects.\n   *\n   * @struct\n   * @ngdoc service\n   * @ngname ngeoSyncDataSourcesMap\n   *//* @ngInject\n   */\n  constructor(ngeoDataSources) {\n\n    /**\n     * @type {ngeox.datasource.DataSources}\n     * @private\n     */\n    this.ngeoDataSources_ = ngeoDataSources;\n\n    /**\n     * @type {ol.Map}\n     * @private\n     */\n    this.map_ = null;\n\n    /**\n     * @type {!Array.<!ol.EventsKey>}\n     * @private\n     */\n    this.listenerKeys_ = [];\n\n    olEvents.listen(this.ngeoDataSources_, 'add', this.handleDataSourcesAdd_, this);\n  }\n\n  /**\n   * Set a map to this service. Null can be given to unset the map.\n   * @param {?ol.Map} map Map.\n   */\n  set map(map) {\n    if (this.map_) {\n      this.unbindMap_(this.map_);\n    }\n\n    this.map_ = map;\n\n    if (map) {\n      this.bindMap_(map);\n    }\n  }\n\n  /**\n   * Bind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  bindMap_(map) {\n\n    // (1) Event listeners\n    const view = map.getView();\n    this.listenerKeys_.push(\n      olEvents.listen(view, 'change:resolution', this.handleViewResolutionChange_, this)\n    );\n\n    // (2) Sync resolution with existing data sources\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Unbind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  unbindMap_(map) {\n    olObservable.unByKey(this.listenerKeys_);\n    this.listenerKeys_ = [];\n  }\n\n  /**\n   * Called when the resolution of the map view changes. Synchronize the\n   * datasources to current resolution of the view.\n   * @param {Event} evt Event.\n   * @private\n   */\n  handleViewResolutionChange_(evt) {\n    const view = evt.target;\n    googAsserts.assertInstanceof(view, olView);\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Synchronize all datasources in the ngeo collection with a given resolution.\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourcesToResolution_(resolution) {\n    this.ngeoDataSources_.forEach((dataSource) => {\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    });\n  }\n\n  /**\n   * Synchronize a data source `inRange` property with a given resolution.\n   * @param {ngeo.datasource.DataSource} dataSource Data source\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourceToResolution_(dataSource, resolution) {\n    // No need to do anything if the data source doesn't support dynamic\n    // setting of inRange\n    if (!dataSource.supportsDynamicInRange) {\n      return;\n    }\n\n    const maxResolution = dataSource.maxResolution;\n    const minResolution = dataSource.minResolution;\n\n    const inMinRange = minResolution === null ||\n        minResolution === undefined ||\n        resolution >= minResolution;\n    const inMaxRange = maxResolution === null ||\n        maxResolution === undefined ||\n        resolution <= maxResolution;\n    const inRange = inMinRange && inMaxRange;\n\n    dataSource.inRange = inRange;\n  }\n\n  /**\n   * Called when a new data source is added to the ngeo collection. If there's\n   * map bound, update its `inRange` right away.\n   * @param {!ol.Collection.Event} event Event\n   * @private\n   */\n  handleDataSourcesAdd_(event) {\n    const dataSource = googAsserts.assertInstanceof(\n      event.element, ngeoDatasourceDataSource);\n    if (this.map_) {\n      const resolution = this.map_.getView().getResolution();\n      googAsserts.assertNumber(resolution);\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    }\n  }\n\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoSyncDataSourcesMap', [\n  ngeoDatasourceDataSources.module.name,\n]);\nexports.module.service('ngeoSyncDataSourcesMap', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/SyncDataSourcesMap.js","/**\n * @module ngeo.map.FeatureOverlay\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olBase from 'ol/index.js';\nimport olEvents from 'ol/events.js';\n\n/**\n * @constructor\n * @param {ngeo.map.FeatureOverlayMgr} manager The feature overlay manager.\n * @param {number} index This feature overlay's index.\n */\nconst exports = function(manager, index) {\n\n  /**\n   * @type {ngeo.map.FeatureOverlayMgr}\n   * @private\n   */\n  this.manager_ = manager;\n\n  /**\n   * @type {ol.Collection.<ol.Feature>}\n   * @private\n   */\n  this.features_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.index_ = index;\n};\n\n\n/**\n * Add a feature to the feature overlay.\n * @param {ol.Feature} feature The feature to add.\n * @export\n */\nexports.prototype.addFeature = function(feature) {\n  this.manager_.addFeature(feature, this.index_);\n};\n\n\n/**\n * Remove a feature from the feature overlay.\n * @param {ol.Feature} feature The feature to remove.\n * @export\n */\nexports.prototype.removeFeature = function(feature) {\n  this.manager_.removeFeature(feature, this.index_);\n};\n\n\n/**\n * Remove all the features from the feature overlay.\n * @export\n */\nexports.prototype.clear = function() {\n  this.manager_.clear(this.index_);\n};\n\n\n/**\n * Configure this feature overlay with a feature collection. Features added\n * to the collection are also added to the overlay. Same for removal. If you\n * configure the feature overlay with a feature collection you will use the\n * collection to add and remove features instead of using the overlay's\n * `addFeature`, `removeFeature` and `clear` functions.\n * @param {ol.Collection.<ol.Feature>} features Feature collection.\n * @export\n */\nexports.prototype.setFeatures = function(features) {\n  if (this.features_ !== null) {\n    this.features_.clear();\n    olEvents.unlisten(this.features_, 'add', this.handleFeatureAdd_, this);\n    olEvents.unlisten(this.features_, 'remove', this.handleFeatureRemove_, this);\n  }\n  if (features !== null) {\n    features.forEach(function(feature) {\n      this.addFeature(feature);\n    }, this);\n    olEvents.listen(features, 'add', this.handleFeatureAdd_, this);\n    olEvents.listen(features, 'remove', this.handleFeatureRemove_, this);\n  }\n  this.features_ = features;\n};\n\n\n/**\n * Set a style for the feature overlay.\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @export\n */\nexports.prototype.setStyle = function(style) {\n  this.manager_.setStyle(style, this.index_);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureAdd_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureRemove_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.removeFeature(feature);\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlay', []);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlay.js","/**\n * @module ngeo.map.recenter\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoRecenter', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides the \"ngeoRecenter\" directive, a widget for recentering a map\n * to a specific extent (by using `ngeo-extent`) or a specific zoom level\n * (by using `ngeo-zoom`).\n *\n * Example:\n *\n *      <div ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <a href=\"#\" ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</a>\n *        <a href=\"#\" ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</a>\n *        <a href=\"#\" ngeo-zoom=\"1\">Zoom to level 1</a>\n *      </div>\n *\n * Or with a select:\n *\n *      <select ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <option ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</option>\n *        <option ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</option>\n *      </select>\n *\n * See our live example: [../examples/recenter.html](../examples/recenter.html)\n *\n * @htmlAttribute {ol.Map} ngeo-recenter-map The map.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoRecenter\n */\nexports.directive_ = function() {\n  return {\n    restrict: 'A',\n    link: ($scope, $element, $attrs) => {\n      const mapExpr = $attrs['ngeoRecenterMap'];\n      const map = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n\n      function recenter(element) {\n        const extent = element.attr('ngeo-extent');\n        if (extent !== undefined) {\n          const size = /** @type {ol.Size} */ (map.getSize());\n          map.getView().fit($scope.$eval(extent), {size});\n        }\n        const zoom = element.attr('ngeo-zoom');\n        if (zoom !== undefined) {\n          map.getView().setZoom($scope.$eval(zoom));\n        }\n      }\n\n      // if the children is a link or button\n      $element.on('click', '*', function(event) {\n        recenter(angular.element($(this)));\n      });\n\n      // if the children is an option inside a select\n      $element.on('change', (event) => {\n        const selected = event.target.options[event.target.selectedIndex];\n        recenter(angular.element(selected));\n      });\n\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoRecenter', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/recenter.js","/**\n * @module ngeo.map.resizemap\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport olMap from 'ol/Map.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoResizemap', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides a directive that resizes the map in an animation loop\n * during 1 second when the value of \"state\" changes. This is especially useful\n * when changing the size of other elements with a transition leads to a change\n * of the map size.\n *\n * Example:\n *\n *      <div ng-class=\"ctrl.open ? 'open' : 'close' ngeo-resizemap=\"ctrl.map\"\n *        ngeo-resizemap-state=\"open\">\n *      <div>\n *      <input type=\"checkbox\" ng-model=\"ctrl.open\" />\n *\n * See our live example: [../examples/animation.html](../examples/animation.html)\n *\n * @param {angular.$window} $window Angular window service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoResizemap\n */\nexports.directive_ = function($window) {\n  const /** @type {number} */ duration = 1000;\n\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      const attr = 'ngeoResizemap';\n      const prop = attrs[attr];\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      const stateExpr = attrs['ngeoResizemapState'];\n      googAsserts.assert(stateExpr !== undefined);\n\n      let start;\n      let animationDelayKey;\n\n      const animationDelay = () => {\n        map.updateSize();\n        map.renderSync();\n\n        if (Date.now() - start < duration) {\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      };\n\n      // Make sure the map is resized when the animation ends.\n      // It may help in case the animation didn't start correctly.\n      element.on('transitionend', () => {\n        map.updateSize();\n        map.renderSync();\n      });\n\n      scope.$watch(stateExpr, (newVal, oldVal) => {\n        if (newVal != oldVal) {\n          start = Date.now();\n          $window.cancelAnimationFrame(animationDelayKey);\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      });\n    }\n  };\n};\n\n\nexports.directive('ngeoResizemap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/resizemap.js","/**\n * @module ngeo.map.scaleselector\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olArray from 'ol/array.js';\nimport olMap from 'ol/Map.js';\nimport olEvents from 'ol/events.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoScaleselector', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\nexports.value('ngeoScaleselectorTemplateUrl',\n  /**\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @return {string} Template URL.\n     */\n  (element, attrs) => {\n    const templateUrl = attrs['ngeoScaleselectorTemplateurl'];\n    return templateUrl !== undefined ? templateUrl :\n      `${ngeoBase.baseModuleTemplateUrl}/map/scaleselector.html`;\n  });\n\n\n/**\n * Provides the \"ngeoScaleselector\" directive, a widget for\n * selecting map scales.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\" ngeo-scaleselector-map=\"ctrl.map\">\n *     </div>\n *\n * The expression passed to the ngeo-scaleselector attribute should return an\n * array of this form:\n *\n *    [20000, 10000, 5000, 2500]\n *\n * That directive's partial uses Bootstrap's `dropdown` and `dropdown-menu`\n * classes, and `data-toggle=\"dropdown\"`, so it is meant to be used with\n * Bootstrap's \"dropdown\" jQuery plugin.\n *\n * You can pass options to configure the behaviors of this element. Options is\n * a {@link ngeox.ScaleselectorOptions} object.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\"\n *       ngeo-scaleselector-map=\"ctrl.map\"\n *       ngeo-scaleselector-options=\"ctrl.scaleSelectorOptions\">\n *     </div>\n *\n * By default the directive uses \"scaleselector.html\" as its templateUrl. This\n * can be changed by redefining the \"ngeoScaleselectorTemplateUrl\" value.\n *\n * The directive has its own scope, but it is not isolate scope. That scope\n * includes a reference to the directive's controller: the \"scaleselectorCtrl\"\n * scope property.\n *\n * The directive doesn't create any watcher. In particular the object including\n * the scales information is now watched.\n *\n * See our live example: [../examples/scaleselector.html](../examples/scaleselector.html)\n *\n * @htmlAttribute {!Array.<number>} ngeo-scaleselector The available scales.\n * @htmlAttribute {ol.Map} ngeo-scaleselector-map The map.\n * @htmlAttribute {ngeox.ScaleselectorOptions} ngeo-scaleselector-options\n *     Optionnal. The configuration options.\n * @param {string|function(!angular.JQLite=, !angular.Attributes=)}\n *     ngeoScaleselectorTemplateUrl Template URL for the directive.\n * @return {angular.Directive} Directive Definition Object.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoScaleselector\n */\nexports.directive_ = function(ngeoScaleselectorTemplateUrl) {\n  return {\n    restrict: 'A',\n    scope: true,\n    controller: 'NgeoScaleselectorController',\n    templateUrl: ngeoScaleselectorTemplateUrl\n  };\n};\n\n\nexports.directive('ngeoScaleselector', exports.directive_);\n\n\n/**\n * @constructor\n * @private\n * @struct\n * @param {angular.Scope} $scope Directive scope.\n * @param {angular.JQLite} $element Element.\n * @param {angular.Attributes} $attrs Attributes.\n *//* @ngInject\n * @ngdoc controller\n * @ngname NgeoScaleselectorController\n */\nexports.ScaleselectorController_ = function($scope, $element, $attrs) {\n\n  const scalesExpr = $attrs['ngeoScaleselector'];\n\n  /**\n   * The zoom level/scale map object.\n   * @type {!Array.<number>}\n   * @export\n   */\n  this.scales = /** @type {!Array.<number>} */\n    ($scope.$eval(scalesExpr));\n  goog.asserts.assert(this.scales !== undefined);\n\n  /**\n   * @type {Array.<number>}\n   * @export\n   */\n  this.zoomLevels;\n\n  $scope.$watch(() => Object.keys(this.scales).length, (newLength) => {\n    this.zoomLevels = Object.keys(this.scales).map(Number);\n    this.zoomLevels.sort(olArray.numberSafeCompareFunction);\n  });\n\n  const mapExpr = $attrs['ngeoScaleselectorMap'];\n\n  /**\n   * @type {ol.Map}\n   * @private\n   */\n  this.map_ = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n  goog.asserts.assertInstanceof(this.map_, olMap);\n\n  const optionsExpr = $attrs['ngeoScaleselectorOptions'];\n  const options = $scope.$eval(optionsExpr);\n\n  /**\n   * @type {!ngeox.ScaleselectorOptions}\n   * @export\n   */\n  this.options = exports.ScaleselectorController_.getOptions_(options);\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.$scope_ = $scope;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.resolutionChangeKey_ = null;\n\n  /**\n   * @type {number|undefined}\n   * @export\n   */\n  this.currentScale = undefined;\n\n  const view = this.map_.getView();\n  if (view !== null) {\n    const currentZoom = this.map_.getView().getZoom();\n    if (currentZoom !== undefined) {\n      this.currentScale = this.getScale(currentZoom);\n    }\n  }\n\n  olEvents.listen(this.map_, 'change:view', this.handleViewChange_, this);\n\n  this.registerResolutionChangeListener_();\n\n  $scope['scaleselectorCtrl'] = this;\n\n};\n\n\n/**\n * @param {?} options Options after expression evaluation.\n * @return {!ngeox.ScaleselectorOptions} Options object.\n * @private\n */\nexports.ScaleselectorController_.getOptions_ = function(options) {\n  let dropup = false;\n  if (options !== undefined) {\n    dropup = options['dropup'] == true;\n  }\n  return /** @type {ngeox.ScaleselectorOptions} */ ({\n    dropup: dropup\n  });\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @return {number} Scale.\n * @export\n */\nexports.ScaleselectorController_.prototype.getScale = function(zoom) {\n  return this.scales[zoom];\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @export\n */\nexports.ScaleselectorController_.prototype.changeZoom = function(zoom) {\n  this.map_.getView().setZoom(zoom);\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleResolutionChange_ = function(e) {\n  const view = this.map_.getView();\n  const currentScale = this.scales[/** @type {number} */ (view.getZoom())];\n\n  // handleResolutionChange_ is a change:resolution listener. The listener\n  // may be executed outside the Angular context, for example when the user\n  // double-clicks to zoom on the map.\n  //\n  // But it may also be executed inside the Angular context, when a function\n  // in Angular context calls setZoom or setResolution on the view, which\n  // is for example what happens when this controller's changeZoom function\n  // is called.\n  //\n  // For that reason we use $applyAsync instead of $apply here.\n\n  if (currentScale !== undefined) {\n    this.$scope_.$applyAsync(() => {\n      this.currentScale = currentScale;\n    });\n  }\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleViewChange_ = function(e) {\n  this.registerResolutionChangeListener_();\n  this.handleResolutionChange_(null);\n};\n\n\n/**\n * @private\n */\nexports.ScaleselectorController_.prototype.registerResolutionChangeListener_ = function() {\n  if (this.resolutionChangeKey_ !== null) {\n    olEvents.unlistenByKey(this.resolutionChangeKey_);\n  }\n  const view = this.map_.getView();\n  this.resolutionChangeKey_ = olEvents.listen(view,\n    'change:resolution', this.handleResolutionChange_,\n    this);\n};\n\n\nexports.controller('NgeoScaleselectorController',\n  exports.ScaleselectorController_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/scaleselector.js","/**\n * @module app.toolActivate\n*/\nconst exports = {};\n\nimport './toolActivate.css';\nimport './common_dependencies.js';\nimport ngeoMapModule from 'ngeo/map/module.js';\n\n/** @suppress {extraRequire} */\nimport ngeoMiscBtnComponent from 'ngeo/misc/btnComponent.js';\n\nimport ngeoMiscDecorate from 'ngeo/misc/decorate.js';\nimport ngeoMiscToolActivate from 'ngeo/misc/ToolActivate.js';\nimport ngeoMiscToolActivateMgr from 'ngeo/misc/ToolActivateMgr.js';\nimport olCollection from 'ol/Collection.js';\nimport olMap from 'ol/Map.js';\nimport olView from 'ol/View.js';\nimport * as olBase from 'ol/index.js';\nimport olCoordinate from 'ol/coordinate.js';\nimport olInteractionDraw from 'ol/interaction/Draw.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olSourceOSM from 'ol/source/OSM.js';\nimport olStyleCircle from 'ol/style/Circle.js';\nimport olStyleFill from 'ol/style/Fill.js';\nimport olStyleStroke from 'ol/style/Stroke.js';\nimport olStyleStyle from 'ol/style/Style.js';\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('app', [\n  ngeo.module.name,\n  ngeoMapModule.name,\n  ngeoMiscBtnComponent.name,\n  ngeoMiscToolActivateMgr.module.name,\n]);\n\n\n/**\n * @param {ngeo.map.FeatureOverlayMgr} ngeoFeatureOverlayMgr Feature overlay\n *     manager.\n * @param {ngeo.misc.ToolActivateMgr} ngeoToolActivateMgr ToolActivate manager.\n * @constructor\n *//* @ngInject\n */\nexports.MainController = function(ngeoFeatureOverlayMgr, ngeoToolActivateMgr) {\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = new olMap({\n    layers: [\n      new olLayerTile({\n        source: new olSourceOSM()\n      })\n    ],\n    view: new olView({\n      center: [1444682, 5979706],\n      zoom: 4\n    })\n  });\n\n  const map = this.map;\n\n  // initialize the feature overlay manager with the map\n  ngeoFeatureOverlayMgr.init(map);\n\n  /**\n   * Collection shared between the drawing interactions and the feature\n   * overlay used to render the drawn features.\n   * @type {ol.Collection.<ol.Feature>}\n   */\n  const features = new olCollection();\n\n  const overlay = ngeoFeatureOverlayMgr.getFeatureOverlay();\n  overlay.setFeatures(features);\n  overlay.setStyle(new olStyleStyle({\n    fill: new olStyleFill({\n      color: 'rgba(255, 255, 255, 0.2)'\n    }),\n    stroke: new olStyleStroke({\n      color: '#ffcc33',\n      width: 2\n    }),\n    image: new olStyleCircle({\n      radius: 7,\n      fill: new olStyleFill({\n        color: '#ffcc33'\n      })\n    })\n  }));\n\n\n  // manage clicks on the map\n  this.mapClickIsEnabled = true;\n  const content = document.getElementById('popup-content');\n  this.map.on('singleclick', (evt) => {\n    if (this.mapClickIsEnabled) {\n      const c = olCoordinate.toStringXY(evt.coordinate);\n      content.innerHTML = `<p>You clicked here: <code>${c}</code></p>`;\n    }\n  });\n\n  const mapClickTool = new ngeoMiscToolActivate(this, 'mapClickIsEnabled');\n  ngeoToolActivateMgr.registerTool('mapTools', mapClickTool, true);\n\n\n  // draw point interaction\n  /**\n   * @type {ol.interaction.Draw}\n   * @export\n   */\n  this.drawPoint = new olInteractionDraw(\n    /** @type {olx.interaction.DrawOptions} */ ({\n      type: 'Point',\n      features: features\n    }));\n  this.drawPoint.setActive(false);\n  ngeoMiscDecorate.interaction(this.drawPoint);\n  map.addInteraction(this.drawPoint);\n\n  const drawPointTool = new ngeoMiscToolActivate(this.drawPoint, 'active');\n  ngeoToolActivateMgr.registerTool('mapTools', drawPointTool);\n\n  // draw line interaction\n  /**\n   * @type {ol.interaction.Draw}\n   * @export\n   */\n  this.drawLine = new olInteractionDraw(\n    /** @type {olx.interaction.DrawOptions} */ ({\n      type: 'LineString',\n      features: features\n    }));\n  this.drawLine.setActive(false);\n  ngeoMiscDecorate.interaction(this.drawLine);\n  map.addInteraction(this.drawLine);\n\n  const drawLineTool = new ngeoMiscToolActivate(this.drawLine, 'active');\n  ngeoToolActivateMgr.registerTool('mapTools', drawLineTool);\n\n  // draw polygon interaction\n  /**\n   * @type {ol.interaction.Draw}\n   * @export\n   */\n  this.drawPolygon = new olInteractionDraw(\n    /** @type {olx.interaction.DrawOptions} */ ({\n      type: 'Polygon',\n      features: features\n    }));\n  this.drawPolygon.setActive(false);\n  ngeoMiscDecorate.interaction(this.drawPolygon);\n  map.addInteraction(this.drawPolygon);\n\n  const drawPolygonTool = new ngeoMiscToolActivate(this.drawPolygon, 'active');\n  ngeoToolActivateMgr.registerTool('mapTools', drawPolygonTool);\n};\n\n\nexports.module.controller('MainController', exports.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/toolActivate.js","/**\n * @module ol/geom/MultiPoint\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport Point from '../geom/Point.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPoint = function(coordinates, opt_layout) {\n  SimpleGeometry.call(this);\n  this.setCoordinates(coordinates, opt_layout);\n};\n\ninherits(MultiPoint, SimpleGeometry);\n\n\n/**\n * Append the passed point to this multipoint.\n * @param {ol.geom.Point} point Point.\n * @api\n */\nMultiPoint.prototype.appendPoint = function(point) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = point.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, point.getFlatCoordinates());\n  }\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPoint} Clone.\n * @override\n * @api\n */\nMultiPoint.prototype.clone = function() {\n  const multiPoint = new MultiPoint(null);\n  multiPoint.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return multiPoint;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPoint.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  let i, ii, j;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const squaredDistance = squaredDx(\n      x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (j = 0; j < stride; ++j) {\n        closestPoint[j] = flatCoordinates[i + j];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n};\n\n\n/**\n * Return the coordinates of the multipoint.\n * @return {Array.<ol.Coordinate>} Coordinates.\n * @override\n * @api\n */\nMultiPoint.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinates(\n    this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n};\n\n\n/**\n * Return the point at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Point} Point.\n * @api\n */\nMultiPoint.prototype.getPoint = function(index) {\n  const n = !this.flatCoordinates ?\n    0 : this.flatCoordinates.length / this.stride;\n  if (index < 0 || n <= index) {\n    return null;\n  }\n  const point = new Point(null);\n  point.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index * this.stride, (index + 1) * this.stride));\n  return point;\n};\n\n\n/**\n * Return the points of this multipoint.\n * @return {Array.<ol.geom.Point>} Points.\n * @api\n */\nMultiPoint.prototype.getPoints = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const layout = this.layout;\n  const stride = this.stride;\n  /** @type {Array.<ol.geom.Point>} */\n  const points = [];\n  let i, ii;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    const point = new Point(null);\n    point.setFlatCoordinates(layout, flatCoordinates.slice(i, i + stride));\n    points.push(point);\n  }\n  return points;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.getType = function() {\n  return GeometryType.MULTI_POINT;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPoint.prototype.intersectsExtent = function(extent) {\n  const flatCoordinates = this.flatCoordinates;\n  const stride = this.stride;\n  let i, ii, x, y;\n  for (i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n    x = flatCoordinates[i];\n    y = flatCoordinates[i + 1];\n    if (containsXY(extent, x, y)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Set the coordinates of the multipoint.\n * @param {Array.<ol.Coordinate>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPoint.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = _ol_geom_flat_deflate_.coordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nMultiPoint.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\nexport default MultiPoint;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiPoint.js\n// module id = 45\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 14","/**\n * @module ol/source/OSM\n */\nimport {inherits} from '../index.js';\nimport XYZ from '../source/XYZ.js';\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {ol.source.XYZ}\n * @param {olx.source.OSMOptions=} opt_options Open Street Map options.\n * @api\n */\nconst OSM = function(opt_options) {\n\n  const options = opt_options || {};\n\n  let attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [OSM.ATTRIBUTION];\n  }\n\n  const crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  const url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  XYZ.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\ninherits(OSM, XYZ);\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nOSM.ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\nexport default OSM;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/OSM.js\n// module id = 48\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 21 22 23 24 25 26 27 28 29 30","/**\n * @module ol/source/XYZ\n */\nimport {inherits} from '../index.js';\nimport TileImage from '../source/TileImage.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link ol.source.TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.XYZOptions=} opt_options XYZ options.\n * @api\n */\nconst XYZ = function(opt_options) {\n  const options = opt_options || {};\n  const projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    _ol_tilegrid_.createXYZ({\n      extent: _ol_tilegrid_.extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\ninherits(XYZ, TileImage);\nexport default XYZ;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/XYZ.js\n// module id = 49\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 21 22 23 24 25 26 27 28 29 30","/**\n * @module ol/geom/MultiLineString\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interpolate_ from '../geom/flat/interpolate.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiLineString = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<number>}\n   * @private\n   */\n  this.ends_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiLineString, SimpleGeometry);\n\n\n/**\n * Append the passed linestring to the multilinestring.\n * @param {ol.geom.LineString} lineString LineString.\n * @api\n */\nMultiLineString.prototype.appendLineString = function(lineString) {\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = lineString.getFlatCoordinates().slice();\n  } else {\n    extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n  }\n  this.ends_.push(this.flatCoordinates.length);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiLineString} Clone.\n * @override\n * @api\n */\nMultiLineString.prototype.clone = function() {\n  const multiLineString = new MultiLineString(null);\n  multiLineString.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), this.ends_.slice());\n  return multiLineString;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getsMaxSquaredDelta(\n      this.flatCoordinates, 0, this.ends_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getsClosestPoint(\n    this.flatCoordinates, 0, this.ends_, this.stride,\n    this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * Returns the coordinate at `m` using linear interpolation, or `null` if no\n * such coordinate exists.\n *\n * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n * M will return the first coordinate and Ms greater than the last M will\n * return the last coordinate.\n *\n * `opt_interpolate` controls interpolation between consecutive LineStrings\n * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n * will be linearly interpolated between the last coordinate of one LineString\n * and the first coordinate of the next LineString.  If `opt_interpolate` is\n * `false` then the function will return `null` for Ms falling between\n * LineStrings.\n *\n * @param {number} m M.\n * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n * @return {ol.Coordinate} Coordinate.\n * @api\n */\nMultiLineString.prototype.getCoordinateAtM = function(m, opt_extrapolate, opt_interpolate) {\n  if ((this.layout != GeometryLayout.XYM &&\n       this.layout != GeometryLayout.XYZM) ||\n      this.flatCoordinates.length === 0) {\n    return null;\n  }\n  const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n  const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n  return _ol_geom_flat_interpolate_.lineStringsCoordinateAtM(this.flatCoordinates, 0,\n    this.ends_, this.stride, m, extrapolate, interpolate);\n};\n\n\n/**\n * Return the coordinates of the multilinestring.\n * @return {Array.<Array.<ol.Coordinate>>} Coordinates.\n * @override\n * @api\n */\nMultiLineString.prototype.getCoordinates = function() {\n  return _ol_geom_flat_inflate_.coordinatess(\n    this.flatCoordinates, 0, this.ends_, this.stride);\n};\n\n\n/**\n * @return {Array.<number>} Ends.\n */\nMultiLineString.prototype.getEnds = function() {\n  return this.ends_;\n};\n\n\n/**\n * Return the linestring at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.LineString} LineString.\n * @api\n */\nMultiLineString.prototype.getLineString = function(index) {\n  if (index < 0 || this.ends_.length <= index) {\n    return null;\n  }\n  const lineString = new LineString(null);\n  lineString.setFlatCoordinates(this.layout, this.flatCoordinates.slice(\n    index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]));\n  return lineString;\n};\n\n\n/**\n * Return the linestrings of this multilinestring.\n * @return {Array.<ol.geom.LineString>} LineStrings.\n * @api\n */\nMultiLineString.prototype.getLineStrings = function() {\n  const flatCoordinates = this.flatCoordinates;\n  const ends = this.ends_;\n  const layout = this.layout;\n  /** @type {Array.<ol.geom.LineString>} */\n  const lineStrings = [];\n  let offset = 0;\n  let i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const lineString = new LineString(null);\n    lineString.setFlatCoordinates(layout, flatCoordinates.slice(offset, end));\n    lineStrings.push(lineString);\n    offset = end;\n  }\n  return lineStrings;\n};\n\n\n/**\n * @return {Array.<number>} Flat midpoints.\n */\nMultiLineString.prototype.getFlatMidpoints = function() {\n  const midpoints = [];\n  const flatCoordinates = this.flatCoordinates;\n  let offset = 0;\n  const ends = this.ends_;\n  const stride = this.stride;\n  let i, ii;\n  for (i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const midpoint = _ol_geom_flat_interpolate_.lineString(\n      flatCoordinates, offset, end, stride, 0.5);\n    extend(midpoints, midpoint);\n    offset = end;\n  }\n  return midpoints;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiLineString.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEnds = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.douglasPeuckers(\n    this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0, simplifiedEnds);\n  const simplifiedMultiLineString = new MultiLineString(null);\n  simplifiedMultiLineString.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEnds);\n  return simplifiedMultiLineString;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.getType = function() {\n  return GeometryType.MULTI_LINE_STRING;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiLineString.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.lineStrings(\n    this.flatCoordinates, 0, this.ends_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multilinestring.\n * @param {Array.<Array.<ol.Coordinate>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiLineString.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.ends_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = _ol_geom_flat_deflate_.coordinatess(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<number>} ends Ends.\n */\nMultiLineString.prototype.setFlatCoordinates = function(layout, flatCoordinates, ends) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.ends_ = ends;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.LineString>} lineStrings LineStrings.\n */\nMultiLineString.prototype.setLineStrings = function(lineStrings) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const ends = [];\n  let i, ii;\n  for (i = 0, ii = lineStrings.length; i < ii; ++i) {\n    const lineString = lineStrings[i];\n    if (i === 0) {\n      layout = lineString.getLayout();\n    }\n    extend(flatCoordinates, lineString.getFlatCoordinates());\n    ends.push(flatCoordinates.length);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, ends);\n};\nexport default MultiLineString;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiLineString.js\n// module id = 51\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 14","/**\n * @module ol/geom/MultiPolygon\n */\nimport {inherits} from '../index.js';\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport Polygon from '../geom/Polygon.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_area_ from '../geom/flat/area.js';\nimport _ol_geom_flat_center_ from '../geom/flat/center.js';\nimport _ol_geom_flat_closest_ from '../geom/flat/closest.js';\nimport _ol_geom_flat_contains_ from '../geom/flat/contains.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\nimport _ol_geom_flat_inflate_ from '../geom/flat/inflate.js';\nimport _ol_geom_flat_interiorpoint_ from '../geom/flat/interiorpoint.js';\nimport _ol_geom_flat_intersectsextent_ from '../geom/flat/intersectsextent.js';\nimport _ol_geom_flat_orient_ from '../geom/flat/orient.js';\nimport _ol_geom_flat_simplify_ from '../geom/flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst MultiPolygon = function(coordinates, opt_layout) {\n\n  SimpleGeometry.call(this);\n\n  /**\n   * @type {Array.<Array.<number>>}\n   * @private\n   */\n  this.endss_ = [];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.flatInteriorPointsRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.flatInteriorPoints_ = null;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDelta_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.maxDeltaRevision_ = -1;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.orientedRevision_ = -1;\n\n  /**\n   * @private\n   * @type {Array.<number>}\n   */\n  this.orientedFlatCoordinates_ = null;\n\n  this.setCoordinates(coordinates, opt_layout);\n\n};\n\ninherits(MultiPolygon, SimpleGeometry);\n\n\n/**\n * Append the passed polygon to this multipolygon.\n * @param {ol.geom.Polygon} polygon Polygon.\n * @api\n */\nMultiPolygon.prototype.appendPolygon = function(polygon) {\n  /** @type {Array.<number>} */\n  let ends;\n  if (!this.flatCoordinates) {\n    this.flatCoordinates = polygon.getFlatCoordinates().slice();\n    ends = polygon.getEnds().slice();\n    this.endss_.push();\n  } else {\n    const offset = this.flatCoordinates.length;\n    extend(this.flatCoordinates, polygon.getFlatCoordinates());\n    ends = polygon.getEnds().slice();\n    let i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] += offset;\n    }\n  }\n  this.endss_.push(ends);\n  this.changed();\n};\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.MultiPolygon} Clone.\n * @override\n * @api\n */\nMultiPolygon.prototype.clone = function() {\n  const multiPolygon = new MultiPolygon(null);\n\n  const len = this.endss_.length;\n  const newEndss = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    newEndss[i] = this.endss_[i].slice();\n  }\n\n  multiPolygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(), newEndss);\n  return multiPolygon;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n    return minSquaredDistance;\n  }\n  if (this.maxDeltaRevision_ != this.getRevision()) {\n    this.maxDelta_ = Math.sqrt(_ol_geom_flat_closest_.getssMaxSquaredDelta(\n      this.flatCoordinates, 0, this.endss_, this.stride, 0));\n    this.maxDeltaRevision_ = this.getRevision();\n  }\n  return _ol_geom_flat_closest_.getssClosestPoint(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n    this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.containsXY = function(x, y) {\n  return _ol_geom_flat_contains_.linearRingssContainsXY(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n};\n\n\n/**\n * Return the area of the multipolygon on projected plane.\n * @return {number} Area (on projected plane).\n * @api\n */\nMultiPolygon.prototype.getArea = function() {\n  return _ol_geom_flat_area_.linearRingss(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n};\n\n\n/**\n * Get the coordinate array for this geometry.  This array has the structure\n * of a GeoJSON coordinate array for multi-polygons.\n *\n * @param {boolean=} opt_right Orient coordinates according to the right-hand\n *     rule (counter-clockwise for exterior and clockwise for interior rings).\n *     If `false`, coordinates will be oriented according to the left-hand rule\n *     (clockwise for exterior and counter-clockwise for interior rings).\n *     By default, coordinate orientation will depend on how the geometry was\n *     constructed.\n * @return {Array.<Array.<Array.<ol.Coordinate>>>} Coordinates.\n * @override\n * @api\n */\nMultiPolygon.prototype.getCoordinates = function(opt_right) {\n  let flatCoordinates;\n  if (opt_right !== undefined) {\n    flatCoordinates = this.getOrientedFlatCoordinates().slice();\n    _ol_geom_flat_orient_.orientLinearRingss(\n      flatCoordinates, 0, this.endss_, this.stride, opt_right);\n  } else {\n    flatCoordinates = this.flatCoordinates;\n  }\n\n  return _ol_geom_flat_inflate_.coordinatesss(\n    flatCoordinates, 0, this.endss_, this.stride);\n};\n\n\n/**\n * @return {Array.<Array.<number>>} Endss.\n */\nMultiPolygon.prototype.getEndss = function() {\n  return this.endss_;\n};\n\n\n/**\n * @return {Array.<number>} Flat interior points.\n */\nMultiPolygon.prototype.getFlatInteriorPoints = function() {\n  if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n    const flatCenters = _ol_geom_flat_center_.linearRingss(\n      this.flatCoordinates, 0, this.endss_, this.stride);\n    this.flatInteriorPoints_ = _ol_geom_flat_interiorpoint_.linearRingss(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      flatCenters);\n    this.flatInteriorPointsRevision_ = this.getRevision();\n  }\n  return this.flatInteriorPoints_;\n};\n\n\n/**\n * Return the interior points as {@link ol.geom.MultiPoint multipoint}.\n * @return {ol.geom.MultiPoint} Interior points as XYM coordinates, where M is\n * the length of the horizontal intersection that the point belongs to.\n * @api\n */\nMultiPolygon.prototype.getInteriorPoints = function() {\n  const interiorPoints = new MultiPoint(null);\n  interiorPoints.setFlatCoordinates(GeometryLayout.XYM,\n    this.getFlatInteriorPoints().slice());\n  return interiorPoints;\n};\n\n\n/**\n * @return {Array.<number>} Oriented flat coordinates.\n */\nMultiPolygon.prototype.getOrientedFlatCoordinates = function() {\n  if (this.orientedRevision_ != this.getRevision()) {\n    const flatCoordinates = this.flatCoordinates;\n    if (_ol_geom_flat_orient_.linearRingssAreOriented(\n      flatCoordinates, 0, this.endss_, this.stride)) {\n      this.orientedFlatCoordinates_ = flatCoordinates;\n    } else {\n      this.orientedFlatCoordinates_ = flatCoordinates.slice();\n      this.orientedFlatCoordinates_.length =\n          _ol_geom_flat_orient_.orientLinearRingss(\n            this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n    }\n    this.orientedRevision_ = this.getRevision();\n  }\n  return this.orientedFlatCoordinates_;\n};\n\n\n/**\n * @inheritDoc\n */\nMultiPolygon.prototype.getSimplifiedGeometryInternal = function(squaredTolerance) {\n  const simplifiedFlatCoordinates = [];\n  const simplifiedEndss = [];\n  simplifiedFlatCoordinates.length = _ol_geom_flat_simplify_.quantizess(\n    this.flatCoordinates, 0, this.endss_, this.stride,\n    Math.sqrt(squaredTolerance),\n    simplifiedFlatCoordinates, 0, simplifiedEndss);\n  const simplifiedMultiPolygon = new MultiPolygon(null);\n  simplifiedMultiPolygon.setFlatCoordinates(\n    GeometryLayout.XY, simplifiedFlatCoordinates, simplifiedEndss);\n  return simplifiedMultiPolygon;\n};\n\n\n/**\n * Return the polygon at the specified index.\n * @param {number} index Index.\n * @return {ol.geom.Polygon} Polygon.\n * @api\n */\nMultiPolygon.prototype.getPolygon = function(index) {\n  if (index < 0 || this.endss_.length <= index) {\n    return null;\n  }\n  let offset;\n  if (index === 0) {\n    offset = 0;\n  } else {\n    const prevEnds = this.endss_[index - 1];\n    offset = prevEnds[prevEnds.length - 1];\n  }\n  const ends = this.endss_[index].slice();\n  const end = ends[ends.length - 1];\n  if (offset !== 0) {\n    let i, ii;\n    for (i = 0, ii = ends.length; i < ii; ++i) {\n      ends[i] -= offset;\n    }\n  }\n  const polygon = new Polygon(null);\n  polygon.setFlatCoordinates(\n    this.layout, this.flatCoordinates.slice(offset, end), ends);\n  return polygon;\n};\n\n\n/**\n * Return the polygons of this multipolygon.\n * @return {Array.<ol.geom.Polygon>} Polygons.\n * @api\n */\nMultiPolygon.prototype.getPolygons = function() {\n  const layout = this.layout;\n  const flatCoordinates = this.flatCoordinates;\n  const endss = this.endss_;\n  const polygons = [];\n  let offset = 0;\n  let i, ii, j, jj;\n  for (i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (j = 0, jj = ends.length; j < jj; ++j) {\n        ends[j] -= offset;\n      }\n    }\n    const polygon = new Polygon(null);\n    polygon.setFlatCoordinates(\n      layout, flatCoordinates.slice(offset, end), ends);\n    polygons.push(polygon);\n    offset = end;\n  }\n  return polygons;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.getType = function() {\n  return GeometryType.MULTI_POLYGON;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nMultiPolygon.prototype.intersectsExtent = function(extent) {\n  return _ol_geom_flat_intersectsextent_.linearRingss(\n    this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n};\n\n\n/**\n * Set the coordinates of the multipolygon.\n * @param {Array.<Array.<Array.<ol.Coordinate>>>} coordinates Coordinates.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @override\n * @api\n */\nMultiPolygon.prototype.setCoordinates = function(coordinates, opt_layout) {\n  if (!coordinates) {\n    this.setFlatCoordinates(GeometryLayout.XY, null, this.endss_);\n  } else {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = _ol_geom_flat_deflate_.coordinatesss(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n * @param {Array.<Array.<number>>} endss Endss.\n */\nMultiPolygon.prototype.setFlatCoordinates = function(layout, flatCoordinates, endss) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.endss_ = endss;\n  this.changed();\n};\n\n\n/**\n * @param {Array.<ol.geom.Polygon>} polygons Polygons.\n */\nMultiPolygon.prototype.setPolygons = function(polygons) {\n  let layout = this.getLayout();\n  const flatCoordinates = [];\n  const endss = [];\n  for (let i = 0, ii = polygons.length; i < ii; ++i) {\n    const polygon = polygons[i];\n    if (i === 0) {\n      layout = polygon.getLayout();\n    }\n    const offset = flatCoordinates.length;\n    const ends = polygon.getEnds();\n    for (let j = 0, jj = ends.length; j < jj; ++j) {\n      ends[j] += offset;\n    }\n    extend(flatCoordinates, polygon.getFlatCoordinates());\n    endss.push(ends);\n  }\n  this.setFlatCoordinates(layout, flatCoordinates, endss);\n};\n\nexport default MultiPolygon;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/MultiPolygon.js\n// module id = 53\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 14","/**\n * @module ol/interaction/DrawEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered upon feature draw start\n   * @event ol.interaction.Draw.Event#drawstart\n   * @api\n   */\n  DRAWSTART: 'drawstart',\n  /**\n   * Triggered upon feature draw end\n   * @event ol.interaction.Draw.Event#drawend\n   * @api\n   */\n  DRAWEND: 'drawend'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/interaction/DrawEventType.js\n// module id = null\n// module chunks = ","/**\n * @module ol/interaction/Draw\n */\nimport {inherits} from '../index.js';\nimport EventType from '../events/EventType.js';\nimport Feature from '../Feature.js';\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport MapBrowserPointerEvent from '../MapBrowserPointerEvent.js';\nimport BaseObject from '../Object.js';\nimport _ol_coordinate_ from '../coordinate.js';\nimport _ol_events_ from '../events.js';\nimport Event from '../events/Event.js';\nimport _ol_events_condition_ from '../events/condition.js';\nimport {boundingExtent, getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../extent.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport Circle from '../geom/Circle.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport MouseSource from '../pointer/MouseSource.js';\nimport Point from '../geom/Point.js';\nimport Polygon, {fromCircle, makeRegular} from '../geom/Polygon.js';\nimport DrawEventType from '../interaction/DrawEventType.js';\nimport PointerInteraction from '../interaction/Pointer.js';\nimport InteractionProperty from '../interaction/Property.js';\nimport VectorLayer from '../layer/Vector.js';\nimport VectorSource from '../source/Vector.js';\nimport Style from '../style/Style.js';\n\n/**\n * @classdesc\n * Interaction for drawing feature geometries.\n *\n * @constructor\n * @extends {ol.interaction.Pointer}\n * @fires ol.interaction.Draw.Event\n * @param {olx.interaction.DrawOptions} options Options.\n * @api\n */\nconst Draw = function(options) {\n\n  PointerInteraction.call(this, {\n    handleDownEvent: Draw.handleDownEvent_,\n    handleEvent: Draw.handleEvent,\n    handleUpEvent: Draw.handleUpEvent_\n  });\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.shouldHandle_ = false;\n\n  /**\n   * @type {ol.Pixel}\n   * @private\n   */\n  this.downPx_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.downTimeout_;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.lastDragTime_;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.freehand_ = false;\n\n  /**\n   * Target source for drawn features.\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.source_ = options.source ? options.source : null;\n\n  /**\n   * Target collection for drawn features.\n   * @type {ol.Collection.<ol.Feature>}\n   * @private\n   */\n  this.features_ = options.features ? options.features : null;\n\n  /**\n   * Pixel distance for snapping.\n   * @type {number}\n   * @private\n   */\n  this.snapTolerance_ = options.snapTolerance ? options.snapTolerance : 12;\n\n  /**\n   * Geometry type.\n   * @type {ol.geom.GeometryType}\n   * @private\n   */\n  this.type_ = /** @type {ol.geom.GeometryType} */ (options.type);\n\n  /**\n   * Drawing mode (derived from geometry type.\n   * @type {ol.interaction.Draw.Mode_}\n   * @private\n   */\n  this.mode_ = Draw.getMode_(this.type_);\n\n  /**\n   * Stop click, singleclick, and doubleclick events from firing during drawing.\n   * Default is `false`.\n   * @type {boolean}\n   * @private\n   */\n  this.stopClick_ = !!options.stopClick;\n\n  /**\n   * The number of points that must be drawn before a polygon ring or line\n   * string can be finished.  The default is 3 for polygon rings and 2 for\n   * line strings.\n   * @type {number}\n   * @private\n   */\n  this.minPoints_ = options.minPoints ?\n    options.minPoints :\n    (this.mode_ === Draw.Mode_.POLYGON ? 3 : 2);\n\n  /**\n   * The number of points that can be drawn before a polygon ring or line string\n   * is finished. The default is no restriction.\n   * @type {number}\n   * @private\n   */\n  this.maxPoints_ = options.maxPoints ? options.maxPoints : Infinity;\n\n  /**\n   * A function to decide if a potential finish coordinate is permissible\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.finishCondition_ = options.finishCondition ? options.finishCondition : TRUE;\n\n  let geometryFunction = options.geometryFunction;\n  if (!geometryFunction) {\n    if (this.type_ === GeometryType.CIRCLE) {\n      /**\n       * @param {!Array.<ol.Coordinate>} coordinates\n       *     The coordinates.\n       * @param {ol.geom.SimpleGeometry=} opt_geometry Optional geometry.\n       * @return {ol.geom.SimpleGeometry} A geometry.\n       */\n      geometryFunction = function(coordinates, opt_geometry) {\n        const circle = opt_geometry ? /** @type {ol.geom.Circle} */ (opt_geometry) :\n          new Circle([NaN, NaN]);\n        const squaredLength = _ol_coordinate_.squaredDistance(\n          coordinates[0], coordinates[1]);\n        circle.setCenterAndRadius(coordinates[0], Math.sqrt(squaredLength));\n        return circle;\n      };\n    } else {\n      let Constructor;\n      const mode = this.mode_;\n      if (mode === Draw.Mode_.POINT) {\n        Constructor = Point;\n      } else if (mode === Draw.Mode_.LINE_STRING) {\n        Constructor = LineString;\n      } else if (mode === Draw.Mode_.POLYGON) {\n        Constructor = Polygon;\n      }\n      /**\n       * @param {!Array.<ol.Coordinate>} coordinates\n       *     The coordinates.\n       * @param {ol.geom.SimpleGeometry=} opt_geometry Optional geometry.\n       * @return {ol.geom.SimpleGeometry} A geometry.\n       */\n      geometryFunction = function(coordinates, opt_geometry) {\n        let geometry = opt_geometry;\n        if (geometry) {\n          if (mode === Draw.Mode_.POLYGON) {\n            if (coordinates[0].length) {\n              // Add a closing coordinate to match the first\n              geometry.setCoordinates([coordinates[0].concat([coordinates[0][0]])]);\n            } else {\n              geometry.setCoordinates([]);\n            }\n          } else {\n            geometry.setCoordinates(coordinates);\n          }\n        } else {\n          geometry = new Constructor(coordinates);\n        }\n        return geometry;\n      };\n    }\n  }\n\n  /**\n   * @type {ol.DrawGeometryFunctionType}\n   * @private\n   */\n  this.geometryFunction_ = geometryFunction;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.dragVertexDelay_ = options.dragVertexDelay !== undefined ? options.dragVertexDelay : 500;\n\n  /**\n   * Finish coordinate for the feature (first point for polygons, last point for\n   * linestrings).\n   * @type {ol.Coordinate}\n   * @private\n   */\n  this.finishCoordinate_ = null;\n\n  /**\n   * Sketch feature.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchFeature_ = null;\n\n  /**\n   * Sketch point.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchPoint_ = null;\n\n  /**\n   * Sketch coordinates. Used when drawing a line or polygon.\n   * @type {ol.Coordinate|Array.<ol.Coordinate>|Array.<Array.<ol.Coordinate>>}\n   * @private\n   */\n  this.sketchCoords_ = null;\n\n  /**\n   * Sketch line. Used when drawing polygon.\n   * @type {ol.Feature}\n   * @private\n   */\n  this.sketchLine_ = null;\n\n  /**\n   * Sketch line coordinates. Used when drawing a polygon or circle.\n   * @type {Array.<ol.Coordinate>}\n   * @private\n   */\n  this.sketchLineCoords_ = null;\n\n  /**\n   * Squared tolerance for handling up events.  If the squared distance\n   * between a down and up event is greater than this tolerance, up events\n   * will not be handled.\n   * @type {number}\n   * @private\n   */\n  this.squaredClickTolerance_ = options.clickTolerance ?\n    options.clickTolerance * options.clickTolerance : 36;\n\n  /**\n   * Draw overlay where our sketch features are drawn.\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.overlay_ = new VectorLayer({\n    source: new VectorSource({\n      useSpatialIndex: false,\n      wrapX: options.wrapX ? options.wrapX : false\n    }),\n    style: options.style ? options.style :\n      Draw.getDefaultStyleFunction(),\n    updateWhileInteracting: true\n  });\n\n  /**\n   * Name of the geometry attribute for newly created features.\n   * @type {string|undefined}\n   * @private\n   */\n  this.geometryName_ = options.geometryName;\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.condition_ = options.condition ?\n    options.condition : _ol_events_condition_.noModifierKeys;\n\n  /**\n   * @private\n   * @type {ol.EventsConditionType}\n   */\n  this.freehandCondition_;\n  if (options.freehand) {\n    this.freehandCondition_ = _ol_events_condition_.always;\n  } else {\n    this.freehandCondition_ = options.freehandCondition ?\n      options.freehandCondition : _ol_events_condition_.shiftKeyOnly;\n  }\n\n  _ol_events_.listen(this,\n    BaseObject.getChangeEventType(InteractionProperty.ACTIVE),\n    this.updateState_, this);\n\n};\n\ninherits(Draw, PointerInteraction);\n\n\n/**\n * @return {ol.StyleFunction} Styles.\n */\nDraw.getDefaultStyleFunction = function() {\n  const styles = Style.createDefaultEditing();\n  return function(feature, resolution) {\n    return styles[feature.getGeometry().getType()];\n  };\n};\n\n\n/**\n * @inheritDoc\n */\nDraw.prototype.setMap = function(map) {\n  PointerInteraction.prototype.setMap.call(this, map);\n  this.updateState_();\n};\n\n\n/**\n * Handles the {@link ol.MapBrowserEvent map browser event} and may actually\n * draw or finish the drawing.\n * @param {ol.MapBrowserEvent} event Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {ol.interaction.Draw}\n * @api\n */\nDraw.handleEvent = function(event) {\n  if (event.originalEvent.type === EventType.CONTEXTMENU) {\n    // Avoid context menu for long taps when drawing on mobile\n    event.preventDefault();\n  }\n  this.freehand_ = this.mode_ !== Draw.Mode_.POINT && this.freehandCondition_(event);\n  let move = event.type === MapBrowserEventType.POINTERMOVE;\n  let pass = true;\n  if (this.lastDragTime_ && event.type === MapBrowserEventType.POINTERDRAG) {\n    const now = Date.now();\n    if (now - this.lastDragTime_ >= this.dragVertexDelay_) {\n      this.downPx_ = event.pixel;\n      this.shouldHandle_ = !this.freehand_;\n      move = true;\n    } else {\n      this.lastDragTime_ = undefined;\n    }\n    if (this.shouldHandle_ && this.downTimeout_) {\n      clearTimeout(this.downTimeout_);\n      this.downTimeout_ = undefined;\n    }\n  }\n  if (this.freehand_ &&\n      event.type === MapBrowserEventType.POINTERDRAG &&\n      this.sketchFeature_ !== null) {\n    this.addToDrawing_(event);\n    pass = false;\n  } else if (this.freehand_ &&\n      event.type === MapBrowserEventType.POINTERDOWN) {\n    pass = false;\n  } else if (move) {\n    pass = event.type === MapBrowserEventType.POINTERMOVE;\n    if (pass && this.freehand_) {\n      pass = this.handlePointerMove_(event);\n    } else if (event.pointerEvent.pointerType == MouseSource.POINTER_TYPE ||\n        (event.type === MapBrowserEventType.POINTERDRAG && !this.downTimeout_)) {\n      this.handlePointerMove_(event);\n    }\n  } else if (event.type === MapBrowserEventType.DBLCLICK) {\n    pass = false;\n  }\n\n  return PointerInteraction.handleEvent.call(this, event) && pass;\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} event Event.\n * @return {boolean} Start drag sequence?\n * @this {ol.interaction.Draw}\n * @private\n */\nDraw.handleDownEvent_ = function(event) {\n  this.shouldHandle_ = !this.freehand_;\n\n  if (this.freehand_) {\n    this.downPx_ = event.pixel;\n    if (!this.finishCoordinate_) {\n      this.startDrawing_(event);\n    }\n    return true;\n  } else if (this.condition_(event)) {\n    this.lastDragTime_ = Date.now();\n    this.downTimeout_ = setTimeout(function() {\n      this.handlePointerMove_(new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERMOVE, event.map, event.pointerEvent, event.frameState));\n    }.bind(this), this.dragVertexDelay_);\n    this.downPx_ = event.pixel;\n    return true;\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * @param {ol.MapBrowserPointerEvent} event Event.\n * @return {boolean} Stop drag sequence?\n * @this {ol.interaction.Draw}\n * @private\n */\nDraw.handleUpEvent_ = function(event) {\n  let pass = true;\n\n  if (this.downTimeout_) {\n    clearTimeout(this.downTimeout_);\n    this.downTimeout_ = undefined;\n  }\n\n  this.handlePointerMove_(event);\n\n  const circleMode = this.mode_ === Draw.Mode_.CIRCLE;\n\n  if (this.shouldHandle_) {\n    if (!this.finishCoordinate_) {\n      this.startDrawing_(event);\n      if (this.mode_ === Draw.Mode_.POINT) {\n        this.finishDrawing();\n      }\n    } else if (this.freehand_ || circleMode) {\n      this.finishDrawing();\n    } else if (this.atFinish_(event)) {\n      if (this.finishCondition_(event)) {\n        this.finishDrawing();\n      }\n    } else {\n      this.addToDrawing_(event);\n    }\n    pass = false;\n  } else if (this.freehand_) {\n    this.finishCoordinate_ = null;\n    this.abortDrawing_();\n  }\n  if (!pass && this.stopClick_) {\n    event.stopPropagation();\n  }\n  return pass;\n};\n\n\n/**\n * Handle move events.\n * @param {ol.MapBrowserEvent} event A move event.\n * @return {boolean} Pass the event to other interactions.\n * @private\n */\nDraw.prototype.handlePointerMove_ = function(event) {\n  if (this.downPx_ &&\n      ((!this.freehand_ && this.shouldHandle_) ||\n      (this.freehand_ && !this.shouldHandle_))) {\n    const downPx = this.downPx_;\n    const clickPx = event.pixel;\n    const dx = downPx[0] - clickPx[0];\n    const dy = downPx[1] - clickPx[1];\n    const squaredDistance = dx * dx + dy * dy;\n    this.shouldHandle_ = this.freehand_ ?\n      squaredDistance > this.squaredClickTolerance_ :\n      squaredDistance <= this.squaredClickTolerance_;\n    if (!this.shouldHandle_) {\n      return true;\n    }\n  }\n\n  if (this.finishCoordinate_) {\n    this.modifyDrawing_(event);\n  } else {\n    this.createOrUpdateSketchPoint_(event);\n  }\n  return true;\n};\n\n\n/**\n * Determine if an event is within the snapping tolerance of the start coord.\n * @param {ol.MapBrowserEvent} event Event.\n * @return {boolean} The event is within the snapping tolerance of the start.\n * @private\n */\nDraw.prototype.atFinish_ = function(event) {\n  let at = false;\n  if (this.sketchFeature_) {\n    let potentiallyDone = false;\n    let potentiallyFinishCoordinates = [this.finishCoordinate_];\n    if (this.mode_ === Draw.Mode_.LINE_STRING) {\n      potentiallyDone = this.sketchCoords_.length > this.minPoints_;\n    } else if (this.mode_ === Draw.Mode_.POLYGON) {\n      potentiallyDone = this.sketchCoords_[0].length >\n          this.minPoints_;\n      potentiallyFinishCoordinates = [this.sketchCoords_[0][0],\n        this.sketchCoords_[0][this.sketchCoords_[0].length - 2]];\n    }\n    if (potentiallyDone) {\n      const map = event.map;\n      for (let i = 0, ii = potentiallyFinishCoordinates.length; i < ii; i++) {\n        const finishCoordinate = potentiallyFinishCoordinates[i];\n        const finishPixel = map.getPixelFromCoordinate(finishCoordinate);\n        const pixel = event.pixel;\n        const dx = pixel[0] - finishPixel[0];\n        const dy = pixel[1] - finishPixel[1];\n        const snapTolerance = this.freehand_ ? 1 : this.snapTolerance_;\n        at = Math.sqrt(dx * dx + dy * dy) <= snapTolerance;\n        if (at) {\n          this.finishCoordinate_ = finishCoordinate;\n          break;\n        }\n      }\n    }\n  }\n  return at;\n};\n\n\n/**\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.createOrUpdateSketchPoint_ = function(event) {\n  const coordinates = event.coordinate.slice();\n  if (!this.sketchPoint_) {\n    this.sketchPoint_ = new Feature(new Point(coordinates));\n    this.updateSketchFeatures_();\n  } else {\n    const sketchPointGeom = /** @type {ol.geom.Point} */ (this.sketchPoint_.getGeometry());\n    sketchPointGeom.setCoordinates(coordinates);\n  }\n};\n\n\n/**\n * Start the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.startDrawing_ = function(event) {\n  const start = event.coordinate;\n  this.finishCoordinate_ = start;\n  if (this.mode_ === Draw.Mode_.POINT) {\n    this.sketchCoords_ = start.slice();\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    this.sketchCoords_ = [[start.slice(), start.slice()]];\n    this.sketchLineCoords_ = this.sketchCoords_[0];\n  } else {\n    this.sketchCoords_ = [start.slice(), start.slice()];\n  }\n  if (this.sketchLineCoords_) {\n    this.sketchLine_ = new Feature(\n      new LineString(this.sketchLineCoords_));\n  }\n  const geometry = this.geometryFunction_(this.sketchCoords_);\n  this.sketchFeature_ = new Feature();\n  if (this.geometryName_) {\n    this.sketchFeature_.setGeometryName(this.geometryName_);\n  }\n  this.sketchFeature_.setGeometry(geometry);\n  this.updateSketchFeatures_();\n  this.dispatchEvent(new Draw.Event(DrawEventType.DRAWSTART, this.sketchFeature_));\n};\n\n\n/**\n * Modify the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.modifyDrawing_ = function(event) {\n  let coordinate = event.coordinate;\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let coordinates, last;\n  if (this.mode_ === Draw.Mode_.POINT) {\n    last = this.sketchCoords_;\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    last = coordinates[coordinates.length - 1];\n    if (this.atFinish_(event)) {\n      // snap to finish\n      coordinate = this.finishCoordinate_.slice();\n    }\n  } else {\n    coordinates = this.sketchCoords_;\n    last = coordinates[coordinates.length - 1];\n  }\n  last[0] = coordinate[0];\n  last[1] = coordinate[1];\n  this.geometryFunction_(/** @type {!Array.<ol.Coordinate>} */ (this.sketchCoords_), geometry);\n  if (this.sketchPoint_) {\n    const sketchPointGeom = /** @type {ol.geom.Point} */ (this.sketchPoint_.getGeometry());\n    sketchPointGeom.setCoordinates(coordinate);\n  }\n  let sketchLineGeom;\n  if (geometry instanceof Polygon &&\n      this.mode_ !== Draw.Mode_.POLYGON) {\n    if (!this.sketchLine_) {\n      this.sketchLine_ = new Feature(new LineString(null));\n    }\n    const ring = geometry.getLinearRing(0);\n    sketchLineGeom = /** @type {ol.geom.LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setFlatCoordinates(\n      ring.getLayout(), ring.getFlatCoordinates());\n  } else if (this.sketchLineCoords_) {\n    sketchLineGeom = /** @type {ol.geom.LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setCoordinates(this.sketchLineCoords_);\n  }\n  this.updateSketchFeatures_();\n};\n\n\n/**\n * Add a new coordinate to the drawing.\n * @param {ol.MapBrowserEvent} event Event.\n * @private\n */\nDraw.prototype.addToDrawing_ = function(event) {\n  const coordinate = event.coordinate;\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let done;\n  let coordinates;\n  if (this.mode_ === Draw.Mode_.LINE_STRING) {\n    this.finishCoordinate_ = coordinate.slice();\n    coordinates = this.sketchCoords_;\n    if (coordinates.length >= this.maxPoints_) {\n      if (this.freehand_) {\n        coordinates.pop();\n      } else {\n        done = true;\n      }\n    }\n    coordinates.push(coordinate.slice());\n    this.geometryFunction_(coordinates, geometry);\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    if (coordinates.length >= this.maxPoints_) {\n      if (this.freehand_) {\n        coordinates.pop();\n      } else {\n        done = true;\n      }\n    }\n    coordinates.push(coordinate.slice());\n    if (done) {\n      this.finishCoordinate_ = coordinates[0];\n    }\n    this.geometryFunction_(this.sketchCoords_, geometry);\n  }\n  this.updateSketchFeatures_();\n  if (done) {\n    this.finishDrawing();\n  }\n};\n\n\n/**\n * Remove last point of the feature currently being drawn.\n * @api\n */\nDraw.prototype.removeLastPoint = function() {\n  if (!this.sketchFeature_) {\n    return;\n  }\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (this.sketchFeature_.getGeometry());\n  let coordinates, sketchLineGeom;\n  if (this.mode_ === Draw.Mode_.LINE_STRING) {\n    coordinates = this.sketchCoords_;\n    coordinates.splice(-2, 1);\n    this.geometryFunction_(coordinates, geometry);\n    if (coordinates.length >= 2) {\n      this.finishCoordinate_ = coordinates[coordinates.length - 2].slice();\n    }\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    coordinates = this.sketchCoords_[0];\n    coordinates.splice(-2, 1);\n    sketchLineGeom = /** @type {ol.geom.LineString} */ (this.sketchLine_.getGeometry());\n    sketchLineGeom.setCoordinates(coordinates);\n    this.geometryFunction_(this.sketchCoords_, geometry);\n  }\n\n  if (coordinates.length === 0) {\n    this.finishCoordinate_ = null;\n  }\n\n  this.updateSketchFeatures_();\n};\n\n\n/**\n * Stop drawing and add the sketch feature to the target layer.\n * The {@link ol.interaction.DrawEventType.DRAWEND} event is dispatched before\n * inserting the feature.\n * @api\n */\nDraw.prototype.finishDrawing = function() {\n  const sketchFeature = this.abortDrawing_();\n  let coordinates = this.sketchCoords_;\n  const geometry = /** @type {ol.geom.SimpleGeometry} */ (sketchFeature.getGeometry());\n  if (this.mode_ === Draw.Mode_.LINE_STRING) {\n    // remove the redundant last point\n    coordinates.pop();\n    this.geometryFunction_(coordinates, geometry);\n  } else if (this.mode_ === Draw.Mode_.POLYGON) {\n    // remove the redundant last point in ring\n    coordinates[0].pop();\n    this.geometryFunction_(coordinates, geometry);\n    coordinates = geometry.getCoordinates();\n  }\n\n  // cast multi-part geometries\n  if (this.type_ === GeometryType.MULTI_POINT) {\n    sketchFeature.setGeometry(new MultiPoint([coordinates]));\n  } else if (this.type_ === GeometryType.MULTI_LINE_STRING) {\n    sketchFeature.setGeometry(new MultiLineString([coordinates]));\n  } else if (this.type_ === GeometryType.MULTI_POLYGON) {\n    sketchFeature.setGeometry(new MultiPolygon([coordinates]));\n  }\n\n  // First dispatch event to allow full set up of feature\n  this.dispatchEvent(new Draw.Event(DrawEventType.DRAWEND, sketchFeature));\n\n  // Then insert feature\n  if (this.features_) {\n    this.features_.push(sketchFeature);\n  }\n  if (this.source_) {\n    this.source_.addFeature(sketchFeature);\n  }\n};\n\n\n/**\n * Stop drawing without adding the sketch feature to the target layer.\n * @return {ol.Feature} The sketch feature (or null if none).\n * @private\n */\nDraw.prototype.abortDrawing_ = function() {\n  this.finishCoordinate_ = null;\n  const sketchFeature = this.sketchFeature_;\n  if (sketchFeature) {\n    this.sketchFeature_ = null;\n    this.sketchPoint_ = null;\n    this.sketchLine_ = null;\n    this.overlay_.getSource().clear(true);\n  }\n  return sketchFeature;\n};\n\n\n/**\n * Extend an existing geometry by adding additional points. This only works\n * on features with `LineString` geometries, where the interaction will\n * extend lines by adding points to the end of the coordinates array.\n * @param {!ol.Feature} feature Feature to be extended.\n * @api\n */\nDraw.prototype.extend = function(feature) {\n  const geometry = feature.getGeometry();\n  const lineString = /** @type {ol.geom.LineString} */ (geometry);\n  this.sketchFeature_ = feature;\n  this.sketchCoords_ = lineString.getCoordinates();\n  const last = this.sketchCoords_[this.sketchCoords_.length - 1];\n  this.finishCoordinate_ = last.slice();\n  this.sketchCoords_.push(last.slice());\n  this.updateSketchFeatures_();\n  this.dispatchEvent(new Draw.Event(DrawEventType.DRAWSTART, this.sketchFeature_));\n};\n\n\n/**\n * @inheritDoc\n */\nDraw.prototype.shouldStopEvent = FALSE;\n\n\n/**\n * Redraw the sketch features.\n * @private\n */\nDraw.prototype.updateSketchFeatures_ = function() {\n  const sketchFeatures = [];\n  if (this.sketchFeature_) {\n    sketchFeatures.push(this.sketchFeature_);\n  }\n  if (this.sketchLine_) {\n    sketchFeatures.push(this.sketchLine_);\n  }\n  if (this.sketchPoint_) {\n    sketchFeatures.push(this.sketchPoint_);\n  }\n  const overlaySource = this.overlay_.getSource();\n  overlaySource.clear(true);\n  overlaySource.addFeatures(sketchFeatures);\n};\n\n\n/**\n * @private\n */\nDraw.prototype.updateState_ = function() {\n  const map = this.getMap();\n  const active = this.getActive();\n  if (!map || !active) {\n    this.abortDrawing_();\n  }\n  this.overlay_.setMap(active ? map : null);\n};\n\n\n/**\n * Create a `geometryFunction` for `type: 'Circle'` that will create a regular\n * polygon with a user specified number of sides and start angle instead of an\n * `ol.geom.Circle` geometry.\n * @param {number=} opt_sides Number of sides of the regular polygon. Default is\n *     32.\n * @param {number=} opt_angle Angle of the first point in radians. 0 means East.\n *     Default is the angle defined by the heading from the center of the\n *     regular polygon to the current pointer position.\n * @return {ol.DrawGeometryFunctionType} Function that draws a\n *     polygon.\n * @api\n */\nDraw.createRegularPolygon = function(opt_sides, opt_angle) {\n  return (\n    /**\n         * @param {ol.Coordinate|Array.<ol.Coordinate>|Array.<Array.<ol.Coordinate>>} coordinates\n         * @param {ol.geom.SimpleGeometry=} opt_geometry\n         * @return {ol.geom.SimpleGeometry}\n         */\n    function(coordinates, opt_geometry) {\n      const center = coordinates[0];\n      const end = coordinates[1];\n      const radius = Math.sqrt(\n        _ol_coordinate_.squaredDistance(center, end));\n      const geometry = opt_geometry ? /** @type {ol.geom.Polygon} */ (opt_geometry) :\n        fromCircle(new Circle(center), opt_sides);\n      const angle = opt_angle ? opt_angle :\n        Math.atan((end[1] - center[1]) / (end[0] - center[0]));\n      makeRegular(geometry, center, radius, angle);\n      return geometry;\n    }\n  );\n};\n\n\n/**\n * Create a `geometryFunction` that will create a box-shaped polygon (aligned\n * with the coordinate system axes).  Use this with the draw interaction and\n * `type: 'Circle'` to return a box instead of a circle geometry.\n * @return {ol.DrawGeometryFunctionType} Function that draws a box-shaped polygon.\n * @api\n */\nDraw.createBox = function() {\n  return (\n    /**\n     * @param {Array.<ol.Coordinate>} coordinates\n     * @param {ol.geom.SimpleGeometry=} opt_geometry\n     * @return {ol.geom.SimpleGeometry}\n     */\n    function(coordinates, opt_geometry) {\n      const extent = boundingExtent(coordinates);\n      const geometry = opt_geometry || new Polygon(null);\n      geometry.setCoordinates([[\n        getBottomLeft(extent),\n        getBottomRight(extent),\n        getTopRight(extent),\n        getTopLeft(extent),\n        getBottomLeft(extent)\n      ]]);\n      return geometry;\n    }\n  );\n};\n\n\n/**\n * Get the drawing mode.  The mode for mult-part geometries is the same as for\n * their single-part cousins.\n * @param {ol.geom.GeometryType} type Geometry type.\n * @return {ol.interaction.Draw.Mode_} Drawing mode.\n * @private\n */\nDraw.getMode_ = function(type) {\n  let mode;\n  if (type === GeometryType.POINT ||\n      type === GeometryType.MULTI_POINT) {\n    mode = Draw.Mode_.POINT;\n  } else if (type === GeometryType.LINE_STRING ||\n      type === GeometryType.MULTI_LINE_STRING) {\n    mode = Draw.Mode_.LINE_STRING;\n  } else if (type === GeometryType.POLYGON ||\n      type === GeometryType.MULTI_POLYGON) {\n    mode = Draw.Mode_.POLYGON;\n  } else if (type === GeometryType.CIRCLE) {\n    mode = Draw.Mode_.CIRCLE;\n  }\n  return /** @type {!ol.interaction.Draw.Mode_} */ (mode);\n};\n\n\n/**\n * Draw mode.  This collapses multi-part geometry types with their single-part\n * cousins.\n * @enum {string}\n * @private\n */\nDraw.Mode_ = {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  CIRCLE: 'Circle'\n};\n\n/**\n * @classdesc\n * Events emitted by {@link ol.interaction.Draw} instances are instances of\n * this type.\n *\n * @constructor\n * @extends {ol.events.Event}\n * @implements {oli.DrawEvent}\n * @param {ol.interaction.DrawEventType} type Type.\n * @param {ol.Feature} feature The feature drawn.\n */\nDraw.Event = function(type, feature) {\n\n  Event.call(this, type);\n\n  /**\n   * The feature being drawn.\n   * @type {ol.Feature}\n   * @api\n   */\n  this.feature = feature;\n\n};\ninherits(Draw.Event, Event);\n\nexport default Draw;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/interaction/Draw.js\n// module id = null\n// module chunks = ","/**\n * @module ol/geom/Circle\n */\nimport {inherits} from '../index.js';\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport SimpleGeometry from '../geom/SimpleGeometry.js';\nimport _ol_geom_flat_deflate_ from '../geom/flat/deflate.js';\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @constructor\n * @extends {ol.geom.SimpleGeometry}\n * @param {ol.Coordinate} center Center.\n * @param {number=} opt_radius Radius.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nconst Circle = function(center, opt_radius, opt_layout) {\n  SimpleGeometry.call(this);\n  const radius = opt_radius ? opt_radius : 0;\n  this.setCenterAndRadius(center, radius, opt_layout);\n};\n\ninherits(Circle, SimpleGeometry);\n\n\n/**\n * Make a complete copy of the geometry.\n * @return {!ol.geom.Circle} Clone.\n * @override\n * @api\n */\nCircle.prototype.clone = function() {\n  const circle = new Circle(null);\n  circle.setFlatCoordinates(this.layout, this.flatCoordinates.slice());\n  return circle;\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.closestPointXY = function(x, y, closestPoint, minSquaredDistance) {\n  const flatCoordinates = this.flatCoordinates;\n  const dx = x - flatCoordinates[0];\n  const dy = y - flatCoordinates[1];\n  const squaredDistance = dx * dx + dy * dy;\n  if (squaredDistance < minSquaredDistance) {\n    if (squaredDistance === 0) {\n      for (let i = 0; i < this.stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n    } else {\n      const delta = this.getRadius() / Math.sqrt(squaredDistance);\n      closestPoint[0] = flatCoordinates[0] + delta * dx;\n      closestPoint[1] = flatCoordinates[1] + delta * dy;\n      for (let i = 2; i < this.stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n    }\n    closestPoint.length = this.stride;\n    return squaredDistance;\n  } else {\n    return minSquaredDistance;\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.containsXY = function(x, y) {\n  const flatCoordinates = this.flatCoordinates;\n  const dx = x - flatCoordinates[0];\n  const dy = y - flatCoordinates[1];\n  return dx * dx + dy * dy <= this.getRadiusSquared_();\n};\n\n\n/**\n * Return the center of the circle as {@link ol.Coordinate coordinate}.\n * @return {ol.Coordinate} Center.\n * @api\n */\nCircle.prototype.getCenter = function() {\n  return this.flatCoordinates.slice(0, this.stride);\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.computeExtent = function(extent) {\n  const flatCoordinates = this.flatCoordinates;\n  const radius = flatCoordinates[this.stride] - flatCoordinates[0];\n  return createOrUpdate(\n    flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n    flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n    extent);\n};\n\n\n/**\n * Return the radius of the circle.\n * @return {number} Radius.\n * @api\n */\nCircle.prototype.getRadius = function() {\n  return Math.sqrt(this.getRadiusSquared_());\n};\n\n\n/**\n * @private\n * @return {number} Radius squared.\n */\nCircle.prototype.getRadiusSquared_ = function() {\n  const dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n  const dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nCircle.prototype.getType = function() {\n  return GeometryType.CIRCLE;\n};\n\n\n/**\n * @inheritDoc\n * @api\n */\nCircle.prototype.intersectsExtent = function(extent) {\n  const circleExtent = this.getExtent();\n  if (intersects(extent, circleExtent)) {\n    const center = this.getCenter();\n\n    if (extent[0] <= center[0] && extent[2] >= center[0]) {\n      return true;\n    }\n    if (extent[1] <= center[1] && extent[3] >= center[1]) {\n      return true;\n    }\n\n    return forEachCorner(extent, this.intersectsCoordinate, this);\n  }\n  return false;\n\n};\n\n\n/**\n * Set the center of the circle as {@link ol.Coordinate coordinate}.\n * @param {ol.Coordinate} center Center.\n * @api\n */\nCircle.prototype.setCenter = function(center) {\n  const stride = this.stride;\n  const radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n  const flatCoordinates = center.slice();\n  flatCoordinates[stride] = flatCoordinates[0] + radius;\n  for (let i = 1; i < stride; ++i) {\n    flatCoordinates[stride + i] = center[i];\n  }\n  this.setFlatCoordinates(this.layout, flatCoordinates);\n};\n\n\n/**\n * Set the center (as {@link ol.Coordinate coordinate}) and the radius (as\n * number) of the circle.\n * @param {ol.Coordinate} center Center.\n * @param {number} radius Radius.\n * @param {ol.geom.GeometryLayout=} opt_layout Layout.\n * @api\n */\nCircle.prototype.setCenterAndRadius = function(center, radius, opt_layout) {\n  if (!center) {\n    this.setFlatCoordinates(GeometryLayout.XY, null);\n  } else {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array.<number>} */\n    const flatCoordinates = this.flatCoordinates;\n    let offset = _ol_geom_flat_deflate_.coordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (let i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  }\n};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.getCoordinates = function() {};\n\n\n/**\n * @inheritDoc\n */\nCircle.prototype.setCoordinates = function(coordinates, opt_layout) {};\n\n\n/**\n * @param {ol.geom.GeometryLayout} layout Layout.\n * @param {Array.<number>} flatCoordinates Flat coordinates.\n */\nCircle.prototype.setFlatCoordinates = function(layout, flatCoordinates) {\n  this.setFlatCoordinatesInternal(layout, flatCoordinates);\n  this.changed();\n};\n\n\n/**\n * Set the radius of the circle. The radius is in the units of the projection.\n * @param {number} radius Radius.\n * @api\n */\nCircle.prototype.setRadius = function(radius) {\n  this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n  this.changed();\n};\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {ol.ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @param {ol.ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link ol.proj.Projection} object.\n * @return {ol.geom.Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/geom/Circle.js\n// module id = 81\n// module chunks = 0 1 2 6 7 8 9 11 14"],"sourceRoot":""}