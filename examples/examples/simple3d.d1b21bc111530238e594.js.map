{"version":3,"sources":["webpack:///./node_modules/openlayers/src/ol/source/common.js","webpack:///./node_modules/openlayers/src/ol/source/WMSServerType.js","webpack:///./src/goog.asserts.prod.js","webpack:///./node_modules/olcs/core/OLImageryProvider.js","webpack:///./node_modules/olcs/core.js","webpack:///./node_modules/openlayers/src/ol/Image.js","webpack:///./node_modules/openlayers/src/ol/source/ImageWMS.js","webpack:///./src/CustomEvent.js","webpack:///./node_modules/openlayers/src/ol/source/TileWMS.js","webpack:///./src/datasource/DataSources.js","webpack:///./src/datasource/DataSource.js","webpack:///./src/map/FeatureOverlayMgr.js","webpack:///./src/goog.asserts.js","webpack:///./src/map/module.js","webpack:///./src/map/BackgroundLayerMgr.js","webpack:///./src/map/directive.js","webpack:///./src/datasource/SyncDataSourcesMap.js","webpack:///./src/map/FeatureOverlay.js","webpack:///./src/map/recenter.js","webpack:///./src/map/resizemap.js","webpack:///./src/map/scaleselector.js","webpack:///./examples/simple3d.js","webpack:///./src/olcs/olcsModule.js","webpack:///./src/olcs/Service.js","webpack:///./src/olcs/controls3d.js","webpack:///./src/olcs/Manager.js","webpack:///./node_modules/olcs/contrib/LazyLoader.js","webpack:///./node_modules/olcs/util.js","webpack:///./node_modules/olcs/AutoRenderLoop.js","webpack:///./node_modules/olcs/Camera.js","webpack:///./node_modules/olcs/AbstractSynchronizer.js","webpack:///./node_modules/olcs/RasterSynchronizer.js","webpack:///./node_modules/openlayers/src/ol/source/Cluster.js","webpack:///./node_modules/olcs/core/VectorLayerCounterpart.js","webpack:///./node_modules/olcs/FeatureConverter.js","webpack:///./node_modules/olcs/VectorSynchronizer.js","webpack:///./node_modules/olcs/SynchronizedOverlay.js","webpack:///./node_modules/olcs/OverlaySynchronizer.js","webpack:///./node_modules/olcs/OLCesium.js","webpack:///./node_modules/olcs/contrib/Manager.js","webpack:///./node_modules/openlayers/src/ol/source/OSM.js","webpack:///./node_modules/openlayers/src/ol/source/XYZ.js"],"names":["__webpack_exports__","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","exports","condition","opt_message","var_args","value","type","OLImageryProvider_exports","source","opt_fallbackProj","this","source_","projection_","fallbackProj_","ready_","credit_","tilingScheme_","rectangle_","proxy","get","proxy_","getURL","Cesium","DefaultProxy","errorEvent_","Event","emptyCanvas_","document","createElement","width","height","on","events","EventType","CHANGE","e","handleSourceChanged_","Object","defineProperties","prototype","ready","rectangle","tileWidth","tg","getTileGrid","getTileSize","tileHeight","maximumLevel","getMaxZoom","minimumLevel","tilingScheme","tileDiscardPolicy","errorEvent","credit","hasAlphaChannel","pickFeatures","getState","proj","getProjection","ol_proj","GeographicTilingScheme","WebMercatorTilingScheme","createCreditForSource","text","attributions","getAttributions","imageUrl","link","forEach","el","getHTML","replace","length","logo","getLogo","src","href","Credit","getTileCredits","x","y","level","requestImage","tileUrlFunction","getTileUrlFunction","z_","y_","url","call","ImageryProvider","loadImage","OLImageryProvider","core_exports","computePixelSizeAtCoordinate","scene","target","camera","canvas","frustum","distance","Cartesian3","magnitude","subtract","position","pixelSize","Cartesian2","getPixelDimensions","clientWidth","clientHeight","computeBoundingBoxAtTarget","amount","transform","Transforms","eastNorthUpToFixedFrame","bottomLeft","Matrix4","multiplyByPoint","topRight","Ellipsoid","WGS84","cartesianArrayToCartographicArray","applyHeightOffsetToGeometry","geometry","applyTransform","input","output","stride","goog_asserts_prod_default","a","assert","undefined","i","rotateAroundAxis","angle","axis","opt_options","clamp","Math","defaultValue","options","duration","easing","ol_easing","linear","callback","lastProgress","oldTransform","start","Date","now","step","timestamp","progress","clone","stepAngle","lookAtTransform","rotate","window","requestAnimationFrame","setHeadingUsingBottomCenter","heading","bottomCenter","angleToZenith","computeAngleToZenith","right","quaternion","Quaternion","fromAxisAngle","rotation","Matrix3","fromQuaternion","vector","zenith","multiplyByVector","add","fromTranslation","pickOnTerrainOrEllipsoid","pixel","ray","getPickRay","globe","pick","pickEllipsoid","pickBottomPoint","bottom","pickCenterPoint","center","computeSignedTiltAngleOnGlobe","Ray","direction","ellipsoid","obj","IntersectionTests","rayEllipsoid","getPoint","normal","geocentricSurfaceNormal","angleBetween","signedAngleBetween","PI","convertLongitudeRange","bottomFovRay","fovy2","fovy","matrix","first","second","b","c","normalize","cross","cosine","dot","sine","sign","atan2","pivot","fy","negate","left","lookAt","opt_globe","getHeight","targetb","cartographicToCartesian","up","extentToRectangle","extent","projection","ext","transformExtent","Rectangle","fromDegrees","tileLayerToImageryLayer","olLayer","viewProj","Tile","Image","provider","getSource","ImageWMS","getUrl","getImageLoadFunction","source_Image","defaultImageLoadFunction","TileWMS","params","getParams","olcs.proxy","olcs.imagesource","TileImage","is3857","is4326","layerOptions","getExtent","ImageryLayer","updateCesiumLayerProperties","olLayerWithParents","csLayer","opacity","visible","layer","concat","parents","layerOpacity","getOpacity","layerVisible","getVisible","alpha","show","ol4326CoordinateToCesiumCartesian","coordinate","coo","ol4326CoordinateArrayToCsCartesians","coordinates","toCartesian","cartesians","push","olGeometryCloneTo4326","proj4326","properties","getProperties","setProperties","convertColorToCesium","olColor","Array","isArray","Color","byteToFloat","fromCssColorString","fail","convertUrlToCesium","subdomains","re","match","exec","startCharCode","charCodeAt","stopCharCode","charCode","String","fromCharCode","resetToNorthZenith","map","Promise","resolve","reject","currentHeading","getView","getRotation","view","normalizeView","rotateAroundBottomCenter","resolution","getResolution","setRotation","setResolution","constrainResolution","_ol_Image_","pixelRatio","crossOrigin","imageLoadFunction","ImageBase","ImageState","IDLE","src_","image_","imageListenerKeys_","state","imageLoadFunction_","ol","getImage","handleImageError_","ERROR","unlistenImage_","changed","handleImageLoad_","ol_extent","LOADED","load","LOADING","listenOnce","LOAD","setImage","image","unlistenByKey","ol_Image","resolutions","crossOrigin_","url_","params_","v13_","updateV13_","serverType_","hidpi_","hidpi","imageSize_","renderedRevision_","ratio_","ratio","GETFEATUREINFO_IMAGE_SIZE_","getGetFeatureInfoUrl","projectionObj","sourceProjectionObj","reproj","calculateSourceResolution","baseParams","SERVICE","VERSION","common","REQUEST","FORMAT","TRANSPARENT","QUERY_LAYERS","floor","getRequestUrl_","getImageInternal","findNearestResolution","imageResolution","viewWidth","ceil","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","getRevision","getPixelRatio","round","listen","handleImageChange","size","asserts","getCode","WMSServerType","dpi","axisOrientation","getAxisOrientation","bbox","substr","join","uri","setImageLoadFunction","setUrl","updateParams","version","string","compareVersions","olBase","__webpack_require__","_Event","detail","arguments","_Event2","default","inherits","__WEBPACK_IMPORTED_MODULE_13__uri_js__","transparent","__WEBPACK_IMPORTED_MODULE_9__source_TileImage_js__","cacheSize","opaque","reprojectionErrorThreshold","tileClass","tileGrid","tileLoadFunction","urls","wrapX","transition","gutter_","gutter","tmpExtent_","__WEBPACK_IMPORTED_MODULE_3__extent_js__","setKey","getKeyForParams_","__WEBPACK_IMPORTED_MODULE_1__index_js__","__WEBPACK_IMPORTED_MODULE_6__proj_js__","getTileGridForProjection","tileCoord","getTileCoordForCoordAndResolution","getResolutions","tileResolution","tileExtent","getTileCoordExtent","tileSize","__WEBPACK_IMPORTED_MODULE_8__size_js__","toSize","tmpSize","buffer","__WEBPACK_IMPORTED_MODULE_7__reproj_js__","__WEBPACK_IMPORTED_MODULE_0__common_js__","__WEBPACK_IMPORTED_MODULE_4__obj_js__","getGutterInternal","__WEBPACK_IMPORTED_MODULE_10__source_WMSServerType_js__","__WEBPACK_IMPORTED_MODULE_2__asserts_js__","tmp","__WEBPACK_IMPORTED_MODULE_5__math_js__","__WEBPACK_IMPORTED_MODULE_11__tilecoord_js__","hash","getTilePixelRatio","res","key","fixedTileUrlFunction","scale","__WEBPACK_IMPORTED_MODULE_12__string_js__","module","angular","_Collection2","_index2","requires","name","_index","_classCallCheck","inRange_","inRange","visible_","attributes","id_","id","identifierAttribute_","identifierAttribute","maxResolution_","maxResolution","minResolution_","minResolution","name_","_createClass","set","olObj","featureUidToGroupIndex_","groups_","_Vector4","useSpatialIndex","layer_","_Vector2","style","styleFunction_","bind","updateWhileAnimating","updateWhileInteracting","addFeature","feature","groupIndex","_asserts2","featureUid","getUid","toString","features","removeFeature","clear","group","isEmpty","getLayer","getFeatureOverlay","styleFunction","_Style2","defaultFunction","_FeatureOverlay2","init","setMap","setStyle","createFunction","service","defaultMessage","defaultArgs","givenMessage","givenArgs","message","args","AssertionError","errorHandler_","errorHandler","ENABLE_ASSERTS","doAssertFailure_","slice","goog","isNumber","typeOf","isString","isFunction","isObject","isBoolean","nodeType","dom","NodeType","ELEMENT","getType_","Function","displayName","constructor","_typeof","_BackgroundLayerMgr2","_directive2","_FeatureOverlayMgr2","_recenter2","_resizemap2","_scaleselector2","_Observable2","mapUids_","getLayers","item","mapUid","previous","setAt","removeAt","insertAt","event","_CustomEvent2","current","dispatchEvent","updateDimensions","dimensions","baseBgLayer","layers","getArray","assertInstanceof","_Layer2","hasUpdates","updatedDimensions","refresh","_SyncDataSourcesMap2","directive_","$window","ngeoSyncDataSourcesMap","restrict","scope","element","attrs","prop","$eval","_Map2","setTarget","manageResizeProp","resizeTransitionProp","resizeTransition","_events2","loop","adjustSize","updateSize","renderSync","directive","ngeoDataSources","ngeoDataSources_","map_","listenerKeys_","handleDataSourcesAdd_","$inject","handleViewResolutionChange_","assertNumber","syncDataSourcesToResolution_","unByKey","evt","_View2","_this","dataSource","syncDataSourceToResolution_","supportsDynamicInRange","_DataSource2","unbindMap_","bindMap_","_DataSources2","manager","index","manager_","features_","index_","setFeatures","unlisten","handleFeatureAdd_","handleFeatureRemove_","$scope","$element","$attrs","mapExpr","recenter","attr","getSize","fit","zoom","setZoom","$","selected","selectedIndex","stateExpr","animationDelayKey","animationDelay","$watch","newVal","oldVal","cancelAnimationFrame","olArray","templateUrl","baseModuleTemplateUrl","ngeoScaleselectorTemplateUrl","controller","ScaleselectorController_","scalesExpr","scales","zoomLevels","keys","newLength","Number","sort","numberSafeCompareFunction","optionsExpr","getOptions_","$scope_","resolutionChangeKey_","currentScale","currentZoom","getZoom","getScale","handleViewChange_","registerResolutionChangeListener_","dropup","changeZoom","handleResolutionChange_","_this2","$applyAsync","_module2","_olcsModule2","MainController","$rootScope","ngeoOlcsService","_Tile2","_OSM2","ol3dm","_Manager2","initialize","_controls3d2","_Service2","Service","olEasing","ngeoOlcsControls3dTemplateUrlInjectable","ngeoOlcsControls3dTemplateUrl","component","bindings","minTilt","maxTilt","Controller","element_","tiltRightEl_","tiltLeftEl_","rotation3dEl_","angle3dEl_","previousRotation_","previousViewMatrix_","animationFrameRequestId_","olcsService_","older","newer","newRotation","getOl3d","getOlView","isFinite","abs","rotateElement_","newViewMatrix","getCesiumViewMatrix","equalsEpsilon","newTilt","getTiltOnGlobe","addClass","hasClass","removeClass","updateWidget_","getManager","find","r","css","-moz-transform","-webkit-transform","-o-transform","-ms-transform","toRadians","setHeading","tiltOnGlobe","getCesiumScene","_core2","delta","cur","newResolution","getAnimating","cancelAnimations","animate","easeOut","_Manager","Manager","_possibleConstructorReturn","__proto__","getPrototypeOf","rootScope_","_inherits","promise","then","$apply","LazyLoader","[object Object]","script","onload","onerror","head","appendChild","util_exports","param","supportsImageRenderingPixelatedResult_","imageRenderingValueResult_","supportsImageRenderingPixelated","setAttribute","imageRenderingValue","util","AutoRenderLoop_exports","ol3d","debug","scene_","canvas_","verboseRendering","_boundNotifyRepaintRequired","notifyRepaintRequired","lastCameraViewMatrix_","lastCameraMoveTime_","stoppedRendering","_removePostRenderListener","postRender","addEventListener","repaintEventNames_","CameraPrototype","Camera","interceptedAPIs_","originalAPIs_","tuple","originalLoadWithXhr_","loadWithXhr","originalScheduleTask_","TaskProcessor","scheduleTask","enable","repaintKey","that","responseType","method","data","headers","deferred","overrideMimeType","preferText","timeout","parameters","transferableObjects","result","taskProcessor","_originalWorkerMessageSinkRepaint","worker","onmessage","api","parent","original","apply","getOlMap","getLayerGroup","disable","removeEventListener","un","date","viewMatrix","cameraMovedInLastSecond","surface","tilesWaiting","tweens","console","log","setBlockCesiumRendering","restartRenderLoop","setDebug","AutoRenderLoop","Camera_exports","cam_","view_","viewListenKey_","toLonLat_","identityProjection","fromLonLat_","tilt_","distance_","viewUpdateInProgress_","setView_","opt_output","opt_dimension","dim","Observable","toLonLat","getTransform","fromLonLat","handleViewEvent_","readFromView","getHeading","setTilt","tilt","updateCamera_","getTilt","setDistance","updateView","getDistance","setCenter","getCenter","setPosition","ll","carto","Cartographic","math","getAltitude","getPosition","cartesianToCartographic","pos","toDegrees","longitude","latitude","setAltitude","altitude","core","destination","orientation","pitch","PI_OVER_TWO","roll","setView","moveBackward","checkCameraChange","calcDistanceForResolution","bestTarget","positionCartographic","bestTargetCartographic","calcResolutionForDistance","targetNormal","targetToCamera","z","tiltAngle","acos","isNaN","opt_dontSync","old","metersPerUnit","getMetersPerUnit","cos","tan","AbstractSynchronizer_exports","olLayers","mapLayerGroup","layerMap","olLayerListenKeys","olGroupListenKeys_","synchronize","destroyAll","addLayers_","orderLayers","root","fifo","splice","olLayerId","cesiumObjects","Group","listenForGroupChanges_","createSingleLayerCounterparts","l","newOlLayerWithParents","cesiumObject","addCesiumObject","removeAndDestroySingleLayer_","uid","counterparts","counterpart","removeSingleCesiumObject","destroyCesiumObject","unlistenSingleGroup_","removeLayer_","done","uuid","listenKeyArray","contentKeys","listenAddRemove","collection","indexOf","objKey","removeAllCesiumObjects","object","destroy","AbstractSynchronizer","RasterSynchronizer_exports","cesiumLayers_","imageryLayers","ourLayers_","ImageryLayerCollection","remove","removeAll","convertLayerToCesiumImageries","olLayerItem","zIndices","queue","getZIndex","sublayers","unshift","array","stableSort","layer1","layer2","raiseToTop","RasterSynchronizer","Cluster","Vector","geometryFunction","getGeometry","Point","loadFeatures","cluster","addFeatures","mapDistance","getFeatures","clustered","ii","getCoordinates","neighbors","getFeaturesInExtent","filter","neighbor","createCluster","centroid","Feature","source_Cluster","VectorLayerCounterpart_exports","layerProjection","billboards","BillboardCollection","primitives","PrimitiveCollection","olListenKeys","rootCollection_","context","featureToCesiumMap","getRootPrimitive","VectorLayerCounterpart","FeatureConverter_exports","boundOnRemoveOrClearFeatureListener_","onRemoveOrClearFeature_","cancellers","canceller","hasOwnProperty","setReferenceForPicking","primitive","olFeature","createColoredPrimitive","olGeometry","color","opt_lineWidth","flat","renderState","depthTest","enabled","lineWidth","instances","GeometryInstance","ColorGeometryInstanceAttribute","fromColor","getHeightReference","HeightReference","CLAMP_TO_GROUND","ctor","GroundPrimitive","geometryInstances","appearance","PerInstanceColorAppearance","Primitive","extractColorFromOlStyle","outline","fillColor","getFill","getColor","strokeColor","getStroke","extractLineWidthFromOlStyle","getWidth","wrapFillAndOutlineGeometries","fillGeometry","outlineGeometry","olStyle","outlineColor","p1","p2","addTextStyle","getText","label","olGeometry4326TextPartToCesium","csAddBillboard","bbOptions","bb","olCircleGeometryToCesium","getType","point","getRadius","radius","CircleGeometry","CircleOutlineGeometry","extrudedHeight","olLineStringGeometryToCesium","positions","PolylineMaterialAppearance","material","olStyleToCesium","geometryOptions","vertexFormat","outlinePrimitive","CorridorGeometry","PolylineGeometry","olPolygonGeometryToCesium","boundingExtent","maxHeight","max","RectangleGeometry","RectangleOutlineGeometry","rings","getLinearRings","hierarchy","polygonHierarchy","olPos","holes","PolygonGeometry","perPositionHeight","PolygonOutlineGeometry","altitudeMode","heightReference","NONE","RELATIVE_TO_GROUND","olPointGeometryToCesium","opt_newBillboardCallback","imageStyle","Icon","isImageLoaded","naturalHeight","naturalWidth","complete","reallyCreateBillboard","HTMLCanvasElement","HTMLImageElement","verticalOrigin","VerticalOrigin","BOTTOM","cancelled","fuid","listener","isDestroyed","olMultiGeometryToCesium","accumulate","geometries","functor","subgeos","getPoints","getLineStrings","getPolygons","labels","LabelCollection","extentCenter","SimpleGeometry","getFirstCoordinate","offsetX","getOffsetX","offsetY","getOffsetY","offset","pixelOffset","font","getFont","horizontalOrigin","labelStyle","LabelStyle","FILL","outlineWidth","OUTLINE","FILL_AND_OUTLINE","getTextAlign","HorizontalOrigin","LEFT","RIGHT","CENTER","getTextBaseline","TOP","fill","stroke","getLineDash","Material","fromType","horizontal","repeat","evenColor","oddColor","computePlainStyle","fallbackStyleFunction","featureStyleFunction","getStyleFunction","getGeometryFromFeature","opt_geom","geom3d","Geometry","geomFuncRes","getGeometryFunction","olFeatureToCesium","geom","newBillboardAddedCallback","getGeometries","prims","bbs","result2","Error","olVectorLayerToCesium","olView","featurePrimitiveMap","layerStyle","styles","prim","convert","FeatureConverter","VectorSynchronizer_exports","opt_converter","converter","csAllPrimitives_","destroyPrimitives","updateLayerVisibility","csPrimitive","layer_Vector","Layer","csPrimitives","onAddFeature","layer_Image","onRemoveFeature","Billboard","VectorSynchronizer","SynchronizedOverlay_exports","scenePostRenderListenerRemover_","synchronizer_","synchronizer","parent_","positionWGS84_","observer_","MutationObserver","handleElementChanged","attributeObserver_","setPropertyFromEvent_","Overlay","getOptions","handleMapChanged","observeTarget_","disconnect","observe","childList","characterData","subtree","observer","childNodes","node","getScene","removeNode","updatePixelPosition","container","stopEvent","getOverlayContainerStopEvent","getOverlayContainer","insertFirst","insertBefore","handlePositionChanged","sourceProjection","getMap","cloneNode","Node","TEXT_NODE","MouseEvent","stopPropagation","nodes","removeChildren","getElement","parentNode","clonedNode","setVisible","cartesian","fromDegreesArray","fromDegreesArrayHeights","ellipsoidBoundingSphere","BoundingSphere","Occluder","isPointVisible","computeCullingVolume","computeVisibility","pixelCartesian","cartesianToCanvasCoordinates","mapSize","updateRenderedPosition","SynchronizedOverlay","OverlaySynchronizer_exports","overlays_","getOverlays","overlayContainerStopEvent_","className","CLICK","DBLCLICK","MOUSEDOWN","TOUCHSTART","MSPOINTERDOWN","MapBrowserEventType","POINTERDOWN","MOUSEWHEEL","WHEEL","parentElement","overlayContainer_","overlayMap_","addOverlays","addOverlayFromEvent_","removeOverlayFromEvent_","overlay","addOverlay","cesiumOverlay","overlayId","removedOverlay","removeOverlay","csOverlay","OverlaySynchronizer","OLCesium_exports","autoRenderLoop_","time_","time","JulianDate","to4326Transform_","resolutionScale_","canvasClientWidth_","canvasClientHeight_","resolutionScaleChanged_","fillArea","container_","containerAttribute","createAttribute","setAttributeNode","targetElement","getElementById","oc","getViewport","querySelector","isOverMap_","stopOpenLayersEventsPropagation","overlayEvents","canvasAttribute","oncontextmenu","onselectstart","enabled_","pausedInteractions_","hiddenRootGroup_","sceneOptions","scene3DOnly","Scene","sscc","screenSpaceCameraController","tiltEventTypes","eventType","CameraEventType","LEFT_DRAG","modifier","KeyboardEventModifier","SHIFT","ALT","enableLook","constrainedAxis","UNIT_Z","camera_","globe_","Globe","baseColor","WHITE","skyAtmosphere","SkyAtmosphere","firstImageryProvider","SingleTileImageryProvider","addImageryProvider","dataSourceCollection_","DataSourceCollection","dataSourceDisplay_","DataSourceDisplay","dataSourceCollection","synchronizers","createSynchronizers","handleResize_","credits","nextElementSibling","display","lastFrameTime_","renderId_","targetFrameRate_","POSITIVE_INFINITY","blockCesiumRendering_","warmingUp_","trackedFeature_","trackedEntity_","entityView_","needTrackedEntityUpdate_","boundingSphereScratch_","EventHelper","updateTrackedEntity_","enableSuspendTerrainAdjustment","trackedFeature","enableTilt","defaultDataSource","entities","IDENTITY","to4326Transform","toCesiumPosition","coo4326","CallbackProperty","render_","onAnimationFrame_","frameTime","interval","julianDate","initializeFrame","update","trackedEntity","getBoundingSphere","BoundingSphereState","DONE","render","PENDING","bs","FAILED","EntityView","mapProjection","resolutionScale","devicePixelRatio","aspectRatio","getCamera","getDataSources","getDataSourceDisplay","getEnabled","setEnabled","interactions","visibility","throwOnUnitializedMap_","getInteractions","arr","rootGroup","classList","interaction","warmUp","csCamera","setTimeout","block","enableAutoRenderLoop","getAutoRenderLoop","setResolutionScale","setTargetFrameRate","isDef","OLCesium","cesiumUrl","cameraExtentInRadians","super","cesiumUrl_","boundingSphere_","blockLimiter_","promise_","cesiumInitialTilt_","fogDensity","fogSSEFactor","minimumZoomDistance","maximumZoomDistance","limitCameraToBoundingSphereRatio","cesiumLazyLoader","onCesiumLoaded","rect","DEFAULT_VIEW_RECTANGLE","fromRectangle3D","instantiateOLCesium","configureForUsability","configureForPerformance","terrainProvider","CesiumTerrainProvider","fog","density","screenSpaceErrorFactor","sscController","depthTestAgainstTerrain","backgroundColor","limitCameraToBoundingSphere","fromCartesian","flying","unblockLimiter","flyToBoundingSphere","cancel","is3DCurrentlyEnabled","lon","lat","elevation","headingDeg","pitchDeg","getRectangleCameraCoordinates","mag","multiplyByScalar","flyTo","endTransform","__WEBPACK_IMPORTED_MODULE_1__source_XYZ_js__","OSM","ATTRIBUTION","maxZoom","__WEBPACK_IMPORTED_MODULE_0__index_js__","__WEBPACK_IMPORTED_MODULE_2__tilegrid_js__","XYZ","createXYZ","extentFromProjection","minZoom","__WEBPACK_IMPORTED_MODULE_1__source_TileImage_js__","tilePixelRatio"],"mappings":"mDAGAA,EAAA,2CCOAA,EAAA,GACAC,gBAAA,iBACAC,UAAA,YACAC,UAAA,YACAC,KAAA,2FCdA,IAAMC,GAENA,OAAiB,SAASC,EAAWC,EAAaC,KAClDH,aAAuB,SAASI,EAAOF,EAAaC,KACpDH,aAAuB,SAASI,EAAOF,EAAaC,KACpDH,eAAyB,SAASI,EAAOF,EAAaC,KACtDH,aAAuB,SAASI,EAAOF,EAAaC,KACpDH,YAAsB,SAASI,EAAOF,EAAaC,KACnDH,cAAwB,SAASI,EAAOF,EAAaC,KACrDH,cAAwB,SAASI,EAAOF,EAAaC,KACrDH,iBAA2B,SAASI,EAAOC,EAAMH,EAAaC,KAC9DH,8BAAwC,wBAEzBA,mLCPf,MAAAM,EAAA,SAAAC,EAAAC,GASAC,KAAAC,QAAAH,EAMAE,KAAAE,YAAA,KAMAF,KAAAG,cAAAJ,GAAA,KAMAC,KAAAI,QAAA,EAMAJ,KAAAK,QAAA,KAMAL,KAAAM,cAAA,KAMAN,KAAAO,WAAA,KAEA,MAAAC,EAAAR,KAAAC,QAAAQ,IAAA,cACAD,IACA,mBAAAA,EACAR,KAAAU,QACAC,OAAAH,GAEK,iBAAAA,IACLR,KAAAU,OAAA,IAAAE,OAAAC,aAAAL,KAIAR,KAAAc,YAAA,IAAAF,OAAAG,MAEAf,KAAAgB,aAAAC,SAAAC,cAAA,UACAlB,KAAAgB,aAAAG,MAAA,EACAnB,KAAAgB,aAAAI,OAAA,EAEApB,KAAAC,QAAAoB,GAAAC,EAAA,QAAAC,UAAAC,OAAA,SAAAC,GACAzB,KAAA0B,wBACG1B,MACHA,KAAA0B,wBAMAC,OAAAC,iBAAA/B,EAAAgC,WACAC,OACArB,IACA,WAAoB,OAAAT,KAAAI,SAGpB2B,WACAtB,IACA,WAAoB,OAAAT,KAAAO,aAGpByB,WACAvB,IACA,WACA,MAAAwB,EAAAjC,KAAAC,QAAAiC,cACA,OAAAD,IAAAE,YAAA,SAIAC,YACA3B,IACA,WAAoB,OAAAT,KAAAgC,YAGpBK,cACA5B,IACA,WACA,MAAAwB,EAAAjC,KAAAC,QAAAiC,cACA,OAAAD,IAAAK,aAAA,KAIAC,cACA9B,IACA,WAKA,WAMA+B,cACA/B,IACA,WAAoB,OAAAT,KAAAM,gBAGpBmC,mBACAhC,IAAA,cAGAiC,YACAjC,IACA,WAAoB,OAAAT,KAAAc,cAGpB6B,QACAlC,IACA,WAAoB,OAAAT,KAAAK,UAGpBG,OACAC,IACA,WAAoB,OAAAT,KAAAU,SAGpBkC,iBACAnC,IAAA,WAAuB,WAGvBoC,cACApC,IAAA,gBASAZ,EAAAgC,UAAAH,qBAAA,WACA,IAAA1B,KAAAI,QAAA,SAAAJ,KAAAC,QAAA6C,WAAA,CACA,MAAAC,EAAA/C,KAAAC,QAAA+C,gBAEA,GADAhD,KAAAE,YAAA6C,GAAA/C,KAAAG,cACAH,KAAAE,aAAA+C,EAAA,QAAAxC,IAAA,aACAT,KAAAM,cAAA,IAAAM,OAAAsC,2BACK,IAAAlD,KAAAE,aAAA+C,EAAA,QAAAxC,IAAA,aAGL,OAFAT,KAAAM,cAAA,IAAAM,OAAAuC,wBAIAnD,KAAAO,WAAAP,KAAAM,cAAAyB,UAEA,MAAAY,EAAA9C,EAAAuD,sBAAApD,KAAAC,SACAD,KAAAK,QAAAsC,GAAA,KAEA3C,KAAAI,QAAA,IAWAP,EAAAuD,sBAAA,SAAAtD,GACA,IAAAuD,EAAA,GACA,MAAAC,EAAAxD,EAAAyD,kBAQA,IAAAC,EAAAC,EACA,GARAH,GACAA,EAAAI,QAAAC,IAEAN,MAAiBM,EAAAC,UAAAC,QAAA,2BAKjB,GAAAR,EAAAS,OAAA,CAIA,MAAAC,EAAAjE,EAAAkE,UACAD,IACA,iBAAAA,EACAP,EAAAO,GAEAP,EAAAO,EAAAE,IACAR,EAAAM,EAAAG,OAKA,OAAAV,GAAAH,EAAAS,OAAA,MAAAlD,OAAAuD,OAAAd,EAAAG,EAAAC,GAAA,MASA5D,EAAAgC,UAAAuC,eAAA,SAAAC,EAAAC,EAAAC,KASA1E,EAAAgC,UAAA2C,aAAA,SAAAH,EAAAC,EAAAC,GACA,MAAAE,EAAAzE,KAAAC,QAAAyE,qBACA,GAAAD,GAAAzE,KAAAE,YAAA,CAIA,MAAAyE,EAAA3E,KAAAM,yBAAAM,OAAAsC,uBAAAqB,EAAA,EAAAA,EAEAK,GAAAN,EAAA,EAEA,IAAAO,EAAAJ,EAAAK,KAAA9E,KAAAC,SACA0E,EAAAN,EAAAO,GAAA,EAAA5E,KAAAE,aAIA,OAHAF,KAAAU,SACAmE,EAAA7E,KAAAU,OAAAC,OAAAkE,IAEAA,EAAAjE,OAAAmE,gBAAAC,UAAAhF,KAAA6E,GAAA7E,KAAAgB,aAGA,OAAAhB,KAAAgB,cAGA,IAAAiE,EAAA,EC3PA,MAAAC,GAqBAC,6BAAA,SAAAC,EAAAC,GACA,MAAAC,EAAAF,EAAAE,OACAC,EAAAH,EAAAG,OACAC,EAAAF,EAAAE,QACAC,EAAA7E,OAAA8E,WAAAC,UAAA/E,OAAA8E,WAAAE,SACAN,EAAAO,SAAAR,EAAA,IAAAzE,OAAA8E,aACAI,EAAA,IAAAlF,OAAAmF,WACA,OAAAP,EAAAQ,mBAAAT,EAAAU,YAAAV,EAAAW,aACAT,EAAAK,IAYAK,2BAAA,SAAAf,EAAAC,EAAAe,GACA,MAAAN,EAAAZ,EAAAC,6BAAAC,EAAAC,GACAgB,EAAAzF,OAAA0F,WAAAC,wBAAAlB,GAEAmB,EAAA5F,OAAA6F,QAAAC,gBACAL,EACA,IAAAzF,OAAA8E,YAAAI,EAAAzB,EAAA+B,GAAAN,EAAAxB,EAAA8B,EAAA,GACA,IAAAxF,OAAA8E,YAEAiB,EAAA/F,OAAA6F,QAAAC,gBACAL,EACA,IAAAzF,OAAA8E,WAAAI,EAAAzB,EAAA+B,EAAAN,EAAAxB,EAAA8B,EAAA,GACA,IAAAxF,OAAA8E,YAEA,OAAA9E,OAAAgG,UAAAC,MAAAC,mCACAN,EAAAG,KAUAI,4BAAA,SAAAC,EAAA5F,GACA4F,EAAAC,eAAA,CAAAC,EAAAC,EAAAC,KAEA,GADAC,EAAAC,EAAAC,OAAAL,IAAAC,QACAK,IAAAJ,MAAA,EACA,QAAAK,EAAA,EAAqBA,EAAAN,EAAArD,OAAmB2D,GAAAL,EACxCD,EAAAM,EAAA,GAAAN,EAAAM,EAAA,GAAArG,EAGA,OAAA+F,KAaAO,iBAAA,SAAApC,EAAAqC,EAAAC,EAAAvB,EACAwB,GACA,MAAAC,EAAAlH,OAAAmH,KAAAD,MACAE,EAAApH,OAAAoH,aAEAC,EAAAJ,MACAK,EAAAF,EAAAC,EAAAC,SAAA,KACAC,EAAAH,EAAAC,EAAAE,OAAAC,EAAA,QAAAC,QACAC,EAAAL,EAAAK,SAEA,IAAAC,EAAA,EACA,MAAAC,EAAA,IAAA5H,OAAA6F,QAEAgC,EAAAC,KAAAC,MACAC,EAAA,WACA,MAAAC,EAAAH,KAAAC,MAEAG,EAAAX,EAAAL,GADAe,EAAAJ,GACAP,EAAA,MACAb,EAAAC,EAAAC,OAAAuB,GAAAP,GAEAjD,EAAAe,UAAA0C,MAAAP,GACA,MAAAQ,GAAAF,EAAAP,GAAAZ,EACAY,EAAAO,EACAxD,EAAA2D,gBAAA5C,GACAf,EAAA4D,OAAAtB,EAAAoB,GACA1D,EAAA2D,gBAAAT,GAEAM,EAAA,EACAK,OAAAC,sBAAAR,GAEAN,GACAA,KAIAa,OAAAC,sBAAAR,IAWAS,4BAAA,SAAAjE,EAAAkE,EACAC,EAAA1B,GACA,MAAAvC,EAAAF,EAAAE,OAEAkE,EAAAtE,EAAAuE,qBAAArE,EAAAmE,GACA3B,EAAAtC,EAAAoE,MACAC,EAAA/I,OAAAgJ,WAAAC,cAAAjC,EAAA4B,GACAM,EAAAlJ,OAAAmJ,QAAAC,eAAAL,GAGAM,EAAA,IAAArJ,OAAA8E,WACA9E,OAAA8E,WAAAE,SAAAN,EAAAO,SAAA0D,EAAAU,GACA,MAAAC,EAAA,IAAAtJ,OAAA8E,WACA9E,OAAAmJ,QAAAI,iBAAAL,EAAAG,EAAAC,GACAtJ,OAAA8E,WAAA0E,IAAAF,EAAAX,EAAAW,GAGA,MAAA7D,EAAAzF,OAAA6F,QAAA4D,gBAAAH,IAEAxC,EADAxC,EAAAwC,kBACApC,EAAAgE,EAAAY,EAAA7D,EAAAwB,IAWAyC,yBAAA,SAAAlF,EAAAmF,GACA,MAAAC,EAAApF,EAAAE,OAAAmF,WAAAF,GAEA,OADAnF,EAAAsF,MAAAC,KAAAH,EAAApF,IACAA,EAAAE,OAAAsF,cAAAL,IAUAM,gBAAA,SAAAzF,GACA,MAAAG,EAAAH,EAAAG,OACAuF,EAAA,IAAAlK,OAAAmF,WACAR,EAAAU,YAAA,EAAAV,EAAAW,cACA,OAAAhB,EAAAoF,yBAAAlF,EAAA0F,IAUAC,gBAAA,SAAA3F,GACA,MAAAG,EAAAH,EAAAG,OACAyF,EAAA,IAAApK,OAAAmF,WACAR,EAAAU,YAAA,EACAV,EAAAW,aAAA,GACA,OAAAhB,EAAAoF,yBAAAlF,EAAA4F,IAYAC,8BAAA,SAAA7F,GACA,MAAAE,EAAAF,EAAAE,OACAkF,EAAA,IAAA5J,OAAAsK,IAAA5F,EAAAO,SAAAP,EAAA6F,WACA,IAAA9F,EAAAD,EAAAsF,MAAAC,KAAAH,EAAApF,GAEA,IAAAC,EAAA,CAEA,MAAA+F,EAAAxK,OAAAgG,UAAAC,MACAwE,EAAAzK,OAAA0K,kBAAAC,aAAAf,EAAAY,GACAC,IACAhG,EAAAzE,OAAAsK,IAAAM,SAAAhB,EAAAa,EAAA5C,QAIA,IAAApD,EACA,OAGA,MAAAoG,EAAA,IAAA7K,OAAA8E,WACA9E,OAAAgG,UAAAC,MAAA6E,wBAAArG,EAAAoG,GAEA,MACA9D,GAAAgE,EADAzG,EAAA0G,oBACAtG,EAAA6F,UAAAM,EAAAnG,EAAAoE,OAAA3B,KAAA8D,GACA,OAAAjL,OAAAmH,KAAA+D,sBAAAnE,IASAoE,aAAA,SAAA3G,GACA,MAAAE,EAAAF,EAAAE,OACA0G,EAAA1G,EAAAE,QAAAyG,KAAA,EACAd,EAAA7F,EAAA6F,UACArB,EAAAlJ,OAAAgJ,WAAAC,cAAAvE,EAAAoE,MAAAsC,GACAE,EAAAtL,OAAAmJ,QAAAC,eAAAF,GACAG,EAAA,IAAArJ,OAAA8E,WAEA,OADA9E,OAAAmJ,QAAAI,iBAAA+B,EAAAf,EAAAlB,GACA,IAAArJ,OAAAsK,IAAA5F,EAAAO,SAAAoE,IAWA2B,mBAAA,SAAAO,EAAAC,EAAAX,GAGA,MAAAnE,EAAA,IAAA1G,OAAA8E,WACA2G,EAAA,IAAAzL,OAAA8E,WACA4G,EAAA,IAAA1L,OAAA8E,WACA9E,OAAA8E,WAAA6G,UAAAJ,EAAA7E,GACA1G,OAAA8E,WAAA6G,UAAAH,EAAAC,GACAzL,OAAA8E,WAAA8G,MAAAlF,EAAA+E,EAAAC,GAEA,MAAAG,EAAA7L,OAAA8E,WAAAgH,IAAApF,EAAA+E,GACAM,EAAA/L,OAAA8E,WAAAC,UAAA2G,GAGAM,EAAAhM,OAAA8E,WAAAgH,IAAAjB,EAAAa,GACA3E,EAAAI,KAAA8E,MAAAF,EAAAF,GACA,OAAAG,GAAA,EAAAjF,MAgBA8B,qBAAA,SAAArE,EAAA0H,GAQA,MAAAxH,EAAAF,EAAAE,OACAyH,EAAAzH,EAAAE,QAAAyG,KAAA,EACAzB,EAAAtF,EAAA6G,aAAA3G,GACA+F,EAAAvK,OAAA8E,WAAAqD,MAAAyB,EAAAW,WACAvK,OAAA8E,WAAAsH,OAAA7B,KAEA,MAAAM,EAAA,IAAA7K,OAAA8E,WACA9E,OAAAgG,UAAAC,MAAA6E,wBAAAoB,EAAArB,GAEA,MAAAwB,EAAA,IAAArM,OAAA8E,WAIA,OAHA9E,OAAA8E,WAAAsH,OAAA1H,EAAAoE,MAAAuD,GAEA/H,EAAA0G,mBAAAH,EAAAN,EAAA8B,GACAF,GAYAG,OAAA,SAAA5H,EAAAD,EAAA8H,GACA,GAAAA,EAAA,CACA,MAAA/L,EAAA+L,EAAAC,UAAA/H,GACAA,EAAAjE,UAAA,EAGA,MAAAgK,EAAAxK,OAAAgG,UAAAC,MACAwG,EAAAjC,EAAAkC,wBAAAjI,GAEAQ,EAAAP,EAAAO,SACA0H,EAAA,IAAA3M,OAAA8E,WACA0F,EAAAM,wBAAA7F,EAAA0H,GAEAjI,EAAA4H,OAAArH,EAAAwH,EAAAE,IAWAC,kBAAA,SAAAC,EAAAC,GACA,GAAAD,GAAAC,EAAA,CACA,MAAAC,EAAA1K,EAAA,QAAA2K,gBAAAH,EAAAC,EAAA,aACA,OAAA9M,OAAAiN,UAAAC,YAAAH,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAEA,aAaAI,wBAAA,SAAAC,EAAAC,GAEA,KAAAD,aAAAE,EAAA,SAAAF,aAAAG,EAAA,SACA,YAGA,IAAAC,EAAA,KACAtO,EAAAkO,EAAAK,YAgBA,GAbAvO,aAAAwO,EAAA,SAAAxO,EAAAyO,UACAzO,EAAA0O,yBAAAC,EAAA,QAAAC,2BACA5O,EAAA,IAAA6O,EAAA,SACA9J,IAAA/E,EAAAyO,SACAK,OAAA9O,EAAA+O,YACAvL,aAAAxD,EAAAyD,kBACAmK,WAAA5N,EAAAkD,gBACAe,KAAAjE,EAAAkE,UACA8K,aAAAhP,EAAAW,IAAA,cACAsO,mBAAAjP,OAIAA,aAAAkP,EAAA,GAmBA,YAnBA,CACA,IAAAtB,EAAA5N,EAAAkD,gBAEA,GAAA0K,GAGK,GAAAA,IAAAO,EACL,iBAFAP,EAAAO,EAKA,MAAAgB,EAAAvB,IAAAzK,EAAA,QAAAxC,IAAA,aACAyO,EAAAxB,IAAAzK,EAAA,QAAAxC,IAAA,aACA,IAAAwO,IAAAC,EAGA,YAFAd,EAAA,IAAAnJ,EAAAnF,EAAAmO,GAWA,MAAAkB,KAGAxB,EAD4CK,EAAAvN,IAAA,gBAC5CuN,EAAAoB,YAMA,OALAzB,IACAwB,EAAApN,UAAAmD,EAAAsI,kBAAAG,EAAAM,IAGA,IAAArN,OAAAyO,aAAAjB,EAAAe,IAYAG,4BAAA,SAAAC,EAAAC,GACA,IAAAC,EAAA,EACAC,GAAA,GACAH,EAAAI,OAAAC,OAAAL,EAAAM,SAAAnM,QAAAsK,IACA,MAAA8B,EAAA9B,EAAA+B,kBACAvI,IAAAsI,IACAL,GAAAK,GAEA,MAAAE,EAAAhC,EAAAiC,kBACAzI,IAAAwI,IACAN,GAAAM,KAGAR,EAAAU,MAAAT,EACAD,EAAAW,KAAAT,GAUAU,kCAAA,SAAAC,GACA,MAAAC,EAAAD,EACA,OAAAC,EAAAxM,OAAA,EACAlD,OAAA8E,WAAAoI,YAAAwC,EAAA,GAAAA,EAAA,GAAAA,EAAA,IACA1P,OAAA8E,WAAAoI,YAAAwC,EAAA,GAAAA,EAAA,KAUAC,oCAAA,SAAAC,GACAnJ,EAAAC,EAAAC,OAAA,OAAAiJ,GACA,MAAAC,EAAAvL,EAAAkL,kCACAM,KACA,QAAAjJ,EAAA,EAAiBA,EAAA+I,EAAA1M,SAAwB2D,EACzCiJ,EAAAC,KAAAF,EAAAD,EAAA/I,KAEA,OAAAiJ,GAcAE,sBAAA,SAAA5J,EAAA0G,GACArG,EAAAC,EAAAC,OAAAmG,GAEA,MAAAmD,EAAA5N,EAAA,QAAAxC,IAAA,aACAsC,EAAAE,EAAA,QAAAxC,IAAAiN,GACA,GAAA3K,IAAA8N,EAAA,CACA,MAAAC,EAAA9J,EAAA+J,iBACA/J,IAAA+B,SACA1C,UAAAtD,EAAA8N,GACA7J,EAAAgK,cAAAF,GAEA,OAAA9J,GAUAiK,qBAAA,SAAAC,GAEA,OADAA,KAAA,QACAC,MAAAC,QAAAF,GACA,IAAAtQ,OAAAyQ,MACAzQ,OAAAyQ,MAAAC,YAAAJ,EAAA,IACAtQ,OAAAyQ,MAAAC,YAAAJ,EAAA,IACAtQ,OAAAyQ,MAAAC,YAAAJ,EAAA,IACAA,EAAA,IAEG,iBAAAA,EACHtQ,OAAAyQ,MAAAE,mBAAAL,QAEA7J,EAAAC,EAAAkK,KAAA,eAUAC,mBAAA,SAAA5M,GACA,IAAA6M,EAAA,GACA,MAAAC,EAAA,4BACAC,EAAAD,EAAAE,KAAAhN,GACA,GAAA+M,EAAA,CACA/M,IAAAhB,QAAA8N,EAAA,OACA,MAAAG,EAAAF,EAAA,GAAAG,WAAA,GACAC,EAAAJ,EAAA,GAAAG,WAAA,GACA,IAAAE,EACA,IAAAA,EAAAH,EAAkCG,GAAAD,IAA0BC,EAC5DP,GAAAQ,OAAAC,aAAAF,GAGA,OACApN,MACA6M,eAaAU,mBAAA,SAAAC,EAAAjN,GACA,WAAAkN,QAAA,CAAAC,EAAAC,KACA,MAAAlN,EAAAF,EAAAE,OACAwH,EAAA5H,EAAA2F,gBAAAzF,GACA,IAAA0H,EAEA,YADA0F,EAAA,8BAIA,MAAAC,EAAAJ,EAAAK,UAAAC,cACA,QAAAnL,IAAAiL,EAEA,YADAD,EAAA,+BAGA,MAAA7K,EAAAzC,EAAAuE,qBAAArE,EAAA0H,GAGA5H,EAAAmE,4BAAAjE,EAAAqN,EAAA3F,GAGA,MAAAzG,EAAAzF,OAAA6F,QAAA4D,gBAAAyC,GACAlF,EAAAtC,EAAAoE,MACAzB,GACAK,SAAA,KACA,MAAAsK,EAAAP,EAAAK,UACAxN,EAAA2N,cAAAD,GACAL,MAGArN,EAAAwC,iBAAApC,GAAAqC,EAAAC,EAAAvB,EAAA4B,MAWA6K,yBAAA,SAAA1N,EAAAuC,GACA,WAAA2K,QAAA,CAAAC,EAAAC,KACA,MAAAlN,EAAAF,EAAAE,OACAwH,EAAA5H,EAAA2F,gBAAAzF,GACA,IAAA0H,EAEA,YADA0F,EAAA,8BAIA,MAAAvK,GAAqBK,SAAAiK,GACrBlM,EAAAzF,OAAA6F,QAAA4D,gBAAAyC,GACAlF,EAAAtC,EAAAoE,OAEAhC,EADAxC,EAAAwC,kBACApC,GAAAqC,EAAAC,EAAAvB,EAAA4B,MAYA4K,cAAA,SAAAD,EAAAjL,EAAA,GACA,MAAAoL,EAAAH,EAAAI,gBACAJ,EAAAK,YAAAtL,GACAiL,EAAAM,cAAAN,EAAAO,oBAAAJ,MAEA7T,EAAA,oJCvmBA,MAAAkU,EAAA,SAAA3F,EAAAsF,EAAAM,EAAApP,EAAAqP,EAAAC,GAEAC,EAAA,EAAA1O,KAAA9E,KAAAyN,EAAAsF,EAAAM,EAAAI,EAAA,EAAAC,MAMA1T,KAAA2T,KAAA1P,EAMAjE,KAAA4T,OAAA,IAAAzF,MACA,OAAAmF,IACAtT,KAAA4T,OAAAN,eAOAtT,KAAA6T,mBAAA,KAMA7T,KAAA8T,MAAAL,EAAA,EAAAC,KAMA1T,KAAA+T,mBAAAR,GAIA5R,OAAAqS,EAAA,SAAArS,CAAAyR,EAAAI,EAAA,GAOAJ,EAAAvR,UAAAoS,SAAA,WACA,OAAAjU,KAAA4T,QASAR,EAAAvR,UAAAqS,kBAAA,WACAlU,KAAA8T,MAAAL,EAAA,EAAAU,MACAnU,KAAAoU,iBACApU,KAAAqU,WASAjB,EAAAvR,UAAAyS,iBAAA,gBACA9M,IAAAxH,KAAA+S,aACA/S,KAAA+S,WAAApR,OAAA4S,EAAA,UAAA5S,CAAA3B,KAAAyN,QAAAzN,KAAA4T,OAAAxS,QAEApB,KAAA8T,MAAAL,EAAA,EAAAe,OACAxU,KAAAoU,iBACApU,KAAAqU,WAWAjB,EAAAvR,UAAA4S,KAAA,WACAzU,KAAA8T,OAAAL,EAAA,EAAAC,MAAA1T,KAAA8T,OAAAL,EAAA,EAAAU,QACAnU,KAAA8T,MAAAL,EAAA,EAAAiB,QACA1U,KAAAqU,UACArU,KAAA6T,oBACAvS,EAAA,QAAAqT,WAAA3U,KAAA4T,OAAArS,EAAA,EAAA4S,MACAnU,KAAAkU,kBAAAlU,MACAsB,EAAA,QAAAqT,WAAA3U,KAAA4T,OAAArS,EAAA,EAAAqT,KACA5U,KAAAsU,iBAAAtU,OAEAA,KAAA+T,mBAAA/T,UAAA2T,QAQAP,EAAAvR,UAAAgT,SAAA,SAAAC,GACA9U,KAAA4T,OAAAkB,GASA1B,EAAAvR,UAAAuS,eAAA,WACApU,KAAA6T,mBAAAnQ,QAAApC,EAAA,QAAAyT,eACA/U,KAAA6T,mBAAA,MAEA,IAAAmB,EAAA,gEC5GA,MAAA1G,EAAA,SAAAzG,GAEA,MAAAI,EAAAJ,MAEA4G,EAAA,QAAA3J,KAAA9E,MACAsD,aAAA2E,EAAA3E,aACAoK,WAAAzF,EAAAyF,WACAuH,YAAAhN,EAAAgN,cAOAjV,KAAAkV,kBACA1N,IAAAS,EAAAqL,YAAArL,EAAAqL,YAAA,KAMAtT,KAAAmV,KAAAlN,EAAApD,IAMA7E,KAAA+T,wBAAAvM,IAAAS,EAAAsL,kBACAtL,EAAAsL,kBAAA9E,EAAA,QAAAC,yBAMA1O,KAAAoV,QAAAnN,EAAA2G,WAMA5O,KAAAqV,MAAA,EACArV,KAAAsV,aAMAtV,KAAAuV,YAAkEtN,EAAA,WAMlEjI,KAAAwV,YAAAhO,IAAAS,EAAAwN,OAAAxN,EAAAwN,MAMAzV,KAAA4T,OAAA,KAMA5T,KAAA0V,YAAA,KAMA1V,KAAA2V,kBAAA,EAMA3V,KAAA4V,YAAApO,IAAAS,EAAA4N,MAAA5N,EAAA4N,MAAA,KAIAlU,OAAAqS,EAAA,SAAArS,CAAA2M,EAAAG,EAAA,SAQAH,EAAAwH,4BAAA,SAiBAxH,EAAAzM,UAAAkU,qBAAA,SAAA1F,EAAA0C,EAAArF,EAAAkB,GACA,QAAApH,IAAAxH,KAAAmV,KACA,OAEA,MAAAa,EAAArU,OAAAoB,EAAA,IAAApB,CAAA+L,GACAuI,EAAAjW,KAAAgD,gBAEAiT,OAAAD,IACAjD,EAAAmD,EAAA,EAAAC,0BAAAF,EAAAD,EAAA3F,EAAA0C,GACA1C,EAAA1O,OAAAoB,EAAA,UAAApB,CAAA0O,EAAA2F,EAAAC,IAGA,MAAAxI,EAAA9L,OAAA4S,EAAA,kBAAA5S,CAAA0O,EAAA0C,EAAA,EACAzE,EAAAwH,4BAEAM,GACAC,QAAA,MACAC,QAAAC,EAAA,EACAC,QAAA,iBACAC,OAAA,YACAC,aAAA,EACAC,aAAA3W,KAAAoV,QAAA,QAEAzT,OAAA0J,EAAA,OAAA1J,CAAAyU,EAAApW,KAAAoV,QAAAxG,GAEA,MAAAvK,EAAA0D,KAAA6O,OAAAvG,EAAA,GAAA5C,EAAA,IAAAsF,GACAzO,EAAAyD,KAAA6O,OAAAnJ,EAAA,GAAA4C,EAAA,IAAA0C,GAIA,OAHAqD,EAAApW,KAAAqV,KAAA,SAAAhR,EACA+R,EAAApW,KAAAqV,KAAA,SAAA/Q,EAEAtE,KAAA6W,eACApJ,EAAAa,EAAAwH,2BACA,EAAAG,GAAAD,EAAAI,IAUA9H,EAAAzM,UAAAgN,UAAA,WACA,OAAA7O,KAAAoV,SAOA9G,EAAAzM,UAAAiV,iBAAA,SAAArJ,EAAAsF,EAAAM,EAAA3F,GAEA,QAAAlG,IAAAxH,KAAAmV,KACA,YAGApC,EAAA/S,KAAA+W,sBAAAhE,GAEA,GAAAM,GAAArT,KAAAwV,aAAAhO,IAAAxH,KAAAuV,cACAlC,EAAA,GAGA,MAAA2D,EAAAjE,EAAAM,EAEArI,EAAArJ,OAAA4S,EAAA,UAAA5S,CAAA8L,GACAwJ,EAAAlP,KAAAmP,KAAAvV,OAAA4S,EAAA,SAAA5S,CAAA8L,GAAAuJ,GACAG,EAAApP,KAAAmP,KAAAvV,OAAA4S,EAAA,UAAA5S,CAAA8L,GAAAuJ,GACAI,EAAAzV,OAAA4S,EAAA,kBAAA5S,CAAAqJ,EAAAgM,EAAA,GACAC,EAAAE,IACAE,EAAAtP,KAAAmP,KAAAlX,KAAA4V,OAAAjU,OAAA4S,EAAA,SAAA5S,CAAA8L,GAAAuJ,GACAM,EAAAvP,KAAAmP,KAAAlX,KAAA4V,OAAAjU,OAAA4S,EAAA,UAAA5S,CAAA8L,GAAAuJ,GACAO,EAAA5V,OAAA4S,EAAA,kBAAA5S,CAAAqJ,EAAAgM,EAAA,GACAK,EAAAC,IAEAxC,EAAA9U,KAAA4T,OACA,GAAAkB,GACA9U,KAAA2V,mBAAA3V,KAAAwX,eACA1C,EAAA9B,iBAAAD,GACA+B,EAAA2C,iBAAApE,GACA1R,OAAA4S,EAAA,eAAA5S,CAAAmT,EAAA1F,YAAAgI,GACA,OAAAtC,EAGA,MAAAlG,GACAyH,QAAA,MACAC,QAAAC,EAAA,EACAC,QAAA,SACAC,OAAA,YACAC,aAAA,GAEA/U,OAAA0J,EAAA,OAAA1J,CAAAiN,EAAA5O,KAAAoV,SAEApV,KAAA0V,WAAA,GAAA3N,KAAA2P,MAAA/V,OAAA4S,EAAA,SAAA5S,CAAA4V,GAAAP,GACAhX,KAAA0V,WAAA,GAAA3N,KAAA2P,MAAA/V,OAAA4S,EAAA,UAAA5S,CAAA4V,GAAAP,GAEA,MAAAnS,EAAA7E,KAAA6W,eAAAU,EAAAvX,KAAA0V,WAAArC,EACA3F,EAAAkB,GAUA,OARA5O,KAAA4T,OAAA,IAAAoB,EAAAuC,EAAAxE,EAAAM,EACAxO,EAAA7E,KAAAkV,aAAAlV,KAAA+T,oBAEA/T,KAAA2V,kBAAA3V,KAAAwX,cAEAlW,EAAA,QAAAqW,OAAA3X,KAAA4T,OAAArS,EAAA,EAAAC,OACAxB,KAAA4X,kBAAA5X,MAEAA,KAAA4T,QAUAtF,EAAAzM,UAAA2M,qBAAA,WACA,OAAAxO,KAAA+T,oBAaAzF,EAAAzM,UAAAgV,eAAA,SAAApJ,EAAAoK,EAAAxE,EAAA3F,EAAAkB,GAUA,GARAjN,OAAAmW,EAAA,EAAAnW,MAAA6F,IAAAxH,KAAAmV,KAAA,GAEAvG,EAAA5O,KAAAqV,KAAA,aAAA3H,EAAAqK,UAEA,WAAA/X,KAAAoV,UACAxG,EAAA,WAGA,GAAAyE,EACA,OAAArT,KAAAuV,aACA,KAAAyC,EAAA,EAAA5Y,UACA,MAAA6Y,EAAA,GAAA5E,EAAA,KACA,mBAAAzE,EACAA,EAAA,wBAAwCqJ,EAExCrJ,EAAA,sBAAAqJ,EAEA,MACA,KAAAD,EAAA,EAAA3Y,UACAuP,EAAA,kBAAAyE,EACA,MACA,KAAA2E,EAAA,EAAA7Y,gBACA,KAAA6Y,EAAA,EAAA1Y,KACAsP,EAAA,OAAAyE,EACA,MACA,QACA1R,OAAAmW,EAAA,EAAAnW,EAAA,KAKAiN,EAAA,MAAAiJ,EAAA,GACAjJ,EAAA,OAAAiJ,EAAA,GAEA,MAAAK,EAAAxK,EAAAyK,qBACA,IAAAC,EAQA,OANAA,EADApY,KAAAqV,MAAA,MAAA6C,EAAAG,OAAA,MACA5K,EAAA,GAAAA,EAAA,GAAAA,EAAA,GAAAA,EAAA,IAEAA,EAEAmB,EAAA,KAAAwJ,EAAAE,KAAA,KAEA3W,OAAA4W,EAAA,aAAA5W,CAAwC3B,KAAA,KAAA4O,IASxCN,EAAAzM,UAAA0M,OAAA,WACA,OAAAvO,KAAAmV,MASA7G,EAAAzM,UAAA2W,qBAAA,SACAjF,GACAvT,KAAA4T,OAAA,KACA5T,KAAA+T,mBAAAR,EACAvT,KAAAqU,WASA/F,EAAAzM,UAAA4W,OAAA,SAAA5T,GACAA,GAAA7E,KAAAmV,OACAnV,KAAAmV,KAAAtQ,EACA7E,KAAA4T,OAAA,KACA5T,KAAAqU,YAUA/F,EAAAzM,UAAA6W,aAAA,SAAA9J,GACAjN,OAAA0J,EAAA,OAAA1J,CAAA3B,KAAAoV,QAAAxG,GACA5O,KAAAsV,aACAtV,KAAA4T,OAAA,KACA5T,KAAAqU,WAOA/F,EAAAzM,UAAAyT,WAAA,WACA,MAAAqD,EAAA3Y,KAAAoV,QAAA,SAAAmB,EAAA,EACAvW,KAAAqV,KAAAuD,EAAA,QAAAC,gBAAAF,EAAA,WAEAzZ,EAAA,4FChXA,MAAY4Z,0JAAZC,EAAA,IACAC,EAAAD,EAAA,wCASA,IAAMxZ,EAAU,SAASK,GAAmB,IAAbqZ,EAAaC,UAAApV,OAAA,QAAA0D,IAAA0R,UAAA,GAAAA,UAAA,MAE1CC,EAAAC,QAActU,KAAK9E,KAAMJ,GAKzBI,KAAKiZ,OAASA,GAIhBH,EAAOO,SAAS9Z,EAAhB4Z,EAAAC,mBAGe7Z,4LC3Bf+Z,EAAAP,EAAA,IA4BA,MAAApK,EAAA,SAAA9G,GAEA,MAAAI,EAAAJ,MAEA+G,EAAA3G,EAAA2G,WAEA2K,IAAA,gBAAA3K,MAAA,YAEA4K,EAAA,EAAA1U,KAAA9E,MACAsD,aAAA2E,EAAA3E,aACAmW,UAAAxR,EAAAwR,UACAnG,YAAArL,EAAAqL,YACAoG,QAAAH,EACA7L,WAAAzF,EAAAyF,WACAiM,2BAAA1R,EAAA0R,2BACAC,UAAA3R,EAAA2R,UACAC,SAAA5R,EAAA4R,SACAC,iBAAA7R,EAAA6R,iBACAjV,IAAAoD,EAAApD,IACAkV,KAAA9R,EAAA8R,KACAC,WAAAxS,IAAAS,EAAA+R,OAAA/R,EAAA+R,MACAC,WAAAhS,EAAAgS,aAOAja,KAAAka,aAAA1S,IAAAS,EAAAkS,OAAAlS,EAAAkS,OAAA,EAMAna,KAAAoV,QAAAxG,EAMA5O,KAAAqV,MAAA,EAMArV,KAAAuV,YAAkEtN,EAAA,WAMlEjI,KAAAwV,YAAAhO,IAAAS,EAAAwN,OAAAxN,EAAAwN,MAMAzV,KAAAoa,WAAAzY,OAAA0Y,EAAA,YAAA1Y,GAEA3B,KAAAsV,aACAtV,KAAAsa,OAAAta,KAAAua,qBAIA5Y,OAAA6Y,EAAA,SAAA7Y,CAAAgN,EAAA6K,EAAA,GAiBA7K,EAAA9M,UAAAkU,qBAAA,SAAA1F,EAAA0C,EAAArF,EAAAkB,GACA,MAAAoH,EAAArU,OAAA8Y,EAAA,IAAA9Y,CAAA+L,GACAuI,EAAAjW,KAAAgD,gBAEA,IAAA6W,EAAA7Z,KAAAkC,cACA2X,IACAA,EAAA7Z,KAAA0a,yBAAA1E,IAGA,MAAA2E,EAAAd,EAAAe,kCAAAvK,EAAA0C,GAEA,GAAA8G,EAAAgB,iBAAA/W,QAAA6W,EAAA,GACA,OAGA,IAAAG,EAAAjB,EAAA7G,cAAA2H,EAAA,IACAI,EAAAlB,EAAAmB,mBAAAL,EAAA3a,KAAAoa,YACAa,EAAAC,EAAA,QAAAC,OAAAtB,EAAA1X,YAAAwY,EAAA,IAAA3a,KAAAob,SAGA,MAAAjB,EAAAna,KAAAka,QACA,IAAAC,IACAc,EAAAC,EAAA,QAAAG,OAAAJ,EAAAd,EAAAna,KAAAob,SACAL,EAAApZ,OAAA0Y,EAAA,OAAA1Y,CAAAoZ,EAAAD,EAAAX,EAAAY,IAGA9E,OAAAD,IACA8E,EAAAQ,EAAA,EAAAnF,0BAAAF,EAAAD,EAAA3F,EAAAyK,GACAC,EAAApZ,OAAA8Y,EAAA,gBAAA9Y,CAAAoZ,EAAA/E,EAAAC,GACA5F,EAAA1O,OAAA8Y,EAAA,UAAA9Y,CAAA0O,EAAA2F,EAAAC,IAGA,MAAAG,GACAC,QAAA,MACAC,QAAAiF,EAAA,EACA/E,QAAA,iBACAC,OAAA,YACAC,aAAA,EACAC,aAAA3W,KAAAoV,QAAA,QAEAzT,OAAA6Z,EAAA,OAAA7Z,CAAAyU,EAAApW,KAAAoV,QAAAxG,GAEA,MAAAvK,EAAA0D,KAAA6O,OAAAvG,EAAA,GAAA0K,EAAA,IAAAD,GACAxW,EAAAyD,KAAA6O,OAAAmE,EAAA,GAAA1K,EAAA,IAAAyK,GAKA,OAHA1E,EAAApW,KAAAqV,KAAA,SAAAhR,EACA+R,EAAApW,KAAAqV,KAAA,SAAA/Q,EAEAtE,KAAA6W,eAAA8D,EAAAM,EAAAF,EACA,EAAA9E,GAAAD,EAAAI,IAOAzH,EAAA9M,UAAA4Z,kBAAA,WACA,OAAAzb,KAAAka,SAUAvL,EAAA9M,UAAAgN,UAAA,WACA,OAAA7O,KAAAoV,SAcAzG,EAAA9M,UAAAgV,eAAA,SAAA8D,EAAAM,EAAAF,EACA1H,EAAA3F,EAAAkB,GAEA,MAAAmL,EAAA/Z,KAAA+Z,KACA,IAAAA,EACA,OAYA,GATAnL,EAAA,MAAAqM,EAAA,GACArM,EAAA,OAAAqM,EAAA,GAEArM,EAAA5O,KAAAqV,KAAA,aAAA3H,EAAAqK,UAEA,WAAA/X,KAAAoV,UACAxG,EAAA,WAGA,GAAAyE,EACA,OAAArT,KAAAuV,aACA,KAAAmG,EAAA,EAAAtc,UACA,MAAA6Y,EAAA,GAAA5E,EAAA,KACA,mBAAAzE,EACAA,EAAA,wBAAwCqJ,EAExCrJ,EAAA,sBAAAqJ,EAEA,MACA,KAAAyD,EAAA,EAAArc,UACAuP,EAAA,kBAAAyE,EACA,MACA,KAAAqI,EAAA,EAAAvc,gBACA,KAAAuc,EAAA,EAAApc,KACAsP,EAAA,OAAAyE,EACA,MACA,QACA1R,OAAAga,EAAA,EAAAha,EAAA,MAKA,MAAAuW,EAAAxK,EAAAyK,qBACAC,EAAA2C,EAEA,IAAAa,EAUA/W,EAXA7E,KAAAqV,MAAA,MAAA6C,EAAAG,OAAA,OAEAuD,EAAAb,EAAA,GACA3C,EAAA,GAAA2C,EAAA,GACA3C,EAAA,GAAAwD,EACAA,EAAAb,EAAA,GACA3C,EAAA,GAAA2C,EAAA,GACA3C,EAAA,GAAAwD,IAEAhN,EAAA,KAAAwJ,EAAAE,KAAA,KAGA,GAAAyB,EAAAjW,QACAe,EAAAkV,EAAA,GAGAlV,EAAAkV,EADApY,OAAAka,EAAA,OAAAla,CAAAma,EAAA,EAAAC,KAAApB,GAAAZ,EAAAjW,SAGA,OAAAnC,OAAA2X,EAAA,aAAA3X,CAAAkD,EAAA+J,IAOAD,EAAA9M,UAAAma,kBAAA,SAAA3I,GACA,OAAArT,KAAAwV,aAAAhO,IAAAxH,KAAAuV,YACoB,EADpB,GASA5G,EAAA9M,UAAA0Y,iBAAA,WACA,IAAA9S,EAAA,EACA,MAAAwU,KACA,UAAAC,KAAAlc,KAAAoV,QACA6G,EAAAxU,KAAAyU,EAAA,IAAAlc,KAAAoV,QAAA8G,GAEA,OAAAD,EAAA3D,KAAA,MAOA3J,EAAA9M,UAAAsa,qBAAA,SAAAxB,EAAAtH,EAAA3F,GAEA,IAAAmM,EAAA7Z,KAAAkC,cAKA,GAJA2X,IACAA,EAAA7Z,KAAA0a,yBAAAhN,IAGAmM,EAAAgB,iBAAA/W,QAAA6W,EAAA,GACA,OAGA,GAAAtH,GAAArT,KAAAwV,aAAAhO,IAAAxH,KAAAuV,cACAlC,EAAA,GAGA,MAAAyH,EAAAjB,EAAA7G,cAAA2H,EAAA,IACA,IAAAI,EAAAlB,EAAAmB,mBAAAL,EAAA3a,KAAAoa,YACAa,EAAAC,EAAA,QAAAC,OACAtB,EAAA1X,YAAAwY,EAAA,IAAA3a,KAAAob,SAEA,MAAAjB,EAAAna,KAAAka,QACA,IAAAC,IACAc,EAAAC,EAAA,QAAAG,OAAAJ,EAAAd,EAAAna,KAAAob,SACAL,EAAApZ,OAAA0Y,EAAA,OAAA1Y,CAAAoZ,EAAAD,EAAAX,EAAAY,IAGA,GAAA1H,IACA4H,EAAAC,EAAA,QAAAkB,MAAAnB,EAAA5H,EAAArT,KAAAob,UAGA,MAAAhF,GACAC,QAAA,MACAC,QAAAiF,EAAA,EACA/E,QAAA,SACAC,OAAA,YACAC,aAAA,GAIA,OAFA/U,OAAA6Z,EAAA,OAAA7Z,CAAAyU,EAAApW,KAAAoV,SAEApV,KAAA6W,eAAA8D,EAAAM,EAAAF,EACA1H,EAAA3F,EAAA0I,IAQAzH,EAAA9M,UAAA6W,aAAA,SAAA9J,GACAjN,OAAA6Z,EAAA,OAAA7Z,CAAA3B,KAAAoV,QAAAxG,GACA5O,KAAAsV,aACAtV,KAAAsa,OAAAta,KAAAua,qBAOA5L,EAAA9M,UAAAyT,WAAA,WACA,MAAAqD,EAAA3Y,KAAAoV,QAAA,SAAAmG,EAAA,EACAvb,KAAAqV,KAAAgH,EAAA,QAAAxD,gBAAAF,EAAA,WAEAzZ,EAAA,4FCpVA,QAAA6Z,EAAA,QACAA,EAAA,wDAFA,IAAMxZ,KAQNA,EAAQ+c,OAASC,QAAQD,OAAO,sBAEhC/c,EAAQ+c,OAAO3c,MAAM,kBAAmB,IAAA6c,EAAApD,SACxCqD,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQ+c,OAAOK,gBAG9Bpd,+UCdfqd,EAAA7D,EAAA,uBAKA,IAAMxZ,aAkBJ,SAAAA,EAAY0I,gGAAS4U,CAAA7c,KAAAT,GAiBnBS,KAAK8c,UAA+B,IAApB7U,EAAQ8U,QAQxB/c,KAAKgd,UAA+B,IAApB/U,EAAQyH,QAcxB1P,KAAKid,WAAahV,EAAQgV,YAAc,KAOxCjd,KAAKkd,IAAMjV,EAAQkV,GASnBnd,KAAKod,qBAAuBnV,EAAQoV,oBAOpCrd,KAAKsd,eAAiBrV,EAAQsV,cAO9Bvd,KAAKwd,eAAiBvV,EAAQwV,cAO9Bzd,KAAK0d,MAAQzV,EAAQ0U,KA9FnB,OAAAgB,EAAApe,IAAA2c,IAAA,gBAAAvc,MAAA,WA8IF,OAAOK,KAAKid,cA9IVf,IAAA,gBAAAvc,MAAA,SAqJUsd,GACZjd,KAAKid,WAAaA,KAtJhBf,IAAA,UAAAzb,IAAA,WA0GF,OAAOT,KAAK8c,UA1GVc,IAAA,SAiHQb,GACV/c,KAAK8c,SAAWC,KAlHdb,IAAA,UAAAzb,IAAA,WA0HF,OAAOT,KAAKgd,UA1HVY,IAAA,SAiIQlO,GACV1P,KAAKgd,SAAWtN,KAlIdwM,IAAA,KAAAzb,IAAA,WA8JF,OAAOT,KAAKkd,OA9JVhB,IAAA,sBAAAzb,IAAA,WAsKF,OAAOT,KAAKod,wBAtKVlB,IAAA,gBAAAzb,IAAA,WA8KF,OAAOT,KAAKsd,kBA9KVpB,IAAA,gBAAAzb,IAAA,WAsLF,OAAOT,KAAKwd,kBAtLVtB,IAAA,OAAAzb,IAAA,WA8LF,OAAOT,KAAK0d,SA9LVxB,IAAA,YAAAzb,IAAA,WA4MF,OAAO,KA5MLyb,IAAA,yBAAAzb,IAAA,WAqNF,OAA8B,OAAvBT,KAAKud,eAAiD,OAAvBvd,KAAKyd,kBArNzCle,eA0NSA,oFC/Nf,QAAAwZ,EAAA,IACYD,IAAZC,EAAA,QACAA,EAAA,KACY8E,IAAZ9E,EAAA,QACAA,EAAA,SACAA,EAAA,SACAA,EAAA,QACAA,EAAA,iNAyBA,IAAMxZ,EAAU,WAMdS,KAAK8d,2BAML9d,KAAK+d,WAML/d,KAAKC,QAAU,IAAA+d,EAAA5E,SACb6E,iBAAiB,IAOnBje,KAAKke,OAAS,IAAAC,EAAA/E,SACZtZ,OAAQE,KAAKC,QACbme,MAAOpe,KAAKqe,eAAeC,KAAKte,MAChCue,sBAAsB,EACtBC,wBAAwB,KAW5Bjf,EAAQsC,UAAU4c,WAAa,SAASC,EAASC,GAC/CC,EAAAxF,QAAY7R,OAAOoX,GAAc,GACjCC,EAAAxF,QAAY7R,OAAOoX,EAAa3e,KAAK+d,QAAQja,QAC7C,IAAM+a,EAAa/F,EAAOgG,OAAOJ,GAASK,WAC1C/e,KAAK8d,wBAAwBe,GAAcF,EAC3C3e,KAAK+d,QAAQY,GAAYK,SAASH,GAAcH,EAChD1e,KAAKC,QAAQwe,WAAWC,IAS1Bnf,EAAQsC,UAAUod,cAAgB,SAASP,EAASC,GAClDC,EAAAxF,QAAY7R,OAAOoX,GAAc,GACjCC,EAAAxF,QAAY7R,OAAOoX,EAAa3e,KAAK+d,QAAQja,QAC7C,IAAM+a,EAAa/F,EAAOgG,OAAOJ,GAASK,kBACnC/e,KAAK8d,wBAAwBe,UAC7B7e,KAAK+d,QAAQY,GAAYK,SAASH,GACzC7e,KAAKC,QAAQgf,cAAcP,IAQ7Bnf,EAAQsC,UAAUqd,MAAQ,SAASP,GACjCC,EAAAxF,QAAY7R,OAAOoX,GAAc,GACjCC,EAAAxF,QAAY7R,OAAOoX,EAAa3e,KAAK+d,QAAQja,QAC7C,IAAMqb,EAAQnf,KAAK+d,QAAQY,GAC3B,IAAK,IAAME,KAAcM,EAAMH,SAC7Bhf,KAAKif,cAAcE,EAAMH,SAASH,GAAaF,GAEjDC,EAAAxF,QAAY7R,OAAOsW,EAAMuB,QAAQD,EAAMH,YAQzCzf,EAAQsC,UAAUwd,SAAW,WAC3B,OAAOrf,KAAKke,QAQd3e,EAAQsC,UAAUyd,kBAAoB,WACpC,IAAMX,EAAa3e,KAAK+d,QAAQja,OAKhC,OAJA9D,KAAK+d,QAAQpN,MACX4O,cAAeC,EAAApG,QAAaqG,gBAC5BT,cAEK,IAAAU,EAAAtG,QAA0BpZ,KAAM2e,IAQzCpf,EAAQsC,UAAU8d,KAAO,SAAStN,GAChCrS,KAAKke,OAAO0B,OAAOvN,IAUrB9S,EAAQsC,UAAUge,SAAW,SAASzB,EAAOO,GAC3CC,EAAAxF,QAAY7R,OAAOoX,GAAc,GACjCC,EAAAxF,QAAY7R,OAAOoX,EAAa3e,KAAK+d,QAAQja,QAC7C9D,KAAK+d,QAAQY,GAAYY,cAA0B,OAAVnB,EACvCoB,EAAApG,QAAaqG,gBAAkBD,EAAApG,QAAa0G,eAAe1B,IAU/D7e,EAAQsC,UAAUwc,eAAiB,SAASK,EAAS3L,GACnD,IAAM8L,EAAa/F,EAAOgG,OAAOJ,GAASK,WAC1CH,EAAAxF,QAAY7R,OAAOsX,KAAc7e,KAAK8d,yBACtC,IAAMa,EAAa3e,KAAK8d,wBAAwBe,GAEhD,OADc7e,KAAK+d,QAAQY,GACdY,cAAcb,EAAS3L,KAOtCxT,EAAQ+c,OAASC,QAAQD,OAAO,yBAC9BoD,EAAAtG,QAAsBkD,OAAOK,QAEhBoD,QAAQ,wBAAyBxgB,GAChDkd,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQ+c,OAAOK,gBAG9Bpd,mSCtJTA,GAYNA,iBAA2B,SACzBygB,EAAgBC,EAAaC,EAAcC,GAC3C,IAAIC,EAAU,mBACVC,SACAH,GACFE,QAAgBF,EAChBG,EAAOF,GACEH,IACTI,QAAgBJ,EAChBK,EAAOJ,GAMT,IAAMxe,EAAI,IAAIlC,EAAQ+gB,eAAZ,GAA8BF,EAAWC,OACnD9gB,EAAQghB,cAAc9e,IAUxBlC,gBAA0B,SAASihB,GAC7BjhB,EAAQkhB,iBACVlhB,EAAQghB,cAAgBC,IAe5BjhB,OAAiB,SAASC,EAAWC,EAAaC,GAKhD,OAJIH,EAAQkhB,iBAAmBjhB,GAC7BD,EAAQmhB,iBACN,GAAI,KAAMjhB,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAE1D1Z,GAsBTD,KAAe,SAASE,EAAaC,GAC/BH,EAAQkhB,gBACVlhB,EAAQghB,cACN,IAAIhhB,EAAQ+gB,eAAZ,WACY7gB,OAAmBA,EAAgB,IAC7C0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,MAa9C3Z,aAAuB,SAASI,EAAOF,EAAaC,GAMlD,OALIH,EAAQkhB,iBAAmBG,KAAKC,SAASlhB,IAC3CJ,EAAQmhB,iBACN,mCAAoCE,KAAKE,OAAOnhB,GAAQA,GACxDF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhD,GAYT3Z,aAAuB,SAASI,EAAOF,EAAaC,GAMlD,OALIH,EAAQkhB,iBAAmBG,KAAKG,SAASphB,IAC3CJ,EAAQmhB,iBACN,mCAAoCE,KAAKE,OAAOnhB,GAAQA,GACxDF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhD,GAaT3Z,eAAyB,SAASI,EAAOF,EAAaC,GAMpD,OALIH,EAAQkhB,iBAAmBG,KAAKI,WAAWrhB,IAC7CJ,EAAQmhB,iBACN,qCAAsCE,KAAKE,OAAOnhB,GAAQA,GAC1DF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhD,GAYT3Z,aAAuB,SAASI,EAAOF,EAAaC,GAMlD,OALIH,EAAQkhB,iBAAmBG,KAAKK,SAASthB,IAC3CJ,EAAQmhB,iBACN,mCAAoCE,KAAKE,OAAOnhB,GAAQA,GACxDF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhD,GAYT3Z,YAAsB,SAASI,EAAOF,EAAaC,GAMjD,OALIH,EAAQkhB,iBAAmBG,KAAKxP,QAAQzR,IAC1CJ,EAAQmhB,iBACN,kCAAmCE,KAAKE,OAAOnhB,GAAQA,GACvDF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhD,GAaT3Z,cAAwB,SAASI,EAAOF,EAAaC,GAMnD,OALIH,EAAQkhB,iBAAmBG,KAAKM,UAAUvhB,IAC5CJ,EAAQmhB,iBACN,oCAAqCE,KAAKE,OAAOnhB,GAAQA,GACzDF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhD,GAaT3Z,cAAwB,SAASI,EAAOF,EAAaC,GAOnD,OANIH,EAAQkhB,gBACNG,KAAKK,SAASthB,IAAUA,EAAMwhB,UAAYP,KAAKQ,IAAIC,SAASC,SAChE/hB,EAAQmhB,iBACN,oCAAqCE,KAAKE,OAAOnhB,GAAQA,GACzDF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhD,GAmBT3Z,iBAA2B,SAASI,EAAOC,EAAMH,EAAaC,GAO5D,OANIH,EAAQkhB,gBAAoB9gB,aAAiBC,GAC/CL,EAAQmhB,iBACN,sCACCnhB,EAAQgiB,SAAS3hB,GAAOL,EAAQgiB,SAAS5hB,IAC1CF,EAAa0R,MAAMtP,UAAU8e,MAAM7b,KAAKoU,UAAW,IAEhDvZ,GAQTJ,8BAAwC,WACtC,IAAK,IAAM2c,KAAOva,OAAOE,UACvBtC,EAAQiS,KAAQ0K,EAAhB,mDAYJ3c,SAAmB,SAASI,GAC1B,OAAIA,aAAiB6hB,SACZ7hB,EAAM8hB,aAAe9hB,EAAMgd,MAAQ,oBACjChd,aAAiBgC,OACnBhC,EAAM+hB,YAAYD,aAAe9hB,EAAM+hB,YAAY/E,MACtDhb,OAAOE,UAAUkd,SAASja,KAAKnF,GAElB,OAAVA,EAAiB,YAAjB,IAAiCA,EAAjC,YAAAgiB,EAAiChiB,eAK7BJ,oFCxTf,QAAAwZ,EAAA,QACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,wDAQA,IAAMxZ,EAAUgd,QAAQD,OAAO,iBAC7BG,EAAArD,QAASkD,OAAOK,KAChBiF,EAAAxI,QAA0BkD,OAAOK,KACjCkF,EAAAzI,QAAiBuD,KACjBmF,EAAA1I,QAAyBkD,OAAOK,KAChCoF,EAAA3I,QAAgBuD,KAChBqF,EAAA5I,QAAiBuD,KACjBsF,EAAA7I,QAAqBuD,iBAIRpd,oFCzBf,QAAAwZ,EAAA,QACAA,EAAA,QACAA,EAAA,KACYD,0JAAZC,EAAA,QACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,wDA8CA,IAAMxZ,EAAU,WAEd2iB,EAAA9I,QAAatU,KAAK9E,MAOlBA,KAAKmiB,aAGPrJ,EAAOO,SAAS9Z,EAAhB2iB,EAAA9I,SAUA7Z,EAAQsC,UAAUpB,IAAM,SAAS4R,GAE/B,OADeyG,EAAOgG,OAAOzM,GAAK0M,aACjB/e,KAAKmiB,SAAW9P,EAAI+P,YAAYC,KAAK,GAAK,MAY7D9iB,EAAQsC,UAAU+b,IAAM,SAASvL,EAAK1C,GACpC,IAAM2S,EAASxJ,EAAOgG,OAAOzM,GAAK0M,WAC5BwD,EAAWviB,KAAKS,IAAI4R,GACT,OAAbkQ,GACF3D,EAAAxF,QAAY7R,OAAO+a,KAAUtiB,KAAKmiB,UACpB,OAAVxS,EACF0C,EAAI+P,YAAYI,MAAM,EAAG7S,IAEzB0C,EAAI+P,YAAYK,SAAS,UAClBziB,KAAKmiB,SAASG,KAEJ,OAAV3S,IACT0C,EAAI+P,YAAYM,SAAS,EAAG/S,GAC5B3P,KAAKmiB,SAASG,IAAU,GAG1B,IAAMK,EAAQ,IAAAC,EAAAxJ,QAAoB,UAChCyJ,QAASlT,EACT4S,SAAUA,IAIZ,OAFAviB,KAAK8iB,cAAcH,GAEZJ,GAQThjB,EAAQsC,UAAUkhB,iBAAmB,SAAS1Q,EAAK2Q,GACjD,IAAMC,EAAcjjB,KAAKS,IAAI4R,GAC7B,GAAI4Q,EAAa,CACf,IAAIC,GAAUD,GACVA,yBAEFC,EAASD,EAAYb,YAAYe,YAGnCD,EAAOxf,QAAQ,SAACiM,GAEd,GADAiP,EAAAxF,QAAYgK,iBAAiBzT,EAA7B0T,EAAAjK,SACIzJ,EAAO,CACT,IAAI2T,GAAa,EACXC,KACN,IAAK,IAAMrH,KAAOvM,EAAMlP,IAAI,cAAe,CACzC,IAAMd,EAAQqjB,EAAW9G,QACX1U,IAAV7H,IACF4jB,EAAkBrH,GAAOvc,EACzB2jB,GAAa,GAGjB,GAAIA,EAAY,CACd,IAAMxjB,EAAS6P,EAAMtB,YACjBvO,wBACFA,EAAOijB,iBAAiBQ,GACxBzjB,EAAO0jB,YACE1jB,wBAAqCA,0BAC9CA,EAAO4Y,aAAa6K,GACpBzjB,EAAO0jB,kBAWnBjkB,EAAQ+c,OAASC,QAAQD,OAAO,8BACjByD,QAAQ,yBAA0BxgB,GACjDkd,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQ+c,OAAOK,gBAG9Bpd,oFCrKf,QAAAwZ,EAAA,QACAA,EAAA,QAGAA,EAAA,SAEAA,EAAA,QACAA,EAAA,uDAKA,IAAMxZ,EAAUgd,QAAQD,OAAO,WAC7BmH,EAAArK,QAAiCkD,OAAOK,OAG1CF,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQod,MAkCtCpd,EAAQmkB,WAAa,SAASC,EAASC,GACrC,OACEC,SAAU,IAMVpgB,KAAM,SAACqgB,EAAOC,EAASC,GAErB,IACMC,EAAOD,EAAA,QAEP3R,EAAMyR,EAAMI,MAAMD,GACxBrF,EAAAxF,QAAYgK,iBAAiB/Q,EAA7B8R,EAAA/K,SAEA/G,EAAI+R,UAAUL,EAAQ,IAEtBH,EAAuBvR,IAAMA,EAQ7B,IACMgS,EAAmBL,EAAA,oBAGzB,GAFqBF,EAAMI,MAAMG,GAEf,CAChB,IACMC,EAAuBN,EAAA,wBAEvBO,EACJT,EAAMI,MAAMI,GAEdE,EAAApL,QAASzB,OACPgM,EACA,SACA,WACE,GAAIY,EAAkB,CAEpB,IAAM9b,EAAQC,KAAKC,MACf8b,GAAO,GACQ,SAAbC,IACJrS,EAAIsS,aACJtS,EAAIuS,aACAH,GACFd,EAAQva,sBAAsBsb,GAE5Bhc,KAAKC,MAAQF,EAAQ8b,IACvBE,GAAO,GAGXC,QAGArS,EAAIsS,mBA1DlBplB,EAAQmkB,wDAoERnkB,EAAQslB,UAAU,UAAWtlB,EAAQmkB,sBAGtBnkB,iVCzHfwZ,EAAA,QACAA,EAAA,SAGAA,EAAA,SAEAA,EAAA,QACAA,EAAA,SACAA,EAAA,SACAA,EAAA,uDAEA,IAAMxZ,aAqBJ,SAAAA,EAAYulB,gGAAiBjI,CAAA7c,KAAAT,GAM3BS,KAAK+kB,iBAAmBD,EAMxB9kB,KAAKglB,KAAO,KAMZhlB,KAAKilB,iBAELT,EAAApL,QAASzB,OAAO3X,KAAK+kB,iBAAkB,MAAO/kB,KAAKklB,sBAAuBllB,MAzCxE,OAAAT,EAAA4lB,SAAA,mBAAAxH,EAAApe,IAAA2c,IAAA,WAAAvc,MAAA,SAiEK0S,GAGP,IAAMO,EAAOP,EAAIK,UACjB1S,KAAKilB,cAActU,KACjB6T,EAAApL,QAASzB,OAAO/E,EAAM,oBAAqB5S,KAAKolB,4BAA6BplB,OAI/E,IAAM+S,EAAaH,EAAKI,gBACxB4L,EAAAxF,QAAYiM,aAAatS,GACzB/S,KAAKslB,6BAA6BvS,MA5EhCmJ,IAAA,aAAAvc,MAAA,SAoFO0S,GACT6P,EAAA9I,QAAamM,QAAQvlB,KAAKilB,eAC1BjlB,KAAKilB,oBAtFH/I,IAAA,8BAAAvc,MAAA,SA+FwB6lB,GAC1B,IAAM5S,EAAO4S,EAAIngB,OACjBuZ,EAAAxF,QAAYgK,iBAAiBxQ,EAA7B6S,EAAArM,SACA,IAAMrG,EAAaH,EAAKI,gBACxB4L,EAAAxF,QAAYiM,aAAatS,GACzB/S,KAAKslB,6BAA6BvS,MApGhCmJ,IAAA,+BAAAvc,MAAA,SA4GyBoT,GAAY,IAAA2S,EAAA1lB,KACvCA,KAAK+kB,iBAAiBrhB,QAAQ,SAACiiB,GAC7BD,EAAKE,4BAA4BD,EAAY5S,QA9G7CmJ,IAAA,8BAAAvc,MAAA,SAwHwBgmB,EAAY5S,GAGtC,GAAK4S,EAAWE,uBAAhB,CAIA,IAAMtI,EAAgBoI,EAAWpI,cAC3BE,EAAgBkI,EAAWlI,cAQ3BV,GAN+B,OAAlBU,QACGjW,IAAlBiW,GACA1K,GAAc0K,KACmB,OAAlBF,QACG/V,IAAlB+V,GACAxK,GAAcwK,GAGlBoI,EAAW5I,QAAUA,MA1InBb,IAAA,wBAAAvc,MAAA,SAmJkBgjB,GACpB,IAAMgD,EAAa/G,EAAAxF,QAAYgK,iBAC7BT,EAAMoB,QADW+B,EAAA1M,SAEnB,GAAIpZ,KAAKglB,KAAM,CACb,IAAMjS,EAAa/S,KAAKglB,KAAKtS,UAAUM,gBACvC4L,EAAAxF,QAAYiM,aAAatS,GACzB/S,KAAK4lB,4BAA4BD,EAAY5S,OAzJ7CmJ,IAAA,MAAA0B,IAAA,SAgDIvL,GACFrS,KAAKglB,MACPhlB,KAAK+lB,WAAW/lB,KAAKglB,MAGvBhlB,KAAKglB,KAAO3S,EAERA,GACFrS,KAAKgmB,SAAS3T,OAxDd9S,KAmKNA,EAAQ+c,OAASC,QAAQD,OAAO,0BAC9B2J,EAAA7M,QAA0BkD,OAAOK,OAEnCpd,EAAQ+c,OAAOyD,QAAQ,yBAA0BxgB,GACjDkd,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQ+c,OAAOK,gBAG9Bpd,oFCrLf,QAAAwZ,EAAA,sJACAA,EAAA,MACAA,EAAA,wDAOA,IAAMxZ,EAAU,SAAS2mB,EAASC,GAMhCnmB,KAAKomB,SAAWF,EAMhBlmB,KAAKqmB,UAAY,KAMjBrmB,KAAKsmB,OAASH,GAShB5mB,EAAQsC,UAAU4c,WAAa,SAASC,GACtC1e,KAAKomB,SAAS3H,WAAWC,EAAS1e,KAAKsmB,SASzC/mB,EAAQsC,UAAUod,cAAgB,SAASP,GACzC1e,KAAKomB,SAASnH,cAAcP,EAAS1e,KAAKsmB,SAQ5C/mB,EAAQsC,UAAUqd,MAAQ,WACxBlf,KAAKomB,SAASlH,MAAMlf,KAAKsmB,SAa3B/mB,EAAQsC,UAAU0kB,YAAc,SAASvH,GAChB,OAAnBhf,KAAKqmB,YACPrmB,KAAKqmB,UAAUnH,QACfsF,EAAApL,QAASoN,SAASxmB,KAAKqmB,UAAW,MAAOrmB,KAAKymB,kBAAmBzmB,MACjEwkB,EAAApL,QAASoN,SAASxmB,KAAKqmB,UAAW,SAAUrmB,KAAK0mB,qBAAsB1mB,OAExD,OAAbgf,IACFA,EAAStb,QAAQ,SAASgb,GACxB1e,KAAKye,WAAWC,IACf1e,MACHwkB,EAAApL,QAASzB,OAAOqH,EAAU,MAAOhf,KAAKymB,kBAAmBzmB,MACzDwkB,EAAApL,QAASzB,OAAOqH,EAAU,SAAUhf,KAAK0mB,qBAAsB1mB,OAEjEA,KAAKqmB,UAAYrH,GAUnBzf,EAAQsC,UAAUge,SAAW,SAASzB,GACpCpe,KAAKomB,SAASvG,SAASzB,EAAOpe,KAAKsmB,SAQrC/mB,EAAQsC,UAAU4kB,kBAAoB,SAASjB,GAC7C,IAAM9G,EAAqC8G,EAAIzB,QAC/C/jB,KAAKye,WAAWC,IAQlBnf,EAAQsC,UAAU6kB,qBAAuB,SAASlB,GAChD,IAAM9G,EAAqC8G,EAAIzB,QAC/C/jB,KAAKif,cAAcP,IAMrBnf,EAAQ+c,OAASC,QAAQD,OAAO,yBAChCG,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQ+c,OAAOK,gBAG9Bpd,oFC3Hf,MAAAqd,EAAA7D,EAAA,uCAKA,IAAMxZ,EAAUgd,QAAQD,OAAO,mBAE/BG,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQod,MA6BtCpd,EAAQmkB,WAAa,WACnB,OACEG,SAAU,IACVpgB,KAAM,SAACkjB,EAAQC,EAAUC,GACvB,IAAMC,EAAUD,EAAA,gBACVxU,EAA6BsU,EAAOzC,MAAM4C,GAEhD,SAASC,EAAShD,GAChB,IAAMtW,EAASsW,EAAQiD,KAAK,eAC5B,QAAexf,IAAXiG,EAAsB,CACxB,IAAMoK,EAA+BxF,EAAI4U,UACzC5U,EAAIK,UAAUwU,IAAIP,EAAOzC,MAAMzW,IAAUoK,SAE3C,IAAMsP,EAAOpD,EAAQiD,KAAK,kBACbxf,IAAT2f,GACF9U,EAAIK,UAAU0U,QAAQT,EAAOzC,MAAMiD,IAKvCP,EAASvlB,GAAG,QAAS,IAAK,SAASshB,GACjCoE,EAASxK,QAAQwH,QAAQsD,EAAErnB,UAI7B4mB,EAASvlB,GAAG,SAAU,SAACshB,GACrB,IAAM2E,EAAW3E,EAAMtd,OAAO4C,QAAQ0a,EAAMtd,OAAOkiB,eACnDR,EAASxK,QAAQwH,QAAQuD,SAQjC/nB,EAAQslB,UAAU,eAAgBtlB,EAAQmkB,sBAG3BnkB,oFC1Ef,QAAAwZ,EAAA,QACAA,EAAA,QACAA,EAAA,uDAKA,IAAMxZ,EAAUgd,QAAQD,OAAO,oBAE/BG,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQod,MAuBtCpd,EAAQmkB,WAAa,SAASC,GAG5B,OACEE,SAAU,IAMVpgB,KAAM,SAACqgB,EAAOC,EAASC,GACrB,IACMC,EAAOD,EAAA,cACP3R,EAAMyR,EAAMI,MAAMD,GACxBrF,EAAAxF,QAAYgK,iBAAiB/Q,EAA7B8R,EAAA/K,SAEA,IAAMoO,EAAYxD,EAAA,mBAClBpF,EAAAxF,QAAY7R,YAAqBC,IAAdggB,GAEnB,IAAI/e,SACAgf,SAEEC,EAAiB,SAAjBA,IACJrV,EAAIsS,aACJtS,EAAIuS,aAEAlc,KAAKC,MAAQF,EAzBgB,MA0B/Bgf,EAAoB9D,EAAQva,sBAAsBse,KAMtD3D,EAAQ1iB,GAAG,gBAAiB,WAC1BgR,EAAIsS,aACJtS,EAAIuS,eAGNd,EAAM6D,OAAOH,EAAW,SAACI,EAAQC,GAC3BD,GAAUC,IACZpf,EAAQC,KAAKC,MACbgb,EAAQmE,qBAAqBL,GAC7BA,EAAoB9D,EAAQva,sBAAsBse,SAQ5DnoB,EAAQslB,UAAU,gBAAiBtlB,EAAQmkB,sBAG5BnkB,oFCrFf,QAAAwZ,EAAA,IACYgP,0JAAZhP,EAAA,QACAA,EAAA,QACAA,EAAA,uDAKA,IAAMxZ,EAAUgd,QAAQD,OAAO,wBAE/BG,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKpR,EAAQod,MAGtCpd,EAAQI,MAAM,+BAMZ,SAACokB,EAASC,GACR,IAAMgE,EAAchE,EAAA,6BACpB,YAAuBxc,IAAhBwgB,EAA4BA,EAC9BvL,EAAArD,QAAS6O,sBADP,4BAwDX1oB,EAAQmkB,WAAa,SAASwE,GAC5B,OACErE,SAAU,IACVC,OAAO,EACPqE,WAAY,8BACZH,YAAaE,IAKjB3oB,EAAQslB,UAAU,oBAAqBtlB,EAAQmkB,YAc/CnkB,EAAQ6oB,yBAA2B,SAASzB,EAAQC,EAAUC,GAAQ,IAAAnB,EAAA1lB,KAE9DqoB,EAAaxB,EAAA,kBAOnB7mB,KAAKsoB,OACF3B,EAAOzC,MAAMmE,GAChBzH,KAAK9I,QAAQvQ,YAAuBC,IAAhBxH,KAAKsoB,QAMzBtoB,KAAKuoB,WAEL5B,EAAOgB,OAAO,kBAAMhmB,OAAO6mB,KAAK9C,EAAK4C,QAAQxkB,QAAQ,SAAC2kB,GACpD/C,EAAK6C,WAAa5mB,OAAO6mB,KAAK9C,EAAK4C,QAAQjW,IAAIqW,QAC/ChD,EAAK6C,WAAWI,KAAKZ,EAAQa,6BAG/B,IAAM9B,EAAUD,EAAA,qBAMhB7mB,KAAKglB,KAA8B2B,EAAOzC,MAAM4C,GAChDlG,KAAK9I,QAAQsL,iBAAiBpjB,KAAKglB,KAAnCb,EAAA/K,SAEA,IAAMyP,EAAchC,EAAA,yBACd5e,EAAU0e,EAAOzC,MAAM2E,GA2B7B,GArBA7oB,KAAKiI,QAAU1I,EAAQ6oB,yBAAyBU,YAAY7gB,GAM5DjI,KAAK+oB,QAAUpC,EAMf3mB,KAAKgpB,qBAAuB,KAM5BhpB,KAAKipB,kBAAezhB,EAGP,OADAxH,KAAKglB,KAAKtS,UACJ,CACjB,IAAMwW,EAAclpB,KAAKglB,KAAKtS,UAAUyW,eACpB3hB,IAAhB0hB,IACFlpB,KAAKipB,aAAejpB,KAAKopB,SAASF,IAItC1E,EAAApL,QAASzB,OAAO3X,KAAKglB,KAAM,cAAehlB,KAAKqpB,kBAAmBrpB,MAElEA,KAAKspB,oCAEL3C,EAAA,kBAA8B3mB,MAUhCT,EAAQ6oB,yBAAyBU,YAAc,SAAS7gB,GACtD,IAAIshB,GAAS,EAIb,YAHgB/hB,IAAZS,IACFshB,EAA8B,GAArBthB,EAAA,SAGTshB,OAAQA,IAUZhqB,EAAQ6oB,yBAAyBvmB,UAAUunB,SAAW,SAASjC,GAC7D,OAAOnnB,KAAKsoB,OAAOnB,IAQrB5nB,EAAQ6oB,yBAAyBvmB,UAAU2nB,WAAa,SAASrC,GAC/DnnB,KAAKglB,KAAKtS,UAAU0U,QAAQD,IAQ9B5nB,EAAQ6oB,yBAAyBvmB,UAAU4nB,wBAA0B,SAAShoB,GAAG,IAAAioB,EAAA1pB,KACzE4S,EAAO5S,KAAKglB,KAAKtS,UACjBuW,EAAejpB,KAAKsoB,OAA8B1V,EAAKuW,gBAaxC3hB,IAAjByhB,GACFjpB,KAAK+oB,QAAQY,YAAY,WACvBD,EAAKT,aAAeA,KAU1B1pB,EAAQ6oB,yBAAyBvmB,UAAUwnB,kBAAoB,SAAS5nB,GACtEzB,KAAKspB,oCACLtpB,KAAKypB,wBAAwB,OAO/BlqB,EAAQ6oB,yBAAyBvmB,UAAUynB,kCAAoC,WAC3C,OAA9BtpB,KAAKgpB,sBACPxE,EAAApL,QAASrE,cAAc/U,KAAKgpB,sBAE9B,IAAMpW,EAAO5S,KAAKglB,KAAKtS,UACvB1S,KAAKgpB,qBAAuBxE,EAAApL,QAASzB,OAAO/E,EAC1C,oBAAqB5S,KAAKypB,wBAC1BzpB,OAIJT,EAAQ4oB,WAAW,8BACjB5oB,EAAQ6oB,oCAGK7oB,qFC1QfwZ,EAAA,KACAA,EAAA,IAEA,QAAAA,EAAA,QAEAA,EAAA,SACAA,EAAA,SACAA,EAAA,SACAA,EAAA,UACAA,EAAA,QACAA,EAAA,SACAA,EAAA,yDAbA,IAAMxZ,KAiBNA,EAAQ+c,OAASC,QAAQD,OAAO,OAC9BG,EAAArD,QAASkD,OAAOK,KAChBiN,EAAAxQ,QAAcuD,KACdkN,EAAAzQ,QAAmBuD,OAUrBpd,EAAQuqB,eAAiB,SAASC,EAAYC,GAM5ChqB,KAAKqS,IAAM,IAAA8R,EAAA/K,SACT8J,QACE,IAAA+G,EAAA7Q,SACEtZ,OAAQ,IAAAoqB,EAAA9Q,WAGZxG,KAAM,IAAA6S,EAAArM,SACJpO,QAAS,EAAG,GACZmc,KAAM,MAWVnnB,KAAKmqB,MAAQ,IAAAC,EAAAhR,QANK,4DAM0B2Q,GAC1C1X,IAAKrS,KAAKqS,MAIZ2X,EAAgBK,WAAWrqB,KAAKmqB,QAGlC5qB,EAAQ+c,OAAO6L,WAAW,iBAAkB5oB,EAAQuqB,0BAGrCvqB,yGClEf,QAAAwZ,EAAA,UACAA,EAAA,yDAMA,IAKMxZ,EALIgd,QAAQD,OAAO,kBACvBgO,EAAAlR,QAAQuD,KACR4N,EAAAnR,QAAQkD,OAAOK,iBAMFpd,8UCff,IAAMirB,aACJ,SAAAA,iGAAc3N,CAAA7c,KAAAwqB,GAKZxqB,KAAKomB,SANH,OAAAzI,EAAA6M,IAAAtO,IAAA,aAAAvc,MAAA,SAaOumB,GACTlmB,KAAKomB,SAAWF,KAddhK,IAAA,aAAAvc,MAAA,WAsBF,OAAOK,KAAKomB,aAtBVoE,KA0BA7N,EAAO,kBACb6N,EAAQlO,OAASC,QAAQD,OAAOK,MAAUoD,QAAQpD,EAAM6N,GAExD,IAAMjrB,EAAUirB,YAGDjrB,8UChCHkrB,0JAAZ1R,EAAA,UACAA,EAAA,UACAA,EAAA,uDAwNA,SAAS2R,EAAwC7D,EAAQ8D,GACvD,GAAIA,EACF,OAAOA,EAET,IAAM3C,EAAcnB,EAAA,8BACpB,OAAOmB,GAA+BvL,EAAArD,QAAS6O,sBAAxC,6EAsBT,IAAM2C,GACJC,UACEC,QAAW,KACXC,QAAW,KACXZ,MAAS,MAEXhC,WAjPI6C,WAOJ,SAAAA,EAAYpE,EAAUoD,gGAAiBnN,CAAA7c,KAAAgrB,GAMrChrB,KAAKirB,SAAWrE,EAMhB5mB,KAAKmqB,MAMLnqB,KAAK8qB,QAML9qB,KAAK+qB,QAML/qB,KAAKkrB,aAMLlrB,KAAKmrB,YAMLnrB,KAAKorB,cAMLprB,KAAKqrB,WAMLrrB,KAAKsrB,kBAMLtrB,KAAKurB,oBAMLvrB,KAAKwrB,yBAMLxrB,KAAKyrB,aAAezB,EA/ElB,OAAArM,EAAAqN,IAAA9O,IAAA,gBAAAvc,MAAA,WAkFY,IAvFI+rB,EAAOC,EAuFXjG,EAAA1lB,KACR4rB,EAAc5rB,KAAKmqB,MAAM0B,UAAUC,YAAYnZ,cAxFnC+Y,EAyFD1rB,KAAKsrB,kBAzFGK,EAyFgBC,EAxFpClD,OAAOqD,SAASJ,MAAYjD,OAAOqD,SAASL,IAAU3jB,KAAKikB,IAAIL,EAAQD,GAAS,OAyFnF1rB,KAAKisB,eAAejsB,KAAKorB,cAAeQ,GACxC5rB,KAAKsrB,kBAAoBM,GAG3B,IAAMM,EAAgBlsB,KAAKmqB,MAAMgC,sBACjC,IAAKvrB,OAAO6F,QAAQ2lB,cAAcpsB,KAAKurB,oBAAqBW,EAAe,MAAO,CAChF,IAAMG,EAAUrsB,KAAKmqB,MAAMmC,iBAC3B,GAAI5D,OAAOqD,SAASM,GAAW,GAAI,CACjCrsB,KAAKisB,eAAejsB,KAAKqrB,WAAYgB,GACrCrsB,KAAKurB,oBAAsB3qB,OAAO6F,QAAQsC,MAAMmjB,GAI5CG,EAAUrsB,KAAK8qB,QADJ,IAEb9qB,KAAKkrB,aAAaqB,SAAS,uBAClBvsB,KAAKkrB,aAAasB,SAAS,wBACpCxsB,KAAKkrB,aAAauB,YAAY,uBAE5BzsB,KAAK+qB,QAAUsB,EANJ,IAObrsB,KAAKmrB,YAAYoB,SAAS,sBACjBvsB,KAAKmrB,YAAYqB,SAAS,uBACnCxsB,KAAKmrB,YAAYsB,YAAY,uBAKnCzsB,KAAKwrB,yBAA2BpiB,sBAAsB,kBAAMsc,EAAKgH,qBA/G/DxQ,IAAA,aAAAvc,MAAA,WAmHEK,KAAKwrB,0BACP1D,qBAAqB9nB,KAAKwrB,6BApH1BtP,IAAA,UAAAvc,MAAA,gBAyHmB6H,IAAjBxH,KAAK8qB,UACP9qB,KAAK8qB,QAAU,QAEItjB,IAAjBxH,KAAK+qB,UACP/qB,KAAK+qB,QAAU,EAAIhjB,KAAK8D,GAAK,IAE1B7L,KAAKmqB,QACRnqB,KAAKmqB,MAAQvJ,KAAK9I,QAAQvQ,OAAOvH,KAAKyrB,aAAakB,eAErD3sB,KAAKkrB,aAAelrB,KAAKirB,SAAS2B,KAAK,oBACvC5sB,KAAKmrB,YAAcnrB,KAAKirB,SAAS2B,KAAK,mBACtC5sB,KAAKorB,cAAgBprB,KAAKirB,SAAS2B,KAAK,oBACxC5sB,KAAKqrB,WAAarrB,KAAKirB,SAAS2B,KAAK,iBACrC5sB,KAAK0sB,mBAtIHxQ,IAAA,iBAAAvc,MAAA,SA+IWokB,EAASpc,GACtB,IAAMklB,YAAcllB,EAAd,OACNoc,EAAQ+I,KACNC,iBAAkBF,EAClBG,oBAAqBH,EACrBI,eAAgBJ,EAChBK,gBAAiBL,EACjBxmB,UAAawmB,OAtJb3Q,IAAA,SAAAvc,MAAA,SA+JGgI,GACLA,EAAQ/G,OAAOmH,KAAKolB,UAAUxlB,GAC9B3H,KAAKmqB,MAAMiD,WAAWzlB,MAjKpBuU,IAAA,OAAAvc,MAAA,SAyKCgI,GACHA,EAAQ/G,OAAOmH,KAAKolB,UAAUxlB,GAC9B,IAAM0lB,EAAcrtB,KAAKmqB,MAAMmC,iBAC3Be,EAAc1lB,EAAQ3H,KAAK8qB,QAC7BnjB,EAAQ3H,KAAK8qB,QAAUuC,EACdA,EAAc1lB,EAAQ3H,KAAK+qB,UACpCpjB,EAAQ3H,KAAK+qB,QAAUsC,GAEzB,IAAMjoB,EAAQpF,KAAKmqB,MAAMmD,iBACzBC,EAAAnU,QAAStG,yBAAyB1N,EAAOuC,MAlLvCuU,IAAA,OAAAvc,MAAA,SA0LC6tB,GACH,IAAM5a,EAAO5S,KAAKmqB,MAAM2B,YAClB2B,EAAM7a,EAAKI,gBACX0a,EAAgB9a,EAAKO,oBAAoBsa,EAAKD,GAChD5a,EAAK+a,gBACP/a,EAAKgb,mBAEPhb,EAAKib,SACH9a,WAAY2a,EACZxlB,SAAU,IACVC,OAAQsiB,EAASqD,cApMjB9C,KAkPJhD,YAAa0C,GAGT/N,EAAO,qBAEPpd,EAAUgd,QAAQD,OAAOK,MAC5BiO,UAAUjO,EAAMiO,GAChBjrB,MAAM,gCAAiC,IAE1C8c,EAAArD,QAASkD,OAAOI,SAAS/L,KAAKgM,aAGfpd,gVCxQfwuB,EAAAhV,EAAA,yCAEA,IA8BMxZ,EA9BAyuB,YAMJ,SAAAA,EAAYnpB,EAAKklB,EAAY9hB,gGAAS4U,CAAA7c,KAAAguB,GAAA,IAAAtI,mKAAAuI,CAAAjuB,MAAAguB,EAAAE,WAAAvsB,OAAAwsB,eAAAH,IAAAlpB,KAAA9E,KAC9B6E,EAAKoD,IADyB,OAMpCyd,EAAK0I,WAAarE,EANkBrE,EANlC,gUAAA2I,CAAAL,EAAA5D,EAAAhR,SAAAuE,EAAAqQ,IAAA9R,IAAA,WAAAvc,MAAA,WAoBO,IAAA+pB,EAAA1pB,KAIT,gQADMsuB,uFACSC,KAAK,WAClB7E,EAAK0E,WAAWI,eAzBhBR,eAiCSzuB,qFCIf,IAAAkvB,QAjCAC,YAAA7pB,GAKA7E,KAAAsuB,QAMAtuB,KAAAmV,KAAAtQ,EAOA6pB,OAWA,OAVA1uB,KAAAsuB,UAEAtuB,KAAAsuB,QAAA,IAAAhc,QAAA,CAAAC,EAAAC,KACA,MAAAmc,EAAA1tB,SAAAC,cAAA,UACAytB,EAAAC,OAAA,KAAArc,KACAoc,EAAAE,QAAA,KAAArc,KACAvR,SAAA6tB,KAAAC,YAAAJ,GACAA,EAAA1qB,IAAAjE,KAAAmV,QAGAnV,KAAAsuB,0DCnCA,MAAAU,GAQA3jB,IAAA,SAAA4jB,GACA,OAAAA,GAQAC,4CAAA1nB,EAOA2nB,gCAAA3nB,EAMA4nB,gCAAA,WACA,QAAA5nB,IAAAwnB,EAAAE,uCAAA,CACA,MAAA3pB,EAAAtE,SAAAC,cAAA,UACAqE,EAAA8pB,aAAA,0EAGA,MAAAzT,EAAArW,EAAA6Y,MAAA,eACA4Q,EAAAE,yCAAAtT,EACAoT,EAAAE,yCACAF,EAAAG,2BAAAvT,GAGA,OAAAoT,EAAAE,wCAOAI,oBAAA,WAEA,OADAN,EAAAI,kCACAJ,EAAAG,4BAAA,KAGA,IAAAI,EAAA,WClDA,MAAAC,EAAA,SAAAC,EAAAC,GACA1vB,KAAAyvB,OACAzvB,KAAA2vB,OAAAF,EAAAnC,iBACAttB,KAAA4vB,QAAA5vB,KAAA2vB,OAAApqB,OACAvF,KAAA6vB,iBAAAH,EACA1vB,KAAA8vB,4BAAA9vB,KAAA+vB,sBAAAzR,KAAAte,MAEAA,KAAAgwB,sBAAA,IAAApvB,OAAA6F,QACAzG,KAAAiwB,oBAAA,EACAjwB,KAAAkwB,kBAAA,EAEAlwB,KAAAmwB,0BAAAnwB,KAAA2vB,OAAAS,WAAAC,iBAAArwB,KAAAowB,WAAA9R,KAAAte,OAEAA,KAAAswB,oBACA,kCACA,oCACA,wCACA,SAGA,MAAAC,EAAA3vB,OAAA4vB,OAAA3uB,UACA7B,KAAAywB,mBACAF,EAAA,YACAA,EAAA,SACAA,EAAA,WACAA,EAAA,WACAA,EAAA,UACAA,EAAA,cACAA,EAAA,wBAGAvwB,KAAA0wB,cAAA1wB,KAAAywB,iBAAApe,IAAAse,KAAA,GAAAA,EAAA,KAEA3wB,KAAA4wB,qBAAAhwB,OAAAiwB,YAAApc,KACAzU,KAAA8wB,sBAAAlwB,OAAAmwB,cAAAlvB,UAAAmvB,aACAhxB,KAAAixB,UAOAzB,EAAA3tB,UAAAovB,OAAA,WACA,UAAAC,KAAAlxB,KAAAswB,mBACAtwB,KAAA4vB,QAAAS,iBAAAa,EAAAlxB,KAAA8vB,6BAAA,GAGA3mB,OAAAknB,iBAAA,SAAArwB,KAAA8vB,6BAAA,GAGA,MAAAqB,EAAAnxB,KACAY,OAAAiwB,YAAApc,KAAA,SAAA5P,EAAAusB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACAH,EAAA,eAAAL,EAAArB,6BACAqB,EAAAP,wBAAA1X,YAIAtY,OAAAmwB,cAAAlvB,UAAAmvB,aAAA,SAAAY,EAAAC,GACA,MAAAC,EAAAX,EAAAL,sBAAAhsB,KAAA9E,KAAA4xB,EAAAC,GAEAE,EAAA/xB,KACA,IAAA+xB,EAAAC,kCAAA,CACA,MAAAC,EAAAF,EAAA,QACAA,EAAAC,kCAAAC,EAAAC,UACAD,EAAAC,UAAA,SAAAvP,GACAoP,EAAAC,kCAAArP,GACAwO,EAAApB,yBAIA,OAAA+B,GAIA,QAAArqB,EAAA,EAAiBA,EAAAzH,KAAAywB,iBAAA3sB,SAAkC2D,EAAA,CACnD,MAAA0qB,EAAAnyB,KAAAywB,iBAAAhpB,GACA2qB,EAAAD,EAAA,GACAE,EAAAryB,KAAA0wB,cAAAjpB,GAEA2qB,EAAAD,EAAA,gBAAA9R,GACAgS,EAAAC,MAAAtyB,KAAAqgB,GACA8Q,EAAApB,yBAKA/vB,KAAAyvB,KAAA8C,WAAAC,gBAAAnxB,GAAA,SAAArB,KAAA8vB,8BAOAN,EAAA3tB,UAAA4wB,QAAA,WACAzyB,KAAAmwB,4BACAnwB,KAAAmwB,4BACAnwB,KAAAmwB,+BAAA3oB,GAEA,UAAA0pB,KAAAlxB,KAAAswB,mBACAtwB,KAAA4vB,QAAA8C,oBAAAxB,EAAAlxB,KAAA8vB,6BAAA,GAGA3mB,OAAAupB,oBAAA,SAAA1yB,KAAA8vB,6BAAA,GAEAlvB,OAAAiwB,YAAApc,KAAAzU,KAAA4wB,qBACAhwB,OAAAmwB,cAAAlvB,UAAAmvB,aAAAhxB,KAAA8wB,sBAGA,QAAArpB,EAAA,EAAiBA,EAAAzH,KAAAywB,iBAAA3sB,SAAkC2D,EAAA,CACnD,MAAA0qB,EAAAnyB,KAAAywB,iBAAAhpB,GACA2qB,EAAAD,EAAA,GACAE,EAAAryB,KAAA0wB,cAAAjpB,GACA2qB,EAAAD,EAAA,IAAAE,EAGAryB,KAAAyvB,KAAA8C,WAAAC,gBAAAG,GAAA,SAAA3yB,KAAA8vB,8BAOAN,EAAA3tB,UAAAuuB,WAAA,SAAAwC,GAOA,MAAAjqB,EAAAD,KAAAC,MAEAvD,EAAApF,KAAA2vB,OACArqB,EAAAF,EAAAE,OAEA1E,OAAA6F,QAAA2lB,cAAApsB,KAAAgwB,sBAAA1qB,EAAAutB,WAAA,QACA7yB,KAAAiwB,oBAAAtnB,GAGA,MAAAmqB,EAAAnqB,EAAA3I,KAAAiwB,oBAAA,IAEA8C,EAAA3tB,EAAAsF,MAAA,SACAsoB,GAAAD,EAAA,aAAAjxB,OACAixB,EAAA,mBAAAjvB,OAAA,GACAivB,EAAA,qBAAAjvB,OAAA,GACAivB,EAAA,kBAAAjvB,OAAA,GACAivB,EAAA,iCAEAE,EAAA7tB,EAAA,OACA0tB,GAAAE,GAAA,GAAAC,EAAAnvB,SACA9D,KAAA6vB,kBACAqD,QAAAC,4BAA0CzqB,KAAAC,SAE1C3I,KAAAyvB,KAAA2D,yBAAA,GACApzB,KAAAkwB,kBAAA,GAGAtvB,OAAA6F,QAAAsC,MAAAzD,EAAAutB,WAAA7yB,KAAAgwB,wBASAR,EAAA3tB,UAAAwxB,kBAAA,WACArzB,KAAA+vB,yBAOAP,EAAA3tB,UAAAkuB,sBAAA,WACA/vB,KAAA6vB,kBAAA7vB,KAAAkwB,kBACAgD,QAAAC,4BAAwCzqB,KAAAC,SAExC3I,KAAAiwB,oBAAAvnB,KAAAC,MAEA3I,KAAAyvB,KAAA2D,yBAAA,GACApzB,KAAAkwB,kBAAA,GAQAV,EAAA3tB,UAAAyxB,SAAA,SAAA5D,GACA1vB,KAAA6vB,iBAAAH,GAEA,IAAA6D,EAAA,kBC5LA,MAAAC,EAAA,SAAApuB,EAAAiN,GAKArS,KAAA2vB,OAAAvqB,EAMApF,KAAAyzB,KAAAruB,EAAAE,OAMAtF,KAAAglB,KAAA3S,EAMArS,KAAA0zB,MAAA,KAMA1zB,KAAA2zB,eAAA,KAMA3zB,KAAA4zB,UAAAJ,EAAAK,mBAMA7zB,KAAA8zB,YAAAN,EAAAK,mBAOA7zB,KAAA+zB,MAAA,EAMA/zB,KAAAg0B,UAAA,EAMAh0B,KAAAgwB,sBAAA,KAOAhwB,KAAAi0B,uBAAA,EAEAj0B,KAAAglB,KAAA3jB,GAAA,uBAAAI,GACAzB,KAAAk0B,SAAAl0B,KAAAglB,KAAAtS,YACG1S,MACHA,KAAAk0B,SAAAl0B,KAAAglB,KAAAtS,YAUA8gB,EAAAK,mBAAA,SAAA3sB,EAAAitB,EAAAC,GACA,MAAAC,EAAAD,GAAAltB,EAAApD,OACA,GAAAqwB,EACA,QAAA1sB,EAAA,EAAmBA,EAAA4sB,IAAS5sB,EAC5B0sB,EAAA1sB,GAAAP,EAAAO,GAGA,OAAAP,GAQAssB,EAAA3xB,UAAAqyB,SAAA,SAAAthB,GAOA,GANA5S,KAAA0zB,QACAY,EAAA,QAAA/O,QAAAvlB,KAAA2zB,gBACA3zB,KAAA2zB,eAAA,MAGA3zB,KAAA0zB,MAAA9gB,EACAA,EAAA,CACA,MAAA2hB,EAAAtxB,EAAA,QAAAuxB,aAAA5hB,EAAA5P,gBAAA,aACAyxB,EAAAxxB,EAAA,QAAAuxB,aAAA,YAAA5hB,EAAA5P,iBACAqE,EAAAC,EAAAC,OAAAgtB,GAAAE,GAEAz0B,KAAA4zB,UAAAW,EACAv0B,KAAA8zB,YAAAW,EAEAz0B,KAAA2zB,eAAAryB,EAAA,QAAAqW,OAAA/E,EAAA,iBACA5S,KAAA00B,iBAAA10B,MAEAA,KAAA20B,oBAEA30B,KAAA4zB,UAAAJ,EAAAK,mBACA7zB,KAAA8zB,YAAAN,EAAAK,oBASAL,EAAA3xB,UAAA6yB,iBAAA,SAAAjzB,GACAzB,KAAAi0B,uBACAj0B,KAAA20B,gBASAnB,EAAA3xB,UAAAurB,WAAA,SAAA9jB,GACAtJ,KAAA0zB,OAIA1zB,KAAA0zB,MAAAzgB,YAAA3J,IAQAkqB,EAAA3xB,UAAA+yB,WAAA,WACA,IAAA50B,KAAA0zB,MACA,OAGA,OADA1zB,KAAA0zB,MAAA/gB,eACA,GAQA6gB,EAAA3xB,UAAAgzB,QAAA,SAAAC,GACA90B,KAAA+zB,MAAAe,EACA90B,KAAA+0B,iBAQAvB,EAAA3xB,UAAAmzB,QAAA,WACA,OAAAh1B,KAAA+zB,OAQAP,EAAA3xB,UAAAozB,YAAA,SAAAxvB,GACAzF,KAAAg0B,UAAAvuB,EACAzF,KAAA+0B,gBACA/0B,KAAAk1B,cAQA1B,EAAA3xB,UAAAszB,YAAA,WACA,OAAAn1B,KAAAg0B,WASAR,EAAA3xB,UAAAuzB,UAAA,SAAApqB,GACAhL,KAAA0zB,OAGA1zB,KAAA0zB,MAAA0B,UAAApqB,IASAwoB,EAAA3xB,UAAAwzB,UAAA,WACA,GAAAr1B,KAAA0zB,MAGA,OAAA1zB,KAAA0zB,MAAA2B,aASA7B,EAAA3xB,UAAAyzB,YAAA,SAAAzvB,GACA,IAAA7F,KAAA4zB,UACA,OAEA,MAAA2B,EAAAv1B,KAAA4zB,UAAA/tB,GACAwB,EAAAC,EAAAC,OAAAguB,GAEA,MAAAC,EAAA,IAAA50B,OAAA60B,aACAC,EAAA,QAAAvI,UAAAoI,EAAA,IACAG,EAAA,QAAAvI,UAAAoI,EAAA,IACAv1B,KAAA21B,eAEA31B,KAAAyzB,KAAA5tB,SAAAjF,OAAAgG,UAAAC,MAAAyG,wBAAAkoB,GACAx1B,KAAAk1B,cASA1B,EAAA3xB,UAAA+zB,YAAA,WACA,IAAA51B,KAAA8zB,YACA,OAEA,MAAA0B,EAAA50B,OAAAgG,UAAAC,MAAAgvB,wBAAA71B,KAAAyzB,KAAA5tB,UAEAiwB,EAAA91B,KAAA8zB,aACA4B,EAAA,QAAAK,UAAAP,EAAAQ,WACAN,EAAA,QAAAK,UAAAP,EAAAS,YAGA,OADA5uB,EAAAC,EAAAC,OAAAuuB,GACAA,GAQAtC,EAAA3xB,UAAAq0B,YAAA,SAAAC,GACA,MAAAX,EAAA50B,OAAAgG,UAAAC,MAAAgvB,wBACA71B,KAAAyzB,KAAA5tB,UACA2vB,EAAAp0B,OAAA+0B,EACAn2B,KAAAyzB,KAAA5tB,SAAAjF,OAAAgG,UAAAC,MAAAyG,wBAAAkoB,GAEAx1B,KAAAk1B,cAQA1B,EAAA3xB,UAAA8zB,YAAA,WAIA,OAHA/0B,OAAAgG,UAAAC,MAAAgvB,wBACA71B,KAAAyzB,KAAA5tB,UAEAzE,QASAoyB,EAAA3xB,UAAAqL,OAAA,SAAArH,GACA,IAAA7F,KAAA4zB,UACA,OAEA,MAAA2B,EAAAv1B,KAAA4zB,UAAA/tB,GACAwB,EAAAC,EAAAC,OAAAguB,GAEA,MAAAC,EAAA50B,OAAA60B,aAAA3nB,YAAAynB,EAAA,GAAAA,EAAA,IACAa,EAAA,QAAAlpB,OAAAlN,KAAAyzB,KAAA+B,EAAAx1B,KAAA2vB,OAAAjlB,OAEA1K,KAAAk1B,cASA1B,EAAA3xB,UAAAkzB,cAAA,WACA,IAAA/0B,KAAA0zB,QAAA1zB,KAAA4zB,UACA,OAEA,MAAA5oB,EAAAhL,KAAA0zB,MAAA2B,YACA,IAAArqB,EACA,OAEA,MAAAuqB,EAAAv1B,KAAA4zB,UAAA5oB,GACA3D,EAAAC,EAAAC,OAAAguB,GAEA,MAAAC,EAAA,IAAA50B,OAAA60B,aAAAC,EAAA,QAAAvI,UAAAoI,EAAA,IACAG,EAAA,QAAAvI,UAAAoI,EAAA,KACA,GAAAv1B,KAAA2vB,OAAAjlB,MAAA,CACA,MAAAtJ,EAAApB,KAAA2vB,OAAAjlB,MAAA0C,UAAAooB,GACAA,EAAAp0B,UAAA,EAGA,MAAAi1B,EAAAz1B,OAAAgG,UAAAC,MAAAyG,wBAAAkoB,GAGAc,GACAC,MAAAv2B,KAAA+zB,MAAAnzB,OAAAmH,KAAAyuB,YACAltB,SAAAtJ,KAAA0zB,MAAA/gB,cACA8jB,UAAAjvB,GAEAxH,KAAAyzB,KAAAiD,SACAL,cACAC,gBAGAt2B,KAAAyzB,KAAAkD,aAAA32B,KAAAg0B,WAEAh0B,KAAA42B,mBAAA,IAQApD,EAAA3xB,UAAA8yB,aAAA,WACA,IAAA30B,KAAA0zB,QAAA1zB,KAAA4zB,UACA,OAEA,MAAA5oB,EAAAhL,KAAA0zB,MAAA2B,YACA,QAAA7tB,IAAAwD,GAAA,OAAAA,EACA,OAEA,MAAAuqB,EAAAv1B,KAAA4zB,UAAA5oB,GACA3D,EAAAC,EAAAC,OAAAguB,GAEA,MAAAxiB,EAAA/S,KAAA0zB,MAAA1gB,gBACAhT,KAAAg0B,UAAAh0B,KAAA62B,0BACA9jB,GAAA,EAAA2iB,EAAA,QAAAvI,UAAAoI,EAAA,KAEAv1B,KAAA+0B,iBASAvB,EAAA3xB,UAAAqzB,WAAA,WACA,IAAAl1B,KAAA0zB,QAAA1zB,KAAA8zB,YACA,OAEA9zB,KAAAi0B,uBAAA,EAGA,MAAA7oB,EAAAxK,OAAAgG,UAAAC,MACAzB,EAAApF,KAAA2vB,OACAtqB,EAAA+wB,EAAA,QAAArrB,gBAAA3F,GAEA,IAAA0xB,EAAAzxB,EACA,IAAAyxB,EAAA,CAEA,MAAApsB,EAAAtF,EAAAsF,MACA8qB,EAAAx1B,KAAAyzB,KAAAsD,qBAAAhuB,QACA3H,EAAAsJ,EAAA0C,UAAAooB,GACAA,EAAAp0B,UAAA,EACA01B,EAAAl2B,OAAAgG,UAAAC,MAAAyG,wBAAAkoB,GAEAx1B,KAAAg0B,UAAApzB,OAAA8E,WAAAD,SAAAqxB,EAAA92B,KAAAyzB,KAAA5tB,UACA,MAAAmxB,EAAA5rB,EAAAyqB,wBAAAiB,GAeA,GAdA92B,KAAA0zB,MAAA0B,UAAAp1B,KAAA8zB,aACA4B,EAAA,QAAAK,UAAAiB,EAAAhB,WACAN,EAAA,QAAAK,UAAAiB,EAAAf,aAGAj2B,KAAA0zB,MAAAxgB,cACAlT,KAAAi3B,0BAAAj3B,KAAAg0B,UACAgD,IAAAf,SAAA,IAOA5wB,EAAA,CACA,MAAAywB,EAAA91B,KAAAyzB,KAAA5tB,SAGAqxB,EAAA,IAAAt2B,OAAA8E,WACA0F,EAAAM,wBAAArG,EAAA6xB,GAGA,MAAAC,EAAA,IAAAv2B,OAAA8E,WACA9E,OAAA8E,WAAAE,SAAAkwB,EAAAzwB,EAAA8xB,GACAv2B,OAAA8E,WAAA6G,UAAA4qB,KAIA,MAAA5pB,EAAAvN,KAAAyzB,KAAAlmB,GACA7D,EAAA1J,KAAAyzB,KAAA/pB,MACA+B,EAAA,IAAA7K,OAAA8E,YAAAL,EAAAf,EAAAe,EAAAhB,EAAA,GACAiF,EAAA1I,OAAA8E,WAAAiG,aAAAjC,EAAA+B,GAEA6qB,EADA11B,OAAA8E,WAAA8G,MAAAnH,EAAAkI,EAAA,IAAA3M,OAAA8E,YACA0xB,EAEAp3B,KAAA0zB,MAAAzgB,YAAAqjB,EAAA,EAAAhtB,MAGA,MAAA+tB,EAAAtvB,KAAAuvB,KACA12B,OAAA8E,WAAAgH,IAAAwqB,EAAAC,IACAn3B,KAAA+zB,MAAAwD,MAAAF,GAAA,EAAAA,OAGAr3B,KAAA0zB,MAAAzgB,YAAAjT,KAAAyzB,KAAAnqB,SACAtJ,KAAA+zB,OAAA/zB,KAAAyzB,KAAA8C,MAAAxuB,KAAA8D,GAAA,EAGA7L,KAAAi0B,uBAAA,GAQAT,EAAA3xB,UAAA+0B,kBAAA,SAAAY,GACA,MAAAC,EAAAz3B,KAAAgwB,sBACAnN,EAAA7iB,KAAAyzB,KAAAZ,WAEA4E,GAAA72B,OAAA6F,QAAA2lB,cAAAqL,EAAA5U,EAAA,QACA7iB,KAAAgwB,sBAAAnN,EAAA9Z,SACA,IAAAyuB,GACAx3B,KAAAk1B,eAaA1B,EAAA3xB,UAAAg1B,0BAAA,SAAA9jB,EAAAkjB,GACA,MAAA1wB,EAAAvF,KAAA2vB,OAAApqB,OACA0G,EAAAjM,KAAAyzB,KAAAjuB,QAAAyG,KACA5E,EAAAC,EAAAC,QAAAgwB,MAAAtrB,IACA,MAAAyrB,EAAA13B,KAAA0zB,MAAA1wB,gBAAA20B,mBA0BA,OAvBA5kB,EAAAxN,EAAAW,aASAwxB,EAHA3vB,KAAA6vB,IAAA7vB,KAAAikB,IAAAiK,IAYA,EAAAluB,KAAA8vB,IAAA5rB,EAAA,IAgBAunB,EAAA3xB,UAAAo1B,0BAAA,SAAAxxB,EAAAwwB,GAEA,MAAA1wB,EAAAvF,KAAA2vB,OAAApqB,OACA0G,EAAAjM,KAAAyzB,KAAAjuB,QAAAyG,KACAyrB,EAAA13B,KAAA0zB,MAAA1wB,gBAAA20B,mBAOA,OALA,EAAAlyB,EAAAsC,KAAA8vB,IAAA5rB,EAAA,GAEAyrB,EADA3vB,KAAA6vB,IAAA7vB,KAAAikB,IAAAiK,IAEA1wB,EAAAW,cAIA,IAAAsqB,EAAA,wBCthBA,MAAAsH,EAAA,SAAAzlB,EAAAjN,GAKApF,KAAAqS,MAMArS,KAAA4S,KAAAP,EAAAK,UAMA1S,KAAAoF,QAMApF,KAAA+3B,SAAA1lB,EAAAmgB,gBAAApQ,YAKApiB,KAAAg4B,cAAA3lB,EAAAmgB,gBAQAxyB,KAAAi4B,YAOAj4B,KAAAk4B,qBAOAl4B,KAAAm4B,uBAQAL,EAAAj2B,UAAAu2B,YAAA,WACAp4B,KAAAq4B,aACAr4B,KAAAs4B,WAAAt4B,KAAAg4B,gBASAF,EAAAj2B,UAAA02B,YAAA,aAUAT,EAAAj2B,UAAAy2B,WAAA,SAAAE,GAEA,MAAAC,IACA9oB,MAAA6oB,EACA3oB,aAEA,KAAA4oB,EAAA30B,OAAA,IACA,MAAAyL,EAAAkpB,EAAAC,OAAA,QACA1qB,EAAAuB,EAAAI,MACAgpB,EAAA3kB,EAAA,QAAA8K,OAAA9Q,GAAA+Q,WACA/e,KAAAk4B,kBAAAS,MACAtxB,EAAAC,EAAAC,QAAAvH,KAAAi4B,SAAAU,IAEA,IAAAC,EAAA,KACA5qB,aAAA6qB,EAAA,SACA74B,KAAA84B,uBAAA9qB,GACAA,IAAAhO,KAAAg4B,gBACAY,EAAA54B,KAAA+4B,8BAAAxpB,IAEAqpB,GACA5qB,EAAAoU,YAAA1e,QAAAs1B,IACA,GAAAA,EAAA,CACA,MAAAC,GACAtpB,MAAAqpB,EACAnpB,QAAA7B,IAAAhO,KAAAg4B,kBAEAzoB,EAAAI,OAAAC,OAAAL,EAAAM,UAEA4oB,EAAA9nB,KAAAsoB,OAKAL,EAAA54B,KAAA+4B,8BAAAxpB,GAGAqpB,IACA54B,KAAAi4B,SAAAU,GAAAC,EACA54B,KAAAk4B,kBAAAS,GAAAhoB,KAAArP,EAAA,QAAAqW,OAAA3J,EAAA,gBAAAhO,KAAAu4B,YAAAv4B,OACA44B,EAAAl1B,QAAA,SAAAw1B,GACAl5B,KAAAm5B,gBAAAD,IACOl5B,OAIPA,KAAAu4B,eAUAT,EAAAj2B,UAAAu3B,6BAAA,SAAAzpB,GACA,MAAA0pB,EAAArlB,EAAA,QAAA8K,OAAAnP,GAAAoP,WACAua,EAAAt5B,KAAAi4B,SAAAoB,GAUA,OATAC,IACAA,EAAA51B,QAAA,SAAA61B,GACAv5B,KAAAw5B,yBAAAD,GAAA,GACAv5B,KAAAy5B,oBAAAF,IACKv5B,MACLA,KAAAk4B,kBAAAmB,GAAA31B,QAAA4wB,EAAA,QAAA/O,gBACAvlB,KAAAk4B,kBAAAmB,WAEAr5B,KAAAi4B,SAAAoB,KACAC,GASAxB,EAAAj2B,UAAA63B,qBAAA,SAAAva,GACA,GAAAA,IAAAnf,KAAAg4B,cACA,OAEA,MAAAqB,EAAArlB,EAAA,QAAA8K,OAAAK,GAAAJ,WACA/e,KAAAm4B,mBAAAkB,GACA31B,QAAAwY,IACAoY,EAAA,QAAA/O,QAAArJ,YAEAlc,KAAAm4B,mBAAAkB,UACAr5B,KAAAi4B,SAAAoB,IASAvB,EAAAj2B,UAAA83B,aAAA,SAAAnB,GACA,GAAAA,EAAA,CACA,MAAAC,GAAAD,GACA,KAAAC,EAAA30B,OAAA,IACA,MAAAkK,EAAAyqB,EAAAC,OAAA,QACAkB,EAAA55B,KAAAo5B,6BAAAprB,GACAA,aAAA6qB,EAAA,UACA74B,KAAA05B,qBAAA1rB,GACA4rB,GAGA5rB,EAAAoU,YAAA1e,QAAAs1B,IACAP,EAAA9nB,KAAAqoB,SAcAlB,EAAAj2B,UAAAi3B,uBAAA,SAAA3Z,GACA,MAAA0a,EAAA7lB,EAAA,QAAA8K,OAAAK,GAAAJ,WAEA1X,EAAAC,EAAAC,YAAAC,IAAAxH,KAAAm4B,mBAAA0B,IAEA,MAAAC,KACA95B,KAAAm4B,mBAAA0B,GAAAC,EAGA,IAAAC,KACA,MAAAC,EAAA,WACA,MAAAC,EAAA9a,EAAAiD,YACA6X,IACAF,GACAE,EAAA54B,GAAA,eAAAshB,GACA3iB,KAAAs4B,WAAA3V,EAAAoB,UACS/jB,MACTi6B,EAAA54B,GAAA,kBAAAshB,GACA3iB,KAAA25B,aAAAhX,EAAAoB,UACS/jB,OAET85B,EAAAnpB,QAAAopB,KAEGzb,KAAAte,MAEHg6B,IAEAF,EAAAnpB,KAAAwO,EAAA9d,GAAA,gBAAAI,IACAs4B,EAAAr2B,QAAAC,IACA,MAAA8D,EAAAqyB,EAAAI,QAAAv2B,GACA8D,GAAA,GACAqyB,EAAApB,OAAAjxB,EAAA,GAEA6sB,EAAA,QAAA/O,QAAA5hB,KAEAq2B,QASAlC,EAAAj2B,UAAAw2B,WAAA,WAEA,IAAA8B,EADAn6B,KAAAo6B,wBAAA,GAEA,IAAAD,KAAAn6B,KAAAm4B,mBAAA,CACAn4B,KAAAm4B,mBAAAgC,GACAz2B,QAAA4wB,EAAA,QAAA/O,SAEA,IAAA4U,KAAAn6B,KAAAk4B,kBACAl4B,KAAAk4B,kBAAAiC,GAAAz2B,QAAA4wB,EAAA,QAAA/O,SAEAvlB,KAAAm4B,sBACAn4B,KAAAk4B,qBACAl4B,KAAAi4B,aAUAH,EAAAj2B,UAAAs3B,gBAAA,SAAAkB,KAQAvC,EAAAj2B,UAAA43B,oBAAA,SAAAY,KAUAvC,EAAAj2B,UAAA23B,yBAAA,SAAAa,EAAAC,KASAxC,EAAAj2B,UAAAu4B,uBAAA,SAAAE,KASAxC,EAAAj2B,UAAAk3B,8BAAA,SAAAxpB,KACA,IAAAgrB,EAAA,EC9SA,MAAAC,EAAA,SAAAnoB,EAAAjN,GAKApF,KAAAy6B,cAAAr1B,EAAAs1B,cAMA16B,KAAA26B,WAAA,IAAA/5B,OAAAg6B,uBAEAL,EAAAz1B,KAAA9E,KAAAqS,EAAAjN,IAGA4O,EAAA,QAAAqF,SAAAmhB,EAAAD,GAMAC,EAAA34B,UAAAs3B,gBAAA,SAAAkB,GACAr6B,KAAAy6B,cAAArwB,IAAAiwB,GACAr6B,KAAA26B,WAAAvwB,IAAAiwB,IAOAG,EAAA34B,UAAA43B,oBAAA,SAAAY,GACAA,EAAAC,WAOAE,EAAA34B,UAAA23B,yBAAA,SAAAa,EAAAC,GACAt6B,KAAAy6B,cAAAI,OAAAR,EAAAC,GACAt6B,KAAA26B,WAAAE,OAAAR,GAAA,IAOAG,EAAA34B,UAAAu4B,uBAAA,SAAAE,GACA,QAAA7yB,EAAA,EAAiBA,EAAAzH,KAAA26B,WAAA72B,SAA4B2D,EAC7CzH,KAAAy6B,cAAAI,OAAA76B,KAAA26B,WAAAl6B,IAAAgH,GAAA6yB,GAEAt6B,KAAA26B,WAAAG,WAAA,IAeAN,EAAA34B,UAAAk5B,8BAAA,SAAA/sB,EAAAC,GACA,MAAA6jB,EAAAsE,EAAA,QAAAroB,wBAAAC,EAAAC,GACA,OAAA6jB,MAAA,MAOA0I,EAAA34B,UAAAk3B,8BAAA,SAAAxpB,GACA,MAAAvB,EAAAuB,EAAAI,MACA0pB,EAAArlB,EAAA,QAAA8K,OAAA9Q,GAAA+Q,WACA9Q,EAAAjO,KAAA4S,KAAA5P,gBACAqE,EAAAC,EAAAC,OAAA0G,GACA,MAAA2qB,EAAA54B,KAAA+6B,8BAAA/sB,EAAAC,GACA,GAAA2qB,EAAA,CACA,MAAAkB,MACAvqB,EAAAI,OAAAC,OAAAL,EAAAM,SAAAnM,QAAAs3B,IACAlB,EAAAnpB,KAAAqqB,EAAA35B,IAAA,wCAEAgG,EAAAC,EAAAC,OAAAqxB,GACA,QAAAnxB,EAAA,EAAuBA,EAAAmxB,EAAA90B,SAA0B2D,EACjD2uB,EAAA,QAAA9mB,4BAAAC,EAAAqpB,EAAAnxB,SAKA,QAAAA,EAAA,EAAmBA,EAAAmxB,EAAA90B,SAA0B2D,EAC7C2uB,EAAA,QAAA9mB,4BAAAC,EAAAqpB,EAAAnxB,IAKAqyB,EAAAnpB,KAAA3C,EAAA3M,GAAA,yBAAAI,GACA,QAAAgG,EAAA,EAAqBA,EAAAmxB,EAAA90B,SAA0B2D,EAC/CzH,KAAAy6B,cAAAI,OAAAjC,EAAAnxB,IAAA,GACAzH,KAAA26B,WAAAE,OAAAjC,EAAAnxB,IAAA,UAEAzH,KAAAi4B,SAAAjkB,EAAA,QAAA8K,OAAA9Q,IACAhO,KAAAo4B,eACKp4B,OAEL85B,EAAAnpB,KAAA3C,EAAA3M,GAAA,kBAAAI,GAEA,QAAAgG,EAAA,EAAqBA,EAAAmxB,EAAA90B,SAA0B2D,EAAA,CAC/C,MAAA5B,EAAA7F,KAAAy6B,cAAAP,QAAAtB,EAAAnxB,IACA5B,GAAA,IACA7F,KAAAy6B,cAAAI,OAAAjC,EAAAnxB,IAAA,GACAzH,KAAAy6B,cAAArwB,IAAAwuB,EAAAnxB,GAAA5B,MAGK7F,OAELA,KAAAk4B,kBAAAmB,GAAA1oB,QAAAmpB,GAGA,OAAA3oB,MAAAC,QAAAwnB,KAAA,MAUA4B,EAAA34B,UAAA02B,YAAA,WACA,MAAArV,KACA+X,KACAC,GAAAl7B,KAAAg4B,eAEA,KAAAkD,EAAAp3B,OAAA,IACA,MAAAkK,EAAAktB,EAAAxC,OAAA,QAIA,GAHAxV,EAAAvS,KAAA3C,GACAitB,EAAAjnB,EAAA,QAAA8K,OAAA9Q,MAAAmtB,YAEAntB,aAAA6qB,EAAA,SACA,MAAAuC,EAAAptB,EAAAoU,YACAgZ,GAEAF,EAAAG,WAAAD,EAAAjY,aAKAmY,EAAA,QAAAC,WAAArY,EAAA,CAAAsY,EAAAC,IACAR,EAAAjnB,EAAA,QAAA8K,OAAA0c,IAAAP,EAAAjnB,EAAA,QAAA8K,OAAA2c,KAGAvY,EAAAxf,QAAA,SAAAsK,GACA,MAAA2qB,EAAA3kB,EAAA,QAAA8K,OAAA9Q,GAAA+Q,WACA6Z,EAAA54B,KAAAi4B,SAAAU,GACAC,GACAA,EAAAl1B,QAAA1D,KAAA07B,WAAA17B,OAEGA,OAOHw6B,EAAA34B,UAAA65B,WAAA,SAAAnC,GACAv5B,KAAAy6B,cAAAiB,WAAAnC,IAEA,IAAAoC,EAAA,wDC9JA,MAAAC,EAAA,SAAA3zB,GACA4zB,EAAA,QAAA/2B,KAAA9E,MACAsD,aAAA2E,EAAA3E,aACAmK,OAAAxF,EAAAwF,OACAC,WAAAzF,EAAAyF,WACAsM,MAAA/R,EAAA+R,QAOAha,KAAA+S,gBAAAvL,EAMAxH,KAAAyF,cAAA+B,IAAAS,EAAAxC,SAAAwC,EAAAxC,SAAA,GAMAzF,KAAAgf,YAOAhf,KAAA87B,iBAAA7zB,EAAA6zB,kBAAA,SAAApd,GACA,MAAA1X,EAA8C0X,EAAAqd,cAG9C,OAFAp6B,OAAAmW,EAAA,EAAAnW,CAAAqF,aAAAg1B,EAAA,QACA,IACAh1B,GAOAhH,KAAAF,OAAAmI,EAAAnI,OAEAE,KAAAF,OAAAuB,GAAAE,EAAA,EAAAC,OACAo6B,EAAA/5B,UAAA2hB,QAAAxjB,OAGA2B,OAAAqS,EAAA,SAAArS,CAAAi6B,EAAAC,EAAA,SAQAD,EAAA/5B,UAAAszB,YAAA,WACA,OAAAn1B,KAAAyF,UASAm2B,EAAA/5B,UAAAwM,UAAA,WACA,OAAArO,KAAAF,QAOA87B,EAAA/5B,UAAAo6B,aAAA,SAAAxuB,EAAAsF,EACArF,GACA1N,KAAAF,OAAAm8B,aAAAxuB,EAAAsF,EAAArF,GACAqF,IAAA/S,KAAA+S,aACA/S,KAAAkf,QACAlf,KAAA+S,aACA/S,KAAAk8B,UACAl8B,KAAAm8B,YAAAn8B,KAAAgf,YAUA4c,EAAA/5B,UAAAozB,YAAA,SAAAxvB,GACAzF,KAAAyF,WACAzF,KAAAwjB,WAQAoY,EAAA/5B,UAAA2hB,QAAA,WACAxjB,KAAAkf,QACAlf,KAAAk8B,UACAl8B,KAAAm8B,YAAAn8B,KAAAgf,UACA6c,EAAA,QAAAh6B,UAAA2hB,QAAA1e,KAAA9E,OAOA47B,EAAA/5B,UAAAq6B,QAAA,WACA,QAAA10B,IAAAxH,KAAA+S,WACA,OAEA/S,KAAAgf,SAAAlb,OAAA,EACA,MAAA2J,EAAA9L,OAAA4S,EAAA,YAAA5S,GACAy6B,EAAAp8B,KAAAyF,SAAAzF,KAAA+S,WACAiM,EAAAhf,KAAAF,OAAAu8B,cAKAC,KAEA,QAAA70B,EAAA,EAAA80B,EAAAvd,EAAAlb,OAAuC2D,EAAA80B,EAAQ90B,IAAA,CAC/C,MAAAiX,EAAAM,EAAAvX,GACA,KAAA9F,OAAAqS,EAAA,OAAArS,CAAA+c,GAAAK,aAAAud,GAAA,CACA,MAAAt1B,EAAAhH,KAAA87B,iBAAApd,GACA,GAAA1X,EAAA,CACA,MAAAwJ,EAAAxJ,EAAAw1B,iBACA76B,OAAA4S,EAAA,6BAAA5S,CAAA6O,EAAA/C,GACA9L,OAAA4S,EAAA,OAAA5S,CAAA8L,EAAA2uB,EAAA3uB,GAEA,IAAAgvB,EAAAz8B,KAAAF,OAAA48B,oBAAAjvB,GACAgvB,IAAAE,OAAA,SAAAC,GACA,MAAAvD,EAAA13B,OAAAqS,EAAA,OAAArS,CAAAi7B,GAAA7d,WACA,QAAAsa,KAAAiD,KACAA,EAAAjD,IAAA,GACA,KAKAr5B,KAAAgf,SAAArO,KAAA3Q,KAAA68B,cAAAJ,QAYAb,EAAA/5B,UAAAg7B,cAAA,SAAA7d,GACA,MAAA8d,GAAA,KACA,QAAAr1B,EAAAuX,EAAAlb,OAAA,EAAmC2D,GAAA,IAAQA,EAAA,CAC3C,MAAAT,EAAAhH,KAAA87B,iBAAA9c,EAAAvX,IACAT,EACAqJ,EAAA,QAAAjG,IAAA0yB,EAAA91B,EAAAw1B,kBAEAxd,EAAA0Z,OAAAjxB,EAAA,GAGA4I,EAAA,QAAA+L,MAAA0gB,EAAA,EAAA9d,EAAAlb,QAEA,MAAAo4B,EAAA,IAAAa,EAAA,YAAAf,EAAA,QAAAc,IAEA,OADAZ,EAAAte,IAAA,WAAAoB,GACAkd,GAEA,IAAAc,EAAA,4CChMA,MAAAC,EAAA,SAAAC,EAAA93B,GACA,MAAA+3B,EAAA,IAAAv8B,OAAAw8B,qBAAqDh4B,UACrDi4B,EAAA,IAAAz8B,OAAA08B,oBAKAt9B,KAAAu9B,gBAEAv9B,KAAAw9B,gBAAA,IAAA58B,OAAA08B,oBAIAt9B,KAAAy9B,SACA/vB,WAAAwvB,EACAC,aACAO,sBACAL,cAGAr9B,KAAAw9B,gBAAApzB,IAAA+yB,GACAn9B,KAAAw9B,gBAAApzB,IAAAizB,IAOAJ,EAAAp7B,UAAAy4B,QAAA,WACAt6B,KAAAu9B,aAAA75B,QAAA4wB,EAAA,QAAA/O,SACAvlB,KAAAu9B,aAAAz5B,OAAA,GAOAm5B,EAAAp7B,UAAA87B,iBAAA,WACA,OAAA39B,KAAAw9B,iBAEA,IAAAI,EAAA,EC7BA,MAAAC,EAAA,SAAAz4B,GAKApF,KAAAoF,QAOApF,KAAA89B,qCACA99B,KAAA+9B,wBAAAzf,KAAAte,OAQA69B,EAAAh8B,UAAAk8B,wBAAA,SAAAvY,GACA,MAAA1lB,EAAA0lB,EAAAngB,OACAgC,EAAAC,EAAA8b,iBAAAtjB,EAAA+7B,EAAA,SAEA,MAAAmC,EAAAzO,EAAAlkB,IAAAvL,GAAA,gBACA,GAAAk+B,EAAA,CACA,MAAAtf,EAAA8G,EAAA9G,QACA,GAAAA,EAAA,CAEA,MAAAvB,EAAAnJ,EAAA,QAAA8K,OAAAJ,GACAuf,EAAAD,EAAA7gB,GACA8gB,IACAA,WACAD,EAAA7gB,QAEK,CAEL,UAAAjB,KAAA8hB,EACAA,EAAAE,eAAAhiB,IACA8hB,EAAA9hB,KAGAqT,EAAAlkB,IAAAvL,GAAA,sBAYA+9B,EAAAh8B,UAAAs8B,uBAAA,SAAAxuB,EAAA+O,EAAA0f,GACAA,EAAApwB,QAAA2B,EACAyuB,EAAAC,UAAA3f,GAgBAmf,EAAAh8B,UAAAy8B,uBAAA,SAAA3uB,EAAA+O,EAAA6f,EAAAv3B,EAAAw3B,EAAAC,GACA,MAUAx2B,GAEAy2B,MAAA,EACAC,aACAC,WACAC,SAAA,UAKAr3B,IAAAi3B,IACAx2B,EAAA02B,cACA12B,EAAA02B,gBAEA12B,EAAA02B,YAAAG,UAAAL,GAGA,MAAAM,GA3BA/3B,EA2BAA,EA3BAw3B,EA2BAA,EA1BA,IAAA59B,OAAAo+B,kBAEAh4B,WACAiW,YACAuhB,MAAA59B,OAAAq+B,+BAAAC,UAAAV,OALA,IAAAx3B,EAAAw3B,EA+BA,IAAAJ,EAEA,GAJAp+B,KAAAm/B,mBAAAxvB,EAAA+O,EAAA6f,IAIA39B,OAAAw+B,gBAAAC,gBAAA,CACA,MAAAC,EAAAP,EAAA/3B,SAAA0a,YACA,GAAA4d,MAAA,mBACA,YAEAlB,EAAA,IAAAx9B,OAAA2+B,iBAEAC,kBAAAT,QAEG,CACH,MAAAU,EAAA,IAAA7+B,OAAA8+B,2BAAAz3B,GACAm2B,EAAA,IAAAx9B,OAAA++B,WAEAH,kBAAAT,EACAU,eAKA,OADAz/B,KAAAm+B,uBAAAxuB,EAAA+O,EAAA0f,GACAA,GAWAP,EAAAh8B,UAAA+9B,wBAAA,SAAAxhB,EAAAyhB,GACA,MAAAC,EAAA1hB,EAAA2hB,UAAA3hB,EAAA2hB,UAAAC,WAAA,KACAC,EAAA7hB,EAAA8hB,YAAA9hB,EAAA8hB,YAAAF,WAAA,KAEA,IAAA9uB,EAAA,QAOA,OANA+uB,GAAAJ,EACA3uB,EAAA+uB,EACGH,IACH5uB,EAAA4uB,GAGA1J,EAAA,QAAAnlB,qBAAAC,IAUA2sB,EAAAh8B,UAAAs+B,4BAAA,SAAA/hB,GAEA,MAAAjd,EAAAid,EAAA8hB,YAAA9hB,EAAA8hB,YAAAE,gBAAA54B,EACA,YAAAA,IAAArG,IAAA,GAgBA08B,EAAAh8B,UAAAw+B,6BAAA,SAAA1wB,EAAA+O,EAAA6f,EAAA+B,EAAAC,EAAAC,GACA,MAAAV,EAAA9/B,KAAA4/B,wBAAAY,GAAA,GACAC,EAAAzgC,KAAA4/B,wBAAAY,GAAA,GAEAnD,EAAA,IAAAz8B,OAAA08B,oBACA,GAAAkD,EAAAT,UAAA,CACA,MAAAW,EAAA1gC,KAAAs+B,uBAAA3uB,EAAA+O,EAAA6f,EACA+B,EAAAR,GACAz4B,EAAAC,EAAAC,SAAAm5B,GACArD,EAAAjzB,IAAAs2B,GAGA,GAAAF,EAAAN,YAAA,CACA,MAAA/+B,EAAAnB,KAAAmgC,4BAAAK,GACAG,EAAA3gC,KAAAs+B,uBAAA3uB,EAAA+O,EAAA6f,EACAgC,EAAAE,EAAAt/B,GACAw/B,GAGAtD,EAAAjzB,IAAAu2B,GAIA,OAAAtD,GAgBAQ,EAAAh8B,UAAA++B,aAAA,SAAAjxB,EAAA+O,EAAA1X,EAAAoX,EAAAggB,GACA,IAAAf,EAQA,GAPAe,aAAAx9B,OAAA08B,oBAIAD,EAAAe,GAHAf,EAAA,IAAAz8B,OAAA08B,qBACAlzB,IAAAg0B,IAKAhgB,EAAAyiB,UACA,OAAAxD,EAGA,MAAAh6B,EAAyC+a,EAAAyiB,UACzCC,EAAA9gC,KAAA+gC,+BAAApxB,EAAA+O,EAAA1X,EACA3D,GAIA,OAHAy9B,GACAzD,EAAAjzB,IAAA02B,GAEAzD,GAgBAQ,EAAAh8B,UAAAm/B,eAAA,SAAA7D,EAAA8D,EAAAtxB,EAAA+O,EAAA1X,EAAAoX,GACA,MAAA8iB,EAAA/D,EAAA/yB,IAAA62B,GAEA,OADAjhC,KAAAm+B,uBAAAxuB,EAAA+O,EAAAwiB,GACAA,GAcArD,EAAAh8B,UAAAs/B,yBAAA,SAAAxxB,EAAA+O,EAAA6f,EAAA7wB,EAAA8yB,GAEAjC,EAAAnI,EAAA,QAAAxlB,sBAAA2tB,EAAA7wB,GACArG,EAAAC,EAAAC,OAAA,UAAAg3B,EAAA6C,WAGA,IAAAp2B,EAAAuzB,EAAAlJ,YACA,MAAAj0B,EAAA,GAAA4J,EAAAlH,OAAAkH,EAAA,KACA,IAAAq2B,EAAAr2B,EAAA2V,QACA0gB,EAAA,IAAA9C,EAAA+C,YAGAt2B,EAAAorB,EAAA,QAAAhmB,kCAAApF,GACAq2B,EAAAjL,EAAA,QAAAhmB,kCAAAixB,GAGA,MAAAE,EAAA3gC,OAAA8E,WAAAD,SAAAuF,EAAAq2B,GAEAf,EAAA,IAAA1/B,OAAA4gC,gBAEAx2B,SACAu2B,SACAngC,WAGAm/B,EAAA,IAAA3/B,OAAA6gC,uBAEAz2B,SACAu2B,SACAG,eAAAtgC,EACAA,WAGAi8B,EAAAr9B,KAAAqgC,6BACA1wB,EAAA+O,EAAA6f,EAAA+B,EAAAC,EAAAC,GAEA,OAAAxgC,KAAA4gC,aAAAjxB,EAAA+O,EAAA6f,EAAAiC,EAAAnD,IAcAQ,EAAAh8B,UAAA8/B,6BAAA,SAAAhyB,EAAA+O,EAAA6f,EAAA7wB,EAAA8yB,GAEAjC,EAAAnI,EAAA,QAAAxlB,sBAAA2tB,EAAA7wB,GACArG,EAAAC,EAAAC,OAAA,cAAAg3B,EAAA6C,WAEA,MAAAQ,EAAAxL,EAAA,QAAA7lB,oCACAguB,EAAA/B,kBAEAiD,EAAA,IAAA7+B,OAAAihC,4BAEAC,SAAA9hC,KAAA+hC,gBAAArjB,EAAA8hB,GAAA,KAGAwB,GAEAJ,YACAzgC,MAAAnB,KAAAmgC,4BAAAK,GACAyB,aAAAxC,EAAAwC,cAGA,IAAAC,EAGA,GAFAliC,KAAAm/B,mBAAAxvB,EAAA+O,EAAA6f,IAEA39B,OAAAw+B,gBAAAC,gBAAA,CACA,MAAAb,EAAAx+B,KAAA4/B,wBAAAY,GAAA,GACA0B,EAAA,IAAAthC,OAAA2+B,iBAEAC,kBAAA,IAAA5+B,OAAAo+B,kBACAh4B,SAAA,IAAApG,OAAAuhC,iBAAAH,GACA/kB,YACAuhB,MAAA59B,OAAAq+B,+BAAAC,UAAAV,aAKA0D,EAAA,IAAAthC,OAAA++B,WAEAH,kBAAA,IAAA5+B,OAAAo+B,kBACAh4B,SAAA,IAAApG,OAAAwhC,iBAAAJ,KAEAvC,eAMA,OAFAz/B,KAAAm+B,uBAAAxuB,EAAA+O,EAAAwjB,GAEAliC,KAAA4gC,aAAAjxB,EAAA+O,EAAA6f,EAAAiC,EACA0B,IAcArE,EAAAh8B,UAAAwgC,0BAAA,SAAA1yB,EAAA+O,EAAA6f,EAAA7wB,EAAA8yB,GAKA,IAAAF,EAAAC,EACA,GAJAhC,EAAAnI,EAAA,QAAAxlB,sBAAA2tB,EAAA7wB,GACArG,EAAAC,EAAAC,OAAA,WAAAg3B,EAAA6C,WAGA,GAAA7C,EAAA/B,iBAAA,GAAA14B,QACA,cAAA4a,EAAAqd,cAAAt7B,IAAA,sBAEA,MAAA+P,EAAA+tB,EAAA/B,iBAAA,GAEA/uB,EAAA8G,EAAA,QAAA+tB,eAAA9xB,GACAzO,EAAAnB,OAAAiN,UAAAC,YAAAL,EAAA,GAAAA,EAAA,GACAA,EAAA,GAAAA,EAAA,IAGA,IAAA80B,EAAA,EACA,MAAA/xB,EAAA,GAAA1M,OACA,QAAAwI,EAAA,EAAqBA,EAAAkE,EAAA1M,OAAwBwI,IAC7Ci2B,EAAAx6B,KAAAy6B,IAAAD,EAAA/xB,EAAAlE,GAAA,IAKAg0B,EAAA,IAAA1/B,OAAA6hC,mBACAr3B,UAAAxK,OAAAgG,UAAAC,MACA9E,YACAX,OAAAmhC,IAGAhC,EAAA,IAAA3/B,OAAA8hC,0BACAt3B,UAAAxK,OAAAgG,UAAAC,MACA9E,YACAX,OAAAmhC,QAEG,CACH,MAAAI,EAAApE,EAAAqE,iBAEAC,KACAC,EAAAD,EACAx7B,EAAAC,EAAAC,OAAAo7B,EAAA7+B,OAAA,GAEA,QAAA2D,EAAA,EAAmBA,EAAAk7B,EAAA7+B,SAAkB2D,EAAA,CACrC,MAAAs7B,EAAAJ,EAAAl7B,GAAA+0B,iBACAoF,EAAAxL,EAAA,QAAA7lB,oCAAAwyB,GACA17B,EAAAC,EAAAC,OAAAq6B,KAAA99B,OAAA,GACA,GAAA2D,EACAo7B,EAAAjB,aAEAiB,EAAAG,QACAH,EAAAG,UAEAH,EAAAG,MAAAryB,MACAixB,eAKAtB,EAAA,IAAA1/B,OAAAqiC,iBAEAH,mBACAI,mBAAA,IAGA3C,EAAA,IAAA3/B,OAAAuiC,wBAEAL,iBAAAD,EACAK,mBAAA,IAIA,MAAA7F,EAAAr9B,KAAAqgC,6BACA1wB,EAAA+O,EAAA6f,EAAA+B,EAAAC,EAAAC,GAEA,OAAAxgC,KAAA4gC,aAAAjxB,EAAA+O,EAAA6f,EAAAiC,EAAAnD,IAWAQ,EAAAh8B,UAAAs9B,mBAAA,SAAAxvB,EAAA+O,EAAA1X,GAGA,IAAAo8B,EAAAp8B,EAAAvG,IAAA,qBAGA+G,IAAA47B,IACAA,EAAA1kB,EAAAje,IAAA,sBAIA+G,IAAA47B,IACAA,EAAAzzB,EAAAlP,IAAA,iBAGA,IAAA4iC,EAAAziC,OAAAw+B,gBAAAkE,KAOA,MANA,kBAAAF,EACAC,EAAAziC,OAAAw+B,gBAAAC,gBACG,qBAAA+D,IACHC,EAAAziC,OAAAw+B,gBAAAmE,oBAGAF,GAiBAxF,EAAAh8B,UAAA2hC,wBAAA,SAAA7zB,EAAA+O,EAAA6f,EAAA7wB,EAAA0Q,EAAA+e,EACAsG,GACAp8B,EAAAC,EAAAC,OAAA,SAAAg3B,EAAA6C,WACA7C,EAAAnI,EAAA,QAAAxlB,sBAAA2tB,EAAA7wB,GAEA,MAAAg2B,EAAAtlB,EAAAnK,WACA,GAAAyvB,EAAA,CACAA,aAAAC,EAAA,SAEAD,EAAAjvB,OAGA,MAAAK,EAAA4uB,EAAAzvB,SAAA,GACA2vB,EAAA,SAAA9uB,GACA,UAAAA,EAAA7Q,KACA,GAAA6Q,EAAA+uB,eACA,GAAA/uB,EAAAgvB,cACAhvB,EAAAivB,UAEAC,EAAA,WACA,IAAAlvB,EACA,OAEA,KAAAA,aAAAmvB,mBACAnvB,aAAA3G,OACA2G,aAAAovB,kBACA,OAEA,MAAAl5B,EAAAuzB,EAAA/B,iBACA32B,EAAAuwB,EAAA,QAAAhmB,kCAAApF,GACA,IAAAwzB,EACA,MAAA/uB,EAAAi0B,EAAA3zB,kBACAvI,IAAAiI,IACA+uB,EAAA,IAAA59B,OAAAyQ,MAAA,MAAA5B,IAGA,MAAA4zB,EAAArjC,KAAAm/B,mBAAAxvB,EAAA+O,EAAA6f,GAEA0C,GAEAnsB,QACA0pB,QACApiB,MAAAsnB,EAAAta,WACAia,kBACAc,eAAAvjC,OAAAwjC,eAAAC,OACAx+B,YAEAq7B,EAAAlhC,KAAAghC,eAAA7D,EAAA8D,EAAAtxB,EAAA+O,EACA6f,EAAAngB,GACAqlB,GACAA,EAAAvC,IAEK5iB,KAAAte,MAEL,GAAA8U,aAAA3G,QAAAy1B,EAAA9uB,GAAA,CAEA,IAAAwvB,GAAA,EACA,MAAAxkC,EAAA6P,EAAAtB,YACA4vB,EAAA,WACAqG,GAAA,GAEAxkC,EAAAuB,IAAA,yBACArB,KAAA89B,sCACA,IAAAE,EAAAzO,EAAAlkB,IAAAvL,GAAA,gBACAk+B,IACAA,EAAAzO,EAAAlkB,IAAAvL,GAAA,oBAGA,MAAAykC,EAAAvwB,EAAA,QAAA8K,OAAAJ,GACAsf,EAAAuG,IAGAvG,EAAAuG,KAEAvG,EAAAuG,GAAAtG,EAEA,MAAAuG,EAAA,WACArH,EAAAsH,eAAAH,GAEAN,KAIA1iC,EAAA,QAAAqT,WAAAG,EAAA,OAAA0vB,QAEAR,IAIA,OAAA5lB,EAAAyiB,UACA7gC,KAAA4gC,aAAAjxB,EAAA+O,EAAA6f,EAAAngB,EACA,IAAAxd,OAAA++B,WAEA,MAkBA9B,EAAAh8B,UAAA6iC,wBAAA,SAAA/0B,EAAA+O,EAAA1X,EAAA0G,EAAA8yB,EAAArD,EACAsG,GAKA,MAAAkB,EAAA,SAAAC,EAAAC,GACA,MAAAxH,EAAA,IAAAz8B,OAAA08B,oBAIA,OAHAsH,EAAAlhC,QAAAsD,IACAq2B,EAAAjzB,IAAAy6B,EAAAl1B,EAAA+O,EAAA1X,EAAA0G,EAAA8yB,MAEAnD,GAGA,IAAAyH,EACA,OAAA99B,EAAAo6B,WACA,iBAGA,GADA0D,GADA99B,EAAgD,GAChD+9B,YACAvE,EAAAK,UAAA,CACA,MAAAxD,EAAA,IAAAz8B,OAAA08B,oBASA,OARAwH,EAAAphC,QAAAsD,IACAK,EAAAC,EAAAC,OAAAP,GACA,MAAA8qB,EAAA9xB,KAAAwjC,wBAAA7zB,EAAA+O,EAAA1X,EACA0G,EAAA8yB,EAAArD,EAAAsG,GACA3R,GACAuL,EAAAjzB,IAAA0nB,KAGAuL,EAOA,OALAyH,EAAAphC,QAAAsD,IACAK,EAAAC,EAAAC,OAAAP,GACAhH,KAAAwjC,wBAAA7zB,EAAA+O,EAAA1X,EAAA0G,EACA8yB,EAAArD,EAAAsG,KAEA,KAEA,sBAGA,OAAAkB,EADAG,GADA99B,EAAqD,GACrDg+B,iBACAhlC,KAAA2hC,6BAAArjB,KAAAte,OACA,mBAGA,OAAA2kC,EADAG,GADA99B,EAAkD,GAClDi+B,cACAjlC,KAAAqiC,0BAAA/jB,KAAAte,OACA,QACAqH,EAAAC,EAAAkK,qCAAuDxK,EAAAo6B,eAcvDvD,EAAAh8B,UAAAk/B,+BAAA,SAAApxB,EAAA+O,EAAA1X,EAAAoX,GACA,MAAA/a,EAAA+a,EAAAyiB,UACAx5B,EAAAC,EAAAC,YAAAC,IAAAnE,GAGA,MAAA6hC,EAAA,IAAAtkC,OAAAukC,iBAA6C//B,MAAApF,KAAAoF,QAG7CggC,EAAA7wB,EAAA,QAAA8gB,UAAAruB,EAAAoI,aACA,GAAApI,aAAAq+B,EAAA,GACA,MAAAl5B,EAAAnF,EAAAs+B,qBACAF,EAAA,MAAAj5B,EAAArI,OAAAqI,EAAA,KAEA,MAAAlE,KAEAA,EAAApC,SAAAuwB,EAAA,QAAAhmB,kCAAAg1B,GAEAn9B,EAAA5E,OAEA4E,EAAAo7B,gBAAArjC,KAAAm/B,mBAAAxvB,EAAA+O,EAAA1X,GAEA,MAAAu+B,EAAAnnB,EAAAonB,aACAC,EAAArnB,EAAAsnB,aACA,MAAAH,GAAA,GAAAE,EAAA,CACA,MAAAE,EAAA,IAAA/kC,OAAAmF,WAAAw/B,EAAAE,GACAx9B,EAAA29B,YAAAD,EAGA,MAAAE,EAAAznB,EAAA0nB,eACAt+B,IAAAq+B,IACA59B,EAAA49B,QAGA,IAeAE,EAfAC,OAAAx+B,EAgBA,OAfA4W,EAAA2hB,YACA93B,EAAA63B,UAAA9/B,KAAA4/B,wBAAAxhB,GAAA,GACA4nB,EAAAplC,OAAAqlC,WAAAC,MAEA9nB,EAAA8hB,cACAj4B,EAAAk+B,aAAAnmC,KAAAmgC,4BAAA/hB,GACAnW,EAAAw4B,aAAAzgC,KAAA4/B,wBAAAxhB,GAAA,GACA4nB,EAAAplC,OAAAqlC,WAAAG,SAEAhoB,EAAA2hB,WAAA3hB,EAAA8hB,cACA8F,EAAAplC,OAAAqlC,WAAAI,kBAEAp+B,EAAAmW,MAAA4nB,EAGA5nB,EAAAkoB,gBACA,WACAP,EAAAnlC,OAAA2lC,iBAAAC,KACA,MACA,YACAT,EAAAnlC,OAAA2lC,iBAAAE,MACA,MACA,aACA,QACAV,EAAAnlC,OAAA2lC,iBAAAG,OAIA,GAFAz+B,EAAA89B,mBAEA3nB,EAAAuoB,kBAAA,CACA,IAAAxC,EACA,OAAA/lB,EAAAuoB,mBACA,UACAxC,EAAAvjC,OAAAwjC,eAAAwC,IACA,MACA,aACAzC,EAAAvjC,OAAAwjC,eAAAsC,OACA,MACA,aACAvC,EAAAvjC,OAAAwjC,eAAAC,OACA,MACA,iBACAF,EAAAvjC,OAAAwjC,eAAAwC,IACA,MACA,cACAzC,EAAAvjC,OAAAwjC,eAAAC,OACA,MACA,QACAh9B,EAAAC,EAAAkK,2BAA+C4M,EAAAuoB,qBAE/C1+B,EAAAk8B,iBAIA,MAAAnL,EAAAkM,EAAA96B,IAAAnC,GAEA,OADAjI,KAAAm+B,uBAAAxuB,EAAA+O,EAAAsa,GACAkM,GAYArH,EAAAh8B,UAAAkgC,gBAAA,SAAArjB,EAAAN,EAAAyhB,GACA,MAAAgH,EAAAzoB,EAAA2hB,UACA+G,EAAA1oB,EAAA8hB,YACA,GAAAL,IAAAiH,IAAAjH,IAAAgH,EACA,YAGA,IAAArI,EAAAqB,EAAAiH,EAAA9G,WAAA6G,EAAA7G,WAGA,OAFAxB,EAAApI,EAAA,QAAAnlB,qBAAAutB,GAEAqB,GAAAiH,EAAAC,cACAnmC,OAAAomC,SAAAC,SAAA,UAEAC,YAAA,EACAC,OAAA,IACAC,UAAA5I,EACA6I,SAAA,IAAAzmC,OAAAyQ,MAAA,WAGAzQ,OAAAomC,SAAAC,SAAA,SAEAzI,WAiBAX,EAAAh8B,UAAAylC,kBAAA,SAAA33B,EAAA+O,EAAA6oB,EAAAx0B,GAIA,MAAAy0B,EAAA9oB,EAAA+oB,mBAKA,IAAArpB,EAAA,KAUA,OARAopB,IACAppB,EAAAopB,EAAA1iC,KAAA4Z,EAAA3L,KAGAqL,GAAAmpB,IACAnpB,EAAAmpB,EAAA7oB,EAAA3L,IAGAqL,EASAjN,MAAAC,QAAAgN,SAPA,MAkBAyf,EAAAh8B,UAAA6lC,uBAAA,SAAAhpB,EAAAN,EAAAupB,GACA,GAAAA,EACA,OAAAA,EAGA,MAAAC,EAA8ClpB,EAAAje,IAAA,oBAC9C,GAAAmnC,gBAAAC,EAAA,QACA,OAAAD,EAGA,GAAAxpB,EAAA,CACA,MAAA0pB,EAAA1pB,EAAA2pB,qBAAA3pB,CAAAM,GACA,GAAAopB,aAAAD,EAAA,QACA,OAAAC,EAIA,OAAAppB,EAAAqd,eAcA8B,EAAAh8B,UAAAmmC,kBAAA,SAAAr4B,EAAA+O,EAAAN,EAAAqf,EAAAkK,GACA,IAAAM,EAAAjoC,KAAA0nC,uBAAAhpB,EAAAN,EAAAupB,GAEA,IAAAM,EAGA,YAGA,MAAAllC,EAAA06B,EAAA/vB,WACAw6B,EAAA,SAAAhH,GACAzD,EAAAC,mBAAA1pB,EAAA,QAAA8K,OAAAJ,IAAAwiB,GAGA,OAAA+G,EAAA7G,WACA,yBACA,MAAA/D,EAAA,IAAAz8B,OAAA08B,oBAYA,OAXgE,EAEhE6K,gBAAAzkC,QAAAukC,IACA,GAAAA,EAAA,CACA,MAAAG,EAAApoC,KAAAgoC,kBAAAr4B,EAAA+O,EAAAN,EAAAqf,EACAwK,GACAG,GACA/K,EAAAjzB,IAAAg+B,MAIA/K,EACA,YACA4K,EAAuC,EACvC,MAAAI,EAAA5K,EAAAN,WACArL,EAAA9xB,KAAAwjC,wBAAA7zB,EAAA+O,EAAAupB,EAAAllC,EACAqb,EAAAiqB,EAAAH,GACA,OAAApW,GAEA,KAIA,aAEA,OADAmW,EAAwC,EACxCjoC,KAAAmhC,yBAAAxxB,EAAA+O,EAAAupB,EAAAllC,EACAqb,GACA,iBAEA,OADA6pB,EAA4C,EAC5CjoC,KAAA2hC,6BAAAhyB,EAAA+O,EAAAupB,EAAAllC,EACAqb,GACA,cAEA,OADA6pB,EAAyC,EACzCjoC,KAAAqiC,0BAAA1yB,EAAA+O,EAAAupB,EAAAllC,EACAqb,GACA,iBACA,sBACA,mBACA,MAAAkqB,EAAAtoC,KAAA0kC,wBAAA/0B,EAAA+O,EAAAupB,EAAAllC,EACAqb,EAAAqf,EAAAN,WAAA+K,GACA,OAAAI,GAEA,KAIA,iBACA,UAAAC,MAAA,8CACA,QACA,UAAAA,oCAAoDN,EAAA7G,eAepDvD,EAAAh8B,UAAA2mC,sBAAA,SAAAx6B,EAAAy6B,EAAAC,GACA,MAAA3lC,EAAA0lC,EAAAzlC,gBACA+P,EAAA01B,EAAAz1B,gBAEA,QAAAxL,IAAAuL,IAAAhQ,EAIA,MAHAsE,EAAAC,EAAAkK,KAAA,kBAGA,IAAA+2B,MAAA,kBAGA,IAAAzoC,EAAAkO,EAAAK,YACAvO,aAAAk9B,IACAl9B,IAAAuO,aAGAhH,EAAAC,EAAA8b,iBAAAtjB,EAAA+7B,EAAA,SACA,MAAA7c,EAAAlf,EAAAu8B,cACA9C,EAAA,IAAAqE,EAAA76B,EAAA/C,KAAAoF,OACAq4B,EAAAlE,EAAAkE,QACA,QAAAh2B,EAAA,EAAiBA,EAAAuX,EAAAlb,SAAqB2D,EAAA,CACtC,MAAAiX,EAAAM,EAAAvX,GACA,IAAAiX,EACA,SAKA,MAAAiqB,EAAA36B,EAAAy5B,mBACAmB,EAAA5oC,KAAAsnC,kBAAAt5B,EAAA0Q,EAAAiqB,EACA51B,GACA,IAAA61B,MAAA9kC,OAEA,SAMA,IAAAu5B,EAAA,KACA,QAAA51B,EAAA,EAAmBA,EAAAmhC,EAAA9kC,OAAmB2D,IAAA,CACtC,MAAA2gC,EAAApoC,KAAAgoC,kBAAAh6B,EAAA0Q,EAAAkqB,EAAAnhC,GAAAg2B,GACA,GAAA2K,EACA,GAAA/K,GAES,GAAA+K,EAAA,CACT,IAAAS,EAAAphC,EAAA,EACA,KAAAohC,EAAAT,EAAA3nC,IAAAgH,IACA41B,EAAAjzB,IAAAy+B,GACAphC,UALA41B,EAAA+K,EAUA/K,IAGAqL,EAAA10B,EAAA,QAAA8K,OAAAJ,IAAA2e,EACA9D,EAAAoE,mBAAAvzB,IAAAizB,IAGA,OAAA9D,GAaAsE,EAAAh8B,UAAAinC,QAAA,SAAAn5B,EAAAiD,EAAA8L,EAAA+e,GACA,MAAA16B,EAAA6P,EAAA5P,gBACA+P,EAAAH,EAAAI,gBAEA,QAAAxL,GAAAuL,IAAAhQ,EACA,YAMA,MAAA4lC,EAAAh5B,EAAA83B,mBAEAmB,EAAA5oC,KAAAsnC,kBAAA33B,EAAA+O,EAAAiqB,EAAA51B,GAEA,IAAA61B,EAAA9kC,OAEA,YAGA25B,EAAA/vB,WAAA3K,EAKA,IAAAs6B,EAAA,KACA,QAAA51B,EAAA,EAAiBA,EAAAmhC,EAAA9kC,OAAmB2D,IAAA,CACpC,MAAA2gC,EAAApoC,KAAAgoC,kBAAAr4B,EAAA+O,EAAAkqB,EAAAnhC,GAAAg2B,GACA,GAAAJ,GAEK,GAAA+K,EAAA,CACL,IAAAS,EAAAphC,EAAA,EACA,KAAAohC,EAAAT,EAAA3nC,IAAAgH,IACA41B,EAAAjzB,IAAAy+B,GACAphC,UALA41B,EAAA+K,EASA,OAAA/K,GAEA,IAAA0L,EAAA,ECzjCA,MAAAC,EAAA,SAAA32B,EAAAjN,EAAA6jC,GAKAjpC,KAAAkpC,UAAAD,GAAA,IAAAF,EAAA3jC,GAKApF,KAAAmpC,iBAAA,IAAAvoC,OAAA08B,oBACAl4B,EAAAi4B,WAAAjzB,IAAApK,KAAAmpC,kBACAnpC,KAAAmpC,iBAAAC,mBAAA,EAEA7O,EAAAz1B,KAAA9E,KAAAqS,EAAAjN,IAGA4O,EAAA,QAAAqF,SAAA2vB,EAAAzO,GAMAyO,EAAAnnC,UAAAs3B,gBAAA,SAAAI,GACAlyB,EAAAC,EAAAC,OAAAgyB,GACAA,EAAAoE,mBAAA,YAAApE,EACAv5B,KAAAmpC,iBAAA/+B,IAAAmvB,EAAAoE,qBAOAqL,EAAAnnC,UAAA43B,oBAAA,SAAAY,GACAA,EAAAsD,mBAAArD,WAOA0O,EAAAnnC,UAAA23B,yBAAA,SAAAa,EAAAC,GACAD,EAAAC,UACAt6B,KAAAmpC,iBAAAC,kBAAA9O,EACAt6B,KAAAmpC,iBAAAtO,OAAAR,EAAAsD,oBACA39B,KAAAmpC,iBAAAC,mBAAA,GAOAJ,EAAAnnC,UAAAu4B,uBAAA,SAAAE,GAEA,GADAt6B,KAAAmpC,iBAAAC,kBAAA9O,EACAA,EACA,QAAA7yB,EAAA,EAAmBA,EAAAzH,KAAAmpC,iBAAArlC,SAAkC2D,EACrDzH,KAAAmpC,iBAAA1oC,IAAAgH,GAAA,YAAA6yB,UAGAt6B,KAAAmpC,iBAAArO,YACA96B,KAAAmpC,iBAAAC,mBAAA,GASAJ,EAAAnnC,UAAAwnC,sBAAA,SAAA95B,EAAA+5B,GACA,IAAA55B,GAAA,GACAH,EAAAI,OAAAC,OAAAL,EAAAM,SAAAnM,QAAAsK,IACA,MAAAgC,EAAAhC,EAAAiC,kBACAzI,IAAAwI,EACAN,GAAAM,EAEAN,GAAA,IAGA45B,EAAAn5B,KAAAT,GAKAs5B,EAAAnnC,UAAAk3B,8BAAA,SAAAxpB,GACA,MAAAvB,EAAAuB,EAAAI,MACA,KAAA3B,aAAAu7B,EAAA,SACA,YAEAliC,EAAAC,EAAA8b,iBAAApV,EAAAw7B,EAAA,SAEA,IAAA1pC,EAAAkO,EAAAK,YACAvO,aAAAk9B,IACAl9B,IAAAuO,aAGAhH,EAAAC,EAAA8b,iBAAAtjB,EAAA+7B,EAAA,SACAx0B,EAAAC,EAAAC,OAAAvH,KAAA4S,MAEA,MAAAA,EAAA5S,KAAA4S,KACA81B,KACAnP,EAAAv5B,KAAAkpC,UAAAV,sBAAAx6B,EAAA4E,EACA81B,GACAe,EAAAlQ,EAAAoE,mBACAJ,EAAAhE,EAAAgE,cAEAhuB,EAAAI,OAAAC,OAAAL,EAAAM,SAAAnM,QAAAs3B,IACAuC,EAAA5sB,KAAArP,EAAA,QAAAqW,OAAAqjB,EAAA,sBACAh7B,KAAAqpC,sBAAA95B,EAAAk6B,QAGAzpC,KAAAqpC,sBAAA95B,EAAAk6B,GAEA,MAAAC,EAAA,SAAAhrB,GACArX,EAAAC,EAAAC,OACAyG,aAAAu7B,EAAA,SACAv7B,aAAA27B,EAAA,SAEA,MAAAlM,EAAAlE,EAAAkE,QACAoL,EAAA7oC,KAAAkpC,UAAAJ,QAAA96B,EAAA4E,EAAA8L,EAAA+e,GACAoL,IACAH,EAAA10B,EAAA,QAAA8K,OAAAJ,IAAAmqB,EACAY,EAAAr/B,IAAAy+B,KAEGvqB,KAAAte,MAEH4pC,EAAA,SAAAlrB,GACA,MAAA1X,EAAA0X,EAAAqd,cACA5e,EAAAnJ,EAAA,QAAA8K,OAAAJ,GACA,IAAA1X,GAAA,SAAAA,EAAAo6B,UAAA,CACA,MAAA3D,EAAAlE,EAAAkE,QACAyD,EAAAzD,EAAAC,mBAAAvgB,UACAsgB,EAAAC,mBAAAvgB,GACA+jB,aAAAtgC,OAAAipC,WACApM,EAAAN,WAAAtC,OAAAqG,GAGA,MAAAoI,EAAAZ,EAAAvrB,UACAurB,EAAAvrB,GACAmsB,GACAG,EAAA5O,OAAAyO,IAEGhrB,KAAAte,MAmBH,OAjBAu9B,EAAA5sB,KAAArP,EAAA,QAAAqW,OAAA7X,EAAA,aAAA2B,IACA4F,EAAAC,EAAAC,OAAA9F,EAAAid,SACAgrB,EAAAjoC,EAAAid,UACG1e,OAEHu9B,EAAA5sB,KAAArP,EAAA,QAAAqW,OAAA7X,EAAA,gBAAA2B,IACA4F,EAAAC,EAAAC,OAAA9F,EAAAid,SACAkrB,EAAAnoC,EAAAid,UACG1e,OAEHu9B,EAAA5sB,KAAArP,EAAA,QAAAqW,OAAA7X,EAAA,gBAAA2B,IACA,MAAAid,EAAAjd,EAAAid,QACArX,EAAAC,EAAAC,OAAAmX,GACAkrB,EAAAlrB,GACAgrB,EAAAhrB,IACG1e,OAEHu5B,MAAA,MAEA,IAAAuQ,EAAA,mBCxKA,MAAAC,EAAA,SAAA9hC,GAKAjI,KAAAgqC,gCAAA,KAMAhqC,KAAA2vB,OAAA1nB,EAAA7C,MAMApF,KAAAiqC,cAAAhiC,EAAAiiC,aAMAlqC,KAAAmqC,QAAAliC,EAAAmqB,OAMApyB,KAAAoqC,oBAAA5iC,EAMAxH,KAAAqqC,UAAA,IAAAC,iBAAAtqC,KAAAuqC,qBAAAjsB,KAAAte,OAKAA,KAAAwqC,sBAMAxqC,KAAAilB,iBAEAjlB,KAAAilB,cAAAtU,KAAA3Q,KAAAmqC,QAAA9oC,GAAA,kBAAArB,KAAAyqC,sBAAAnsB,KAAAte,QACAA,KAAAilB,cAAAtU,KAAA3Q,KAAAmqC,QAAA9oC,GAAA,iBAAArB,KAAAyqC,sBAAAnsB,KAAAte,QACAA,KAAAilB,cAAAtU,KAAA3Q,KAAAmqC,QAAA9oC,GAAA,gBAAArB,KAAAyqC,sBAAAnsB,KAAAte,QACAA,KAAAilB,cAAAtU,KAAA3Q,KAAAmqC,QAAA9oC,GAAA,kBAAArB,KAAAyqC,sBAAAnsB,KAAAte,QACAA,KAAAilB,cAAAtU,KAAA3Q,KAAAmqC,QAAA9oC,GAAA,qBAAArB,KAAAyqC,sBAAAnsB,KAAAte,QAEA0qC,EAAA,QAAA5lC,KAAA9E,UAAAmqC,QAAAQ,cACA3qC,KAAAgR,cAAAhR,KAAAmqC,QAAAp5B,iBAEA/Q,KAAA4qC,oBAGA52B,EAAA,QAAAqF,SAAA0wB,EAAAW,EAAA,SAMAX,EAAAloC,UAAAgpC,eAAA,SAAAxlC,GACArF,KAAAqqC,UAAAS,aACA9qC,KAAAqqC,UAAAU,QAAA1lC,GACA4X,YAAA,EACA+tB,WAAA,EACAC,eAAA,EACAC,SAAA,IAEAlrC,KAAAwqC,mBAAA9mC,QAAAynC,IACAA,EAAAL,eAEA9qC,KAAAwqC,mBAAA1mC,OAAA,EACA,QAAA2D,EAAA,EAAiBA,EAAApC,EAAA+lC,WAAAtnC,OAA8B2D,IAAA,CAC/C,MAAA4jC,EAAAhmC,EAAA+lC,WAAA3jC,GACA,OAAA4jC,EAAAlqB,SAAA,CACA,MAAAgqB,EAAA,IAAAb,iBAAAtqC,KAAAuqC,qBAAAjsB,KAAAte,OACAmrC,EAAAJ,QAAAM,GACApuB,YAAA,EACAiuB,SAAA,IAEAlrC,KAAAwqC,mBAAA75B,KAAAw6B,MAUApB,EAAAloC,UAAA4oC,sBAAA,SAAA9nB,GACAA,EAAAtd,QAAAsd,EAAAzG,KACAlc,KAAA4d,IAAA+E,EAAAzG,IAAAyG,EAAAtd,OAAA5E,IAAAkiB,EAAAzG,OASA6tB,EAAAloC,UAAAypC,SAAA,WACA,OAAAtrC,KAAA2vB,QAQAoa,EAAAloC,UAAA+oC,iBAAA,WACA5qC,KAAAgqC,kCACAhqC,KAAAgqC,kCACA5oB,EAAA,QAAAmqB,WAAAvrC,KAAA+jB,UAEA/jB,KAAAgqC,gCAAA,KACA,MAAA5kC,EAAApF,KAAAsrC,WACA,GAAAlmC,EAAA,CACApF,KAAAgqC,gCAAA5kC,EAAAgrB,WAAAC,iBAAArwB,KAAAwrC,oBAAAltB,KAAAte,OACAA,KAAAwrC,sBACA,MAAAC,EAAAzrC,KAAA0rC,UACA1rC,KAAAiqC,cAAA0B,+BAAA3rC,KAAAiqC,cAAA2B,sBACA5rC,KAAA6rC,YACAJ,EAAAK,aAAA9rC,KAAA+jB,QAAA0nB,EAAAL,WAAA,UAEAK,EAAA1c,YAAA/uB,KAAA+jB,WAQAgmB,EAAAloC,UAAAkqC,sBAAA,WAEA,MAAAlmC,EAAA7F,KAAA41B,cACA,GAAA/vB,EAAA,CACA,MAAAmmC,EAAAhsC,KAAAmqC,QAAA8B,SAAAv5B,UAAA1P,gBACAhD,KAAAoqC,eAAAnnC,EAAA,QAAAoD,UAAAR,EAAAmmC,EAAA,kBAEAhsC,KAAAoqC,oBAAA5iC,EAEAxH,KAAAwrC,uBAMAzB,EAAAloC,UAAA0oC,qBAAA,WACA,SAAA2B,EAAAb,EAAAjZ,GACA,MAAArpB,EAAAsiC,EAAAa,YACA9Z,GACAA,EAAArD,YAAAhmB,GAEAsiC,EAAAlqB,UAAAgrB,KAAAC,WACArjC,EAAAsnB,iBAAA,QAAA1N,IACA0oB,EAAAvoB,cAAA,IAAAupB,WAAA,QAAA1pB,IACAA,EAAA2pB,oBAGA,MAAAC,EAAAlB,EAAAD,WACA,QAAA3jC,EAAA,EAAmBA,EAAA8kC,EAAAzoC,OAAkB2D,IACrC8kC,EAAA9kC,IAGAykC,EAAAK,EAAA9kC,GAAAsB,GAEA,OAAAA,EAEAqY,EAAA,QAAAorB,eAAAxsC,KAAA+jB,SACA,MAAAA,EAAA/jB,KAAAysC,aACA,GAAA1oB,GACAA,EAAA2oB,YAAA3oB,EAAA2oB,WAAAtB,WACA,UAAAC,KAAAtnB,EAAA2oB,WAAAtB,WAAA,CACA,MAAAuB,EAAAT,EAAAb,EAAA,MACArrC,KAAA+jB,QAAAgL,YAAA4d,GAIA5oB,EAAA2oB,YAEA1sC,KAAA6qC,eAAA9mB,EAAA2oB,aAQA3C,EAAAloC,UAAA2pC,oBAAA,WACA,MAAA3lC,EAAA7F,KAAAoqC,eACA,IAAApqC,KAAA2vB,SAAA9pB,EAEA,YADA7F,KAAA4sC,YAAA,GAGA,IAAAC,EAEAA,EADA,IAAAhnC,EAAA/B,OACAlD,OAAA8E,WAAAonC,iBAAAjnC,GAAA,GAEAjF,OAAA8E,WAAAqnC,wBAAAlnC,GAAA,GAEA,MAAAP,EAAAtF,KAAA2vB,OAAArqB,OACA0nC,EAAA,IAAApsC,OAAAqsC,eAAA,IAAArsC,OAAA8E,WAAA,SAGA,IAFA,IAAA9E,OAAAssC,SAAAF,EAAA1nC,EAAAO,UAEAsnC,eAAAN,GAEA,YADA7sC,KAAA4sC,YAAA,GAKA,OAFAtnC,EAAAE,QAAA4nC,qBAAA9nC,EAAAO,SAAAP,EAAA6F,UAAA7F,EAAAiI,IAEA8/B,kBAAA,IAAAzsC,OAAAqsC,eAAAJ,IAEA,YADA7sC,KAAA4sC,YAAA,GAGA5sC,KAAA4sC,YAAA,GAEA,MAAAU,EAAAttC,KAAA2vB,OAAA4d,6BAAAV,GACAtiC,GAAA+iC,EAAAjpC,EAAAipC,EAAAhpC,GACAkpC,GAAAxtC,KAAA2vB,OAAApqB,OAAApE,MAAAnB,KAAA2vB,OAAApqB,OAAAnE,QACApB,KAAAytC,uBAAAljC,EAAAijC,IAOAzD,EAAAloC,UAAAy4B,QAAA,WACAt6B,KAAAgqC,iCACAhqC,KAAAgqC,kCAEAhqC,KAAAqqC,WACArqC,KAAAqqC,UAAAS,aAEAxW,EAAA,QAAA/O,QAAAvlB,KAAAilB,eACAjlB,KAAAilB,cAAAyT,OAAA,GACA14B,KAAA+jB,QAAAwnB,WACAvrC,KAAA+jB,QAAAwnB,YAAA,GAEAvrC,KAAA+jB,QAAA8W,SAEA76B,KAAA+jB,QAAA,MAEA,IAAA2pB,EAAA,EC3PA,MAAAC,EAAA,SAAAt7B,EAAAjN,GAKApF,KAAAqS,MAMArS,KAAA4tC,UAAA5tC,KAAAqS,IAAAw7B,cAMA7tC,KAAAoF,QAMApF,KAAA8tC,2BAAA7sC,SAAAC,cAAA,OACAlB,KAAA8tC,2BAAAC,UAAA,iCAEAzsC,EAAA,QAAAC,UAAAysC,MACA1sC,EAAA,QAAAC,UAAA0sC,SACA3sC,EAAA,QAAAC,UAAA2sC,UACA5sC,EAAA,QAAAC,UAAA4sC,WACA7sC,EAAA,QAAAC,UAAA6sC,cACAp6B,EAAA,QAAAq6B,oBAAAC,YACAhtC,EAAA,QAAAC,UAAAgtC,WACAjtC,EAAA,QAAAC,UAAAitC,OAEA9qC,QAAAif,IACArhB,EAAA,QAAAqW,OAAA3X,KAAA8tC,2BAAAnrB,EAAArhB,EAAA,QAAAP,MAAAurC,mBAEAtsC,KAAAoF,MAAAG,OAAAkpC,cAAA1f,YAAA/uB,KAAA8tC,4BAMA9tC,KAAA0uC,kBAAAztC,SAAAC,cAAA,OACAlB,KAAA0uC,kBAAAX,UAAA,sBACA/tC,KAAAoF,MAAAG,OAAAkpC,cAAA1f,YAAA/uB,KAAA0uC,mBAOA1uC,KAAA2uC,gBAYAhB,EAAA9rC,UAAA8pC,6BAAA,WACA,OAAA3rC,KAAA8tC,4BAOAH,EAAA9rC,UAAA+pC,oBAAA,WACA,OAAA5rC,KAAA0uC,mBAOAf,EAAA9rC,UAAAu2B,YAAA,WACAp4B,KAAAq4B,aACAr4B,KAAA4uC,cACA5uC,KAAA4tC,UAAAvsC,GAAA,MAAArB,KAAA6uC,qBAAAvwB,KAAAte,OACAA,KAAA4tC,UAAAvsC,GAAA,SAAArB,KAAA8uC,wBAAAxwB,KAAAte,QAOA2tC,EAAA9rC,UAAAgtC,qBAAA,SAAAlsB,GACA,MAAAosB,EAAwCpsB,EAAA,QACxC3iB,KAAAgvC,WAAAD,IAMApB,EAAA9rC,UAAA+sC,YAAA,WACA5uC,KAAA4tC,UAAAlqC,QAAA1D,KAAAgvC,WAAAhvC,OAOA2tC,EAAA9rC,UAAAmtC,WAAA,SAAAD,GACA,IAAAA,EACA,OAEA,MAAAE,EAAA,IAAAvB,GACAtoC,MAAApF,KAAAoF,MACA8kC,aAAAlqC,KACAoyB,OAAA2c,IAGAG,EAAAl7B,EAAA,QAAA8K,OAAAiwB,GAAAhwB,WACA/e,KAAA2uC,YAAAO,GAAAD,GAOAtB,EAAA9rC,UAAAitC,wBAAA,SAAAnsB,GACA,MAAAwsB,EAA+CxsB,EAAA,QAC/C3iB,KAAAovC,cAAAD,IAQAxB,EAAA9rC,UAAAutC,cAAA,SAAAL,GACA,MAAAG,EAAAl7B,EAAA,QAAA8K,OAAAiwB,GAAAhwB,WACAswB,EAAArvC,KAAA2uC,YAAAO,GACAG,IACAA,EAAA/U,iBACAt6B,KAAA2uC,YAAAO,KAQAvB,EAAA9rC,UAAAw2B,WAAA,WACA12B,OAAA6mB,KAAAxoB,KAAA2uC,aAAAjrC,QAAAwY,IACAlc,KAAA2uC,YAAAzyB,GACAoe,iBACAt6B,KAAA2uC,YAAAzyB,MAKA,IAAAozB,EAAA,ECrJA,MAAAC,EAAA,SAAAtnC,GAMAjI,KAAAwvC,gBAAA,KAMAxvC,KAAAglB,KAAA/c,EAAAoK,IAMArS,KAAAyvC,MAAAxnC,EAAAynC,MAAA,WACA,OAAA9uC,OAAA+uC,WAAAhnC,OAOA3I,KAAA4vC,iBAAA3sC,EAAA,QAAAuxB,aAAAx0B,KAAAglB,KAAAtS,UAAA1P,gBAAA,aAMAhD,KAAA6vC,iBAAA,EAMA7vC,KAAA8vC,mBAAA,EAMA9vC,KAAA+vC,oBAAA,EAMA/vC,KAAAgwC,yBAAA,EAEA,MAAAC,EAAA,yDAMAjwC,KAAAkwC,WAAAjvC,SAAAC,cAAA,OACA,MAAAivC,EAAAlvC,SAAAmvC,gBAAA,SACAD,EAAAxwC,SAAgCswC,sBAChCjwC,KAAAkwC,WAAAG,iBAAAF,GAEA,IAAAG,EAAAroC,EAAA5C,QAAA,KACA,GAAAirC,EACA,iBAAAA,IACAA,EAAArvC,SAAAsvC,eAAAD,IAEAA,EAAAvhB,YAAA/uB,KAAAkwC,gBACG,CACH,MAAAM,EAAAxwC,KAAAglB,KAAAyrB,cAAAC,cAAA,wBACAF,KAAA9D,YACA8D,EAAA9D,WAAAZ,aAAA9rC,KAAAkwC,WAAAM,GAYA,GAHAxwC,KAAA2wC,YAAAL,EAGAtwC,KAAA2wC,YAAA1oC,EAAA2oC,gCAAA,CACA,MAAAC,GACAvvC,EAAA,QAAAC,UAAAysC,MACA1sC,EAAA,QAAAC,UAAA0sC,SACA3sC,EAAA,QAAAC,UAAA2sC,UACA5sC,EAAA,QAAAC,UAAA4sC,WACA7sC,EAAA,QAAAC,UAAA6sC,cACAC,EAAA,EAAAC,YACAhtC,EAAA,QAAAC,UAAAgtC,WACAjtC,EAAA,QAAAC,UAAAitC,OAEA,QAAA/mC,EAAA,EAAA80B,EAAAsU,EAAA/sC,OAA8C2D,EAAA80B,IAAQ90B,EACtDnG,EAAA,QAAAqW,OAAA3X,KAAAkwC,WAAAW,EAAAppC,GAAAnG,EAAA,QAAAP,MAAAurC,iBASAtsC,KAAA4vB,QAA+C3uB,SAAAC,cAAA,UAC/C,MAAA4vC,EAAA7vC,SAAAmvC,gBAAA,SACAU,EAAAnxC,MAAAswC,EACAjwC,KAAA4vB,QAAAygB,iBAAAS,GAEAvhB,EAAAH,oCAEApvB,KAAA4vB,QAAAxR,MAAA,eAAAmR,EAAAD,uBAGAtvB,KAAA4vB,QAAAmhB,cAAA,WAA2C,UAC3C/wC,KAAA4vB,QAAAohB,cAAA,WAA2C,UAE3ChxC,KAAAkwC,WAAAnhB,YAAA/uB,KAAA4vB,SAMA5vB,KAAAixC,UAAA,EAMAjxC,KAAAkxC,uBAMAlxC,KAAAmxC,iBAAA,KAEA,MAAAC,OAAA5pC,IAAAS,EAAAmpC,aAAAnpC,EAAAmpC,gBAEAA,EAAA7rC,OAAAvF,KAAA4vB,QACAwhB,EAAAC,aAAA,EAMArxC,KAAA2vB,OAAA,IAAA/uB,OAAA0wC,MAAAF,GAEA,MAAAG,EAAAvxC,KAAA2vB,OAAA6hB,4BAEAD,EAAAE,eAAA9gC,MACA+gC,UAAA9wC,OAAA+wC,gBAAAC,UACAC,SAAAjxC,OAAAkxC,sBAAAC,QAGAR,EAAAE,eAAA9gC,MACA+gC,UAAA9wC,OAAA+wC,gBAAAC,UACAC,SAAAjxC,OAAAkxC,sBAAAE,MAGAT,EAAAU,YAAA,EAEAjyC,KAAA2vB,OAAArqB,OAAA4sC,gBAAAtxC,OAAA8E,WAAAysC,OAMAnyC,KAAAoyC,QAAA,IAAA5hB,EAAAxwB,KAAA2vB,OAAA3vB,KAAAglB,MAMAhlB,KAAAqyC,OAAA,IAAAzxC,OAAA0xC,MAAA1xC,OAAAgG,UAAAC,OACA7G,KAAAqyC,OAAAE,UAAA3xC,OAAAyQ,MAAAmhC,MACAxyC,KAAA2vB,OAAAjlB,MAAA1K,KAAAqyC,OACAryC,KAAA2vB,OAAA8iB,cAAA,IAAA7xC,OAAA8xC,cAIA,MAAAC,EAAA,IAAA/xC,OAAAgyC,2BACA/tC,IAAA,qHACA9C,UAAAnB,OAAAiN,UAAAC,YAAA,WAEA9N,KAAAqyC,OAAA3X,cAAAmY,mBAAAF,EAAA,GAEA3yC,KAAA8yC,sBAAA,IAAAlyC,OAAAmyC,qBACA/yC,KAAAgzC,mBAAA,IAAApyC,OAAAqyC,mBACA7tC,MAAApF,KAAA2vB,OACAujB,qBAAAlzC,KAAA8yC,wBAGA,MAAAK,EAAAlrC,EAAAmrC,oBACAnrC,EAAAmrC,oBAAApzC,KAAAglB,KAAAhlB,KAAA2vB,OAAA3vB,KAAA8yC,wBACA,IAAAnX,EAAA37B,KAAAglB,KAAAhlB,KAAA2vB,QACA,IAAAma,EAAA9pC,KAAAglB,KAAAhlB,KAAA2vB,QACA,IAAA2f,EAAAtvC,KAAAglB,KAAAhlB,KAAA2vB,SAIA3vB,KAAAqzC,gBAEA,QAAA5rC,EAAA0rC,EAAArvC,OAAA,EAAwC2D,GAAA,IAAQA,EAChD0rC,EAAA1rC,GAAA2wB,cAGA,GAAAp4B,KAAA2wC,WAAA,CAEA,MAAA2C,EAAAtzC,KAAA4vB,QAAA2jB,mBACAD,IACAA,EAAAl1B,MAAAo1B,QAAA,QASAxzC,KAAAyzC,eAAA,EAOAzzC,KAAA0zC,eAAAlsC,EAOAxH,KAAA2zC,iBAAAjrB,OAAAkrB,kBAOA5zC,KAAA6zC,uBAAA,EAOA7zC,KAAA8zC,YAAA,EAMA9zC,KAAA+zC,gBAAA,KAMA/zC,KAAAg0C,eAAA,KAMAh0C,KAAAi0C,YAAA,KAMAj0C,KAAAk0C,0BAAA,EAKAl0C,KAAAm0C,uBAAA,IAAAvzC,OAAAqsC,gBAEA,IAAArsC,OAAAwzC,aACAhqC,IAAApK,KAAA2vB,OAAAS,WAAAmf,EAAA1tC,UAAAwyC,qBAAAr0C,MAQAY,OAAA4vB,OAAA8jB,gCAAA,GAIA3yC,OAAAC,iBAAA2tC,EAAA1tC,WACA0yC,gBACA9zC,IAAoC,WACpC,OAAAT,KAAA+zC,iBAEAn2B,IAAoC,SAAAc,GACpC,GAAA1e,KAAA+zC,kBAAAr1B,EAAA,CAEA,MAAAtZ,EAAApF,KAAA2vB,OAGA,IAAAjR,MAAAqd,cAWA,OAVA/7B,KAAAk0C,0BAAA,EACA9uC,EAAAosC,4BAAAgD,YAAA,EAEAx0C,KAAAg0C,gBACAh0C,KAAAgzC,mBAAAyB,kBAAAC,SAAA7Z,OAAA76B,KAAAg0C,gBAEAh0C,KAAAg0C,eAAA,KACAh0C,KAAA+zC,gBAAA,KACA/zC,KAAAi0C,YAAA,UACA7uC,EAAAE,OAAA2D,gBAAArI,OAAA6F,QAAAkuC,UAIA30C,KAAA+zC,gBAAAr1B,EAIA1e,KAAAk0C,0BAAA,EAEA,MAAAU,EAAA50C,KAAA4vC,iBACAiF,EAAA,WACA,MAAA7tC,EAAA0X,EAAAqd,cACA10B,EAAAC,EAAA8b,iBAAApc,EAAAg1B,EAAA,SACA,MAAA1rB,EAAAtJ,EAAAw1B,iBACAsY,EAAAF,EAAAtkC,OAAA9I,EAAA8I,EAAAxM,QACA,OAAAsyB,EAAA,QAAAhmB,kCAAA0kC,IAKA7sC,GACApC,SAAA,IAAAjF,OAAAm0C,iBAAA,CAAArF,EAAA5d,IAAA+iB,KAAA,GACAxT,OACAv7B,UAAA,EACA04B,MAAA59B,OAAAyQ,MAAAqF,cAIA1W,KAAAg0C,eAAAh0C,KAAAgzC,mBAAAyB,kBAAAC,SAAAtqC,IAAAnC,QAWAsnC,EAAA1tC,UAAAmzC,QAAA,gBAEAxtC,IAAAxH,KAAA0zC,YACA5rB,qBAAA9nB,KAAA0zC,WACA1zC,KAAA0zC,eAAAlsC,IAIAxH,KAAAixC,WAAAjxC,KAAA8zC,YAAA9zC,KAAA6zC,wBACA7zC,KAAA0zC,UAAAtqC,sBAAApJ,KAAAi1C,kBAAA32B,KAAAte,SAUAuvC,EAAA1tC,UAAAozC,kBAAA,SAAAC,GACAl1C,KAAA0zC,eAAAlsC,EAGA,MAAA2tC,EAAA,IAAAn1C,KAAA2zC,iBAEA,GADAuB,EAAAl1C,KAAAyzC,eACA0B,EAGA,YADAn1C,KAAAg1C,UAKAh1C,KAAAyzC,eAAAyB,EAEA,MAAAE,EAAAp1C,KAAAyvC,QAMA,GALAzvC,KAAA2vB,OAAA0lB,kBACAr1C,KAAAqzC,gBACArzC,KAAAgzC,mBAAAsC,OAAAF,GAGAp1C,KAAAi0C,YAAA,CACA,MAAAsB,EAAAv1C,KAAAg0C,eACAh0C,KAAAgzC,mBAAAwC,kBAAAD,GAAA,EAAAv1C,KAAAm0C,0BACAvzC,OAAA60C,oBAAAC,OACA11C,KAAAm0C,uBAAA5S,OAAA,EACAvhC,KAAAi0C,YAAAqB,OAAAF,EAAAp1C,KAAAm0C,yBAIAn0C,KAAA2vB,OAAAgmB,OAAAP,GACAp1C,KAAAoyC,QAAAxb,oBAGA52B,KAAAg1C,WAOAzF,EAAA1tC,UAAAwyC,qBAAA,WACA,IAAAr0C,KAAAk0C,yBACA,OAGA,MAAAqB,EAAAv1C,KAAAg0C,eACA5uC,EAAApF,KAAA2vB,OAEA7b,EAAA9T,KAAAgzC,mBAAAwC,kBAAAD,GAAA,EAAAv1C,KAAAm0C,wBACA,GAAArgC,IAAAlT,OAAA60C,oBAAAG,QACA,OAGAxwC,EAAAosC,4BAAAgD,YAAA,EAEA,MAAAqB,EAAA/hC,IAAAlT,OAAA60C,oBAAAK,OAAA91C,KAAAm0C,4BAAA3sC,EACAquC,IACAA,EAAAtU,OAAA,GAEAvhC,KAAAi0C,YAAA,IAAArzC,OAAAm1C,WAAAR,EAAAnwC,IAAA4wC,cAAA5qC,WACApL,KAAAi0C,YAAAqB,OAAAt1C,KAAAyvC,QAAAoG,GACA71C,KAAAk0C,0BAAA,GAOA3E,EAAA1tC,UAAAwxC,cAAA,WACA,IAAAlyC,EAAAnB,KAAA4vB,QAAA3pB,YACA7E,EAAApB,KAAA4vB,QAAA1pB,aAEA,OAAA/E,EAAA,IAAAC,EAEA,OAGA,GAAAD,IAAAnB,KAAA8vC,oBACA1uC,IAAApB,KAAA+vC,sBACA/vC,KAAAgwC,wBACA,OAGA,IAAAiG,EAAAj2C,KAAA6vC,iBACAtgB,EAAAH,oCACA6mB,GAAA9sC,OAAA+sC,kBAAA,GAEAl2C,KAAAgwC,yBAAA,EAEAhwC,KAAA8vC,mBAAA3uC,EACAnB,KAAA+vC,oBAAA3uC,EAEAD,GAAA80C,EACA70C,GAAA60C,EAEAj2C,KAAA4vB,QAAAzuB,QACAnB,KAAA4vB,QAAAxuB,SACApB,KAAA2vB,OAAArqB,OAAAE,QAAA2wC,YAAAh1C,EAAAC,GAQAmuC,EAAA1tC,UAAAu0C,UAAA,WACA,OAAAp2C,KAAAoyC,SAQA7C,EAAA1tC,UAAA0wB,SAAA,WACA,OAAAvyB,KAAAglB,MAOAuqB,EAAA1tC,UAAAiqB,UAAA,WACA,MAAAlZ,EAAA5S,KAAAglB,KAAAtS,UAEA,OADArL,EAAAC,EAAAC,OAAAqL,GACAA,GAOA28B,EAAA1tC,UAAAyrB,eAAA,WACA,OAAAttB,KAAA2vB,QAQA4f,EAAA1tC,UAAAw0C,eAAA,WACA,OAAAr2C,KAAA8yC,uBAQAvD,EAAA1tC,UAAAy0C,qBAAA,WACA,OAAAt2C,KAAAgzC,oBAQAzD,EAAA1tC,UAAA00C,WAAA,WACA,OAAAv2C,KAAAixC,UAUA1B,EAAA1tC,UAAA20C,WAAA,SAAAvlB,GACA,GAAAjxB,KAAAixC,WAAAhgB,EACA,OAOA,IAAAwlB,EACA,GANAz2C,KAAAixC,SAAAhgB,EAIAjxB,KAAAkwC,WAAA9xB,MAAAs4B,WAAA12C,KAAAixC,SAAA,mBAEAjxC,KAAAixC,SAAA,CAEA,GADAjxC,KAAA22C,yBACA32C,KAAA2wC,WAAA,EACA8F,EAAAz2C,KAAAglB,KAAA4xB,mBACAlzC,QAAA,SAAAC,EAAA8D,EAAAovC,GACA72C,KAAAkxC,oBAAAvgC,KAAAhN,IACO3D,MACPy2C,EAAAv3B,QAEA,MAAA43B,EAAA92C,KAAAglB,KAAAwN,gBACAskB,EAAA7mC,eACAjQ,KAAAmxC,iBAAA2F,EACA92C,KAAAmxC,iBAAAvE,YAAA,IAGA5sC,KAAAglB,KAAA4mB,sBAAAmL,UAAA3sC,IAAA,oBACApK,KAAAglB,KAAA2mB,+BAAAoL,UAAA3sC,IAAA,oBAGApK,KAAAoyC,QAAAzd,eACA30B,KAAAg1C,eAEAh1C,KAAA2wC,aACA8F,EAAAz2C,KAAAglB,KAAA4xB,kBACA52C,KAAAkxC,oBAAAxtC,QAAAszC,IACAP,EAAA9lC,KAAAqmC,KAEAh3C,KAAAkxC,oBAAAptC,OAAA,EACA9D,KAAAglB,KAAA4mB,sBAAAmL,UAAAlc,OAAA,oBACA76B,KAAAglB,KAAA2mB,+BAAAoL,UAAAlc,OAAA,oBACA76B,KAAAmxC,mBACAnxC,KAAAmxC,iBAAAvE,YAAA,GACA5sC,KAAAmxC,iBAAA,OAIAnxC,KAAAoyC,QAAAld,cAWAqa,EAAA1tC,UAAAo1C,OAAA,SAAA71C,EAAAuwB,GACA,GAAA3xB,KAAAixC,SAEA,OAEAjxC,KAAA22C,yBACA32C,KAAAoyC,QAAAzd,eACA,MAAAvpB,EAAApL,KAAAqyC,OAAAjnC,UACA8rC,EAAAl3C,KAAA2vB,OAAArqB,OACAO,EAAAuF,EAAAyqB,wBAAAqhB,EAAArxC,UACAA,EAAAzE,WACAyE,EAAAzE,SACA81C,EAAArxC,SAAAuF,EAAAkC,wBAAAzH,IAGA7F,KAAA8zC,YAAA,EACA9zC,KAAAg1C,UAEAmC,WAAA,KACAn3C,KAAA8zC,YAAA,GACGniB,IASH4d,EAAA1tC,UAAAuxB,wBAAA,SAAAgkB,GACAp3C,KAAA6zC,wBAAAuD,IACAp3C,KAAA6zC,sBAAAuD,EAGAp3C,KAAAg1C,YAUAzF,EAAA1tC,UAAAw1C,qBAAA,WACAr3C,KAAAwvC,kBACAxvC,KAAAwvC,gBAAA,IAAAjc,EAAAvzB,MAAA,KAUAuvC,EAAA1tC,UAAAy1C,kBAAA,WACA,OAAAt3C,KAAAwvC,iBAqBAD,EAAA1tC,UAAA01C,mBAAA,SAAA53C,IACAA,EAAAoI,KAAAy6B,IAAA,EAAA7iC,MACAK,KAAA6vC,mBACA7vC,KAAA6vC,iBAAA9nC,KAAAy6B,IAAA,EAAA7iC,GACAK,KAAAgwC,yBAAA,EACAhwC,KAAAwvC,iBACAxvC,KAAAwvC,gBAAAnc,sBAYAkc,EAAA1tC,UAAA21C,mBAAA,SAAA73C,GACAK,KAAA2zC,mBAAAh0C,IACAK,KAAA2zC,iBAAAh0C,EAGAK,KAAAg1C,YASAzF,EAAA1tC,UAAA80C,uBAAA,WACA,MACA/jC,EADA5S,KAAAglB,KACAtS,UACA1H,EAAA4H,EAAAyiB,YACA,IAAAziB,EAAA6kC,SAAAlgB,MAAAvsB,EAAA,KAAAusB,MAAAvsB,EAAA,IACA,UAAAu9B,yDAAuEv9B,OAAY4H,EAAAI,oBAInF,IAAA0kC,EAAA,ECvVAx4C,EAAA,sBA/XAo1B,EAAA,QAMA5F,YAAAipB,GAAAtlC,IAA0BA,EAAAulC,6BAE1BC,QAMA73C,KAAA83C,WAAAH,EAMA33C,KAAAqS,MAMArS,KAAA43C,yBAAA,KAMA53C,KAAA+3C,gBAMA/3C,KAAAg4C,eAAA,EAMAh4C,KAAAi4C,SAMAj4C,KAAAyvB,KAOAzvB,KAAAk4C,mBAAAxiB,EAAA,QAAAvI,UAAA,IAMAntB,KAAAm4C,WAAA,KAMAn4C,KAAAo4C,aAAA,GAOAp4C,KAAAq4C,oBAAA,EAOAr4C,KAAAs4C,oBAAA,IAOAt4C,KAAAu4C,iCAAAn3C,MAAA,SAOAstB,OACA,IAAA1uB,KAAAi4C,SAAA,CACA,MAAAO,EAAA,IAAA/pB,EAAAzuB,KAAA83C,YACA93C,KAAAi4C,SAAAO,EAAA/jC,OAAA8Z,KAAA,IAAAvuB,KAAAy4C,kBAEA,OAAAz4C,KAAAi4C,SAQAvpB,iBACA,GAAA1uB,KAAA43C,sBAAA,CACA,MAAAc,EAAA,IAAA93C,OAAAiN,aAAA7N,KAAA43C,uBAEAh3C,OAAA4vB,OAAAmoB,uBAAAD,EACA14C,KAAA+3C,gBAAAn3C,OAAAqsC,eAAA2L,gBAAAF,EAAA93C,OAAAgG,UAAAC,MAAA,KAGA7G,KAAAyvB,KAAAzvB,KAAA64C,sBACA,MAAAzzC,EAAApF,KAAAyvB,KAAAnC,iBAIA,OAHAttB,KAAA84C,sBAAA1zC,GACApF,KAAA+4C,wBAAA3zC,GACApF,KAAA8iB,cAAA,QACA9iB,KAAAyvB,KAQAf,sBACArnB,EAAAC,EAAAC,OAAAvH,KAAAqS,KACA,MAAAod,EAAA,IAAAioB,GAAmCrlC,IAAArS,KAAAqS,MACnCjN,EAAAqqB,EAAAnC,iBACA0rB,EAAA,IAAAp4C,OAAAq4C,uBACAp0C,IAAA,uCAGA,OADAO,EAAA4zC,kBACAvpB,EAQAf,wBAAAtpB,GACA,MAAA8zC,EAAA9zC,EAAA8zC,IACAA,EAAAra,SAAA,EACAqa,EAAAC,QAAAn5C,KAAAm4C,WACAe,EAAAE,uBAAAp5C,KAAAo4C,aAQA1pB,sBAAAtpB,GACA,MAAAi0C,EAAAj0C,EAAAosC,4BACA6H,EAAAhB,oBAAAr4C,KAAAq4C,oBACAgB,EAAAf,oBAAAt4C,KAAAs4C,oBAIAlzC,EAAAsF,MAAA4uC,yBAAA,EAGAl0C,EAAAsF,MAAA6nC,UAAA3xC,OAAAyQ,MAAAmhC,MACAptC,EAAAm0C,gBAAA34C,OAAAyQ,MAAAmhC,MAEAxyC,KAAA+3C,iBACA3yC,EAAAgrB,WAAAC,iBAAArwB,KAAAw5C,4BAAAl7B,KAAAte,MAAAoF,GAGApF,KAAAyvB,KAAA4nB,uBASA3oB,8BACA,GAAA1uB,KAAA+3C,kBAAA/3C,KAAAg4C,cAAA,CACA,MACA1yC,EADAtF,KAAAyvB,KAAAnC,iBACAhoB,OACAO,EAAAP,EAAAO,SACA2vB,EAAA50B,OAAA60B,aAAAgkB,cAAA5zC,GACAgQ,EAAA7V,KAAAu4C,iCAAA/iB,EAAAp0B,QACA,GAAAR,OAAA8E,WAAAD,SAAAzF,KAAA+3C,gBAAA/sC,OAAAnF,GAAA7F,KAAA+3C,gBAAAxW,OAAA1rB,EAAA,CAEA,QADAvQ,EAAAo0C,OAGA,OACS,CACT15C,KAAAg4C,eAAA,EACA,MAAA2B,EAAA,IAAA35C,KAAAg4C,eAAA,EACA1yC,EAAAs0C,oBAAA55C,KAAA+3C,iBACAhU,SAAA4V,EACAE,OAAAF,OAaAjrB,WACA,OAAA1uB,KAAAyU,OAAA8Z,KAAwDkB,IACxD,MAAAqqB,EAAArqB,EAAA8mB,aACAnxC,EAAAqqB,EAAAnC,iBACA,OAAAwsB,GAEAzyC,EAAAC,EAAAC,OAAAvH,KAAAqS,KACA+jB,EAAA,QAAAhkB,mBAAApS,KAAAqS,IAAAjN,GAAAmpB,KAAA,KACAkB,EAAA+mB,YAAA,GACAx2C,KAAA8iB,cAAA,cAIA2M,EAAA+mB,YAAA,GACAx2C,KAAA8iB,cAAA,UACAsT,EAAA,QAAAtjB,yBAAA1N,EAAApF,KAAAk4C,uBAiBAxpB,cAAAqrB,EAAAC,EAAAC,EAAAC,EAAAC,GACA,OAAAn6C,KAAAyU,OAAA8Z,KAAwDkB,IACxD,MAAAqqB,EAAArqB,EAAA8mB,aAEAjxC,EADAmqB,EAAAnC,iBACAhoB,OACA+wB,EAAAz1B,OAAA8E,WAAAoI,YAAAisC,EAAAC,EAAAC,GAIA3jB,GAA2BhtB,QAH3B1I,OAAAmH,KAAAolB,UAAA+sB,GAG2B3jB,MAF3B31B,OAAAmH,KAAAolB,UAAAgtB,GAE2B1jB,KAD3B,GAGAqjB,IACArqB,EAAA+mB,YAAA,GACAx2C,KAAA8iB,cAAA,WAGAxd,EAAAoxB,SACAL,cACAC,kBAUA5H,cACA,QAAA1uB,KAAAyvB,MAAAzvB,KAAAyvB,KAAA8mB,aAOA7nB,aACA,OAAA1uB,KAAAqS,KAAArS,KAAAqS,IAAAK,UAAAC,eAAA,EAOA+b,iBACA,MAAAtpB,EAAApF,KAAAyvB,KAAAnC,iBAEA,OADA8I,EAAA,QAAAnrB,8BAAA7F,GAQAspB,WAAA/mB,GACA,MAAAvC,EAAApF,KAAAyvB,KAAAnC,iBACAxiB,EAAAsrB,EAAA,QAAAvrB,gBAAAzF,GACA0F,GACAsrB,EAAA,QAAA/sB,4BAAAjE,EAAAuC,EAAAmD,GAQA4jB,UACA,OAAA1uB,KAAAyvB,KAOAf,YACA,MAAA9b,EAAA5S,KAAAqS,IAAAK,UAEA,OADArL,EAAAC,EAAAC,OAAAqL,GACAA,EAOA8b,sBACA,OAAA1uB,KAAAyvB,KAAAnC,iBAAAhoB,OAAAutB,WAOAnE,iBACA,OAAA1uB,KAAAyvB,KAAAnC,iBASAoB,eAAA3sB,EAAA4jC,EAAA,GACA,MAAArgC,EAAAtF,KAAAstB,iBAAAhoB,OACA+wB,EAAA/wB,EAAA80C,8BAAAr4C,GAEAs4C,EAAAz5C,OAAA8E,WAAAC,UAAA0wB,GAAAsP,EAIA,OAHA/kC,OAAA8E,WAAA6G,UAAA8pB,KACAz1B,OAAA8E,WAAA40C,iBAAAjkB,EAAAgkB,EAAAhkB,GAEA,IAAA/jB,QAAA,CAAAC,EAAAC,KACAxS,KAAA43C,sBAKAtyC,EAAAi1C,OACAlkB,cACA0N,SAAA,IAAAxxB,IACAsnC,OAAA,IAAArnC,IACAgoC,aAAA55C,OAAA6F,QAAAkuC,WARAniC,MAiBAkc,2BACA,GAAA1uB,KAAA43C,sBACA,WAAAh3C,OAAAiN,aAAA7N,KAAA43C,sHCpYA6C,EAAA1hC,EAAA,IAeA,MAAA2hC,EAAA,SAAA7yC,GAEA,MAAAI,EAAAJ,MAEA,IAAAvE,EAEAA,OADAkE,IAAAS,EAAA3E,aACA2E,EAAA3E,cAEAo3C,EAAAC,aAGA,MAAArnC,OAAA9L,IAAAS,EAAAqL,YACArL,EAAAqL,YAAA,YAEAzO,OAAA2C,IAAAS,EAAApD,IACAoD,EAAApD,IAAA,uDAEA41C,EAAA,EAAA31C,KAAA9E,MACAsD,eACAmW,UAAAxR,EAAAwR,UACAnG,cACAoG,YAAAlS,IAAAS,EAAAyR,QAAAzR,EAAAyR,OACAkhC,aAAApzC,IAAAS,EAAA2yC,QAAA3yC,EAAA2yC,QAAA,GACAjhC,2BAAA1R,EAAA0R,2BACAG,iBAAA7R,EAAA6R,iBACAjV,MACAmV,MAAA/R,EAAA+R,SAKArY,OAAAk5C,EAAA,SAAAl5C,CAAA+4C,EAAAD,EAAA,GAUAC,EAAAC,YAAA,2FAGAz7C,EAAA,8DC3DA47C,EAAA/hC,EAAA,IA6BA,MAAAgiC,EAAA,SAAAlzC,GACA,MAAAI,EAAAJ,MACA6F,OAAAlG,IAAAS,EAAAyF,WACAzF,EAAAyF,WAAA,YAEAmM,OAAArS,IAAAS,EAAA4R,SAAA5R,EAAA4R,SACAihC,EAAA,EAAAE,WACAvtC,OAAAqtC,EAAA,EAAAG,qBAAAvtC,GACAktC,QAAA3yC,EAAA2yC,QACAM,QAAAjzC,EAAAizC,QACAjgC,SAAAhT,EAAAgT,WAGAkgC,EAAA,EAAAr2C,KAAA9E,MACAsD,aAAA2E,EAAA3E,aACAmW,UAAAxR,EAAAwR,UACAnG,YAAArL,EAAAqL,YACAoG,OAAAzR,EAAAyR,OACAhM,aACAiM,2BAAA1R,EAAA0R,2BACAE,WACAC,iBAAA7R,EAAA6R,iBACAshC,eAAAnzC,EAAAmzC,eACA32C,gBAAAwD,EAAAxD,gBACAI,IAAAoD,EAAApD,IACAkV,KAAA9R,EAAA8R,KACAC,WAAAxS,IAAAS,EAAA+R,OAAA/R,EAAA+R,MACAC,WAAAhS,EAAAgS,cAKAtY,OAAAk5C,EAAA,SAAAl5C,CAAAo5C,EAAAI,EAAA,GACAj8C,EAAA","file":"simple3d.d1b21bc111530238e594.js","sourcesContent":["/**\n * @type {string} Default WMS version.\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/common.js\n// module id = 11\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/WMSServerType.js\n// module id = 12\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","const exports = {};\n\nexports.assert = function(condition, opt_message, var_args) {};\nexports.assertNumber = function(value, opt_message, var_args) {};\nexports.assertString = function(value, opt_message, var_args) {};\nexports.assertFunction = function(value, opt_message, var_args) {};\nexports.assertObject = function(value, opt_message, var_args) {};\nexports.assertArray = function(value, opt_message, var_args) {};\nexports.assertBoolean = function(value, opt_message, var_args) {};\nexports.assertElement = function(value, opt_message, var_args) {};\nexports.assertInstanceof = function(value, type, opt_message, var_args) {};\nexports.assertObjectPrototypeIsIntact = function() {};\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/goog.asserts.prod.js","/**\n * @module\n */\nimport olEvents from 'ol/events';\nimport olProj from 'ol/proj';\n\nconst exports = function(source, opt_fallbackProj) {\n  // Do not ol.inherit() or call super constructor from\n  // Cesium.ImageryProvider since this particular function is a\n  // 'non instanciable interface' which throws on instanciation.\n\n  /**\n   * @type {!ol.source.TileImage}\n   * @private\n   */\n  this.source_ = source;\n\n  /**\n   * @type {?ol.proj.Projection}\n   * @private\n   */\n  this.projection_ = null;\n\n  /**\n   * @type {?ol.proj.Projection}\n   * @private\n   */\n  this.fallbackProj_ = opt_fallbackProj || null;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.ready_ = false;\n\n  /**\n   * @type {?Cesium.Credit}\n   * @private\n   */\n  this.credit_ = null;\n\n  /**\n   * @type {?Cesium.TilingScheme}\n   * @private\n   */\n  this.tilingScheme_ = null;\n\n  /**\n   * @type {?Cesium.Rectangle}\n   * @private\n   */\n  this.rectangle_ = null;\n\n  const proxy = this.source_.get('olcs.proxy');\n  if (proxy) {\n    if (typeof proxy === 'function') {\n      this.proxy_ = {\n        'getURL': proxy\n      };\n    } else if (typeof proxy === 'string') {\n      this.proxy_ = new Cesium.DefaultProxy(proxy);\n    }\n  }\n\n  this.errorEvent_ = new Cesium.Event();\n\n  this.emptyCanvas_ = document.createElement('canvas');\n  this.emptyCanvas_.width = 1;\n  this.emptyCanvas_.height = 1;\n\n  this.source_.on(olEvents.EventType.CHANGE, function(e) {\n    this.handleSourceChanged_();\n  }, this);\n  this.handleSourceChanged_();\n};\n\n\n// definitions of getters that are required to be present\n// in the Cesium.ImageryProvider instance:\nObject.defineProperties(exports.prototype, {\n  'ready': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.ready_;}\n  },\n\n  'rectangle': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.rectangle_;}\n  },\n\n  'tileWidth': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getTileSize(0) : 256;\n        }\n  },\n\n  'tileHeight': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tileWidth;}\n  },\n\n  'maximumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getMaxZoom() : 18;\n        }\n  },\n\n  'minimumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          // WARNING: Do not use the minimum level (at least until the extent is\n          // properly set). Cesium assumes the minimumLevel to contain only\n          // a few tiles and tries to load them all at once -- this can\n          // freeze and/or crash the browser !\n          return 0;\n          //var tg = this.source_.getTileGrid();\n          //return tg ? tg.getMinZoom() : 0;\n        }\n  },\n\n  'tilingScheme': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tilingScheme_;}\n  },\n\n  'tileDiscardPolicy': {\n    'get': function() {return undefined;}\n  },\n\n  'errorEvent': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.errorEvent_;}\n  },\n\n  'credit': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.credit_;}\n  },\n\n  'proxy': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.proxy_;}\n  },\n\n  'hasAlphaChannel': {\n    'get': function() {return true;}\n  },\n\n  'pickFeatures': {\n    'get': function() {return undefined;}\n  }\n});\n\n\n/**\n * Checks if the underlying source is ready and cached required data.\n * @private\n */\nexports.prototype.handleSourceChanged_ = function() {\n  if (!this.ready_ && this.source_.getState() == 'ready') {\n    const proj = this.source_.getProjection();\n    this.projection_ = proj ? proj : this.fallbackProj_;\n    if (this.projection_ == olProj.get('EPSG:4326')) {\n      this.tilingScheme_ = new Cesium.GeographicTilingScheme();\n    } else if (this.projection_ == olProj.get('EPSG:3857')) {\n      this.tilingScheme_ = new Cesium.WebMercatorTilingScheme();\n    } else {\n      return;\n    }\n    this.rectangle_ = this.tilingScheme_.rectangle;\n\n    const credit = exports.createCreditForSource(this.source_);\n    this.credit_ = credit || null;\n\n    this.ready_ = true;\n  }\n};\n\n\n/**\n * Tries to create proper Cesium.Credit for\n * the given ol.source.Source as closely as possible.\n * @param {!ol.source.Source} source\n * @return {?Cesium.Credit}\n */\nexports.createCreditForSource = function(source) {\n  let text = '';\n  const attributions = source.getAttributions();\n  if (attributions) {\n    attributions.forEach((el) => {\n      // strip html tags (not supported in Cesium)\n      text += `${el.getHTML().replace(/<\\/?[^>]+(>|$)/g, '')} `;\n    });\n  }\n\n  let imageUrl, link;\n  if (text.length == 0) {\n    // only use logo if no text is specified\n    // otherwise the Cesium will automatically skip the text:\n    // \"The text to be displayed on the screen if no imageUrl is specified.\"\n    const logo = source.getLogo();\n    if (logo) {\n      if (typeof logo == 'string') {\n        imageUrl = logo;\n      } else {\n        imageUrl = logo.src;\n        link = logo.href;\n      }\n    }\n  }\n\n  return (imageUrl || text.length > 0) ? new Cesium.Credit(text, imageUrl, link) : null;\n};\n\n\n/**\n * TODO: attributions for individual tile ranges\n * @export\n * @override\n */\nexports.prototype.getTileCredits = function(x, y, level) {\n  return undefined;\n};\n\n\n/**\n * @export\n * @override\n */\nexports.prototype.requestImage = function(x, y, level) {\n  const tileUrlFunction = this.source_.getTileUrlFunction();\n  if (tileUrlFunction && this.projection_) {\n\n    // Perform mapping of Cesium tile coordinates to OpenLayers tile coordinates:\n    // 1) Cesium zoom level 0 is OpenLayers zoom level 1 for EPSG:4326\n    const z_ = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n    // 2) OpenLayers tile coordinates increase from bottom to top\n    const y_ = -y - 1;\n\n    let url = tileUrlFunction.call(this.source_,\n        [z_, x, y_], 1, this.projection_);\n    if (this.proxy_) {\n      url = this.proxy_.getURL(url);\n    }\n    return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;\n  } else {\n    // return empty canvas to stop Cesium from retrying later\n    return this.emptyCanvas_;\n  }\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core/OLImageryProvider.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nconst exports = {};\nimport olEasing from 'ol/easing';\nimport googAsserts from 'goog/asserts';\nimport olLayerTile from 'ol/layer/Tile';\nimport olLayerImage from 'ol/layer/Image';\nimport olProj from 'ol/proj';\nimport olSourceImage from 'ol/source/Image';\nimport olSourceImageWMS from 'ol/source/ImageWMS';\nimport olSourceTileImage from 'ol/source/TileImage';\nimport olSourceTileWMS from 'ol/source/TileWMS';\nimport olcsCoreOLImageryProvider from './core/OLImageryProvider.js';\n\n\n/**\n * Compute the pixel width and height of a point in meters using the\n * camera frustum.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @return {!Cesium.Cartesian2} the pixel size\n * @api\n */\nexports.computePixelSizeAtCoordinate = function(scene, target) {\n  const camera = scene.camera;\n  const canvas = scene.canvas;\n  const frustum = camera.frustum;\n  const distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(\n      camera.position, target, new Cesium.Cartesian3()));\n  const pixelSize = new Cesium.Cartesian2();\n  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight,\n      distance, pixelSize);\n};\n\n\n/**\n * Compute bounding box around a target point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @param {number} amount Half the side of the box, in pixels.\n * @return {Array<Cesium.Cartographic>} bottom left and top right\n * coordinates of the box\n */\nexports.computeBoundingBoxAtTarget = function(scene, target, amount) {\n  const pixelSize = exports.computePixelSizeAtCoordinate(scene, target);\n  const transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);\n\n  const bottomLeft = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  const topRight = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray(\n      [bottomLeft, topRight]);\n};\n\n\n/**\n *\n * @param {!ol.geom.Geometry} geometry\n * @param {number} height\n * @api\n */\nexports.applyHeightOffsetToGeometry = function(geometry, height) {\n  geometry.applyTransform((input, output, stride) => {\n    googAsserts.assert(input === output);\n    if (stride !== undefined && stride >= 3) {\n      for (let i = 0; i < output.length; i += stride) {\n        output[i + 2] = output[i + 2] + height;\n      }\n    }\n    return output;\n  });\n};\n\n\n/**\n * @param {!Cesium.Camera} camera\n * @param {number} angle\n * @param {!Cesium.Cartesian3} axis\n * @param {!Cesium.Matrix4} transform\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.rotateAroundAxis = function(camera, angle, axis, transform,\n    opt_options) {\n  const clamp = Cesium.Math.clamp;\n  const defaultValue = Cesium.defaultValue;\n\n  const options = opt_options || {};\n  const duration = defaultValue(options.duration, 500); // ms\n  const easing = defaultValue(options.easing, olEasing.linear);\n  const callback = options.callback;\n\n  let lastProgress = 0;\n  const oldTransform = new Cesium.Matrix4();\n\n  const start = Date.now();\n  const step = function() {\n    const timestamp = Date.now();\n    const timeDifference = timestamp - start;\n    const progress = easing(clamp(timeDifference / duration, 0, 1));\n    googAsserts.assert(progress >= lastProgress);\n\n    camera.transform.clone(oldTransform);\n    const stepAngle = (progress - lastProgress) * angle;\n    lastProgress = progress;\n    camera.lookAtTransform(transform);\n    camera.rotate(axis, stepAngle);\n    camera.lookAtTransform(oldTransform);\n\n    if (progress < 1) {\n      window.requestAnimationFrame(step);\n    } else {\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  window.requestAnimationFrame(step);\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} heading\n * @param {!Cesium.Cartesian3} bottomCenter\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.setHeadingUsingBottomCenter = function(scene, heading,\n    bottomCenter, opt_options) {\n  const camera = scene.camera;\n  // Compute the camera position to zenith quaternion\n  const angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);\n  const axis = camera.right;\n  const quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);\n  const rotation = Cesium.Matrix3.fromQuaternion(quaternion);\n\n  // Get the zenith point from the rotation of the position vector\n  const vector = new Cesium.Cartesian3();\n  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);\n  const zenith = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);\n  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);\n\n  // Actually rotate around the zenith normal\n  const transform = Cesium.Matrix4.fromTranslation(zenith);\n  const rotateAroundAxis = exports.rotateAroundAxis;\n  rotateAroundAxis(camera, heading, zenith, transform, opt_options);\n};\n\n\n/**\n * Get the 3D position of the given pixel of the canvas.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian2} pixel\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickOnTerrainOrEllipsoid = function(scene, pixel) {\n  const ray = scene.camera.getPickRay(pixel);\n  const target = scene.globe.pick(ray, scene);\n  return target || scene.camera.pickEllipsoid(pixel);\n};\n\n\n/**\n * Get the 3D position of the point at the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickBottomPoint = function(scene) {\n  const canvas = scene.canvas;\n  const bottom = new Cesium.Cartesian2(\n      canvas.clientWidth / 2, canvas.clientHeight);\n  return exports.pickOnTerrainOrEllipsoid(scene, bottom);\n};\n\n\n/**\n * Get the 3D position of the point at the center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickCenterPoint = function(scene) {\n  const canvas = scene.canvas;\n  const center = new Cesium.Cartesian2(\n      canvas.clientWidth / 2,\n      canvas.clientHeight / 2);\n  return exports.pickOnTerrainOrEllipsoid(scene, center);\n};\n\n\n/**\n * Compute the signed tilt angle on globe, between the opposite of the\n * camera direction and the target normal. Return undefined if there is no\n * intersection of the camera direction with the globe.\n * @param {!Cesium.Scene} scene\n * @return {number|undefined}\n * @api\n */\nexports.computeSignedTiltAngleOnGlobe = function(scene) {\n  const camera = scene.camera;\n  const ray = new Cesium.Ray(camera.position, camera.direction);\n  let target = scene.globe.pick(ray, scene);\n\n  if (!target) {\n    // no tiles in the area were loaded?\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n    if (obj) {\n      target = Cesium.Ray.getPoint(ray, obj.start);\n    }\n  }\n\n  if (!target) {\n    return undefined;\n  }\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);\n\n  const angleBetween = exports.signedAngleBetween;\n  const angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;\n  return Cesium.Math.convertLongitudeRange(angle);\n};\n\n\n/**\n * Compute the ray from the camera to the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Ray}\n */\nexports.bottomFovRay = function(scene) {\n  const camera = scene.camera;\n  const fovy2 = camera.frustum.fovy / 2;\n  const direction = camera.direction;\n  const rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);\n  const matrix = Cesium.Matrix3.fromQuaternion(rotation);\n  const vector = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);\n  return new Cesium.Ray(camera.position, vector);\n};\n\n\n/**\n * Compute the angle between two Cartesian3.\n * @param {!Cesium.Cartesian3} first\n * @param {!Cesium.Cartesian3} second\n * @param {!Cesium.Cartesian3} normal Normal to test orientation against.\n * @return {number}\n */\nexports.signedAngleBetween = function(first, second, normal) {\n  // We are using the dot for the angle.\n  // Then the cross and the dot for the sign.\n  const a = new Cesium.Cartesian3();\n  const b = new Cesium.Cartesian3();\n  const c = new Cesium.Cartesian3();\n  Cesium.Cartesian3.normalize(first, a);\n  Cesium.Cartesian3.normalize(second, b);\n  Cesium.Cartesian3.cross(a, b, c);\n\n  const cosine = Cesium.Cartesian3.dot(a, b);\n  const sine = Cesium.Cartesian3.magnitude(c);\n\n  // Sign of the vector product and the orientation normal\n  const sign = Cesium.Cartesian3.dot(normal, c);\n  const angle = Math.atan2(sine, cosine);\n  return sign >= 0 ? angle : -angle;\n};\n\n\n/**\n * Compute the rotation angle around a given point, needed to reach the\n * zenith position.\n * At a zenith position, the camera direction is going througth the earth\n * center and the frustrum bottom ray is going through the chosen pivot\n * point.\n * The bottom-center of the screen is a good candidate for the pivot point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} pivot Point around which the camera rotates.\n * @return {number}\n * @api\n */\nexports.computeAngleToZenith = function(scene, pivot) {\n  // This angle is the sum of the angles 'fy' and 'a', which are defined\n  // using the pivot point and its surface normal.\n  //        Zenith |    camera\n  //           \\   |   /\n  //            \\fy|  /\n  //             \\ |a/\n  //              \\|/pivot\n  const camera = scene.camera;\n  const fy = camera.frustum.fovy / 2;\n  const ray = exports.bottomFovRay(scene);\n  const direction = Cesium.Cartesian3.clone(ray.direction);\n  Cesium.Cartesian3.negate(direction, direction);\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);\n\n  const left = new Cesium.Cartesian3();\n  Cesium.Cartesian3.negate(camera.right, left);\n\n  const a = exports.signedAngleBetween(normal, direction, left);\n  return a + fy;\n};\n\n\n/**\n * Rotate the camera so that its direction goes through the target point.\n * If a globe is given, the target height is first interpolated from terrain.\n * @param {!Cesium.Camera} camera\n * @param {!Cesium.Cartographic} target\n * @param {Cesium.Globe=} opt_globe\n * @api\n */\nexports.lookAt = function(camera, target, opt_globe) {\n  if (opt_globe) {\n    const height = opt_globe.getHeight(target);\n    target.height = height || 0;\n  }\n\n  const ellipsoid = Cesium.Ellipsoid.WGS84;\n  const targetb = ellipsoid.cartographicToCartesian(target);\n\n  const position = camera.position;\n  const up = new Cesium.Cartesian3();\n  ellipsoid.geocentricSurfaceNormal(position, up);\n\n  camera.lookAt(position, targetb, up);\n};\n\n\n/**\n * Convert an OpenLayers extent to a Cesium rectangle.\n * @param {ol.Extent} extent Extent.\n * @param {ol.ProjectionLike} projection Extent projection.\n * @return {Cesium.Rectangle} The corresponding Cesium rectangle.\n * @api\n */\nexports.extentToRectangle = function(extent, projection) {\n  if (extent && projection) {\n    const ext = olProj.transformExtent(extent, projection, 'EPSG:4326');\n    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Creates Cesium.ImageryLayer best corresponding to the given ol.layer.Layer.\n * Only supports raster layers\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Cesium.ImageryLayer} null if not possible (or supported)\n * @api\n */\nexports.tileLayerToImageryLayer = function(olLayer, viewProj) {\n\n  if (!(olLayer instanceof olLayerTile) && !(olLayer instanceof olLayerImage)) {\n    return null;\n  }\n\n  let provider = null;\n  let source = olLayer.getSource();\n\n  // Convert ImageWMS to TileWMS\n  if (source instanceof olSourceImageWMS && source.getUrl() &&\n    source.getImageLoadFunction() === olSourceImage.defaultImageLoadFunction) {\n    source = new olSourceTileWMS({\n      url: source.getUrl(),\n      params: source.getParams(),\n      attributions: source.getAttributions(),\n      projection: source.getProjection(),\n      logo: source.getLogo(),\n      'olcs.proxy': source.get('olcs.proxy'),\n      'olcs.imagesource': source\n    });\n  }\n\n  if (source instanceof olSourceTileImage) {\n    let projection = source.getProjection();\n\n    if (!projection) {\n      // if not explicit, assume the same projection as view\n      projection = viewProj;\n    } else if (projection !== viewProj) {\n      return null; // do not sync layers with projections different than view\n    }\n\n    const is3857 = projection === olProj.get('EPSG:3857');\n    const is4326 = projection === olProj.get('EPSG:4326');\n    if (is3857 || is4326) {\n      provider = new olcsCoreOLImageryProvider(source, viewProj);\n    } else {\n      return null;\n    }\n  } else {\n    // sources other than TileImage are currently not supported\n    return null;\n  }\n\n  // the provider is always non-null if we got this far\n\n  const layerOptions = {};\n\n  const forcedExtent = /** @type {ol.Extent} */ (olLayer.get('olcs.extent'));\n  const ext = forcedExtent || olLayer.getExtent();\n  if (ext) {\n    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);\n  }\n\n  const cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);\n  return cesiumLayer;\n};\n\n\n/**\n * Synchronizes the layer rendering properties (opacity, visible)\n * to the given Cesium ImageryLayer.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.ImageryLayer} csLayer\n * @api\n */\nexports.updateCesiumLayerProperties = function(olLayerWithParents, csLayer) {\n  let opacity = 1;\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerOpacity = olLayer.getOpacity();\n    if (layerOpacity !== undefined) {\n      opacity *= layerOpacity;\n    }\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    }\n  });\n  csLayer.alpha = opacity;\n  csLayer.show = visible;\n};\n\n\n/**\n * Convert a 2D or 3D OpenLayers coordinate to Cesium.\n * @param {ol.Coordinate} coordinate Ol3 coordinate.\n * @return {!Cesium.Cartesian3} Cesium cartesian coordinate\n * @api\n */\nexports.ol4326CoordinateToCesiumCartesian = function(coordinate) {\n  const coo = coordinate;\n  return coo.length > 2 ?\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) :\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);\n};\n\n\n/**\n * Convert an array of 2D or 3D OpenLayers coordinates to Cesium.\n * @param {Array.<!ol.Coordinate>} coordinates Ol3 coordinates.\n * @return {!Array.<Cesium.Cartesian3>} Cesium cartesian coordinates\n * @api\n */\nexports.ol4326CoordinateArrayToCsCartesians = function(coordinates) {\n  googAsserts.assert(coordinates !== null);\n  const toCartesian = exports.ol4326CoordinateToCesiumCartesian;\n  const cartesians = [];\n  for (let i = 0; i < coordinates.length; ++i) {\n    cartesians.push(toCartesian(coordinates[i]));\n  }\n  return cartesians;\n};\n\n\n/**\n * Reproject an OpenLayers geometry to EPSG:4326 if needed.\n * The geometry will be cloned only when original projection is not EPSG:4326\n * and the properties will be shallow copied.\n * @param {!T} geometry\n * @param {!ol.ProjectionLike} projection\n * @return {!T}\n * @template T\n * @api\n */\nexports.olGeometryCloneTo4326 = function(geometry, projection) {\n  googAsserts.assert(projection);\n\n  const proj4326 = olProj.get('EPSG:4326');\n  const proj = olProj.get(projection);\n  if (proj !== proj4326) {\n    const properties = geometry.getProperties();\n    geometry = geometry.clone();\n    geometry.transform(proj, proj4326);\n    geometry.setProperties(properties);\n  }\n  return geometry;\n};\n\n\n/**\n * Convert an OpenLayers color to Cesium.\n * @param {ol.Color|CanvasGradient|CanvasPattern|string} olColor\n * @return {!Cesium.Color}\n * @api\n */\nexports.convertColorToCesium = function(olColor) {\n  olColor = olColor || 'black';\n  if (Array.isArray(olColor)) {\n    return new Cesium.Color(\n        Cesium.Color.byteToFloat(olColor[0]),\n        Cesium.Color.byteToFloat(olColor[1]),\n        Cesium.Color.byteToFloat(olColor[2]),\n        olColor[3]\n    );\n  } else if (typeof olColor == 'string') {\n    return Cesium.Color.fromCssColorString(olColor);\n  }\n  googAsserts.fail('impossible');\n};\n\n\n/**\n * Convert an OpenLayers url to Cesium.\n * @param {string} url\n * @return {!olcsx.core.CesiumUrlDefinition}\n * @api\n */\nexports.convertUrlToCesium = function(url) {\n  let subdomains = '';\n  const re = /\\{(\\d|[a-z])-(\\d|[a-z])\\}/;\n  const match = re.exec(url);\n  if (match) {\n    url = url.replace(re, '{s}');\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      subdomains += String.fromCharCode(charCode);\n    }\n  }\n  return {\n    url,\n    subdomains\n  };\n};\n\n\n/**\n * Animate the return to a top-down view from the zenith.\n * The camera is rotated to orient to the North.\n * @param {!ol.Map} map\n * @param {!Cesium.Scene} scene\n * @return {Promise<undefined>}\n * @api\n */\nexports.resetToNorthZenith = function(map, scene) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('Could not get bottom pivot');\n      return;\n    }\n\n    const currentHeading = map.getView().getRotation();\n    if (currentHeading === undefined) {\n      reject('The view is not initialized');\n      return;\n    }\n    const angle = exports.computeAngleToZenith(scene, pivot);\n\n    // Point to North\n    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n      callback: () => {\n        const view = map.getView();\n        exports.normalizeView(view);\n        resolve();\n      }\n    };\n    exports.rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} angle in radian\n * @return {Promise<undefined>}\n * @api\n */\nexports.rotateAroundBottomCenter = function(scene, angle) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('could not get bottom pivot');\n      return;\n    }\n\n    const options = {callback: resolve};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const rotateAroundAxis = exports.rotateAroundAxis;\n    rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * Set the OpenLayers view to a specific rotation and\n * the nearest resolution.\n * @param {ol.View} view\n * @param {number=} angle\n * @api\n */\nexports.normalizeView = function(view, angle = 0) {\n  const resolution = view.getResolution();\n  view.setRotation(angle);\n  view.setResolution(view.constrainResolution(resolution));\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core.js\n// module id = null\n// module chunks = ","/**\n * @module ol/Image\n */\nimport {inherits} from './index.js';\nimport _ol_ImageBase_ from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport _ol_events_ from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n/**\n * @constructor\n * @extends {ol.ImageBase}\n * @param {ol.Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n */\nconst _ol_Image_ = function(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n  _ol_ImageBase_.call(this, extent, resolution, pixelRatio, ImageState.IDLE);\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @protected\n   * @type {ol.ImageState}\n   */\n  this.state = ImageState.IDLE;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = imageLoadFunction;\n\n};\n\ninherits(_ol_Image_, _ol_ImageBase_);\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_Image_.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageError_ = function() {\n  this.state = ImageState.ERROR;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageLoad_ = function() {\n  if (this.resolution === undefined) {\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n  this.state = ImageState.LOADED;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @override\n * @api\n */\n_ol_Image_.prototype.load = function() {\n  if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n    this.state = ImageState.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      _ol_events_.listenOnce(this.image_, EventType.ERROR,\n        this.handleImageError_, this),\n      _ol_events_.listenOnce(this.image_, EventType.LOAD,\n        this.handleImageLoad_, this)\n    ];\n    this.imageLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n */\n_ol_Image_.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\n_ol_Image_.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\nexport default _ol_Image_;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/Image.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport _ol_Image_ from '../Image.js';\nimport {assert} from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport ImageSource from '../source/Image.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @constructor\n * @fires ol.source.Image.Event\n * @extends {ol.source.Image}\n * @param {olx.source.ImageWMSOptions=} opt_options Options.\n * @api\n */\nconst ImageWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  ImageSource.call(this, {\n    attributions: options.attributions,\n    projection: options.projection,\n    resolutions: options.resolutions\n  });\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.url_ = options.url;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n    options.imageLoadFunction : ImageSource.defaultImageLoadFunction;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = options.params || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n  this.updateV13_();\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.imageSize_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n};\n\ninherits(ImageWMS, ImageSource);\n\n\n/**\n * @const\n * @type {ol.Size}\n * @private\n */\nImageWMS.GETFEATUREINFO_IMAGE_SIZE_ = [101, 101];\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nImageWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  if (this.url_ === undefined) {\n    return undefined;\n  }\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    resolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const extent = getForViewAndSize(coordinate, resolution, 0,\n    ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n  const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(\n    extent, ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nImageWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @inheritDoc\n */\nImageWMS.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {\n\n  if (this.url_ === undefined) {\n    return null;\n  }\n\n  resolution = this.findNearestResolution(resolution);\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const imageResolution = resolution / pixelRatio;\n\n  const center = getCenter(extent);\n  const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n  const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n  const viewExtent = getForViewAndSize(center, imageResolution, 0,\n    [viewWidth, viewHeight]);\n  const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n  const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n  const requestExtent = getForViewAndSize(center, imageResolution, 0,\n    [requestWidth, requestHeight]);\n\n  const image = this.image_;\n  if (image &&\n      this.renderedRevision_ == this.getRevision() &&\n      image.getResolution() == resolution &&\n      image.getPixelRatio() == pixelRatio &&\n      containsExtent(image.getExtent(), viewExtent)) {\n    return image;\n  }\n\n  const params = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(params, this.params_);\n\n  this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n  this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n  const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n    projection, params);\n\n  this.image_ = new _ol_Image_(requestExtent, resolution, pixelRatio,\n    url, this.crossOrigin_, this.imageLoadFunction_);\n\n  this.renderedRevision_ = this.getRevision();\n\n  _ol_events_.listen(this.image_, EventType.CHANGE,\n    this.handleImageChange, this);\n\n  return this.image_;\n\n};\n\n\n/**\n * Return the image load function of the source.\n * @return {ol.ImageLoadFunctionType} The image load function.\n * @api\n */\nImageWMS.prototype.getImageLoadFunction = function() {\n  return this.imageLoadFunction_;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string} Request URL.\n * @private\n */\nImageWMS.prototype.getRequestUrl_ = function(extent, size, pixelRatio, projection, params) {\n\n  assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 8); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  params['WIDTH'] = size[0];\n  params['HEIGHT'] = size[1];\n\n  const axisOrientation = projection.getAxisOrientation();\n  let bbox;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    bbox = [extent[1], extent[0], extent[3], extent[2]];\n  } else {\n    bbox = extent;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  return appendParams(/** @type {string} */ (this.url_), params);\n};\n\n\n/**\n * Return the URL used for this WMS source.\n * @return {string|undefined} URL.\n * @api\n */\nImageWMS.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * Set the image load function of the source.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n * @api\n */\nImageWMS.prototype.setImageLoadFunction = function(\n  imageLoadFunction) {\n  this.image_ = null;\n  this.imageLoadFunction_ = imageLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string|undefined} url URL.\n * @api\n */\nImageWMS.prototype.setUrl = function(url) {\n  if (url != this.url_) {\n    this.url_ = url;\n    this.image_ = null;\n    this.changed();\n  }\n};\n\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nImageWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.image_ = null;\n  this.changed();\n};\n\n\n/**\n * @private\n */\nImageWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default ImageWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/ImageWMS.js\n// module id = null\n// module chunks = ","/**\n * @module ngeo.CustomEvent\n*/\nimport * as olBase from 'ol/index.js';\nimport olEventsEvent from 'ol/events/Event.js';\n\n/**\n * @constructor\n * @extends {ol.events.Event}\n * @param {string} type Event type.\n * @param {T} detail Event Detail.\n * @template T\n */\nconst exports = function(type, detail = {}) {\n\n  olEventsEvent.call(this, type);\n\n  /**\n   * @type {T}\n   */\n  this.detail = detail;\n\n};\n\nolBase.inherits(exports, olEventsEvent);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/CustomEvent.js","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport _ol_size_ from '../size.js';\nimport TileImage from '../source/TileImage.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\nimport _ol_string_ from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.TileWMSOptions=} opt_options Tile WMS options.\n * @api\n */\nconst TileWMS = function(opt_options) {\n\n  const options = opt_options || {};\n\n  const params = options.params || {};\n\n  const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: !transparent,\n    projection: options.projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileClass: options.tileClass,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = params;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.tmpExtent_ = createEmpty();\n\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n\n};\n\ninherits(TileWMS, TileImage);\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nTileWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  const projectionObj = getProjection(projection);\n  const sourceProjectionObj = this.getProjection();\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projectionObj);\n  }\n\n  const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  let tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    tileResolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n    tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  assign(baseParams, this.params_, params);\n\n  const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n  const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getGutterInternal = function() {\n  return this.gutter_;\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nTileWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.Size} tileSize Tile size.\n * @param {ol.Extent} tileExtent Tile extent.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string|undefined} Request URL.\n * @private\n */\nTileWMS.prototype.getRequestUrl_ = function(tileCoord, tileSize, tileExtent,\n  pixelRatio, projection, params) {\n\n  const urls = this.urls;\n  if (!urls) {\n    return undefined;\n  }\n\n  params['WIDTH'] = tileSize[0];\n  params['HEIGHT'] = tileSize[1];\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        const dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 52); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  const axisOrientation = projection.getAxisOrientation();\n  const bbox = tileExtent;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    let tmp;\n    tmp = tileExtent[0];\n    bbox[0] = tileExtent[1];\n    bbox[1] = tmp;\n    tmp = tileExtent[2];\n    bbox[2] = tileExtent[3];\n    bbox[3] = tmp;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  let url;\n  if (urls.length == 1) {\n    url = urls[0];\n  } else {\n    const index = modulo(_ol_tilecoord_.hash(tileCoord), urls.length);\n    url = urls[index];\n  }\n  return appendParams(url, params);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getTilePixelRatio = function(pixelRatio) {\n  return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n  /** @type {number} */ (pixelRatio);\n};\n\n\n/**\n * @private\n * @return {string} The key for the current params.\n */\nTileWMS.prototype.getKeyForParams_ = function() {\n  let i = 0;\n  const res = [];\n  for (const key in this.params_) {\n    res[i++] = key + '-' + this.params_[key];\n  }\n  return res.join('/');\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.fixedTileUrlFunction = function(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = _ol_size_.toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = _ol_size_.scale(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n};\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nTileWMS.prototype.updateParams = function(params) {\n  assign(this.params_, params);\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n};\n\n\n/**\n * @private\n */\nTileWMS.prototype.updateV13_ = function() {\n  const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default TileWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/TileWMS.js\n// module id = 23\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.datasource.DataSources\n*/\nconst exports = {};\nimport ngeoBase from 'ngeo/index.js';\nimport olCollection from 'ol/Collection.js';\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoDataSources', []);\n// DataSources with the ngeox.datasource.DataSources type.\nexports.module.value('ngeoDataSources', new olCollection());\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSources.js","/**\n * @module ngeo.datasource.DataSource\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @implements {ngeox.datasource.DataSource}\n */\nconst exports = class {\n\n  /**\n   * A `ngeo.datasource.DataSource` represents a single source of data, which\n   * can combine different type of servers to display or fetch the data. It can\n   * serve as a point of entry to get all the information about a single data\n   * source.\n   *\n   * You can use the information in a data source to do all sorts of things:\n   *  - create `ol.layer.Layer` objects using the WMS, WMTS or even WFS\n   *    information\n   *  - issue WMS/WFS queries\n   *  - know whether the data is visible or not\n   *  - apply filter rules on it\n   *\n   * @struct\n   * @param {ngeox.datasource.DataSourceOptions} options Options.\n   */\n  constructor(options) {\n\n    // === DYNAMIC properties (i.e. that can change / be watched ===\n\n    /**\n     * A data source is considered 'in range' when it is synchronized to\n     * a map view and the resolution of that view is within the range of\n     * the `maxResolution` and `minResolution`. These 2 properties are\n     * required for the `inRange` property to be dynamic, otherwise its\n     * value is always `true` by default.\n     *\n     * The synchronization is made in the `ngeo.datasource.SyncDataSourcesMap`\n     * service.\n     *\n     * @type {boolean}\n     * @private\n     */\n    this.inRange_ = options.inRange !== false;\n\n    /**\n     * Whether the data source is visible or not, i.e. whether its is ON or OFF.\n     * Defaults to `false`.\n     * @type {boolean}\n     * @private\n     */\n    this.visible_ = options.visible === true;\n\n\n    // === STATIC properties (i.e. that never change) ===\n\n    /**\n     * The attributes of the data source.\n     *\n     * Note: `attributes` is not using the conventionnal getter/setter due\n     * to:  See: https://github.com/google/closure-compiler/issues/1089\n     *\n     * @type {?Array.<ngeox.Attribute>}\n     * @export\n     */\n    this.attributes = options.attributes || null;\n\n    /**\n     * (Required) The data source id.\n     * @type {number}\n     * @private\n     */\n    this.id_ = options.id;\n\n    /**\n     * The name of an attribute among the attributes of the data source.\n     * The value of that attribute, in records, can be used to identify\n     * each record individually.\n     * @type {string|undefined}\n     * @private\n     */\n    this.identifierAttribute_ = options.identifierAttribute;\n\n    /**\n     * Maximum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.maxResolution_ = options.maxResolution;\n\n    /**\n     * Minimum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.minResolution_ = options.minResolution;\n\n    /**\n     * (Required) A human-readable name for the data source.\n     * @type {string}\n     * @private\n     */\n    this.name_ = options.name;\n  }\n\n  // ========================================\n  // === Dynamic property getters/setters ===\n  // ========================================\n\n  /**\n   * @return {boolean} In range\n   * @export\n   */\n  get inRange() {\n    return this.inRange_;\n  }\n\n  /**\n   * @param {boolean} inRange In range\n   * @export\n   */\n  set inRange(inRange) {\n    this.inRange_ = inRange;\n  }\n\n  /**\n   * @return {boolean} Visible\n   * @export\n   */\n  get visible() {\n    return this.visible_;\n  }\n\n  /**\n   * @param {boolean} visible Visible\n   * @export\n   */\n  set visible(visible) {\n    this.visible_ = visible;\n  }\n\n  // =======================================\n  // === Static property getters/setters ===\n  // =======================================\n\n  /**\n   * @return {?Array.<ngeox.Attribute>} Attributes\n   * @export\n   */\n  getAttributes() {\n    return this.attributes;\n  }\n\n  /**\n   * @param {?Array.<ngeox.Attribute>} attributes Attributes\n   * @export\n   */\n  setAttributes(attributes) {\n    this.attributes = attributes;\n  }\n\n  /**\n   * @return {number} Id\n   * @export\n   */\n  get id() {\n    return this.id_;\n  }\n\n  /**\n   * @return {string|undefined} Identifier attribute\n   * @export\n   */\n  get identifierAttribute() {\n    return this.identifierAttribute_;\n  }\n\n  /**\n   * @return {number|undefined} Maximum resolution\n   * @export\n   */\n  get maxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * @return {number|undefined} Minimum resolution\n   * @export\n   */\n  get minResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * @return {string} Name\n   * @export\n   */\n  get name() {\n    return this.name_;\n  }\n\n\n  // ===================================\n  // === Calculated property getters ===\n  // ===================================\n\n  /**\n   * Whether the data source is queryable or not.\n   * @return {boolean} Whether the data source is queryable or not.\n   * @export\n   */\n  get queryable() {\n    return false;\n  }\n\n  /**\n   * @return {boolean} Whether the data source supports a dynamic `inRange`\n   *     property or not, i.e. whether it can be calculated.\n   * @export\n   */\n  get supportsDynamicInRange() {\n    return this.maxResolution !== null || this.minResolution !== null;\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSource.js","/**\n * @module ngeo.map.FeatureOverlayMgr\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olBase from 'ol/index.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport * as olObj from 'ol/obj.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olStyleStyle from 'ol/style/Style.js';\nimport googAsserts from 'goog/asserts.js';\nimport ngeoMapFeatureOverlay from 'ngeo/map/FeatureOverlay.js';\n\n/**\n * Provides a service that wraps an \"unmanaged\" vector layer,\n * used as a shared vector layer across the application.\n *\n * Example:\n *\n * The application's main component/controller initializes the feature\n * overlay manager with the map:\n *\n *     ngeoFeatureOverlayMgr.init(map);\n *\n * Once initialized, components of the application can use the manager to\n * create a feature overlay, configuring it with specific styles:\n *\n *     let featureOverlay = ngeoFeatureOverlayMgr.getFeatureOverlay();\n *     featureOverlay.setStyle(myStyle);\n *     featureOverlay.addFeature(myFeature);\n *\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoFeatureOverlayMgr\n */\nconst exports = function() {\n\n  /**\n   * @type {Object.<string, number>}\n   * @private\n   */\n  this.featureUidToGroupIndex_ = {};\n\n  /**\n   * @type {Array.<ngeox.MapFeatureOverlayGroup>}\n   * @private\n   */\n  this.groups_ = [];\n\n  /**\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.source_ = new olSourceVector({\n    useSpatialIndex: false\n  });\n\n  /**\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.layer_ = new olLayerVector({\n    source: this.source_,\n    style: this.styleFunction_.bind(this),\n    updateWhileAnimating: true,\n    updateWhileInteracting: true\n  });\n\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.addFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  this.featureUidToGroupIndex_[featureUid] = groupIndex;\n  this.groups_[groupIndex].features[featureUid] = feature;\n  this.source_.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.removeFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  delete this.featureUidToGroupIndex_[featureUid];\n  delete this.groups_[groupIndex].features[featureUid];\n  this.source_.removeFeature(feature);\n};\n\n\n/**\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.clear = function(groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const group = this.groups_[groupIndex];\n  for (const featureUid in group.features) {\n    this.removeFeature(group.features[featureUid], groupIndex);\n  }\n  googAsserts.assert(olObj.isEmpty(group.features));\n};\n\n\n/**\n * @return {ol.layer.Vector} The vector layer used internally.\n * @export\n */\nexports.prototype.getLayer = function() {\n  return this.layer_;\n};\n\n\n/**\n * @return {ngeo.map.FeatureOverlay} Feature overlay.\n * @export\n */\nexports.prototype.getFeatureOverlay = function() {\n  const groupIndex = this.groups_.length;\n  this.groups_.push({\n    styleFunction: olStyleStyle.defaultFunction,\n    features: {}\n  });\n  return new ngeoMapFeatureOverlay(this, groupIndex);\n};\n\n\n/**\n * @param {ol.Map} map Map.\n * @export\n */\nexports.prototype.init = function(map) {\n  this.layer_.setMap(map);\n};\n\n\n/**\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @param {number} groupIndex Group index.\n * @export\n */\nexports.prototype.setStyle = function(style, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  this.groups_[groupIndex].styleFunction = style === null ?\n    olStyleStyle.defaultFunction : olStyleStyle.createFunction(style);\n};\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.style.Style>|ol.style.Style} Styles.\n * @private\n */\nexports.prototype.styleFunction_ = function(feature, resolution) {\n  const featureUid = olBase.getUid(feature).toString();\n  googAsserts.assert(featureUid in this.featureUidToGroupIndex_);\n  const groupIndex = this.featureUidToGroupIndex_[featureUid];\n  const group = this.groups_[groupIndex];\n  return group.styleFunction(feature, resolution);\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlayMgr', [\n  ngeoMapFeatureOverlay.module.name\n]);\nexports.module.service('ngeoFeatureOverlayMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlayMgr.js","/* eslint valid-jsdoc: 0, prefer-rest-params: 0,  */\n// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * Utilities to check the preconditions, postconditions and\n * invariants runtime.\n *\n * Methods in this package should be given special treatment by the compiler\n * for type-inference. For example, <code>goog.asserts.assert(foo)</code>\n * will restrict <code>foo</code> to a truthy value.\n *\n * The compiler has an option to disable asserts. So code like:\n * <code>\n * var x = goog.asserts.assert(foo()); goog.asserts.assert(bar());\n * </code>\n * will be transformed into:\n * <code>\n * var x = foo();\n * </code>\n * The compiler will leave in foo() (because its return value is used),\n * but it will remove bar() because it assumes it does not have side-effects.\n *\n * @author agrieve@google.com (Andrew Grieve)\n */\n\nconst exports = {};\n\n/**\n * Throws an exception with the given message and \"Assertion failed\" prefixed\n * onto it.\n * @param {string} defaultMessage The message to use if givenMessage is empty.\n * @param {Array<*>} defaultArgs The substitution arguments for defaultMessage.\n * @param {string|undefined} givenMessage Message supplied by the caller.\n * @param {Array<*>} givenArgs The substitution arguments for givenMessage.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n * @private\n */\nexports.doAssertFailure_ = function(\n  defaultMessage, defaultArgs, givenMessage, givenArgs) {\n  let message = 'Assertion failed';\n  let args;\n  if (givenMessage) {\n    message += `: ${givenMessage}`;\n    args = givenArgs;\n  } else if (defaultMessage) {\n    message += `: ${defaultMessage}`;\n    args = defaultArgs;\n  }\n  // The '' + works around an Opera 10 bug in the unit tests. Without it,\n  // a stack trace is added to var message above. With this, a stack trace is\n  // not added until this line (it causes the extra garbage to be added after\n  // the assertion message instead of in the middle of it).\n  const e = new exports.AssertionError(`${message}`, args || []);\n  exports.errorHandler_(e);\n};\n\n\n/**\n * Sets a custom error handler that can be used to customize the behavior of\n * assertion failures, for example by turning all assertion failures into log\n * messages.\n * @param {function(!goog.asserts.AssertionError)} errorHandler\n */\nexports.setErrorHandler = function(errorHandler) {\n  if (exports.ENABLE_ASSERTS) {\n    exports.errorHandler_ = errorHandler;\n  }\n};\n\n\n/**\n * Checks if the condition evaluates to true if goog.asserts.ENABLE_ASSERTS is\n * true.\n * @template T\n * @param {T} condition The condition to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {T} The value of the condition.\n * @throws {goog.asserts.AssertionError} When the condition evaluates to false.\n */\nexports.assert = function(condition, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !condition) {\n    exports.doAssertFailure_(\n      '', null, opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return condition;\n};\n\n\n/**\n * Fails if goog.asserts.ENABLE_ASSERTS is true. This function is useful in case\n * when we want to add a check in the unreachable area like switch-case\n * statement:\n *\n * <pre>\n *  switch(type) {\n *    case FOO: doSomething(); break;\n *    case BAR: doSomethingElse(); break;\n *    default: goog.asserts.fail('Unrecognized type: ' + type);\n *      // We have only 2 types - \"default:\" section is unreachable code.\n *  }\n * </pre>\n *\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} Failure.\n */\nexports.fail = function(opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS) {\n    exports.errorHandler_(\n      new exports.AssertionError(\n        `Failure${opt_message ? `: ${opt_message}` : ''}`,\n        Array.prototype.slice.call(arguments, 1)));\n  }\n};\n\n\n/**\n * Checks if the value is a number if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {number} The value, guaranteed to be a number when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n */\nexports.assertNumber = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isNumber(value)) {\n    exports.doAssertFailure_(\n      'Expected number but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {number} */ (value);\n};\n\n\n/**\n * Checks if the value is a string if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {string} The value, guaranteed to be a string when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a string.\n */\nexports.assertString = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isString(value)) {\n    exports.doAssertFailure_(\n      'Expected string but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {string} */ (value);\n};\n\n\n/**\n * Checks if the value is a function if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Function} The value, guaranteed to be a function when asserts\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a function.\n */\nexports.assertFunction = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isFunction(value)) {\n    exports.doAssertFailure_(\n      'Expected function but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Function} */ (value);\n};\n\n\n/**\n * Checks if the value is an Object if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Object} The value, guaranteed to be a non-null object.\n * @throws {goog.asserts.AssertionError} When the value is not an object.\n */\nexports.assertObject = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isObject(value)) {\n    exports.doAssertFailure_(\n      'Expected object but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Object} */ (value);\n};\n\n\n/**\n * Checks if the value is an Array if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Array<?>} The value, guaranteed to be a non-null array.\n * @throws {goog.asserts.AssertionError} When the value is not an array.\n */\nexports.assertArray = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isArray(value)) {\n    exports.doAssertFailure_(\n      'Expected array but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Array<?>} */ (value);\n};\n\n\n/**\n * Checks if the value is a boolean if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {boolean} The value, guaranteed to be a boolean when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a boolean.\n */\nexports.assertBoolean = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !goog.isBoolean(value)) {\n    exports.doAssertFailure_(\n      'Expected boolean but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {boolean} */ (value);\n};\n\n\n/**\n * Checks if the value is a DOM Element if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Element} The value, likely to be a DOM Element when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not an Element.\n */\nexports.assertElement = function(value, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS &&\n      (!goog.isObject(value) || value.nodeType != goog.dom.NodeType.ELEMENT)) {\n    exports.doAssertFailure_(\n      'Expected Element but got %s: %s.', [goog.typeOf(value), value],\n      opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Element} */ (value);\n};\n\n\n/**\n * Checks if the value is an instance of the user-defined type if\n * goog.asserts.ENABLE_ASSERTS is true.\n *\n * The compiler may tighten the type returned by this function.\n *\n * @param {?} value The value to check.\n * @param {function(new: T, ...)} type A user-defined constructor.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} When the value is not an instance of\n *     type.\n * @return {T}\n * @template T\n */\nexports.assertInstanceof = function(value, type, opt_message, var_args) {\n  if (exports.ENABLE_ASSERTS && !(value instanceof type)) {\n    exports.doAssertFailure_(\n      'Expected instanceof %s but got %s.',\n      [exports.getType_(type), exports.getType_(value)],\n      opt_message, Array.prototype.slice.call(arguments, 3));\n  }\n  return value;\n};\n\n\n/**\n * Checks that no enumerable keys are present in Object.prototype. Such keys\n * would break most code that use {@code for (var ... in ...)} loops.\n */\nexports.assertObjectPrototypeIsIntact = function() {\n  for (const key in Object.prototype) {\n    exports.fail(`${key} should not be enumerable in Object.prototype.`);\n  }\n};\n\n\n/**\n * Returns the type of a value. If a constructor is passed, and a suitable\n * string cannot be found, 'unknown type name' will be returned.\n * @param {*} value A constructor, object, or primitive.\n * @return {string} The best display name for the value, or 'unknown type name'.\n * @private\n */\nexports.getType_ = function(value) {\n  if (value instanceof Function) {\n    return value.displayName || value.name || 'unknown type name';\n  } else if (value instanceof Object) {\n    return value.constructor.displayName || value.constructor.name ||\n        Object.prototype.toString.call(value);\n  } else {\n    return value === null ? 'null' : typeof value;\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/goog.asserts.js","/**\n * @module ngeo.map.module\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapBackgroundLayerMgr from 'ngeo/map/BackgroundLayerMgr.js';\nimport ngeoMapDirective from 'ngeo/map/directive.js';\nimport ngeoMapFeatureOverlayMgr from 'ngeo/map/FeatureOverlayMgr.js';\nimport ngeoMapRecenter from 'ngeo/map/recenter.js';\nimport ngeoMapResizemap from 'ngeo/map/resizemap.js';\nimport ngeoMapScaleselector from 'ngeo/map/scaleselector.js';\n\n/**\n * Also related to the map but not included in the module:\n *  - ngeo.map.FeatureOverlay (already required by ngeo.map.FeatureOverlayMgr)\n *\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMapModule', [\n  ngeoBase.module.name, // Change me when all dependencies are in a module.\n  ngeoMapBackgroundLayerMgr.module.name,\n  ngeoMapDirective.name,\n  ngeoMapFeatureOverlayMgr.module.name,\n  ngeoMapRecenter.name,\n  ngeoMapResizemap.name,\n  ngeoMapScaleselector.name\n]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/module.js","/**\n * @module ngeo.map.BackgroundLayerMgr\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoCustomEvent from 'ngeo/CustomEvent.js';\nimport * as olBase from 'ol/index.js';\nimport olObservable from 'ol/Observable.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport olSourceWMTS from 'ol/source/WMTS.js';\n\n/**\n * Provides a service for setting/unsetting background layers\n * in maps.\n *\n * The notion of background/base layers doesn't exist in OpenLayers. This\n * service adds that notion.\n *\n * Setting a background layer to map is done with the `set` function:\n *\n *     ngeoBackgroundLayerMgr.set(map, layer);\n *\n * To unset the background layer pass `null` as the `layer` argument:\n *\n *     ngeoBackgroundLayerMgr.set(map, null);\n *\n * The `get` function returns the current background layer of the map passed\n * as an argument. `null` is returned if the map doesn't have a background\n * layer.\n *\n * The background layer is always added at index 0 in the map's layers\n * collection. When a background layer is set it is inserted (at index 0)\n * if the map does not already have a background layer, otherwise the\n * new background layer replaces the previous one at index 0.\n *\n * Users can subscribe to a 'change' event to get notified when the background\n * layer changes:\n *\n *     ngeoBackgroundLayerMgr.on('change', function(e) {\n *       // do something with the layer\n *       let layer = ngeoBackgroundLayerMgr.get();\n *       // know which layer was used before\n *       let previous = e.previous\n *     });\n *\n * See our live examples:\n * [../examples/backgroundlayer.html](../examples/backgroundlayer.html)\n * [../examples/backgroundlayerdropdown.html](../examples/backgroundlayerdropdown.html)\n *\n * @extends {ol.Observable}\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoBackgroundLayerMgr\n */\nconst exports = function() {\n\n  olObservable.call(this);\n\n  /**\n   * Object used to track if maps have background layers.\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.mapUids_ = {};\n};\n\nolBase.inherits(exports, olObservable);\n\n\n/**\n * Return the current background layer of a given map. `null` is returned if\n * the map does not have a background layer.\n * @param {ol.Map} map Map.\n * @return {ol.layer.Base} layer The background layer.\n * @export\n */\nexports.prototype.get = function(map) {\n  const mapUid = olBase.getUid(map).toString();\n  return mapUid in this.mapUids_ ? map.getLayers().item(0) : null;\n};\n\n\n/**\n * Set the background layer of a map. If `layer` is `null` the background layer\n * is removed.\n * @param {ol.Map} map The map.\n * @param {ol.layer.Base} layer The new background layer.\n * @return {ol.layer.Base} The previous background layer.\n * @export\n */\nexports.prototype.set = function(map, layer) {\n  const mapUid = olBase.getUid(map).toString();\n  const previous = this.get(map);\n  if (previous !== null) {\n    googAsserts.assert(mapUid in this.mapUids_);\n    if (layer !== null) {\n      map.getLayers().setAt(0, layer);\n    } else {\n      map.getLayers().removeAt(0);\n      delete this.mapUids_[mapUid];\n    }\n  } else if (layer !== null) {\n    map.getLayers().insertAt(0, layer);\n    this.mapUids_[mapUid] = true;\n  }\n  /** @type {ngeox.BackgroundEvent} */\n  const event = new ngeoCustomEvent('change', {\n    current: layer,\n    previous: previous\n  });\n  this.dispatchEvent(event);\n\n  return previous;\n};\n\n/**\n * @param {ol.Map} map The map.\n * @param {Object.<string, string>} dimensions The global dimensions object.\n * @export\n */\nexports.prototype.updateDimensions = function(map, dimensions) {\n  const baseBgLayer = this.get(map);\n  if (baseBgLayer) {\n    let layers = [baseBgLayer];\n    if (baseBgLayer instanceof olLayerGroup) {\n      // Handle the first level of layers of the base background layer.\n      layers = baseBgLayer.getLayers().getArray();\n    }\n\n    layers.forEach((layer) => {\n      googAsserts.assertInstanceof(layer, olLayerLayer);\n      if (layer) {\n        let hasUpdates = false;\n        const updatedDimensions = {};\n        for (const key in layer.get('dimensions')) {\n          const value = dimensions[key];\n          if (value !== undefined) {\n            updatedDimensions[key] = value;\n            hasUpdates = true;\n          }\n        }\n        if (hasUpdates) {\n          const source = layer.getSource();\n          if (source instanceof olSourceWMTS) {\n            source.updateDimensions(updatedDimensions);\n            source.refresh();\n          } else if (source instanceof olSourceTileWMS || source instanceof olSourceImageWMS) {\n            source.updateParams(updatedDimensions);\n            source.refresh();\n          }\n        }\n      }\n    });\n  }\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoBackgroundLayerMgr', []);\nexports.module.service('ngeoBackgroundLayerMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/BackgroundLayerMgr.js","/**\n * @module ngeo.map.directive\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\n\n// TODO Remove me, there should not be a dependency on datasources from the map.\nimport ngeoDatasourceSyncDataSourcesMap from 'ngeo/datasource/SyncDataSourcesMap.js';\n\nimport olEvents from 'ol/events.js';\nimport olMap from 'ol/Map.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMap', [\n  ngeoDatasourceSyncDataSourcesMap.module.name\n]);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * Provides a directive used to insert a user-defined OpenLayers\n * map in the DOM. The directive does not create an isolate scope.\n *\n * Examples:\n *\n *   Simple:\n *\n *      <div ngeo-map=\"ctrl.map\"></div>\n *\n *   Manage window resizing:\n *\n *      <div\n *        ngeo-map=\"ctrl.map\"\n *        ngeo-map-manage-resize=\"ctrl.manageResize\"\n *        ngeo-map-resize-transition=\"ctrl.resizeTransition\">\n *      </div>\n *\n * See our live examples:\n * [../examples/permalink.html](../examples/permalink.html)\n * [../examples/simple.html](../examples/simple.html)\n *\n * @htmlAttribute {ol.Map} ngeo-map The map.\n * @param {angular.$window} $window The Angular $window service.\n * @param {ngeo.datasource.SyncDataSourcesMap} ngeoSyncDataSourcesMap Ngeo sync\n *     data sources map service.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoMap\n *//* @ngInject\n */\nexports.directive_ = function($window, ngeoSyncDataSourcesMap) {\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      // Get the 'ol.Map' object from attributes and manage it accordingly\n      const attr = 'ngeoMap';\n      const prop = attrs[attr];\n\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      map.setTarget(element[0]);\n\n      ngeoSyncDataSourcesMap.map = map;\n\n\n      // Get the 'window resize' attributes, which are optionnal. If defined,\n      // the browser window 'resize' event is listened to update the size of\n      // the map when fired. A transition option is also available to let any\n      // animation that may occur on the div of the map to smootly resize the\n      // map while in progress.\n      const manageResizeAttr = 'ngeoMapManageResize';\n      const manageResizeProp = attrs[manageResizeAttr];\n      const manageResize = scope.$eval(manageResizeProp);\n\n      if (manageResize) {\n        const resizeTransitionAttr = 'ngeoMapResizeTransition';\n        const resizeTransitionProp = attrs[resizeTransitionAttr];\n\n        const resizeTransition = /** @type {number|undefined} */ (\n          scope.$eval(resizeTransitionProp));\n\n        olEvents.listen(\n          $window,\n          'resize',\n          () => {\n            if (resizeTransition) {\n              // Resize with transition\n              const start = Date.now();\n              let loop = true;\n              const adjustSize = function() {\n                map.updateSize();\n                map.renderSync();\n                if (loop) {\n                  $window.requestAnimationFrame(adjustSize);\n                }\n                if (Date.now() - start > resizeTransition) {\n                  loop = false;\n                }\n              };\n              adjustSize();\n            } else {\n              // A single plain resize\n              map.updateSize();\n            }\n          }\n        );\n      }\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoMap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/directive.js","/**\n * @module ngeo.datasource.SyncDataSourcesMap\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoDatasourceDataSource from 'ngeo/datasource/DataSource.js';\n\n/** @suppress {extraRequire} */\nimport ngeoDatasourceDataSources from 'ngeo/datasource/DataSources.js';\n\nimport olEvents from 'ol/events.js';\nimport olObservable from 'ol/Observable.js';\nimport olView from 'ol/View.js';\nimport googAsserts from 'goog/asserts.js';\n\nconst exports = class {\n\n  /**\n   * This service is responsible of the synchronization between the ngeo\n   * collection of data sources and a specific map. It listens to events\n   * that come directly or indirectly from the map and update the inner\n   * properties of the data sources.\n   *\n   * The following data sources properties are synchronized here:\n   *\n   * - inRange: The map view 'change:resolution' event is listened and the\n   *   property is updated depending on the current resolution.\n   *\n   * @param {ngeox.datasource.DataSources} ngeoDataSources Ngeo collection of\n   *     data sources objects.\n   *\n   * @struct\n   * @ngdoc service\n   * @ngname ngeoSyncDataSourcesMap\n   *//* @ngInject\n   */\n  constructor(ngeoDataSources) {\n\n    /**\n     * @type {ngeox.datasource.DataSources}\n     * @private\n     */\n    this.ngeoDataSources_ = ngeoDataSources;\n\n    /**\n     * @type {ol.Map}\n     * @private\n     */\n    this.map_ = null;\n\n    /**\n     * @type {!Array.<!ol.EventsKey>}\n     * @private\n     */\n    this.listenerKeys_ = [];\n\n    olEvents.listen(this.ngeoDataSources_, 'add', this.handleDataSourcesAdd_, this);\n  }\n\n  /**\n   * Set a map to this service. Null can be given to unset the map.\n   * @param {?ol.Map} map Map.\n   */\n  set map(map) {\n    if (this.map_) {\n      this.unbindMap_(this.map_);\n    }\n\n    this.map_ = map;\n\n    if (map) {\n      this.bindMap_(map);\n    }\n  }\n\n  /**\n   * Bind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  bindMap_(map) {\n\n    // (1) Event listeners\n    const view = map.getView();\n    this.listenerKeys_.push(\n      olEvents.listen(view, 'change:resolution', this.handleViewResolutionChange_, this)\n    );\n\n    // (2) Sync resolution with existing data sources\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Unbind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  unbindMap_(map) {\n    olObservable.unByKey(this.listenerKeys_);\n    this.listenerKeys_ = [];\n  }\n\n  /**\n   * Called when the resolution of the map view changes. Synchronize the\n   * datasources to current resolution of the view.\n   * @param {Event} evt Event.\n   * @private\n   */\n  handleViewResolutionChange_(evt) {\n    const view = evt.target;\n    googAsserts.assertInstanceof(view, olView);\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Synchronize all datasources in the ngeo collection with a given resolution.\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourcesToResolution_(resolution) {\n    this.ngeoDataSources_.forEach((dataSource) => {\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    });\n  }\n\n  /**\n   * Synchronize a data source `inRange` property with a given resolution.\n   * @param {ngeo.datasource.DataSource} dataSource Data source\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourceToResolution_(dataSource, resolution) {\n    // No need to do anything if the data source doesn't support dynamic\n    // setting of inRange\n    if (!dataSource.supportsDynamicInRange) {\n      return;\n    }\n\n    const maxResolution = dataSource.maxResolution;\n    const minResolution = dataSource.minResolution;\n\n    const inMinRange = minResolution === null ||\n        minResolution === undefined ||\n        resolution >= minResolution;\n    const inMaxRange = maxResolution === null ||\n        maxResolution === undefined ||\n        resolution <= maxResolution;\n    const inRange = inMinRange && inMaxRange;\n\n    dataSource.inRange = inRange;\n  }\n\n  /**\n   * Called when a new data source is added to the ngeo collection. If there's\n   * map bound, update its `inRange` right away.\n   * @param {!ol.Collection.Event} event Event\n   * @private\n   */\n  handleDataSourcesAdd_(event) {\n    const dataSource = googAsserts.assertInstanceof(\n      event.element, ngeoDatasourceDataSource);\n    if (this.map_) {\n      const resolution = this.map_.getView().getResolution();\n      googAsserts.assertNumber(resolution);\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    }\n  }\n\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoSyncDataSourcesMap', [\n  ngeoDatasourceDataSources.module.name,\n]);\nexports.module.service('ngeoSyncDataSourcesMap', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/SyncDataSourcesMap.js","/**\n * @module ngeo.map.FeatureOverlay\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olBase from 'ol/index.js';\nimport olEvents from 'ol/events.js';\n\n/**\n * @constructor\n * @param {ngeo.map.FeatureOverlayMgr} manager The feature overlay manager.\n * @param {number} index This feature overlay's index.\n */\nconst exports = function(manager, index) {\n\n  /**\n   * @type {ngeo.map.FeatureOverlayMgr}\n   * @private\n   */\n  this.manager_ = manager;\n\n  /**\n   * @type {ol.Collection.<ol.Feature>}\n   * @private\n   */\n  this.features_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.index_ = index;\n};\n\n\n/**\n * Add a feature to the feature overlay.\n * @param {ol.Feature} feature The feature to add.\n * @export\n */\nexports.prototype.addFeature = function(feature) {\n  this.manager_.addFeature(feature, this.index_);\n};\n\n\n/**\n * Remove a feature from the feature overlay.\n * @param {ol.Feature} feature The feature to remove.\n * @export\n */\nexports.prototype.removeFeature = function(feature) {\n  this.manager_.removeFeature(feature, this.index_);\n};\n\n\n/**\n * Remove all the features from the feature overlay.\n * @export\n */\nexports.prototype.clear = function() {\n  this.manager_.clear(this.index_);\n};\n\n\n/**\n * Configure this feature overlay with a feature collection. Features added\n * to the collection are also added to the overlay. Same for removal. If you\n * configure the feature overlay with a feature collection you will use the\n * collection to add and remove features instead of using the overlay's\n * `addFeature`, `removeFeature` and `clear` functions.\n * @param {ol.Collection.<ol.Feature>} features Feature collection.\n * @export\n */\nexports.prototype.setFeatures = function(features) {\n  if (this.features_ !== null) {\n    this.features_.clear();\n    olEvents.unlisten(this.features_, 'add', this.handleFeatureAdd_, this);\n    olEvents.unlisten(this.features_, 'remove', this.handleFeatureRemove_, this);\n  }\n  if (features !== null) {\n    features.forEach(function(feature) {\n      this.addFeature(feature);\n    }, this);\n    olEvents.listen(features, 'add', this.handleFeatureAdd_, this);\n    olEvents.listen(features, 'remove', this.handleFeatureRemove_, this);\n  }\n  this.features_ = features;\n};\n\n\n/**\n * Set a style for the feature overlay.\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @export\n */\nexports.prototype.setStyle = function(style) {\n  this.manager_.setStyle(style, this.index_);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureAdd_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureRemove_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.removeFeature(feature);\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlay', []);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlay.js","/**\n * @module ngeo.map.recenter\n*/\nimport ngeoBase from 'ngeo/index.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoRecenter', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides the \"ngeoRecenter\" directive, a widget for recentering a map\n * to a specific extent (by using `ngeo-extent`) or a specific zoom level\n * (by using `ngeo-zoom`).\n *\n * Example:\n *\n *      <div ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <a href=\"#\" ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</a>\n *        <a href=\"#\" ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</a>\n *        <a href=\"#\" ngeo-zoom=\"1\">Zoom to level 1</a>\n *      </div>\n *\n * Or with a select:\n *\n *      <select ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <option ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</option>\n *        <option ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</option>\n *      </select>\n *\n * See our live example: [../examples/recenter.html](../examples/recenter.html)\n *\n * @htmlAttribute {ol.Map} ngeo-recenter-map The map.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoRecenter\n */\nexports.directive_ = function() {\n  return {\n    restrict: 'A',\n    link: ($scope, $element, $attrs) => {\n      const mapExpr = $attrs['ngeoRecenterMap'];\n      const map = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n\n      function recenter(element) {\n        const extent = element.attr('ngeo-extent');\n        if (extent !== undefined) {\n          const size = /** @type {ol.Size} */ (map.getSize());\n          map.getView().fit($scope.$eval(extent), {size});\n        }\n        const zoom = element.attr('ngeo-zoom');\n        if (zoom !== undefined) {\n          map.getView().setZoom($scope.$eval(zoom));\n        }\n      }\n\n      // if the children is a link or button\n      $element.on('click', '*', function(event) {\n        recenter(angular.element($(this)));\n      });\n\n      // if the children is an option inside a select\n      $element.on('change', (event) => {\n        const selected = event.target.options[event.target.selectedIndex];\n        recenter(angular.element(selected));\n      });\n\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoRecenter', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/recenter.js","/**\n * @module ngeo.map.resizemap\n*/\nimport googAsserts from 'goog/asserts.js';\nimport ngeoBase from 'ngeo/index.js';\nimport olMap from 'ol/Map.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoResizemap', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides a directive that resizes the map in an animation loop\n * during 1 second when the value of \"state\" changes. This is especially useful\n * when changing the size of other elements with a transition leads to a change\n * of the map size.\n *\n * Example:\n *\n *      <div ng-class=\"ctrl.open ? 'open' : 'close' ngeo-resizemap=\"ctrl.map\"\n *        ngeo-resizemap-state=\"open\">\n *      <div>\n *      <input type=\"checkbox\" ng-model=\"ctrl.open\" />\n *\n * See our live example: [../examples/animation.html](../examples/animation.html)\n *\n * @param {angular.$window} $window Angular window service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoResizemap\n */\nexports.directive_ = function($window) {\n  const /** @type {number} */ duration = 1000;\n\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      const attr = 'ngeoResizemap';\n      const prop = attrs[attr];\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      const stateExpr = attrs['ngeoResizemapState'];\n      googAsserts.assert(stateExpr !== undefined);\n\n      let start;\n      let animationDelayKey;\n\n      const animationDelay = () => {\n        map.updateSize();\n        map.renderSync();\n\n        if (Date.now() - start < duration) {\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      };\n\n      // Make sure the map is resized when the animation ends.\n      // It may help in case the animation didn't start correctly.\n      element.on('transitionend', () => {\n        map.updateSize();\n        map.renderSync();\n      });\n\n      scope.$watch(stateExpr, (newVal, oldVal) => {\n        if (newVal != oldVal) {\n          start = Date.now();\n          $window.cancelAnimationFrame(animationDelayKey);\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      });\n    }\n  };\n};\n\n\nexports.directive('ngeoResizemap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/resizemap.js","/**\n * @module ngeo.map.scaleselector\n*/\nimport ngeoBase from 'ngeo/index.js';\nimport * as olArray from 'ol/array.js';\nimport olMap from 'ol/Map.js';\nimport olEvents from 'ol/events.js';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoScaleselector', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\nexports.value('ngeoScaleselectorTemplateUrl',\n  /**\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @return {string} Template URL.\n     */\n  (element, attrs) => {\n    const templateUrl = attrs['ngeoScaleselectorTemplateurl'];\n    return templateUrl !== undefined ? templateUrl :\n      `${ngeoBase.baseModuleTemplateUrl}/map/scaleselector.html`;\n  });\n\n\n/**\n * Provides the \"ngeoScaleselector\" directive, a widget for\n * selecting map scales.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\" ngeo-scaleselector-map=\"ctrl.map\">\n *     </div>\n *\n * The expression passed to the ngeo-scaleselector attribute should return an\n * array of this form:\n *\n *    [20000, 10000, 5000, 2500]\n *\n * That directive's partial uses Bootstrap's `dropdown` and `dropdown-menu`\n * classes, and `data-toggle=\"dropdown\"`, so it is meant to be used with\n * Bootstrap's \"dropdown\" jQuery plugin.\n *\n * You can pass options to configure the behaviors of this element. Options is\n * a {@link ngeox.ScaleselectorOptions} object.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\"\n *       ngeo-scaleselector-map=\"ctrl.map\"\n *       ngeo-scaleselector-options=\"ctrl.scaleSelectorOptions\">\n *     </div>\n *\n * By default the directive uses \"scaleselector.html\" as its templateUrl. This\n * can be changed by redefining the \"ngeoScaleselectorTemplateUrl\" value.\n *\n * The directive has its own scope, but it is not isolate scope. That scope\n * includes a reference to the directive's controller: the \"scaleselectorCtrl\"\n * scope property.\n *\n * The directive doesn't create any watcher. In particular the object including\n * the scales information is now watched.\n *\n * See our live example: [../examples/scaleselector.html](../examples/scaleselector.html)\n *\n * @htmlAttribute {!Array.<number>} ngeo-scaleselector The available scales.\n * @htmlAttribute {ol.Map} ngeo-scaleselector-map The map.\n * @htmlAttribute {ngeox.ScaleselectorOptions} ngeo-scaleselector-options\n *     Optionnal. The configuration options.\n * @param {string|function(!angular.JQLite=, !angular.Attributes=)}\n *     ngeoScaleselectorTemplateUrl Template URL for the directive.\n * @return {angular.Directive} Directive Definition Object.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoScaleselector\n */\nexports.directive_ = function(ngeoScaleselectorTemplateUrl) {\n  return {\n    restrict: 'A',\n    scope: true,\n    controller: 'NgeoScaleselectorController',\n    templateUrl: ngeoScaleselectorTemplateUrl\n  };\n};\n\n\nexports.directive('ngeoScaleselector', exports.directive_);\n\n\n/**\n * @constructor\n * @private\n * @struct\n * @param {angular.Scope} $scope Directive scope.\n * @param {angular.JQLite} $element Element.\n * @param {angular.Attributes} $attrs Attributes.\n *//* @ngInject\n * @ngdoc controller\n * @ngname NgeoScaleselectorController\n */\nexports.ScaleselectorController_ = function($scope, $element, $attrs) {\n\n  const scalesExpr = $attrs['ngeoScaleselector'];\n\n  /**\n   * The zoom level/scale map object.\n   * @type {!Array.<number>}\n   * @export\n   */\n  this.scales = /** @type {!Array.<number>} */\n    ($scope.$eval(scalesExpr));\n  goog.asserts.assert(this.scales !== undefined);\n\n  /**\n   * @type {Array.<number>}\n   * @export\n   */\n  this.zoomLevels;\n\n  $scope.$watch(() => Object.keys(this.scales).length, (newLength) => {\n    this.zoomLevels = Object.keys(this.scales).map(Number);\n    this.zoomLevels.sort(olArray.numberSafeCompareFunction);\n  });\n\n  const mapExpr = $attrs['ngeoScaleselectorMap'];\n\n  /**\n   * @type {ol.Map}\n   * @private\n   */\n  this.map_ = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n  goog.asserts.assertInstanceof(this.map_, olMap);\n\n  const optionsExpr = $attrs['ngeoScaleselectorOptions'];\n  const options = $scope.$eval(optionsExpr);\n\n  /**\n   * @type {!ngeox.ScaleselectorOptions}\n   * @export\n   */\n  this.options = exports.ScaleselectorController_.getOptions_(options);\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.$scope_ = $scope;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.resolutionChangeKey_ = null;\n\n  /**\n   * @type {number|undefined}\n   * @export\n   */\n  this.currentScale = undefined;\n\n  const view = this.map_.getView();\n  if (view !== null) {\n    const currentZoom = this.map_.getView().getZoom();\n    if (currentZoom !== undefined) {\n      this.currentScale = this.getScale(currentZoom);\n    }\n  }\n\n  olEvents.listen(this.map_, 'change:view', this.handleViewChange_, this);\n\n  this.registerResolutionChangeListener_();\n\n  $scope['scaleselectorCtrl'] = this;\n\n};\n\n\n/**\n * @param {?} options Options after expression evaluation.\n * @return {!ngeox.ScaleselectorOptions} Options object.\n * @private\n */\nexports.ScaleselectorController_.getOptions_ = function(options) {\n  let dropup = false;\n  if (options !== undefined) {\n    dropup = options['dropup'] == true;\n  }\n  return /** @type {ngeox.ScaleselectorOptions} */ ({\n    dropup: dropup\n  });\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @return {number} Scale.\n * @export\n */\nexports.ScaleselectorController_.prototype.getScale = function(zoom) {\n  return this.scales[zoom];\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @export\n */\nexports.ScaleselectorController_.prototype.changeZoom = function(zoom) {\n  this.map_.getView().setZoom(zoom);\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleResolutionChange_ = function(e) {\n  const view = this.map_.getView();\n  const currentScale = this.scales[/** @type {number} */ (view.getZoom())];\n\n  // handleResolutionChange_ is a change:resolution listener. The listener\n  // may be executed outside the Angular context, for example when the user\n  // double-clicks to zoom on the map.\n  //\n  // But it may also be executed inside the Angular context, when a function\n  // in Angular context calls setZoom or setResolution on the view, which\n  // is for example what happens when this controller's changeZoom function\n  // is called.\n  //\n  // For that reason we use $applyAsync instead of $apply here.\n\n  if (currentScale !== undefined) {\n    this.$scope_.$applyAsync(() => {\n      this.currentScale = currentScale;\n    });\n  }\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleViewChange_ = function(e) {\n  this.registerResolutionChangeListener_();\n  this.handleResolutionChange_(null);\n};\n\n\n/**\n * @private\n */\nexports.ScaleselectorController_.prototype.registerResolutionChangeListener_ = function() {\n  if (this.resolutionChangeKey_ !== null) {\n    olEvents.unlistenByKey(this.resolutionChangeKey_);\n  }\n  const view = this.map_.getView();\n  this.resolutionChangeKey_ = olEvents.listen(view,\n    'change:resolution', this.handleResolutionChange_,\n    this);\n};\n\n\nexports.controller('NgeoScaleselectorController',\n  exports.ScaleselectorController_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/scaleselector.js","/**\n * @module app.simple3d\n*/\nconst exports = {};\n\nimport './simple3d.css';\nimport './common_dependencies.js';\n/** @suppress {extraRequire} */\nimport olMap from 'ol/Map.js';\n\nimport olView from 'ol/View.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olSourceOSM from 'ol/source/OSM.js';\nimport ngeoOlcsOlcsModule from 'ngeo/olcs/olcsModule.js';\nimport ngeoBase from 'ngeo/index.js';\nimport ngeoMapModule from 'ngeo/map/module.js';\nimport ngeoOlcsManager from 'ngeo/olcs/Manager.js';\n\n\n/** @type {!angular.Module} **/\nexports.module = angular.module('app', [\n  ngeoBase.module.name,\n  ngeoMapModule.name,\n  ngeoOlcsOlcsModule.name\n]);\n\n\n/**\n * @constructor\n *//* @ngInject\n * @param {angular.Scope} $rootScope Root scope.\n * @param {ngeo.olcs.Service} ngeoOlcsService The service.\n */\nexports.MainController = function($rootScope, ngeoOlcsService) {\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = new olMap({\n    layers: [\n      new olLayerTile({\n        source: new olSourceOSM()\n      })\n    ],\n    view: new olView({\n      center: [0, 0],\n      zoom: 4\n    })\n  });\n\n  // TODO: detect and use different URL for DEBUG MODE\n  const cesiumUrl = '../node_modules/@camptocamp/cesium/Build/Cesium/Cesium.js';\n\n  /**\n   * @export\n   * @type {olcs.contrib.Manager}\n   */\n  this.ol3dm = new ngeoOlcsManager(cesiumUrl, $rootScope, {\n    map: this.map\n  });\n\n  // Optionally, the manager can be registered into the olcs service\n  ngeoOlcsService.initialize(this.ol3dm);\n};\n\nexports.module.controller('MainController', exports.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/simple3d.js","/**\n * @module ngeo.olcs.olcsModule\n*/\nimport Service from 'ngeo/olcs/Service.js';\nimport control from 'ngeo/olcs/controls3d.js';\n\n\n/**\n * @type {!angular.Module}\n */\nconst m = angular.module('ngeoOlcsModule', [\n  control.name,\n  Service.module.name\n]);\n\nconst exports = m;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/olcsModule.js","/**\n * @module ngeo.olcs.Service\n*/\nconst Service = class {\n  constructor() {\n    /**\n     * @private\n     * @type {olcs.contrib.Manager|undefined}\n     */\n    this.manager_;\n  }\n\n  /**\n   * @export\n   * @param {olcs.contrib.Manager} manager Manager.\n   */\n  initialize(manager) {\n    this.manager_ = manager;\n  }\n\n  /**\n   * @export\n   * @return {olcs.contrib.Manager|undefined} the manager.\n   */\n  getManager() {\n    return this.manager_;\n  }\n};\n\nconst name = 'ngeoOlcsService';\nService.module = angular.module(name, []).service(name, Service);\n\nconst exports = Service;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/Service.js","/**\n * @module ngeo.olcs.controls3d\n*/\nimport * as olEasing from 'ol/easing.js';\nimport olcsCore from 'olcs/core.js';\nimport ngeoBase from 'ngeo/index.js';\n\n\nfunction shouldUpdate(older, newer) {\n  return Number.isFinite(newer) && (!Number.isFinite(older) || Math.abs(newer - older) > 0.05);\n}\n\n\nconst Controller = class {\n\n  /**\n   *//* @ngInject\n   * @param {!jQuery} $element The element\n   * @param {ngeo.olcs.Service} ngeoOlcsService The ol-cesium service.\n   */\n  constructor($element, ngeoOlcsService) {\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.element_ = $element;\n\n    /**\n     * @type {olcs.contrib.Manager}\n     * @export\n     */\n    this.ol3dm;\n\n    /**\n     * @type {number}\n     * @export\n     */\n    this.minTilt;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilt;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.tiltRightEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.tiltLeftEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.rotation3dEl_;\n\n    /**\n     * @type {jQuery}\n     * @private\n     */\n    this.angle3dEl_;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.previousRotation_;\n\n    /**\n     * @type {Cesium.Matrix4}\n     * @private\n     */\n    this.previousViewMatrix_;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.animationFrameRequestId_;\n\n    /**\n     * @type {ngeo.olcs.Service}\n     * @private\n     */\n    this.olcsService_ = ngeoOlcsService;\n  }\n\n  updateWidget_() {\n    const newRotation = this.ol3dm.getOl3d().getOlView().getRotation();\n    if (shouldUpdate(this.previousRotation_, newRotation)) {\n      this.rotateElement_(this.rotation3dEl_, newRotation);\n      this.previousRotation_ = newRotation;\n    }\n\n    const newViewMatrix = this.ol3dm.getCesiumViewMatrix();\n    if (!Cesium.Matrix4.equalsEpsilon(this.previousViewMatrix_, newViewMatrix, 1e-5)) {\n      const newTilt = this.ol3dm.getTiltOnGlobe(); // this is expensive!!\n      if (Number.isFinite(newTilt || 0)) { // Workaround https://github.com/google/closure-compiler/pull/2712\n        this.rotateElement_(this.angle3dEl_, newTilt);\n        this.previousViewMatrix_ = Cesium.Matrix4.clone(newViewMatrix);\n\n        // if min or max tilt is reached, disable the tilting buttons\n        const buffer = 0.01; // rad\n        if (newTilt - this.minTilt < buffer) {\n          this.tiltRightEl_.addClass('ngeo-right-inactive');\n        } else if (this.tiltRightEl_.hasClass('ngeo-right-inactive')) {\n          this.tiltRightEl_.removeClass('ngeo-right-inactive');\n        }\n        if (this.maxTilt - newTilt < buffer) {\n          this.tiltLeftEl_.addClass('ngeo-left-inactive');\n        } else if (this.tiltLeftEl_.hasClass('ngeo-left-inactive')) {\n          this.tiltLeftEl_.removeClass('ngeo-left-inactive');\n        }\n      }\n    }\n\n    this.animationFrameRequestId_ = requestAnimationFrame(() => this.updateWidget_());\n  }\n\n  $onDestroy() {\n    if (this.animationFrameRequestId_) {\n      cancelAnimationFrame(this.animationFrameRequestId_);\n    }\n  }\n\n  $onInit() {\n    if (this.minTilt === undefined) {\n      this.minTilt = 0;\n    }\n    if (this.maxTilt === undefined) {\n      this.maxTilt = 7 * Math.PI / 16;\n    }\n    if (!this.ol3dm) {\n      this.ol3dm = goog.asserts.assert(this.olcsService_.getManager());\n    }\n    this.tiltRightEl_ = this.element_.find('.ngeo-tilt-right');\n    this.tiltLeftEl_ = this.element_.find('.ngeo-tilt-left');\n    this.rotation3dEl_ = this.element_.find('.ngeo-rotation3d');\n    this.angle3dEl_ = this.element_.find('.ngeo-angle3d');\n    this.updateWidget_();\n  }\n\n\n  /**\n   * @param {jQuery} element Element to rotate.\n   * @param {(number|undefined)} angle Angle in radians\n   * @private\n   */\n  rotateElement_(element, angle) {\n    const r = `rotate(${angle}rad)`;\n    element.css({\n      '-moz-transform': r,\n      '-webkit-transform': r,\n      '-o-transform': r,\n      '-ms-transform': r,\n      'transform': r\n    });\n  }\n\n\n  /**\n   * @param {number} angle Angle in degrees.\n   * @export\n   */\n  rotate(angle) {\n    angle = Cesium.Math.toRadians(angle);\n    this.ol3dm.setHeading(angle);\n  }\n\n\n  /**\n   * @param {number} angle Angle in degrees.\n   * @export\n   */\n  tilt(angle) {\n    angle = Cesium.Math.toRadians(angle);\n    const tiltOnGlobe = this.ol3dm.getTiltOnGlobe();\n    if (tiltOnGlobe + angle < this.minTilt) {\n      angle = this.minTilt - tiltOnGlobe;\n    } else if (tiltOnGlobe + angle > this.maxTilt) {\n      angle = this.maxTilt - tiltOnGlobe;\n    }\n    const scene = this.ol3dm.getCesiumScene();\n    olcsCore.rotateAroundBottomCenter(scene, angle);\n  }\n\n\n  /**\n   * @param {number} delta -1 to zoom out and 1 to zoom in.\n   * @export\n   */\n  zoom(delta) {\n    const view = this.ol3dm.getOlView();\n    const cur = view.getResolution();\n    const newResolution = view.constrainResolution(cur, delta);\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    view.animate({\n      resolution: newResolution,\n      duration: 250,\n      easing: olEasing.easeOut\n    });\n  }\n};\n\n\n/**\n * @param {!angular.Attributes} $attrs Attributes.\n * @param {!string} ngeoOlcsControls3dTemplateUrl Template function.\n * @return {string} Template URL.\n *//* @ngInject\n */\nfunction ngeoOlcsControls3dTemplateUrlInjectable($attrs, ngeoOlcsControls3dTemplateUrl) {\n  if (ngeoOlcsControls3dTemplateUrl) {\n    return ngeoOlcsControls3dTemplateUrl;\n  }\n  const templateUrl = $attrs['ngeoOlcsControls3dTemplateUrl'];\n  return templateUrl ? templateUrl : `${ngeoBase.baseModuleTemplateUrl}/olcs/controls3d.html`;\n}\n\n/**\n * Provides the \"ngeoOlcsControls3d\" component, a widget for\n * controlling the 3D camera.\n *\n * Example:\n *\n *     <ngeo-olcs-controls3d ng-if=\"$ctrl.manager && $ctrl.manager.is3dEnabled()\">\n *     </ngeo-olcs-controls3d>\n *\n * By default the directive uses \"controls3d.html\" as its templateUrl. This\n * can be changed by redefining the \"ngeoOlcsControls3dTemplateUrl\" value.\n *\n * See our live example: [../examples/simple3d.html](../examples/simple3d.html)\n *\n * @htmlAttribute {olcs.contrib.Manager} ngeo-olcs-manager The OL-Cesium manager.\n * @type {!angular.Component}\n * @ngdoc component\n * @ngname ngeoOlcsControls3d\n */\nconst component = {\n  bindings: {\n    'minTilt': '<?',\n    'maxTilt': '<?',\n    'ol3dm': '<?'\n  },\n  controller: Controller,\n  templateUrl: ngeoOlcsControls3dTemplateUrlInjectable\n};\n\nconst name = 'ngeoOlcsControls3d';\n\nconst exports = angular.module(name, [])\n  .component(name, component)\n  .value('ngeoOlcsControls3dTemplateUrl', '');\n\nngeoBase.module.requires.push(name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/controls3d.js","/**\n * @module ngeo.olcs.Manager\n*/\nimport olcsContribManager from 'olcs/contrib/Manager.js';\n\nconst Manager = class extends olcsContribManager {\n  /**\n   * @param {string} url .\n   * @param {angular.Scope} $rootScope .\n   * @param {olcsx.contrib.ManagerOptions} options .\n   */\n  constructor(url, $rootScope, options) {\n    super(url, options);\n    /**\n     * @type {angular.Scope}\n     * @private\n     */\n    this.rootScope_ = $rootScope;\n  }\n\n\n  /**\n   * @override\n   * @export\n   */\n  toggle3d() {\n    // The transition is asynchronous and at the end of it the state of OLCesium is changed.\n    // In order to have all code dependent on OLCesium state updated, we kick an Angular digest cycle.\n    const promise = super.toggle3d();\n    return promise.then(() => {\n      this.rootScope_.$apply();\n    });\n  }\n};\n\nconst exports = Manager;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/olcs/Manager.js","/**\n * @module\n */\nconst exports = class {\n  /**\n   * @param {string} url\n   * @struct\n   * @api\n   */\n  constructor(url) {\n    /**\n     * @type {Promise<undefined>}\n     * @protected\n     */\n    this.promise;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = url;\n  }\n\n  /**\n   * @return {Promise<undefined>}\n   * @api\n   */\n  load() {\n    if (!this.promise) {\n      // not yet loading\n      this.promise = new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.onload = () => resolve();\n        script.onerror = () => reject();\n        document.head.appendChild(script);\n        script.src = this.url_;\n      });\n    }\n    return this.promise;\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/contrib/LazyLoader.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nconst exports = {};\n\n\n/**\n * Cast to object.\n * @param {Object} param\n * @return {Object}\n */\nexports.obj = function(param) {\n  return param;\n};\n\n\n/**\n * @type {boolean|undefined}\n * @private\n */\nexports.supportsImageRenderingPixelatedResult_ = undefined;\n\n\n/**\n * @type {string|undefined}\n * @private\n */\nexports.imageRenderingValueResult_ = undefined;\n\n\n/**\n * @return {boolean}\n */\nexports.supportsImageRenderingPixelated = function() {\n  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');\n    // canvas.style.imageRendering will be undefined, null or an\n    // empty string on unsupported browsers.\n    const tmp = canvas.style['imageRendering']; // non standard\n    exports.supportsImageRenderingPixelatedResult_ = !!tmp;\n    if (exports.supportsImageRenderingPixelatedResult_) {\n      exports.imageRenderingValueResult_ = tmp;\n    }\n  }\n  return exports.supportsImageRenderingPixelatedResult_;\n};\n\n\n/**\n * @return {string}\n */\nexports.imageRenderingValue = function() {\n  exports.supportsImageRenderingPixelated();\n  return exports.imageRenderingValueResult_ || '';\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/util.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\n// Apache v2 license\n// https://github.com/TerriaJS/terriajs/blob/\n// ebd382a8278a817fce316730d9e459bbb9b829e9/lib/Models/Cesium.js\n\nconst exports = function(ol3d, debug) {\n  this.ol3d = ol3d;\n  this.scene_ = ol3d.getCesiumScene();\n  this.canvas_ = this.scene_.canvas;\n  this.verboseRendering = debug;\n  this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);\n\n  this.lastCameraViewMatrix_ = new Cesium.Matrix4();\n  this.lastCameraMoveTime_ = 0;\n  this.stoppedRendering = false;\n\n  this._removePostRenderListener = this.scene_.postRender.addEventListener(this.postRender.bind(this));\n\n  this.repaintEventNames_ = [\n    'mousemove', 'mousedown', 'mouseup',\n    'touchstart', 'touchend', 'touchmove',\n    'pointerdown', 'pointerup', 'pointermove',\n    'wheel'\n  ];\n\n  const CameraPrototype = Cesium.Camera.prototype;\n  this.interceptedAPIs_ = [\n    [CameraPrototype, 'setView'],\n    [CameraPrototype, 'move'],\n    [CameraPrototype, 'rotate'],\n    [CameraPrototype, 'lookAt'],\n    [CameraPrototype, 'flyTo'],\n    [CameraPrototype, 'flyToHome'],\n    [CameraPrototype, 'flyToBoundingSphere']\n  ];\n\n  this.originalAPIs_ = this.interceptedAPIs_.map(tuple => tuple[0][tuple[1]]);\n\n  this.originalLoadWithXhr_ = Cesium.loadWithXhr.load;\n  this.originalScheduleTask_ = Cesium.TaskProcessor.prototype.scheduleTask;\n  this.enable();\n};\n\n\n/**\n * Enable.\n */\nexports.prototype.enable = function() {\n  for (const repaintKey of this.repaintEventNames_) {\n    this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n  }\n\n  window.addEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n  // Hacky way to force a repaint when an async load request completes\n  const that = this;\n  Cesium.loadWithXhr.load = function(url, responseType, method, data, headers, deferred, overrideMimeType, preferText, timeout) {\n    deferred['promise']['always'](that._boundNotifyRepaintRequired);\n    that.originalLoadWithXhr_(...arguments); // eslint-disable-line prefer-rest-params\n  };\n\n  // Hacky way to force a repaint when a web worker sends something back.\n  Cesium.TaskProcessor.prototype.scheduleTask = function(parameters, transferableObjects) {\n    const result = that.originalScheduleTask_.call(this, parameters, transferableObjects);\n\n    const taskProcessor = this;\n    if (!taskProcessor._originalWorkerMessageSinkRepaint) {\n      const worker = taskProcessor['_worker'];\n      taskProcessor._originalWorkerMessageSinkRepaint = worker.onmessage;\n      worker.onmessage = function(event) {\n        taskProcessor._originalWorkerMessageSinkRepaint(event);\n        that.notifyRepaintRequired();\n      };\n    }\n\n    return result;\n  };\n\n  // Intercept API calls to trigger a repaint\n  for (let i = 0; i < this.interceptedAPIs_.length; ++i) {\n    const api = this.interceptedAPIs_[i];\n    const parent = api[0];\n    const original = this.originalAPIs_[i];\n    // Not using an arrow function to keep the \"this\" unbounded.\n    parent[api[1]] = function(...args) {\n      original.apply(this, args);\n      that.notifyRepaintRequired();\n    };\n  }\n\n  // Listen for changes on the layer group\n  this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);\n};\n\n\n/**\n * Disable.\n */\nexports.prototype.disable = function() {\n  if (!!this._removePostRenderListener) {\n    this._removePostRenderListener();\n    this._removePostRenderListener = undefined;\n  }\n  for (const repaintKey of this.repaintEventNames_) {\n    this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n  }\n\n  window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n  Cesium.loadWithXhr.load = this.originalLoadWithXhr_;\n  Cesium.TaskProcessor.prototype.scheduleTask = this.originalScheduleTask_;\n\n  // Restore original APIs\n  for (let i = 0; i < this.interceptedAPIs_.length; ++i) {\n    const api = this.interceptedAPIs_[i];\n    const parent = api[0];\n    const original = this.originalAPIs_[i];\n    parent[api[1]] = original;\n  }\n\n  this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);\n};\n\n\n/**\n * @param {number} date\n */\nexports.prototype.postRender = function(date) {\n  // We can safely stop rendering when:\n  //  - the camera position hasn't changed in over a second,\n  //  - there are no tiles waiting to load, and\n  //  - the clock is not animating\n  //  - there are no tweens in progress\n\n  const now = Date.now();\n\n  const scene = this.scene_;\n  const camera = scene.camera;\n\n  if (!Cesium.Matrix4.equalsEpsilon(this.lastCameraViewMatrix_, camera.viewMatrix, 1e-5)) {\n    this.lastCameraMoveTime_ = now;\n  }\n\n  const cameraMovedInLastSecond = now - this.lastCameraMoveTime_ < 1000;\n\n  const surface = scene.globe['_surface'];\n  const tilesWaiting = !surface['tileProvider'].ready ||\n      surface['_tileLoadQueueHigh'].length > 0 ||\n      surface['_tileLoadQueueMedium'].length > 0 ||\n      surface['_tileLoadQueueLow'].length > 0 ||\n      surface['_debug']['tilesWaitingForChildren'] > 0;\n\n  const tweens = scene['tweens'];\n  if (!cameraMovedInLastSecond && !tilesWaiting && tweens.length == 0) {\n    if (this.verboseRendering) {\n      console.log(`stopping rendering @ ${Date.now()}`);\n    }\n    this.ol3d.setBlockCesiumRendering(true);\n    this.stoppedRendering = true;\n  }\n\n  Cesium.Matrix4.clone(camera.viewMatrix, this.lastCameraViewMatrix_);\n};\n\n\n/**\n * Restart render loop.\n * Force a restart of the render loop.\n * @api\n */\nexports.prototype.restartRenderLoop = function() {\n  this.notifyRepaintRequired();\n};\n\n\n/**\n * Notifies the viewer that a repaint is required.\n */\nexports.prototype.notifyRepaintRequired = function() {\n  if (this.verboseRendering && this.stoppedRendering) {\n    console.log(`starting rendering @ ${Date.now()}`);\n  }\n  this.lastCameraMoveTime_ = Date.now();\n  // TODO: do not unblock if not blocked by us\n  this.ol3d.setBlockCesiumRendering(false);\n  this.stoppedRendering = false;\n};\n\n\n/**\n * @param {boolean} debug\n * @api\n */\nexports.prototype.setDebug = function(debug) {\n  this.verboseRendering = debug;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/AutoRenderLoop.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport googAsserts from 'goog/asserts';\nimport olObservable from 'ol/Observable';\nimport olEvents from 'ol/events';\nimport olMath from 'ol/math';\nimport olProj from 'ol/proj';\nimport olcsCore from './core.js';\n\nconst exports = function(scene, map) {\n  /**\n   * @type {!Cesium.Scene}\n   * @private\n   */\n  this.scene_ = scene;\n\n  /**\n   * @type {!Cesium.Camera}\n   * @private\n   */\n  this.cam_ = scene.camera;\n\n  /**\n   * @type {!ol.Map}\n   * @private\n   */\n  this.map_ = map;\n\n  /**\n   * @type {?ol.View}\n   * @private\n   */\n  this.view_ = null;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.viewListenKey_ = null;\n\n  /**\n   * @type {!ol.TransformFunction}\n   * @private\n   */\n  this.toLonLat_ = exports.identityProjection;\n\n  /**\n   * @type {!ol.TransformFunction}\n   * @private\n   */\n  this.fromLonLat_ = exports.identityProjection;\n\n  /**\n   * 0 -- topdown, PI/2 -- the horizon\n   * @type {number}\n   * @private\n   */\n  this.tilt_ = 0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.distance_ = 0;\n\n  /**\n   * @type {?Cesium.Matrix4}\n   * @private\n   */\n  this.lastCameraViewMatrix_ = null;\n\n  /**\n   * This is used to discard change events on view caused by updateView method.\n   * @type {boolean}\n   * @private\n   */\n  this.viewUpdateInProgress_ = false;\n\n  this.map_.on('change:view', function(e) {\n    this.setView_(this.map_.getView());\n  }, this);\n  this.setView_(this.map_.getView());\n};\n\n\n/**\n * @param {Array.<number>} input Input coordinate array.\n * @param {Array.<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array.<number>} Input coordinate array (same array as input).\n */\nexports.identityProjection = function(input, opt_output, opt_dimension) {\n  const dim = opt_dimension || input.length;\n  if (opt_output) {\n    for (let i = 0; i < dim; ++i) {\n      opt_output[i] = input[i];\n    }\n  }\n  return input;\n};\n\n\n/**\n * @param {?ol.View} view New view to use.\n * @private\n */\nexports.prototype.setView_ = function(view) {\n  if (this.view_) {\n    olObservable.unByKey(this.viewListenKey_);\n    this.viewListenKey_ = null;\n  }\n\n  this.view_ = view;\n  if (view) {\n    const toLonLat = olProj.getTransform(view.getProjection(), 'EPSG:4326');\n    const fromLonLat = olProj.getTransform('EPSG:4326', view.getProjection());\n    googAsserts.assert(toLonLat && fromLonLat);\n\n    this.toLonLat_ = toLonLat;\n    this.fromLonLat_ = fromLonLat;\n\n    this.viewListenKey_ = olEvents.listen(view, 'propertychange',\n        this.handleViewEvent_, this);\n\n    this.readFromView();\n  } else {\n    this.toLonLat_ = exports.identityProjection;\n    this.fromLonLat_ = exports.identityProjection;\n  }\n};\n\n\n/**\n * @param {?} e\n * @private\n */\nexports.prototype.handleViewEvent_ = function(e) {\n  if (!this.viewUpdateInProgress_) {\n    this.readFromView();\n  }\n};\n\n\n/**\n * @param {number} heading In radians.\n * @api\n */\nexports.prototype.setHeading = function(heading) {\n  if (!this.view_) {\n    return;\n  }\n\n  this.view_.setRotation(heading);\n};\n\n\n/**\n * @return {number|undefined} Heading in radians.\n * @api\n */\nexports.prototype.getHeading = function() {\n  if (!this.view_) {\n    return undefined;\n  }\n  const rotation = this.view_.getRotation();\n  return rotation || 0;\n};\n\n\n/**\n * @param {number} tilt In radians.\n * @api\n */\nexports.prototype.setTilt = function(tilt) {\n  this.tilt_ = tilt;\n  this.updateCamera_();\n};\n\n\n/**\n * @return {number} Tilt in radians.\n * @api\n */\nexports.prototype.getTilt = function() {\n  return this.tilt_;\n};\n\n\n/**\n * @param {number} distance In meters.\n * @api\n */\nexports.prototype.setDistance = function(distance) {\n  this.distance_ = distance;\n  this.updateCamera_();\n  this.updateView();\n};\n\n\n/**\n * @return {number} Distance in meters.\n * @api\n */\nexports.prototype.getDistance = function() {\n  return this.distance_;\n};\n\n\n/**\n * Shortcut for ol.View.setCenter().\n * @param {!ol.Coordinate} center Same projection as the ol.View.\n * @api\n */\nexports.prototype.setCenter = function(center) {\n  if (!this.view_) {\n    return;\n  }\n  this.view_.setCenter(center);\n};\n\n\n/**\n * Shortcut for ol.View.getCenter().\n * @return {ol.Coordinate|undefined} Same projection as the ol.View.\n * @api\n */\nexports.prototype.getCenter = function() {\n  if (!this.view_) {\n    return undefined;\n  }\n  return this.view_.getCenter();\n};\n\n\n/**\n * Sets the position of the camera.\n * @param {!ol.Coordinate} position Same projection as the ol.View.\n * @api\n */\nexports.prototype.setPosition = function(position) {\n  if (!this.toLonLat_) {\n    return;\n  }\n  const ll = this.toLonLat_(position);\n  googAsserts.assert(ll);\n\n  const carto = new Cesium.Cartographic(\n      olMath.toRadians(ll[0]),\n      olMath.toRadians(ll[1]),\n      this.getAltitude());\n\n  this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n  this.updateView();\n};\n\n\n/**\n * Calculates position under the camera.\n * @return {!ol.Coordinate|undefined} Same projection as the ol.View.\n * @api\n */\nexports.prototype.getPosition = function() {\n  if (!this.fromLonLat_) {\n    return undefined;\n  }\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);\n\n  const pos = this.fromLonLat_([\n    olMath.toDegrees(carto.longitude),\n    olMath.toDegrees(carto.latitude)\n  ]);\n  googAsserts.assert(pos);\n  return pos;\n};\n\n\n/**\n * @param {number} altitude In meters.\n * @api\n */\nexports.prototype.setAltitude = function(altitude) {\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n      this.cam_.position);\n  carto.height = altitude;\n  this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n  this.updateView();\n};\n\n\n/**\n * @return {number} Altitude in meters.\n * @api\n */\nexports.prototype.getAltitude = function() {\n  const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n      this.cam_.position);\n\n  return carto.height;\n};\n\n\n/**\n * Rotates the camera to point at the specified target.\n * @param {!ol.Coordinate} position Same projection as the ol.View.\n * @api\n */\nexports.prototype.lookAt = function(position) {\n  if (!this.toLonLat_) {\n    return;\n  }\n  const ll = this.toLonLat_(position);\n  googAsserts.assert(ll);\n\n  const carto = Cesium.Cartographic.fromDegrees(ll[0], ll[1]);\n  olcsCore.lookAt(this.cam_, carto, this.scene_.globe);\n\n  this.updateView();\n};\n\n\n/**\n * Updates the state of the underlying Cesium.Camera\n * according to the current values of the properties.\n * @private\n */\nexports.prototype.updateCamera_ = function() {\n  if (!this.view_ || !this.toLonLat_) {\n    return;\n  }\n  const center = this.view_.getCenter();\n  if (!center) {\n    return;\n  }\n  const ll = this.toLonLat_(center);\n  googAsserts.assert(ll);\n\n  const carto = new Cesium.Cartographic(olMath.toRadians(ll[0]),\n      olMath.toRadians(ll[1]));\n  if (this.scene_.globe) {\n    const height = this.scene_.globe.getHeight(carto);\n    carto.height = height || 0;\n  }\n\n  const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n  /** @type {Cesium.optionsOrientation} */\n  const orientation = {\n    pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,\n    heading: -this.view_.getRotation(),\n    roll: undefined\n  };\n  this.cam_.setView({\n    destination,\n    orientation\n  });\n\n  this.cam_.moveBackward(this.distance_);\n\n  this.checkCameraChange(true);\n};\n\n\n/**\n * Calculates the values of the properties from the current ol.View state.\n * @api\n */\nexports.prototype.readFromView = function() {\n  if (!this.view_ || !this.toLonLat_) {\n    return;\n  }\n  const center = this.view_.getCenter();\n  if (center === undefined || center === null) {\n    return;\n  }\n  const ll = this.toLonLat_(center);\n  googAsserts.assert(ll);\n\n  const resolution = this.view_.getResolution();\n  this.distance_ = this.calcDistanceForResolution(\n      resolution || 0, olMath.toRadians(ll[1]));\n\n  this.updateCamera_();\n};\n\n\n/**\n * Calculates the values of the properties from the current Cesium.Camera state.\n * Modifies the center, resolution and rotation properties of the view.\n * @api\n */\nexports.prototype.updateView = function() {\n  if (!this.view_ || !this.fromLonLat_) {\n    return;\n  }\n  this.viewUpdateInProgress_ = true;\n\n  // target & distance\n  const ellipsoid = Cesium.Ellipsoid.WGS84;\n  const scene = this.scene_;\n  const target = olcsCore.pickCenterPoint(scene);\n\n  let bestTarget = target;\n  if (!bestTarget) {\n    //TODO: how to handle this properly ?\n    const globe = scene.globe;\n    const carto = this.cam_.positionCartographic.clone();\n    const height = globe.getHeight(carto);\n    carto.height = height || 0;\n    bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n  }\n  this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);\n  const bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);\n  this.view_.setCenter(this.fromLonLat_([\n    olMath.toDegrees(bestTargetCartographic.longitude),\n    olMath.toDegrees(bestTargetCartographic.latitude)]));\n\n  // resolution\n  this.view_.setResolution(\n      this.calcResolutionForDistance(this.distance_,\n          bestTargetCartographic ? bestTargetCartographic.latitude : 0));\n\n\n  /*\n   * Since we are positioning the target, the values of heading and tilt\n   * need to be calculated _at the target_.\n   */\n  if (target) {\n    const pos = this.cam_.position;\n\n    // normal to the ellipsoid at the target\n    const targetNormal = new Cesium.Cartesian3();\n    ellipsoid.geocentricSurfaceNormal(target, targetNormal);\n\n    // vector from the target to the camera\n    const targetToCamera = new Cesium.Cartesian3();\n    Cesium.Cartesian3.subtract(pos, target, targetToCamera);\n    Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);\n\n\n    // HEADING\n    const up = this.cam_.up;\n    const right = this.cam_.right;\n    const normal = new Cesium.Cartesian3(-target.y, target.x, 0); // what is it?\n    const heading = Cesium.Cartesian3.angleBetween(right, normal);\n    const cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());\n    const orientation = cross.z;\n\n    this.view_.setRotation((orientation < 0 ? heading : -heading));\n\n    // TILT\n    const tiltAngle = Math.acos(\n        Cesium.Cartesian3.dot(targetNormal, targetToCamera));\n    this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;\n  } else {\n    // fallback when there is no target\n    this.view_.setRotation(this.cam_.heading);\n    this.tilt_ = -this.cam_.pitch + Math.PI / 2;\n  }\n\n  this.viewUpdateInProgress_ = false;\n};\n\n\n/**\n * Check if the underlying camera state has changed and ensure synchronization.\n * @param {boolean=} opt_dontSync Do not synchronize the view.\n */\nexports.prototype.checkCameraChange = function(opt_dontSync) {\n  const old = this.lastCameraViewMatrix_;\n  const current = this.cam_.viewMatrix;\n\n  if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {\n    this.lastCameraViewMatrix_ = current.clone();\n    if (opt_dontSync !== true) {\n      this.updateView();\n    }\n  }\n};\n\n\n/**\n * calculate the distance between camera and centerpoint based on the resolution and latitude value\n * @param {number} resolution Number of map units per pixel.\n * @param {number} latitude Latitude in radians.\n * @return {number} The calculated distance.\n * @api\n */\nexports.prototype.calcDistanceForResolution = function(resolution, latitude) {\n  const canvas = this.scene_.canvas;\n  const fovy = this.cam_.frustum.fovy; // vertical field of view\n  googAsserts.assert(!isNaN(fovy));\n  const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n  // number of \"map units\" visible in 2D (vertically)\n  const visibleMapUnits = resolution * canvas.clientHeight;\n\n  // The metersPerUnit does not take latitude into account, but it should\n  // be lower with increasing latitude -- we have to compensate.\n  // In 3D it is not possible to maintain the resolution at more than one point,\n  // so it only makes sense to use the latitude of the \"target\" point.\n  const relativeCircumference = Math.cos(Math.abs(latitude));\n\n  // how many meters should be visible in 3D\n  const visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;\n\n  // distance required to view the calculated length in meters\n  //\n  //  fovy/2\n  //    |\\\n  //  x | \\\n  //    |--\\\n  // visibleMeters/2\n  const requiredDistance = (visibleMeters / 2) / Math.tan(fovy / 2);\n\n  // NOTE: This calculation is not absolutely precise, because metersPerUnit\n  // is a great simplification. It does not take ellipsoid/terrain into account.\n\n  return requiredDistance;\n};\n\n\n/**\n * calculate the resolution based on a distance(camera to position) and latitude value\n * @param {number} distance\n * @param {number} latitude\n * @return {number} The calculated resolution.\n * @api\n */\nexports.prototype.calcResolutionForDistance = function(distance, latitude) {\n  // See the reverse calculation (calcDistanceForResolution) for details\n  const canvas = this.scene_.canvas;\n  const fovy = this.cam_.frustum.fovy;\n  const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n  const visibleMeters = 2 * distance * Math.tan(fovy / 2);\n  const relativeCircumference = Math.cos(Math.abs(latitude));\n  const visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;\n  const resolution = visibleMapUnits / canvas.clientHeight;\n\n  return resolution;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/Camera.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olObservable from 'ol/Observable';\nimport olEvents from 'ol/events';\nimport olLayerGroup from 'ol/layer/Group';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!ol.Map}\n   * @protected\n   */\n  this.map = map;\n\n  /**\n   * @type {ol.View}\n   * @protected\n   */\n  this.view = map.getView();\n\n  /**\n   * @type {!Cesium.Scene}\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * @type {ol.Collection.<ol.layer.Base>}\n   * @protected\n   */\n  this.olLayers = map.getLayerGroup().getLayers();\n\n  /**\n   * @type {ol.layer.Group}\n   */\n  this.mapLayerGroup = map.getLayerGroup();\n\n  /**\n   * Map of OpenLayers layer ids (from ol.getUid) to the Cesium ImageryLayers.\n   * Null value means, that we are unable to create equivalent layers.\n   * @type {Object.<string, ?Array.<T>>}\n   * @protected\n   */\n  this.layerMap = {};\n\n  /**\n   * Map of listen keys for OpenLayers layer layers ids (from ol.getUid).\n   * @type {!Object.<string, Array<ol.EventsKey>>}\n   * @protected\n   */\n  this.olLayerListenKeys = {};\n\n  /**\n   * Map of listen keys for OpenLayers layer groups ids (from ol.getUid).\n   * @type {!Object.<string, !Array.<ol.EventsKey>>}\n   * @private\n   */\n  this.olGroupListenKeys_ = {};\n};\n\n\n/**\n * Destroy all and perform complete synchronization of the layers.\n * @api\n */\nexports.prototype.synchronize = function() {\n  this.destroyAll();\n  this.addLayers_(this.mapLayerGroup);\n};\n\n\n/**\n * Order counterparts using the same algorithm as the Openlayers renderer:\n * z-index then original sequence order.\n * @protected\n */\nexports.prototype.orderLayers = function() {\n  // Ordering logics is handled in subclasses.\n};\n\n\n/**\n * Add a layer hierarchy.\n * @param {ol.layer.Base} root\n * @private\n */\nexports.prototype.addLayers_ = function(root) {\n  /** @type {Array<olcsx.LayerWithParents>} */\n  const fifo = [{\n    layer: root,\n    parents: []\n  }];\n  while (fifo.length > 0) {\n    const olLayerWithParents = fifo.splice(0, 1)[0];\n    const olLayer = olLayerWithParents.layer;\n    const olLayerId = olBase.getUid(olLayer).toString();\n    this.olLayerListenKeys[olLayerId] = [];\n    googAsserts.assert(!this.layerMap[olLayerId]);\n\n    let cesiumObjects = null;\n    if (olLayer instanceof olLayerGroup) {\n      this.listenForGroupChanges_(olLayer);\n      if (olLayer !== this.mapLayerGroup) {\n        cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n      }\n      if (!cesiumObjects) {\n        olLayer.getLayers().forEach((l) => {\n          if (l) {\n            const newOlLayerWithParents = {\n              layer: l,\n              parents: olLayer === this.mapLayerGroup ?\n                [] :\n                [olLayerWithParents.layer].concat(olLayerWithParents.parents)\n            };\n            fifo.push(newOlLayerWithParents);\n          }\n        });\n      }\n    } else {\n      cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n    }\n    // add Cesium layers\n    if (cesiumObjects) {\n      this.layerMap[olLayerId] = cesiumObjects;\n      this.olLayerListenKeys[olLayerId].push(olEvents.listen(olLayer, 'change:zIndex', this.orderLayers, this));\n      cesiumObjects.forEach(function(cesiumObject) {\n        this.addCesiumObject(cesiumObject);\n      }, this);\n    }\n  }\n\n  this.orderLayers();\n};\n\n\n/**\n * Remove and destroy a single layer.\n * @param {ol.layer.Layer} layer\n * @return {boolean} counterpart destroyed\n * @private\n */\nexports.prototype.removeAndDestroySingleLayer_ = function(layer) {\n  const uid = olBase.getUid(layer).toString();\n  const counterparts = this.layerMap[uid];\n  if (!!counterparts) {\n    counterparts.forEach(function(counterpart) {\n      this.removeSingleCesiumObject(counterpart, false);\n      this.destroyCesiumObject(counterpart);\n    }, this);\n    this.olLayerListenKeys[uid].forEach(olObservable.unByKey);\n    delete this.olLayerListenKeys[uid];\n  }\n  delete this.layerMap[uid];\n  return !!counterparts;\n};\n\n\n/**\n * Unlisten a single layer group.\n * @param {ol.layer.Group} group\n * @private\n */\nexports.prototype.unlistenSingleGroup_ = function(group) {\n  if (group === this.mapLayerGroup) {\n    return;\n  }\n  const uid = olBase.getUid(group).toString();\n  const keys = this.olGroupListenKeys_[uid];\n  keys.forEach((key) => {\n    olObservable.unByKey(key);\n  });\n  delete this.olGroupListenKeys_[uid];\n  delete this.layerMap[uid];\n};\n\n\n/**\n * Remove layer hierarchy.\n * @param {ol.layer.Base} root\n * @private\n */\nexports.prototype.removeLayer_ = function(root) {\n  if (!!root) {\n    const fifo = [root];\n    while (fifo.length > 0) {\n      const olLayer = fifo.splice(0, 1)[0];\n      const done = this.removeAndDestroySingleLayer_(olLayer);\n      if (olLayer instanceof olLayerGroup) {\n        this.unlistenSingleGroup_(olLayer);\n        if (!done) {\n          // No counterpart for the group itself so removing\n          // each of the child layers.\n          olLayer.getLayers().forEach((l) => {\n            fifo.push(l);\n          });\n        }\n      }\n    }\n  }\n};\n\n\n/**\n * Register listeners for single layer group change.\n * @param {ol.layer.Group} group\n * @private\n */\nexports.prototype.listenForGroupChanges_ = function(group) {\n  const uuid = olBase.getUid(group).toString();\n\n  googAsserts.assert(this.olGroupListenKeys_[uuid] === undefined);\n\n  const listenKeyArray = [];\n  this.olGroupListenKeys_[uuid] = listenKeyArray;\n\n  // only the keys that need to be relistened when collection changes\n  let contentKeys = [];\n  const listenAddRemove = (function() {\n    const collection = group.getLayers();\n    if (collection) {\n      contentKeys = [\n        collection.on('add', function(event) {\n          this.addLayers_(event.element);\n        }, this),\n        collection.on('remove', function(event) {\n          this.removeLayer_(event.element);\n        }, this)\n      ];\n      listenKeyArray.push(...contentKeys);\n    }\n  }).bind(this);\n\n  listenAddRemove();\n\n  listenKeyArray.push(group.on('change:layers', (e) => {\n    contentKeys.forEach((el) => {\n      const i = listenKeyArray.indexOf(el);\n      if (i >= 0) {\n        listenKeyArray.splice(i, 1);\n      }\n      olObservable.unByKey(el);\n    });\n    listenAddRemove();\n  }));\n};\n\n\n/**\n * Destroys all the created Cesium objects.\n * @protected\n */\nexports.prototype.destroyAll = function() {\n  this.removeAllCesiumObjects(true); // destroy\n  let objKey;\n  for (objKey in this.olGroupListenKeys_) {\n    const keys = this.olGroupListenKeys_[objKey];\n    keys.forEach(olObservable.unByKey);\n  }\n  for (objKey in this.olLayerListenKeys) {\n    this.olLayerListenKeys[objKey].forEach(olObservable.unByKey);\n  }\n  this.olGroupListenKeys_ = {};\n  this.olLayerListenKeys = {};\n  this.layerMap = {};\n};\n\n\n/**\n * Adds a single Cesium object to the collection.\n * @param {!T} object\n * @abstract\n * @protected\n */\nexports.prototype.addCesiumObject = function(object) {};\n\n\n/**\n * @param {!T} object\n * @abstract\n * @protected\n */\nexports.prototype.destroyCesiumObject = function(object) {};\n\n\n/**\n * Remove single Cesium object from the collection.\n * @param {!T} object\n * @param {boolean} destroy\n * @abstract\n * @protected\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {};\n\n\n/**\n * Remove all Cesium objects from the collection.\n * @param {boolean} destroy\n * @abstract\n * @protected\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {};\n\n\n/**\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @return {?Array.<T>}\n * @abstract\n * @protected\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/AbstractSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olLayerGroup from 'ol/layer/Group';\nimport googAsserts from 'goog/asserts';\nimport olArray from 'ol/array';\nimport olBase from 'ol';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsCore from './core.js';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!Cesium.ImageryLayerCollection}\n   * @private\n   */\n  this.cesiumLayers_ = scene.imageryLayers;\n\n  /**\n   * @type {!Cesium.ImageryLayerCollection}\n   * @private\n   */\n  this.ourLayers_ = new Cesium.ImageryLayerCollection();\n\n  olcsAbstractSynchronizer.call(this, map, scene);\n};\n\nolBase.inherits(exports, olcsAbstractSynchronizer);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.addCesiumObject = function(object) {\n  this.cesiumLayers_.add(object);\n  this.ourLayers_.add(object);\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.destroyCesiumObject = function(object) {\n  object.destroy();\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {\n  this.cesiumLayers_.remove(object, destroy);\n  this.ourLayers_.remove(object, false);\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {\n  for (let i = 0; i < this.ourLayers_.length; ++i) {\n    this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);\n  }\n  this.ourLayers_.removeAll(false);\n};\n\n\n/**\n * Creates an array of Cesium.ImageryLayer.\n * May be overriden by child classes to implement custom behavior.\n * The default implementation handles tiled imageries in EPSG:4326 or\n * EPSG:3859.\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Array.<!Cesium.ImageryLayer>} array or null if not possible\n * (or supported)\n * @protected\n */\nexports.prototype.convertLayerToCesiumImageries = function(olLayer, viewProj) {\n  const result = olcsCore.tileLayerToImageryLayer(olLayer, viewProj);\n  return result ? [result] : null;\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {\n  const olLayer = olLayerWithParents.layer;\n  const uid = olBase.getUid(olLayer).toString();\n  const viewProj = this.view.getProjection();\n  googAsserts.assert(viewProj);\n  const cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);\n  if (cesiumObjects) {\n    const listenKeyArray = [];\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n      listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], () => {\n        // the compiler does not seem to be able to infer this\n        googAsserts.assert(cesiumObjects);\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n        }\n      }));\n    });\n\n    for (let i = 0; i < cesiumObjects.length; ++i) {\n      olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n    }\n\n    // there is no way to modify Cesium layer extent,\n    // we have to recreate when OpenLayers layer extent changes:\n    listenKeyArray.push(olLayer.on('change:extent', function(e) {\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        this.cesiumLayers_.remove(cesiumObjects[i], true); // destroy\n        this.ourLayers_.remove(cesiumObjects[i], false);\n      }\n      delete this.layerMap[olBase.getUid(olLayer)]; // invalidate the map entry\n      this.synchronize();\n    }, this));\n\n    listenKeyArray.push(olLayer.on('change', function(e) {\n      // when the source changes, re-add the layer to force update\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        const position = this.cesiumLayers_.indexOf(cesiumObjects[i]);\n        if (position >= 0) {\n          this.cesiumLayers_.remove(cesiumObjects[i], false);\n          this.cesiumLayers_.add(cesiumObjects[i], position);\n        }\n      }\n    }, this));\n\n    this.olLayerListenKeys[uid].push(...listenKeyArray);\n  }\n\n  return Array.isArray(cesiumObjects) ? cesiumObjects : null;\n};\n\n\n/**\n * Order counterparts using the same algorithm as the Openlayers renderer:\n * z-index then original sequence order.\n * @override\n * @protected\n */\nexports.prototype.orderLayers = function() {\n  const layers = [];\n  const zIndices = {};\n  const queue = [this.mapLayerGroup];\n\n  while (queue.length > 0) {\n    const olLayer = queue.splice(0, 1)[0];\n    layers.push(olLayer);\n    zIndices[olBase.getUid(olLayer)] = olLayer.getZIndex();\n\n    if (olLayer instanceof olLayerGroup) {\n      const sublayers = olLayer.getLayers();\n      if (sublayers) {\n        // Prepend queue with sublayers in order\n        queue.unshift(...sublayers.getArray());\n      }\n    }\n  }\n\n  olArray.stableSort(layers, (layer1, layer2) =>\n    zIndices[olBase.getUid(layer1)] - zIndices[olBase.getUid(layer2)]\n  );\n\n  layers.forEach(function(olLayer) {\n    const olLayerId = olBase.getUid(olLayer).toString();\n    const cesiumObjects = this.layerMap[olLayerId];\n    if (cesiumObjects) {\n      cesiumObjects.forEach(this.raiseToTop, this);\n    }\n  }, this);\n};\n\n\n/**\n * @param {Cesium.ImageryLayer} counterpart\n */\nexports.prototype.raiseToTop = function(counterpart) {\n  this.cesiumLayers_.raiseToTop(counterpart);\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/RasterSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid, inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport _ol_coordinate_ from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from '../source/Vector.js';\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n *\n * @constructor\n * @param {olx.source.ClusterOptions} options Constructor options.\n * @extends {ol.source.Vector}\n * @api\n */\nconst Cluster = function(options) {\n  VectorSource.call(this, {\n    attributions: options.attributions,\n    extent: options.extent,\n    projection: options.projection,\n    wrapX: options.wrapX\n  });\n\n  /**\n   * @type {number|undefined}\n   * @protected\n   */\n  this.resolution = undefined;\n\n  /**\n   * @type {number}\n   * @protected\n   */\n  this.distance = options.distance !== undefined ? options.distance : 20;\n\n  /**\n   * @type {Array.<ol.Feature>}\n   * @protected\n   */\n  this.features = [];\n\n  /**\n   * @param {ol.Feature} feature Feature.\n   * @return {ol.geom.Point} Cluster calculation point.\n   * @protected\n   */\n  this.geometryFunction = options.geometryFunction || function(feature) {\n    const geometry = /** @type {ol.geom.Point} */ (feature.getGeometry());\n    assert(geometry instanceof Point,\n      10); // The default `geometryFunction` can only handle `ol.geom.Point` geometries\n    return geometry;\n  };\n\n  /**\n   * @type {ol.source.Vector}\n   * @protected\n   */\n  this.source = options.source;\n\n  this.source.on(EventType.CHANGE,\n    Cluster.prototype.refresh, this);\n};\n\ninherits(Cluster, VectorSource);\n\n\n/**\n * Get the distance in pixels between clusters.\n * @return {number} Distance.\n * @api\n */\nCluster.prototype.getDistance = function() {\n  return this.distance;\n};\n\n\n/**\n * Get a reference to the wrapped source.\n * @return {ol.source.Vector} Source.\n * @api\n */\nCluster.prototype.getSource = function() {\n  return this.source;\n};\n\n\n/**\n * @inheritDoc\n */\nCluster.prototype.loadFeatures = function(extent, resolution,\n  projection) {\n  this.source.loadFeatures(extent, resolution, projection);\n  if (resolution !== this.resolution) {\n    this.clear();\n    this.resolution = resolution;\n    this.cluster();\n    this.addFeatures(this.features);\n  }\n};\n\n\n/**\n * Set the distance in pixels between clusters.\n * @param {number} distance The distance in pixels.\n * @api\n */\nCluster.prototype.setDistance = function(distance) {\n  this.distance = distance;\n  this.refresh();\n};\n\n\n/**\n * handle the source changing\n * @override\n */\nCluster.prototype.refresh = function() {\n  this.clear();\n  this.cluster();\n  this.addFeatures(this.features);\n  VectorSource.prototype.refresh.call(this);\n};\n\n\n/**\n * @protected\n */\nCluster.prototype.cluster = function() {\n  if (this.resolution === undefined) {\n    return;\n  }\n  this.features.length = 0;\n  const extent = createEmpty();\n  const mapDistance = this.distance * this.resolution;\n  const features = this.source.getFeatures();\n\n  /**\n   * @type {!Object.<string, boolean>}\n   */\n  const clustered = {};\n\n  for (let i = 0, ii = features.length; i < ii; i++) {\n    const feature = features[i];\n    if (!(getUid(feature).toString() in clustered)) {\n      const geometry = this.geometryFunction(feature);\n      if (geometry) {\n        const coordinates = geometry.getCoordinates();\n        createOrUpdateFromCoordinate(coordinates, extent);\n        buffer(extent, mapDistance, extent);\n\n        let neighbors = this.source.getFeaturesInExtent(extent);\n        neighbors = neighbors.filter(function(neighbor) {\n          const uid = getUid(neighbor).toString();\n          if (!(uid in clustered)) {\n            clustered[uid] = true;\n            return true;\n          } else {\n            return false;\n          }\n        });\n        this.features.push(this.createCluster(neighbors));\n      }\n    }\n  }\n};\n\n\n/**\n * @param {Array.<ol.Feature>} features Features\n * @return {ol.Feature} The cluster feature.\n * @protected\n */\nCluster.prototype.createCluster = function(features) {\n  const centroid = [0, 0];\n  for (let i = features.length - 1; i >= 0; --i) {\n    const geometry = this.geometryFunction(features[i]);\n    if (geometry) {\n      _ol_coordinate_.add(centroid, geometry.getCoordinates());\n    } else {\n      features.splice(i, 1);\n    }\n  }\n  _ol_coordinate_.scale(centroid, 1 / features.length);\n\n  const cluster = new Feature(new Point(centroid));\n  cluster.set('features', features);\n  return cluster;\n};\nexport default Cluster;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/Cluster.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olObservable from 'ol/Observable';\n\nconst exports = function(layerProjection, scene) {\n  const billboards = new Cesium.BillboardCollection({scene});\n  const primitives = new Cesium.PrimitiveCollection();\n\n  /**\n   * @type {!Array.<ol.EventsKey>}\n   */\n  this.olListenKeys = [];\n\n  this.rootCollection_ = new Cesium.PrimitiveCollection();\n  /**\n   * @type {!olcsx.core.OlFeatureToCesiumContext}\n   */\n  this.context = {\n    projection: layerProjection,\n    billboards,\n    featureToCesiumMap: {},\n    primitives\n  };\n\n  this.rootCollection_.add(billboards);\n  this.rootCollection_.add(primitives);\n};\n\n\n/**\n * Unlisten.\n */\nexports.prototype.destroy = function() {\n  this.olListenKeys.forEach(olObservable.unByKey);\n  this.olListenKeys.length = 0;\n};\n\n\n/**\n * @return {!Cesium.Primitive}\n */\nexports.prototype.getRootPrimitive = function() {\n  return this.rootCollection_;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/core/VectorLayerCounterpart.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olGeomGeometry from 'ol/geom/Geometry';\nimport olStyleIcon from 'ol/style/Icon';\nimport olSourceVector from 'ol/source/Vector';\nimport olSourceCluster from 'ol/source/Cluster';\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\nimport olExtent from 'ol/extent';\nimport olGeomSimpleGeometry from 'ol/geom/SimpleGeometry';\nimport olcsCore from './core.js';\nimport olcsCoreVectorLayerCounterpart from './core/VectorLayerCounterpart.js';\nimport olcsUtil from './util.js';\n\nconst exports = function(scene) {\n\n  /**\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * Bind once to have a unique function for using as a listener\n   * @type {function(ol.source.Vector.Event)}\n   * @private\n   */\n  this.boundOnRemoveOrClearFeatureListener_ =\n      this.onRemoveOrClearFeature_.bind(this);\n};\n\n\n/**\n * @param {ol.source.Vector.Event} evt\n * @private\n */\nexports.prototype.onRemoveOrClearFeature_ = function(evt) {\n  const source = evt.target;\n  googAsserts.assertInstanceof(source, olSourceVector);\n\n  const cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n  if (cancellers) {\n    const feature = evt.feature;\n    if (feature) {\n      // remove\n      const id = olBase.getUid(feature);\n      const canceller = cancellers[id];\n      if (canceller) {\n        canceller();\n        delete cancellers[id];\n      }\n    } else {\n      // clear\n      for (const key in cancellers) {\n        if (cancellers.hasOwnProperty(key)) {\n          cancellers[key]();\n        }\n      }\n      olcsUtil.obj(source)['olcs_cancellers'] = {};\n    }\n  }\n};\n\n\n/**\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!Cesium.Primitive|Cesium.Label|Cesium.Billboard} primitive\n * @protected\n */\nexports.prototype.setReferenceForPicking = function(layer, feature, primitive) {\n  primitive.olLayer = layer;\n  primitive.olFeature = feature;\n};\n\n\n/**\n * Basics primitive creation using a color attribute.\n * Note that Cesium has 'interior' and outline geometries.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n * @param {!Cesium.Geometry} geometry\n * @param {!Cesium.Color} color\n * @param {number=} opt_lineWidth\n * @return {Cesium.Primitive}\n * @protected\n */\nexports.prototype.createColoredPrimitive = function(layer, feature, olGeometry, geometry, color, opt_lineWidth) {\n  const createInstance = function(geometry, color) {\n    return new Cesium.GeometryInstance({\n      // always update Cesium externs before adding a property\n      geometry,\n      attributes: {\n        color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n      }\n    });\n  };\n\n  const options = {\n    // always update Cesium externs before adding a property\n    flat: true, // work with all geometries\n    renderState: {\n      depthTest: {\n        enabled: true\n      }\n    }\n  };\n\n  if (opt_lineWidth !== undefined) {\n    if (!options.renderState) {\n      options.renderState = {};\n    }\n    options.renderState.lineWidth = opt_lineWidth;\n  }\n\n  const instances = createInstance(geometry, color);\n\n  const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n  let primitive;\n\n  if (heightReference == Cesium.HeightReference.CLAMP_TO_GROUND) {\n    const ctor = instances.geometry.constructor;\n    if (ctor && !ctor['createShadowVolume']) {\n      return null;\n    }\n    primitive = new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: instances\n    });\n  } else {\n    const appearance = new Cesium.PerInstanceColorAppearance(options);\n    primitive = new Cesium.Primitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: instances,\n      appearance\n    });\n  }\n\n  this.setReferenceForPicking(layer, feature, primitive);\n  return primitive;\n};\n\n\n/**\n * Return the fill or stroke color from a plain ol style.\n * @param {!ol.style.Style|ol.style.Text} style\n * @param {boolean} outline\n * @return {!Cesium.Color}\n * @protected\n */\nexports.prototype.extractColorFromOlStyle = function(style, outline) {\n  const fillColor = style.getFill() ? style.getFill().getColor() : null;\n  const strokeColor = style.getStroke() ? style.getStroke().getColor() : null;\n\n  let olColor = 'black';\n  if (strokeColor && outline) {\n    olColor = strokeColor;\n  } else if (fillColor) {\n    olColor = fillColor;\n  }\n\n  return olcsCore.convertColorToCesium(olColor);\n};\n\n\n/**\n * Return the width of stroke from a plain ol style.\n * @param {!ol.style.Style|ol.style.Text} style\n * @return {number}\n * @protected\n */\nexports.prototype.extractLineWidthFromOlStyle = function(style) {\n  // Handling of line width WebGL limitations is handled by Cesium.\n  const width = style.getStroke() ? style.getStroke().getWidth() : undefined;\n  return width !== undefined ? width : 1;\n};\n\n\n/**\n * Create a primitive collection out of two Cesium geometries.\n * Only the OpenLayers style colors will be used.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n * @param {!Cesium.Geometry} fillGeometry\n * @param {!Cesium.Geometry} outlineGeometry\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection}\n * @protected\n */\nexports.prototype.wrapFillAndOutlineGeometries = function(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {\n  const fillColor = this.extractColorFromOlStyle(olStyle, false);\n  const outlineColor = this.extractColorFromOlStyle(olStyle, true);\n\n  const primitives = new Cesium.PrimitiveCollection();\n  if (olStyle.getFill()) {\n    const p1 = this.createColoredPrimitive(layer, feature, olGeometry,\n        fillGeometry, fillColor);\n    googAsserts.assert(!!p1);\n    primitives.add(p1);\n  }\n\n  if (olStyle.getStroke()) {\n    const width = this.extractLineWidthFromOlStyle(olStyle);\n    const p2 = this.createColoredPrimitive(layer, feature, olGeometry,\n        outlineGeometry, outlineColor, width);\n    if (p2) {\n      // Some outline geometries are not supported by Cesium in clamp to ground\n      // mode. These primitives are skipped.\n      primitives.add(p2);\n    }\n  }\n\n  return primitives;\n};\n\n\n// Geometry converters\n/**\n * Create a Cesium primitive if style has a text component.\n * Eventually return a PrimitiveCollection including current primitive.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Style} style\n * @param {!Cesium.Primitive} primitive current primitive\n * @return {!Cesium.PrimitiveCollection}\n * @protected\n */\nexports.prototype.addTextStyle = function(layer, feature, geometry, style, primitive) {\n  let primitives;\n  if (!(primitive instanceof Cesium.PrimitiveCollection)) {\n    primitives = new Cesium.PrimitiveCollection();\n    primitives.add(primitive);\n  } else {\n    primitives = primitive;\n  }\n\n  if (!style.getText()) {\n    return primitives;\n  }\n\n  const text = /** @type {!ol.style.Text} */ (style.getText());\n  const label = this.olGeometry4326TextPartToCesium(layer, feature, geometry,\n      text);\n  if (label) {\n    primitives.add(label);\n  }\n  return primitives;\n};\n\n\n/**\n * Add a billboard to a Cesium.BillboardCollection.\n * Overriding this wrapper allows manipulating the billboard options.\n * @param {!Cesium.BillboardCollection} billboards\n * @param {!Cesium.optionsBillboardCollectionAdd} bbOptions\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Style} style\n * @return {!Cesium.Billboard} newly created billboard\n * @api\n */\nexports.prototype.csAddBillboard = function(billboards, bbOptions, layer, feature, geometry, style) {\n  const bb = billboards.add(bbOptions);\n  this.setReferenceForPicking(layer, feature, bb);\n  return bb;\n};\n\n\n/**\n * Convert an OpenLayers circle geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Circle} olGeometry OpenLayers circle geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olCircleGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'Circle');\n\n  // ol.Coordinate\n  let center = olGeometry.getCenter();\n  const height = center.length == 3 ? center[2] : 0.0;\n  let point = center.slice();\n  point[0] += olGeometry.getRadius();\n\n  // Cesium\n  center = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n  point = olcsCore.ol4326CoordinateToCesiumCartesian(point);\n\n  // Accurate computation of straight distance\n  const radius = Cesium.Cartesian3.distance(center, point);\n\n  const fillGeometry = new Cesium.CircleGeometry({\n    // always update Cesium externs before adding a property\n    center,\n    radius,\n    height\n  });\n\n  const outlineGeometry = new Cesium.CircleOutlineGeometry({\n    // always update Cesium externs before adding a property\n    center,\n    radius,\n    extrudedHeight: height,\n    height\n  });\n\n  const primitives = this.wrapFillAndOutlineGeometries(\n      layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n};\n\n\n/**\n * Convert an OpenLayers line string geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.LineString} olGeometry OpenLayers line string geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olLineStringGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'LineString');\n\n  const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(\n      olGeometry.getCoordinates());\n\n  const appearance = new Cesium.PolylineMaterialAppearance({\n    // always update Cesium externs before adding a property\n    material: this.olStyleToCesium(feature, olStyle, true)\n  });\n\n  const geometryOptions = {\n    // always update Cesium externs before adding a property\n    positions,\n    width: this.extractLineWidthFromOlStyle(olStyle),\n    vertexFormat: appearance.vertexFormat\n  };\n\n  let outlinePrimitive;\n  const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n  if (heightReference == Cesium.HeightReference.CLAMP_TO_GROUND) {\n    const color = this.extractColorFromOlStyle(olStyle, true);\n    outlinePrimitive = new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: new Cesium.GeometryInstance({\n        geometry: new Cesium.CorridorGeometry(geometryOptions),\n        attributes: {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n        }\n      })\n    });\n  } else {\n    outlinePrimitive = new Cesium.Primitive({\n      // always update Cesium externs before adding a property\n      geometryInstances: new Cesium.GeometryInstance({\n        geometry: new Cesium.PolylineGeometry(geometryOptions)\n      }),\n      appearance\n    });\n  }\n\n  this.setReferenceForPicking(layer, feature, outlinePrimitive);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle,\n      outlinePrimitive);\n};\n\n\n/**\n * Convert an OpenLayers polygon geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Polygon} olGeometry OpenLayers polygon geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @return {!Cesium.PrimitiveCollection} primitives\n * @api\n */\nexports.prototype.olPolygonGeometryToCesium = function(layer, feature, olGeometry, projection, olStyle) {\n\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n  googAsserts.assert(olGeometry.getType() == 'Polygon');\n\n  let fillGeometry, outlineGeometry;\n  if ((olGeometry.getCoordinates()[0].length == 5) &&\n      (feature.getGeometry().get('olcs.polygon_kind') === 'rectangle')) {\n    // Create a rectangle according to the longitude and latitude curves\n    const coordinates = olGeometry.getCoordinates()[0];\n    // Extract the West, South, East, North coordinates\n    const extent = olExtent.boundingExtent(coordinates);\n    const rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1],\n        extent[2], extent[3]);\n\n    // Extract the average height of the vertices\n    let maxHeight = 0.0;\n    if (coordinates[0].length == 3) {\n      for (let c = 0; c < coordinates.length; c++) {\n        maxHeight = Math.max(maxHeight, coordinates[c][2]);\n      }\n    }\n\n    // Render the cartographic rectangle\n    fillGeometry = new Cesium.RectangleGeometry({\n      ellipsoid: Cesium.Ellipsoid.WGS84,\n      rectangle,\n      height: maxHeight\n    });\n\n    outlineGeometry = new Cesium.RectangleOutlineGeometry({\n      ellipsoid: Cesium.Ellipsoid.WGS84,\n      rectangle,\n      height: maxHeight\n    });\n  } else {\n    const rings = olGeometry.getLinearRings();\n    // always update Cesium externs before adding a property\n    const hierarchy = {};\n    const polygonHierarchy = hierarchy;\n    googAsserts.assert(rings.length > 0);\n\n    for (let i = 0; i < rings.length; ++i) {\n      const olPos = rings[i].getCoordinates();\n      const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olPos);\n      googAsserts.assert(positions && positions.length > 0);\n      if (i == 0) {\n        hierarchy.positions = positions;\n      } else {\n        if (!hierarchy.holes) {\n          hierarchy.holes = [];\n        }\n        hierarchy.holes.push({\n          positions\n        });\n      }\n    }\n\n    fillGeometry = new Cesium.PolygonGeometry({\n      // always update Cesium externs before adding a property\n      polygonHierarchy,\n      perPositionHeight: true\n    });\n\n    outlineGeometry = new Cesium.PolygonOutlineGeometry({\n      // always update Cesium externs before adding a property\n      polygonHierarchy: hierarchy,\n      perPositionHeight: true\n    });\n  }\n\n  const primitives = this.wrapFillAndOutlineGeometries(\n      layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n  return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n};\n\n\n/**\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @return {!Cesium.HeightReference}\n * @api\n */\nexports.prototype.getHeightReference = function(layer, feature, geometry) {\n\n  // Read from the geometry\n  let altitudeMode = geometry.get('altitudeMode');\n\n  // Or from the feature\n  if (altitudeMode === undefined) {\n    altitudeMode = feature.get('altitudeMode');\n  }\n\n  // Or from the layer\n  if (altitudeMode === undefined) {\n    altitudeMode = layer.get('altitudeMode');\n  }\n\n  let heightReference = Cesium.HeightReference.NONE;\n  if (altitudeMode === 'clampToGround') {\n    heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;\n  } else if (altitudeMode === 'relativeToGround') {\n    heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;\n  }\n\n  return heightReference;\n};\n\n\n/**\n * Convert a point geometry to a Cesium BillboardCollection.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} style\n * @param {!Cesium.BillboardCollection} billboards\n * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n * the new billboard is added.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olPointGeometryToCesium = function(layer, feature, olGeometry, projection, style, billboards,\n    opt_newBillboardCallback) {\n  googAsserts.assert(olGeometry.getType() == 'Point');\n  olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle instanceof olStyleIcon) {\n      // make sure the image is scheduled for load\n      imageStyle.load();\n    }\n\n    const image = imageStyle.getImage(1); // get normal density\n    const isImageLoaded = function(image) {\n      return image.src != '' &&\n          image.naturalHeight != 0 &&\n          image.naturalWidth != 0 &&\n          image.complete;\n    };\n    const reallyCreateBillboard = (function() {\n      if (!image) {\n        return;\n      }\n      if (!(image instanceof HTMLCanvasElement ||\n          image instanceof Image ||\n          image instanceof HTMLImageElement)) {\n        return;\n      }\n      const center = olGeometry.getCoordinates();\n      const position = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n      let color;\n      const opacity = imageStyle.getOpacity();\n      if (opacity !== undefined) {\n        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);\n      }\n\n      const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n      const bbOptions = /** @type {Cesium.optionsBillboardCollectionAdd} */ ({\n        // always update Cesium externs before adding a property\n        image,\n        color,\n        scale: imageStyle.getScale(),\n        heightReference,\n        verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n        position\n      });\n      const bb = this.csAddBillboard(billboards, bbOptions, layer, feature,\n          olGeometry, style);\n      if (opt_newBillboardCallback) {\n        opt_newBillboardCallback(bb);\n      }\n    }).bind(this);\n\n    if (image instanceof Image && !isImageLoaded(image)) {\n      // Cesium requires the image to be loaded\n      let cancelled = false;\n      const source = layer.getSource();\n      const canceller = function() {\n        cancelled = true;\n      };\n      source.on(['removefeature', 'clear'],\n          this.boundOnRemoveOrClearFeatureListener_);\n      let cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n      if (!cancellers) {\n        cancellers = olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n\n      const fuid = olBase.getUid(feature);\n      if (cancellers[fuid]) {\n        // When the feature change quickly, a canceller may still be present so\n        // we cancel it here to prevent creation of a billboard.\n        cancellers[fuid]();\n      }\n      cancellers[fuid] = canceller;\n\n      const listener = function() {\n        if (!billboards.isDestroyed() && !cancelled) {\n          // Create billboard if the feature is still displayed on the map.\n          reallyCreateBillboard();\n        }\n      };\n\n      olEvents.listenOnce(image, 'load', listener);\n    } else {\n      reallyCreateBillboard();\n    }\n  }\n\n  if (style.getText()) {\n    return this.addTextStyle(layer, feature, olGeometry, style,\n        new Cesium.Primitive());\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Convert an OpenLayers multi-something geometry to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry OpenLayers geometry.\n * @param {!ol.ProjectionLike} projection\n * @param {!ol.style.Style} olStyle\n * @param {!Cesium.BillboardCollection} billboards\n * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n * the new billboard is added.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olMultiGeometryToCesium = function(layer, feature, geometry, projection, olStyle, billboards,\n    opt_newBillboardCallback) {\n  // Do not reproject to 4326 now because it will be done later.\n\n  // FIXME: would be better to combine all child geometries in one primitive\n  // instead we create n primitives for simplicity.\n  const accumulate = function(geometries, functor) {\n    const primitives = new Cesium.PrimitiveCollection();\n    geometries.forEach((geometry) => {\n      primitives.add(functor(layer, feature, geometry, projection, olStyle));\n    });\n    return primitives;\n  };\n\n  let subgeos;\n  switch (geometry.getType()) {\n    case 'MultiPoint':\n      geometry = /** @type {!ol.geom.MultiPoint} */ (geometry);\n      subgeos = geometry.getPoints();\n      if (olStyle.getText()) {\n        const primitives = new Cesium.PrimitiveCollection();\n        subgeos.forEach((geometry) => {\n          googAsserts.assert(geometry);\n          const result = this.olPointGeometryToCesium(layer, feature, geometry,\n              projection, olStyle, billboards, opt_newBillboardCallback);\n          if (result) {\n            primitives.add(result);\n          }\n        });\n        return primitives;\n      } else {\n        subgeos.forEach((geometry) => {\n          googAsserts.assert(geometry);\n          this.olPointGeometryToCesium(layer, feature, geometry, projection,\n              olStyle, billboards, opt_newBillboardCallback);\n        });\n        return null;\n      }\n    case 'MultiLineString':\n      geometry = /** @type {!ol.geom.MultiLineString} */ (geometry);\n      subgeos = geometry.getLineStrings();\n      return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));\n    case 'MultiPolygon':\n      geometry = /** @type {!ol.geom.MultiPolygon} */ (geometry);\n      subgeos = geometry.getPolygons();\n      return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));\n    default:\n      googAsserts.fail(`Unhandled multi geometry type${geometry.getType()}`);\n  }\n};\n\n\n/**\n * Convert an OpenLayers text style to Cesium.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature..\n * @param {!ol.geom.Geometry} geometry\n * @param {!ol.style.Text} style\n * @return {Cesium.LabelCollection} Cesium primitive\n * @api\n */\nexports.prototype.olGeometry4326TextPartToCesium = function(layer, feature, geometry, style) {\n  const text = style.getText();\n  googAsserts.assert(text !== undefined);\n\n\n  const labels = new Cesium.LabelCollection({scene: this.scene});\n  // TODO: export and use the text draw position from OpenLayers .\n  // See src/ol/render/vector.js\n  const extentCenter = olExtent.getCenter(geometry.getExtent());\n  if (geometry instanceof olGeomSimpleGeometry) {\n    const first = geometry.getFirstCoordinate();\n    extentCenter[2] = first.length == 3 ? first[2] : 0.0;\n  }\n  const options = /** @type {Cesium.optionsLabelCollection} */ ({});\n\n  options.position = olcsCore.ol4326CoordinateToCesiumCartesian(extentCenter);\n\n  options.text = text;\n\n  options.heightReference = this.getHeightReference(layer, feature, geometry);\n\n  const offsetX = style.getOffsetX();\n  const offsetY = style.getOffsetY();\n  if (offsetX != 0 && offsetY != 0) {\n    const offset = new Cesium.Cartesian2(offsetX, offsetY);\n    options.pixelOffset = offset;\n  }\n\n  const font = style.getFont();\n  if (font !== undefined) {\n    options.font = font;\n  }\n\n  let labelStyle = undefined;\n  if (style.getFill()) {\n    options.fillColor = this.extractColorFromOlStyle(style, false);\n    labelStyle = Cesium.LabelStyle.FILL;\n  }\n  if (style.getStroke()) {\n    options.outlineWidth = this.extractLineWidthFromOlStyle(style);\n    options.outlineColor = this.extractColorFromOlStyle(style, true);\n    labelStyle = Cesium.LabelStyle.OUTLINE;\n  }\n  if (style.getFill() && style.getStroke()) {\n    labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;\n  }\n  options.style = labelStyle;\n\n  let horizontalOrigin;\n  switch (style.getTextAlign()) {\n    case 'left':\n      horizontalOrigin = Cesium.HorizontalOrigin.LEFT;\n      break;\n    case 'right':\n      horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n      break;\n    case 'center':\n    default:\n      horizontalOrigin = Cesium.HorizontalOrigin.CENTER;\n  }\n  options.horizontalOrigin = horizontalOrigin;\n\n  if (style.getTextBaseline()) {\n    let verticalOrigin;\n    switch (style.getTextBaseline()) {\n      case 'top':\n        verticalOrigin = Cesium.VerticalOrigin.TOP;\n        break;\n      case 'middle':\n        verticalOrigin = Cesium.VerticalOrigin.CENTER;\n        break;\n      case 'bottom':\n        verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n        break;\n      case 'alphabetic':\n        verticalOrigin = Cesium.VerticalOrigin.TOP;\n        break;\n      case 'hanging':\n        verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n        break;\n      default:\n        googAsserts.fail(`unhandled baseline ${style.getTextBaseline()}`);\n    }\n    options.verticalOrigin = verticalOrigin;\n  }\n\n\n  const l = labels.add(options);\n  this.setReferenceForPicking(layer, feature, l);\n  return labels;\n};\n\n\n/**\n * Convert an OpenLayers style to a Cesium Material.\n * @param {ol.Feature} feature OpenLayers feature..\n * @param {!ol.style.Style} style\n * @param {boolean} outline\n * @return {Cesium.Material}\n * @api\n */\nexports.prototype.olStyleToCesium = function(feature, style, outline) {\n  const fill = style.getFill();\n  const stroke = style.getStroke();\n  if ((outline && !stroke) || (!outline && !fill)) {\n    return null; // FIXME use a default style? Developer error?\n  }\n\n  let color = outline ? stroke.getColor() : fill.getColor();\n  color = olcsCore.convertColorToCesium(color);\n\n  if (outline && stroke.getLineDash()) {\n    return Cesium.Material.fromType('Stripe', {\n      // always update Cesium externs before adding a property\n      horizontal: false,\n      repeat: 500, // TODO how to calculate this?\n      evenColor: color,\n      oddColor: new Cesium.Color(0, 0, 0, 0) // transparent\n    });\n  } else {\n    return Cesium.Material.fromType('Color', {\n      // always update Cesium externs before adding a property\n      color\n    });\n  }\n\n};\n\n\n/**\n * Compute OpenLayers plain style.\n * Evaluates style function, blend arrays, get default style.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature\n * @param {ol.StyleFunction|undefined} fallbackStyleFunction\n * @param {number} resolution\n * @return {Array.<!ol.style.Style>} null if no style is available\n * @api\n */\nexports.prototype.computePlainStyle = function(layer, feature, fallbackStyleFunction, resolution) {\n  /**\n   * @type {ol.FeatureStyleFunction|undefined}\n   */\n  const featureStyleFunction = feature.getStyleFunction();\n\n  /**\n   * @type {ol.style.Style|Array.<ol.style.Style>}\n   */\n  let style = null;\n\n  if (featureStyleFunction) {\n    style = featureStyleFunction.call(feature, resolution);\n  }\n\n  if (!style && fallbackStyleFunction) {\n    style = fallbackStyleFunction(feature, resolution);\n  }\n\n  if (!style) {\n    // The feature must not be displayed\n    return null;\n  }\n\n  // FIXME combine materials as in cesium-materials-pack?\n  // then this function must return a custom material\n  // More simply, could blend the colors like described in\n  // http://en.wikipedia.org/wiki/Alpha_compositing\n  return Array.isArray(style) ? style : [style];\n};\n\n\n/**\n * @protected\n * @param {!ol.Feature} feature\n * @param {!ol.style.Style} style\n * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n * @return {ol.geom.Geometry|undefined}\n */\nexports.prototype.getGeometryFromFeature = function(feature, style, opt_geom) {\n  if (opt_geom) {\n    return opt_geom;\n  }\n\n  const geom3d = /** @type {!ol.geom.Geometry} */(feature.get('olcs.3d_geometry'));\n  if (geom3d && geom3d instanceof olGeomGeometry) {\n    return geom3d;\n  }\n\n  if (style) {\n    const geomFuncRes = style.getGeometryFunction()(feature);\n    if (geomFuncRes instanceof olGeomGeometry) {\n      return geomFuncRes;\n    }\n  }\n\n  return feature.getGeometry();\n};\n\n\n/**\n * Convert one OpenLayers feature up to a collection of Cesium primitives.\n * @param {ol.layer.Vector|ol.layer.Image} layer\n * @param {!ol.Feature} feature OpenLayers feature.\n * @param {!ol.style.Style} style\n * @param {!olcsx.core.OlFeatureToCesiumContext} context\n * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n * @return {Cesium.Primitive} primitives\n * @api\n */\nexports.prototype.olFeatureToCesium = function(layer, feature, style, context, opt_geom) {\n  let geom = this.getGeometryFromFeature(feature, style, opt_geom);\n\n  if (!geom) {\n    // OpenLayers features may not have a geometry\n    // See http://geojson.org/geojson-spec.html#feature-objects\n    return null;\n  }\n\n  const proj = context.projection;\n  const newBillboardAddedCallback = function(bb) {\n    context.featureToCesiumMap[olBase.getUid(feature)] = bb;\n  };\n\n  switch (geom.getType()) {\n    case 'GeometryCollection':\n      const primitives = new Cesium.PrimitiveCollection();\n      const collection = /** @type {!ol.geom.GeometryCollection} */ (geom);\n      // TODO: use getGeometriesArray() instead\n      collection.getGeometries().forEach((geom) => {\n        if (geom) {\n          const prims = this.olFeatureToCesium(layer, feature, style, context,\n              geom);\n          if (prims) {\n            primitives.add(prims);\n          }\n        }\n      });\n      return primitives;\n    case 'Point':\n      geom = /** @type {!ol.geom.Point} */ (geom);\n      const bbs = context.billboards;\n      const result = this.olPointGeometryToCesium(layer, feature, geom, proj,\n          style, bbs, newBillboardAddedCallback);\n      if (!result) {\n        // no wrapping primitive\n        return null;\n      } else {\n        return result;\n      }\n    case 'Circle':\n      geom = /** @type {!ol.geom.Circle} */ (geom);\n      return this.olCircleGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'LineString':\n      geom = /** @type {!ol.geom.LineString} */ (geom);\n      return this.olLineStringGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'Polygon':\n      geom = /** @type {!ol.geom.Polygon} */ (geom);\n      return this.olPolygonGeometryToCesium(layer, feature, geom, proj,\n          style);\n    case 'MultiPoint':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n      const result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj,\n          style, context.billboards, newBillboardAddedCallback);\n      if (!result2) {\n        // no wrapping primitive\n        return null;\n      } else {\n        return result2;\n      }\n    case 'LinearRing':\n      throw new Error('LinearRing should only be part of polygon.');\n    default:\n      throw new Error(`Ol geom type not handled : ${geom.getType()}`);\n  }\n};\n\n\n/**\n * Convert an OpenLayers vector layer to Cesium primitive collection.\n * For each feature, the associated primitive will be stored in\n * `featurePrimitiveMap`.\n * @param {!(ol.layer.Vector|ol.layer.Image)} olLayer\n * @param {!ol.View} olView\n * @param {!Object.<number, !Cesium.Primitive>} featurePrimitiveMap\n * @return {!olcs.core.VectorLayerCounterpart}\n * @api\n */\nexports.prototype.olVectorLayerToCesium = function(olLayer, olView, featurePrimitiveMap) {\n  const proj = olView.getProjection();\n  const resolution = olView.getResolution();\n\n  if (resolution === undefined || !proj) {\n    googAsserts.fail('View not ready');\n    // an assertion is not enough for closure to assume resolution and proj\n    // are defined\n    throw new Error('View not ready');\n  }\n\n  let source = olLayer.getSource();\n  if (source instanceof olSourceCluster) {\n    source = source.getSource();\n  }\n\n  googAsserts.assertInstanceof(source, olSourceVector);\n  const features = source.getFeatures();\n  const counterpart = new olcsCoreVectorLayerCounterpart(proj, this.scene);\n  const context = counterpart.context;\n  for (let i = 0; i < features.length; ++i) {\n    const feature = features[i];\n    if (!feature) {\n      continue;\n    }\n    /**\n     * @type {ol.StyleFunction|undefined}\n     */\n    const layerStyle = olLayer.getStyleFunction();\n    const styles = this.computePlainStyle(olLayer, feature, layerStyle,\n        resolution);\n    if (!styles || !styles.length) {\n      // only 'render' features with a style\n      continue;\n    }\n\n    /**\n     * @type {Cesium.Primitive|null}\n     */\n    let primitives = null;\n    for (let i = 0; i < styles.length; i++) {\n      const prims = this.olFeatureToCesium(olLayer, feature, styles[i], context);\n      if (prims) {\n        if (!primitives) {\n          primitives = prims;\n        } else if (prims) {\n          let i = 0, prim;\n          while ((prim = prims.get(i))) {\n            primitives.add(prim);\n            i++;\n          }\n        }\n      }\n    }\n    if (!primitives) {\n      continue;\n    }\n    featurePrimitiveMap[olBase.getUid(feature)] = primitives;\n    counterpart.getRootPrimitive().add(primitives);\n  }\n\n  return counterpart;\n};\n\n\n/**\n * Convert an OpenLayers feature to Cesium primitive collection.\n * @param {!(ol.layer.Vector|ol.layer.Image)} layer\n * @param {!ol.View} view\n * @param {!ol.Feature} feature\n * @param {!olcsx.core.OlFeatureToCesiumContext} context\n * @return {Cesium.Primitive}\n * @api\n */\nexports.prototype.convert = function(layer, view, feature, context) {\n  const proj = view.getProjection();\n  const resolution = view.getResolution();\n\n  if (resolution == undefined || !proj) {\n    return null;\n  }\n\n  /**\n   * @type {ol.StyleFunction|undefined}\n   */\n  const layerStyle = layer.getStyleFunction();\n\n  const styles = this.computePlainStyle(layer, feature, layerStyle, resolution);\n\n  if (!styles.length) {\n    // only 'render' features with a style\n    return null;\n  }\n\n  context.projection = proj;\n\n  /**\n   * @type {Cesium.Primitive|null}\n   */\n  let primitives = null;\n  for (let i = 0; i < styles.length; i++) {\n    const prims = this.olFeatureToCesium(layer, feature, styles[i], context);\n    if (!primitives) {\n      primitives = prims;\n    } else if (prims) {\n      let i = 0, prim;\n      while ((prim = prims.get(i))) {\n        primitives.add(prim);\n        i++;\n      }\n    }\n  }\n  return primitives;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/FeatureConverter.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olSourceVector from 'ol/source/Vector';\nimport olLayerLayer from 'ol/layer/Layer';\nimport olSourceCluster from 'ol/source/Cluster';\nimport olLayerImage from 'ol/layer/Image';\nimport googAsserts from 'goog/asserts';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\nimport olLayerVector from 'ol/layer/Vector';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsFeatureConverter from './FeatureConverter.js';\n\nconst exports = function(map, scene, opt_converter) {\n\n  /**\n   * @protected\n   */\n  this.converter = opt_converter || new olcsFeatureConverter(scene);\n\n  /**\n   * @private\n   */\n  this.csAllPrimitives_ = new Cesium.PrimitiveCollection();\n  scene.primitives.add(this.csAllPrimitives_);\n  this.csAllPrimitives_.destroyPrimitives = false;\n\n  olcsAbstractSynchronizer.call(this, map, scene);\n};\n\nolBase.inherits(exports, olcsAbstractSynchronizer);\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.addCesiumObject = function(counterpart) {\n  googAsserts.assert(counterpart);\n  counterpart.getRootPrimitive()['counterpart'] = counterpart;\n  this.csAllPrimitives_.add(counterpart.getRootPrimitive());\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.destroyCesiumObject = function(object) {\n  object.getRootPrimitive().destroy();\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeSingleCesiumObject = function(object, destroy) {\n  object.destroy();\n  this.csAllPrimitives_.destroyPrimitives = destroy;\n  this.csAllPrimitives_.remove(object.getRootPrimitive());\n  this.csAllPrimitives_.destroyPrimitives = false;\n};\n\n\n/**\n * @inheritDoc\n */\nexports.prototype.removeAllCesiumObjects = function(destroy) {\n  this.csAllPrimitives_.destroyPrimitives = destroy;\n  if (destroy) {\n    for (let i = 0; i < this.csAllPrimitives_.length; ++i) {\n      this.csAllPrimitives_.get(i)['counterpart'].destroy();\n    }\n  }\n  this.csAllPrimitives_.removeAll();\n  this.csAllPrimitives_.destroyPrimitives = false;\n};\n\n/**\n * Synchronizes the layer visibility properties\n * to the given Cesium Primitive.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.Primitive} csPrimitive\n */\nexports.prototype.updateLayerVisibility = function(olLayerWithParents, csPrimitive) {\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    } else {\n      visible = false;\n    }\n  });\n  csPrimitive.show = visible;\n};\n/**\n * @inheritDoc\n */\nexports.prototype.createSingleLayerCounterparts = function(olLayerWithParents) {\n  const olLayer = olLayerWithParents.layer;\n  if (!(olLayer instanceof olLayerVector)) {\n    return null;\n  }\n  googAsserts.assertInstanceof(olLayer, olLayerLayer);\n\n  let source = olLayer.getSource();\n  if (source instanceof olSourceCluster) {\n    source = source.getSource();\n  }\n\n  googAsserts.assertInstanceof(source, olSourceVector);\n  googAsserts.assert(this.view);\n\n  const view = this.view;\n  const featurePrimitiveMap = {};\n  const counterpart = this.converter.olVectorLayerToCesium(olLayer, view,\n      featurePrimitiveMap);\n  const csPrimitives = counterpart.getRootPrimitive();\n  const olListenKeys = counterpart.olListenKeys;\n\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n    olListenKeys.push(olEvents.listen(olLayerItem, 'change:visible', () => {\n      this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n    }));\n  });\n  this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n\n  const onAddFeature = (function(feature) {\n    googAsserts.assert(\n        (olLayer instanceof olLayerVector) ||\n        (olLayer instanceof olLayerImage)\n    );\n    const context = counterpart.context;\n    const prim = this.converter.convert(olLayer, view, feature, context);\n    if (prim) {\n      featurePrimitiveMap[olBase.getUid(feature)] = prim;\n      csPrimitives.add(prim);\n    }\n  }).bind(this);\n\n  const onRemoveFeature = (function(feature) {\n    const geometry = feature.getGeometry();\n    const id = olBase.getUid(feature);\n    if (!geometry || geometry.getType() == 'Point') {\n      const context = counterpart.context;\n      const bb = context.featureToCesiumMap[id];\n      delete context.featureToCesiumMap[id];\n      if (bb instanceof Cesium.Billboard) {\n        context.billboards.remove(bb);\n      }\n    }\n    const csPrimitive = featurePrimitiveMap[id];\n    delete featurePrimitiveMap[id];\n    if (csPrimitive) {\n      csPrimitives.remove(csPrimitive);\n    }\n  }).bind(this);\n\n  olListenKeys.push(olEvents.listen(source, 'addfeature', (e) => {\n    googAsserts.assert(e.feature);\n    onAddFeature(e.feature);\n  }, this));\n\n  olListenKeys.push(olEvents.listen(source, 'removefeature', (e) => {\n    googAsserts.assert(e.feature);\n    onRemoveFeature(e.feature);\n  }, this));\n\n  olListenKeys.push(olEvents.listen(source, 'changefeature', (e) => {\n    const feature = e.feature;\n    googAsserts.assert(feature);\n    onRemoveFeature(feature);\n    onAddFeature(feature);\n  }, this));\n\n  return counterpart ? [counterpart] : null;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/VectorSynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olBase from 'ol';\nimport olOverlay from 'ol/Overlay';\nimport olProj from 'ol/proj';\nimport olDom from 'ol/dom';\nimport olObservable from 'ol/Observable';\n\nconst exports = function(options) {\n  /**\n   * @private\n   * @type {?Function}\n   */\n  this.scenePostRenderListenerRemover_ = null;\n\n  /**\n   * @private\n   * @type {!Cesium.Scene}\n   */\n  this.scene_ = options.scene;\n\n  /**\n   * @private\n   * @type {!olcs.OverlaySynchronizer}\n   */\n  this.synchronizer_ = options.synchronizer;\n\n  /**\n   * @private\n   * @type {!ol.Overlay}\n   */\n  this.parent_ = options.parent;\n\n  /**\n   * @private\n   * @type {ol.Coordinate|undefined}\n   */\n  this.positionWGS84_ = undefined;\n\n  /**\n   * @private\n   * @type {MutationObserver}\n   */\n  this.observer_ = new MutationObserver(this.handleElementChanged.bind(this));\n  /**\n   * @private\n   * @type {Array.<MutationObserver>}\n   */\n  this.attributeObserver_ = [];\n\n  /**\n   * @private\n   * @type {Array<ol.EventsKey>}\n   */\n  this.listenerKeys_ = [];\n  // synchronize our Overlay with the parent Overlay\n  this.listenerKeys_.push(this.parent_.on('change:position', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:element', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:offset', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:position', this.setPropertyFromEvent_.bind(this)));\n  this.listenerKeys_.push(this.parent_.on('change:positioning', this.setPropertyFromEvent_.bind(this)));\n\n  olOverlay.call(this, this.parent_.getOptions());\n  this.setProperties(this.parent_.getProperties());\n\n  this.handleMapChanged();\n};\n\nolBase.inherits(exports, olOverlay);\n\n/**\n * @param {Node} target\n * @private\n */\nexports.prototype.observeTarget_ = function(target) {\n  this.observer_.disconnect();\n  this.observer_.observe(target, {\n    attributes: false,\n    childList: true,\n    characterData: true,\n    subtree: true\n  });\n  this.attributeObserver_.forEach((observer) => {\n    observer.disconnect();\n  });\n  this.attributeObserver_.length = 0;\n  for (let i = 0; i < target.childNodes.length; i++) {\n    const node = target.childNodes[i];\n    if (node.nodeType === 1) {\n      const observer = new MutationObserver(this.handleElementChanged.bind(this));\n      observer.observe(node, {\n        attributes: true,\n        subtree: true\n      });\n      this.attributeObserver_.push(observer);\n    }\n  }\n};\n\n/**\n *\n * @param {ol.Object.Event} event\n * @private\n */\nexports.prototype.setPropertyFromEvent_ = function(event) {\n  if (event.target && event.key) {\n    this.set(event.key, event.target.get(event.key));\n  }\n};\n/**\n * Get the scene associated with this overlay.\n * @see ol.Overlay.prototype.getMap\n * @return {!Cesium.Scene} The scene that the overlay is part of.\n * @api\n */\nexports.prototype.getScene = function() {\n  return this.scene_;\n};\n\n\n\n/**\n * @override\n */\nexports.prototype.handleMapChanged = function() {\n  if (this.scenePostRenderListenerRemover_) {\n    this.scenePostRenderListenerRemover_();\n    olDom.removeNode(this.element);\n  }\n  this.scenePostRenderListenerRemover_ = null;\n  const scene = this.getScene();\n  if (scene) {\n    this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));\n    this.updatePixelPosition();\n    const container = this.stopEvent ?\n      this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();\n    if (this.insertFirst) {\n      container.insertBefore(this.element, container.childNodes[0] || null);\n    } else {\n      container.appendChild(this.element);\n    }\n  }\n};\n\n/**\n * @override\n */\nexports.prototype.handlePositionChanged = function() {\n  // transform position to WGS84\n  const position = this.getPosition();\n  if (position) {\n    const sourceProjection = this.parent_.getMap().getView().getProjection();\n    this.positionWGS84_ = olProj.transform(position, sourceProjection, 'EPSG:4326');\n  } else {\n    this.positionWGS84_ = undefined;\n  }\n  this.updatePixelPosition();\n};\n\n/**\n * @override\n */\nexports.prototype.handleElementChanged = function() {\n  function cloneNode(node, parent) {\n    const clone = node.cloneNode();\n    if (parent) {\n      parent.appendChild(clone);\n    }\n    if (node.nodeType != Node.TEXT_NODE) {\n      clone.addEventListener('click', (event) => {\n        node.dispatchEvent(new MouseEvent('click', event));\n        event.stopPropagation();\n      });\n    }\n    const nodes = node.childNodes;\n    for (let i = 0; i < nodes.length; i++) {\n      if (!nodes[i]) {\n        continue;\n      }\n      cloneNode(nodes[i], clone);\n    }\n    return clone;\n  }\n  olDom.removeChildren(this.element);\n  const element = this.getElement();\n  if (element) {\n    if (element.parentNode && element.parentNode.childNodes) {\n      for (const node of element.parentNode.childNodes) {\n        const clonedNode = cloneNode(node, null);\n        this.element.appendChild(clonedNode);\n      }\n    }\n  }\n  if (element.parentNode) {\n    // set new Observer\n    this.observeTarget_(element.parentNode);\n  }\n};\n\n\n/**\n * @override\n */\nexports.prototype.updatePixelPosition = function() {\n  const position = this.positionWGS84_;\n  if (!this.scene_ || !position) {\n    this.setVisible(false);\n    return;\n  }\n  let cartesian;\n  if (position.length === 2) {\n    cartesian = Cesium.Cartesian3.fromDegreesArray(position)[0];\n  } else {\n    cartesian = Cesium.Cartesian3.fromDegreesArrayHeights(position)[0];\n  }\n  const camera = this.scene_.camera;\n  const ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);\n  const occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);\n  // check if overlay position is behind the horizon\n  if (!occluder.isPointVisible(cartesian)) {\n    this.setVisible(false);\n    return;\n  }\n  const cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);\n  // check if overlay position is visible from the camera\n  if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {\n    this.setVisible(false);\n    return;\n  }\n  this.setVisible(true);\n\n  const pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);\n  const pixel = [pixelCartesian.x, pixelCartesian.y];\n  const mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];\n  this.updateRenderedPosition(pixel, mapSize);\n};\n\n/**\n * Destroys the overlay, removing all its listeners and elements\n * @api\n */\nexports.prototype.destroy = function() {\n  if (this.scenePostRenderListenerRemover_) {\n    this.scenePostRenderListenerRemover_();\n  }\n  if (this.observer_) {\n    this.observer_.disconnect();\n  }\n  olObservable.unByKey(this.listenerKeys_);\n  this.listenerKeys_.splice(0);\n  if (this.element.removeNode) {\n    this.element.removeNode(true);\n  } else {\n    this.element.remove();\n  }\n  this.element = null;\n};\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/SynchronizedOverlay.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olcsSynchronizedOverlay from './SynchronizedOverlay.js';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\n\nconst exports = function(map, scene) {\n  /**\n   * @type {!ol.Map}\n   * @protected\n   */\n  this.map = map;\n\n  /**\n   * @type {ol.Collection.<ol.Overlay>}\n   * @private\n   */\n  this.overlays_ = this.map.getOverlays();\n\n  /**\n   * @type {!Cesium.Scene}\n   * @protected\n   */\n  this.scene = scene;\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainerStopEvent_ = document.createElement('DIV');\n  this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n  const overlayEvents = [\n    olEvents.EventType.CLICK,\n    olEvents.EventType.DBLCLICK,\n    olEvents.EventType.MOUSEDOWN,\n    olEvents.EventType.TOUCHSTART,\n    olEvents.EventType.MSPOINTERDOWN,\n    olBase.MapBrowserEventType.POINTERDOWN,\n    olEvents.EventType.MOUSEWHEEL,\n    olEvents.EventType.WHEEL\n  ];\n  overlayEvents.forEach((event) => {\n    olEvents.listen(this.overlayContainerStopEvent_, event, olEvents.Event.stopPropagation);\n  });\n  this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);\n\n  /**\n   * @private\n   * @type {!Element}\n   */\n  this.overlayContainer_ = document.createElement('DIV');\n  this.overlayContainer_.className = 'ol-overlaycontainer';\n  this.scene.canvas.parentElement.appendChild(this.overlayContainer_);\n\n\n  /**\n   * @type {!Object<?,olcs.SynchronizedOverlay>}\n   * @private\n   */\n  this.overlayMap_ = {};\n};\n\n\n\n/**\n * Get the element that serves as a container for overlays that don't allow\n * event propagation. Elements added to this container won't let mousedown and\n * touchstart events through to the map, so clicks and gestures on an overlay\n * don't trigger any {@link ol.MapBrowserEvent}.\n * @return {!Element} The map's overlay container that stops events.\n */\nexports.prototype.getOverlayContainerStopEvent = function() {\n  return this.overlayContainerStopEvent_;\n};\n\n/**\n * Get the element that serves as a container for overlays.\n * @return {!Element} The map's overlay container.\n */\nexports.prototype.getOverlayContainer = function() {\n  return this.overlayContainer_;\n};\n\n/**\n * Destroy all and perform complete synchronization of the overlays.\n * @api\n */\nexports.prototype.synchronize = function() {\n  this.destroyAll();\n  this.addOverlays();\n  this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));\n  this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));\n};\n\n/**\n * @param {ol.Collection.Event} event\n * @private\n */\nexports.prototype.addOverlayFromEvent_ = function(event) {\n  const overlay = /** @type {ol.Overlay} */ (event.element);\n  this.addOverlay(overlay);\n};\n\n/**\n * @api\n */\nexports.prototype.addOverlays = function() {\n  this.overlays_.forEach(this.addOverlay, this);\n};\n\n/**\n * @param {ol.Overlay} overlay\n * @api\n */\nexports.prototype.addOverlay = function(overlay) {\n  if (!overlay) {\n    return;\n  }\n  const cesiumOverlay = new olcsSynchronizedOverlay({\n    scene: this.scene,\n    synchronizer: this,\n    parent: overlay\n  });\n\n  const overlayId = olBase.getUid(overlay).toString();\n  this.overlayMap_[overlayId] = cesiumOverlay;\n};\n\n/**\n * @param {ol.Collection.Event} event\n * @private\n */\nexports.prototype.removeOverlayFromEvent_ = function(event) {\n  const removedOverlay = /** @type {ol.Overlay} */ (event.element);\n  this.removeOverlay(removedOverlay);\n};\n\n/**\n * Removes an overlay from the scene\n * @param {ol.Overlay} overlay\n * @api\n */\nexports.prototype.removeOverlay = function(overlay) {\n  const overlayId = olBase.getUid(overlay).toString();\n  const csOverlay = this.overlayMap_[overlayId];\n  if (csOverlay) {\n    csOverlay.destroy();\n    delete this.overlayMap_[overlayId];\n  }\n};\n\n/**\n * Destroys all the created Cesium objects.\n * @protected\n */\nexports.prototype.destroyAll = function() {\n  Object.keys(this.overlayMap_).forEach((key) => {\n    const overlay = this.overlayMap_[key];\n    overlay.destroy();\n    delete this.overlayMap_[key];\n  });\n};\n\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/OverlaySynchronizer.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olGeomPoint from 'ol/geom/Point';\nimport googAsserts from 'goog/asserts';\nimport olProj from 'ol/proj';\nimport olEvents from 'ol/events';\nimport olMapBrowserEventType from 'ol/MapBrowserEventType';\nimport olcsUtil from './util.js';\nimport olcsCore from './core.js';\nimport olcsAutoRenderLoop from './AutoRenderLoop.js';\nimport olcsCamera from './Camera.js';\nimport olcsRasterSynchronizer from './RasterSynchronizer.js';\nimport olcsVectorSynchronizer from './VectorSynchronizer.js';\nimport olcsOverlaySynchronizer from './OverlaySynchronizer.js';\n\nconst exports = function(options) {\n\n  /**\n   * @type {olcs.AutoRenderLoop}\n   * @private\n   */\n  this.autoRenderLoop_ = null;\n\n  /**\n   * @type {!ol.Map}\n   * @private\n   */\n  this.map_ = options.map;\n\n  /**\n   * @type {!function(): Cesium.JulianDate}\n   * @private\n   */\n  this.time_ = options.time || function() {\n    return Cesium.JulianDate.now();\n  };\n\n  /**\n   * No change of the view projection.\n   * @private\n   */\n  this.to4326Transform_ = olProj.getTransform(this.map_.getView().getProjection(), 'EPSG:4326');\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.resolutionScale_ = 1.0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.canvasClientWidth_ = 0.0;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.canvasClientHeight_ = 0.0;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.resolutionScaleChanged_ = true; // force resize\n\n  const fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';\n\n  /**\n   * @type {!Element}\n   * @private\n   */\n  this.container_ = document.createElement('DIV');\n  const containerAttribute = document.createAttribute('style');\n  containerAttribute.value = `${fillArea}visibility:hidden;`;\n  this.container_.setAttributeNode(containerAttribute);\n\n  let targetElement = options.target || null;\n  if (targetElement) {\n    if (typeof targetElement === 'string') {\n      targetElement = document.getElementById(targetElement);\n    }\n    targetElement.appendChild(this.container_);\n  } else {\n    const oc = this.map_.getViewport().querySelector('.ol-overlaycontainer');\n    if (oc && oc.parentNode) {\n      oc.parentNode.insertBefore(this.container_, oc);\n    }\n  }\n\n  /**\n   * Whether the Cesium container is placed over the ol map.\n   * @type {boolean}\n   * @private\n   */\n  this.isOverMap_ = !targetElement;\n\n\n  if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {\n    const overlayEvents = [\n      olEvents.EventType.CLICK,\n      olEvents.EventType.DBLCLICK,\n      olEvents.EventType.MOUSEDOWN,\n      olEvents.EventType.TOUCHSTART,\n      olEvents.EventType.MSPOINTERDOWN,\n      olMapBrowserEventType.POINTERDOWN,\n      olEvents.EventType.MOUSEWHEEL,\n      olEvents.EventType.WHEEL\n    ];\n    for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n      olEvents.listen(this.container_, overlayEvents[i], olEvents.Event.stopPropagation);\n    }\n  }\n\n\n  /**\n   * @type {!HTMLCanvasElement}\n   * @private\n   */\n  this.canvas_ = /** @type {!HTMLCanvasElement} */ (document.createElement('CANVAS'));\n  const canvasAttribute = document.createAttribute('style');\n  canvasAttribute.value = fillArea;\n  this.canvas_.setAttributeNode(canvasAttribute);\n\n  if (olcsUtil.supportsImageRenderingPixelated()) {\n    // non standard CSS4\n    this.canvas_.style['imageRendering'] = olcsUtil.imageRenderingValue();\n  }\n\n  this.canvas_.oncontextmenu = function() { return false; };\n  this.canvas_.onselectstart = function() { return false; };\n\n  this.container_.appendChild(this.canvas_);\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.enabled_ = false;\n\n  /**\n   * @type {!Array.<ol.interaction.Interaction>}\n   * @private\n   */\n  this.pausedInteractions_ = [];\n\n  /**\n   * @type {?ol.layer.Group}\n   * @private\n   */\n  this.hiddenRootGroup_ = null;\n\n  const sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions :\n    /** @type {Cesium.SceneOptions} */ ({});\n  sceneOptions.canvas = this.canvas_;\n  sceneOptions.scene3DOnly = true;\n\n  /**\n   * @type {!Cesium.Scene}\n   * @private\n   */\n  this.scene_ = new Cesium.Scene(sceneOptions);\n\n  const sscc = this.scene_.screenSpaceCameraController;\n\n  sscc.tiltEventTypes.push({\n    'eventType': Cesium.CameraEventType.LEFT_DRAG,\n    'modifier': Cesium.KeyboardEventModifier.SHIFT\n  });\n\n  sscc.tiltEventTypes.push({\n    'eventType': Cesium.CameraEventType.LEFT_DRAG,\n    'modifier': Cesium.KeyboardEventModifier.ALT\n  });\n\n  sscc.enableLook = false;\n\n  this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n\n  /**\n   * @type {!olcs.Camera}\n   * @private\n   */\n  this.camera_ = new olcsCamera(this.scene_, this.map_);\n\n  /**\n   * @type {!Cesium.Globe}\n   * @private\n   */\n  this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n  this.globe_.baseColor = Cesium.Color.WHITE;\n  this.scene_.globe = this.globe_;\n  this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();\n\n  // The first layer of Cesium is special; using a 1x1 transparent image to workaround it.\n  // See https://github.com/AnalyticalGraphicsInc/cesium/issues/1323 for details.\n  const firstImageryProvider = new Cesium.SingleTileImageryProvider({\n    url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\n    rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1) // the Rectangle dimensions are arbitrary\n  });\n  this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);\n\n  this.dataSourceCollection_ = new Cesium.DataSourceCollection();\n  this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({\n    scene: this.scene_,\n    dataSourceCollection: this.dataSourceCollection_\n  });\n\n  const synchronizers = options.createSynchronizers ?\n    options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [\n      new olcsRasterSynchronizer(this.map_, this.scene_),\n      new olcsVectorSynchronizer(this.map_, this.scene_),\n      new olcsOverlaySynchronizer(this.map_, this.scene_)\n    ];\n\n  // Assures correct canvas size after initialisation\n  this.handleResize_();\n\n  for (let i = synchronizers.length - 1; i >= 0; --i) {\n    synchronizers[i].synchronize();\n  }\n\n  if (this.isOverMap_) {\n    // if in \"stacked mode\", hide everything except canvas (including credits)\n    const credits = this.canvas_.nextElementSibling;\n    if (credits) {\n      credits.style.display = 'none';\n    }\n  }\n\n  /**\n   * Time of the last rendered frame, as returned by `performance.now()`.\n   * @type {number}\n   * @private\n   */\n  this.lastFrameTime_ = 0;\n\n  /**\n   * The identifier returned by `requestAnimationFrame`.\n   * @type {number|undefined}\n   * @private\n   */\n  this.renderId_ = undefined;\n\n  /**\n   * Target frame rate for the render loop.\n   * @type {number}\n   * @private\n   */\n  this.targetFrameRate_ = Number.POSITIVE_INFINITY;\n\n  /**\n   * If the Cesium render loop is being blocked.\n   * @type {boolean}\n   * @private\n   */\n  this.blockCesiumRendering_ = false;\n\n  /**\n   * If the warmup routine is active.\n   * @type {boolean}\n   * @private\n   */\n  this.warmingUp_ = false;\n\n  /**\n   * @type {ol.Feature}\n   * @private\n   */\n  this.trackedFeature_ = null;\n\n  /**\n   * @type {Cesium.Entity}\n   * @private\n   */\n  this.trackedEntity_ = null;\n\n  /**\n   * @type {Cesium.EntityView}\n   * @private\n   */\n  this.entityView_ = null;\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.needTrackedEntityUpdate_ = false;\n\n  /**\n   * @type {!Cesium.BoundingSphere}\n   */\n  this.boundingSphereScratch_ = new Cesium.BoundingSphere();\n\n  const eventHelper = new Cesium.EventHelper();\n  eventHelper.add(this.scene_.postRender, exports.prototype.updateTrackedEntity_, this);\n\n  // Cesium has a mechanism to prevent the camera to go under the terrain.\n  // Unfortunately, it is only active when all the terrain has been loaded, which:\n  // - does not prevent the camera to sink under terrain anymore;\n  // - introduce a jumping effect once all terrain has been loaded and the position of the camera is finally fixed.\n  // The property below enables a workaround found in the Camptocamp Cesium fork.\n  // See also https://github.com/AnalyticalGraphicsInc/cesium/issues/5999.\n  Cesium.Camera.enableSuspendTerrainAdjustment = false;\n};\n\n\nObject.defineProperties(exports.prototype, {\n  'trackedFeature': {\n    'get': /** @this {olcs.OLCesium} */ function() {\n      return this.trackedFeature_;\n    },\n    'set': /** @this {olcs.OLCesium} */ function(feature) {\n      if (this.trackedFeature_ !== feature) {\n\n        const scene = this.scene_;\n\n        //Stop tracking\n        if (!feature || !feature.getGeometry()) {\n          this.needTrackedEntityUpdate_ = false;\n          scene.screenSpaceCameraController.enableTilt = true;\n\n          if (this.trackedEntity_) {\n            this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);\n          }\n          this.trackedEntity_ = null;\n          this.trackedFeature_ = null;\n          this.entityView_ = null;\n          scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n          return;\n        }\n\n        this.trackedFeature_ = feature;\n\n        //We can't start tracking immediately, so we set a flag and start tracking\n        //when the bounding sphere is ready (most likely next frame).\n        this.needTrackedEntityUpdate_ = true;\n\n        const to4326Transform = this.to4326Transform_;\n        const toCesiumPosition = function() {\n          const geometry = feature.getGeometry();\n          googAsserts.assertInstanceof(geometry, olGeomPoint);\n          const coo = geometry.getCoordinates();\n          const coo4326 = to4326Transform(coo, undefined, coo.length);\n          return olcsCore.ol4326CoordinateToCesiumCartesian(coo4326);\n        };\n\n        // Create an invisible point entity for tracking.\n        // It is independant from the primitive/geometry created by the vector synchronizer.\n        const options = {\n          'position': new Cesium.CallbackProperty((time, result) => toCesiumPosition(), false),\n          'point': {\n            'pixelSize': 1,\n            'color': Cesium.Color.TRANSPARENT\n          }\n        };\n\n        this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);\n      }\n    }\n  }\n});\n\n\n/**\n * Render the Cesium scene.\n * @private\n */\nexports.prototype.render_ = function() {\n  // if a call to `requestAnimationFrame` is pending, cancel it\n  if (this.renderId_ !== undefined) {\n    cancelAnimationFrame(this.renderId_);\n    this.renderId_ = undefined;\n  }\n\n  // only render if Cesium is enabled/warming and rendering hasn't been blocked\n  if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {\n    this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));\n  }\n};\n\n\n/**\n * Callback for `requestAnimationFrame`.\n * @param {number} frameTime The frame time, from `performance.now()`.\n * @private\n */\nexports.prototype.onAnimationFrame_ = function(frameTime) {\n  this.renderId_ = undefined;\n\n  // check if a frame was rendered within the target frame rate\n  const interval = 1000.0 / this.targetFrameRate_;\n  const delta = frameTime - this.lastFrameTime_;\n  if (delta < interval) {\n    // too soon, don't render yet\n    this.render_();\n    return;\n  }\n\n  // time to render a frame, save the time\n  this.lastFrameTime_ = frameTime;\n\n  const julianDate = this.time_();\n  this.scene_.initializeFrame();\n  this.handleResize_();\n  this.dataSourceDisplay_.update(julianDate);\n\n  // Update tracked entity\n  if (this.entityView_) {\n    const trackedEntity = this.trackedEntity_;\n    const trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n    if (trackedState === Cesium.BoundingSphereState.DONE) {\n      this.boundingSphereScratch_.radius = 1; // a radius of 1 is enough for tracking points\n      this.entityView_.update(julianDate, this.boundingSphereScratch_);\n    }\n  }\n\n  this.scene_.render(julianDate);\n  this.camera_.checkCameraChange();\n\n  // request the next render call after this one completes to ensure the browser doesn't get backed up\n  this.render_();\n};\n\n\n/**\n * @private\n */\nexports.prototype.updateTrackedEntity_ = function() {\n  if (!this.needTrackedEntityUpdate_) {\n    return;\n  }\n\n  const trackedEntity = this.trackedEntity_;\n  const scene = this.scene_;\n\n  const state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n  if (state === Cesium.BoundingSphereState.PENDING) {\n    return;\n  }\n\n  scene.screenSpaceCameraController.enableTilt = false;\n\n  const bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;\n  if (bs) {\n    bs.radius = 1;\n  }\n  this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);\n  this.entityView_.update(this.time_(), bs);\n  this.needTrackedEntityUpdate_ = false;\n};\n\n\n/**\n * @private\n */\nexports.prototype.handleResize_ = function() {\n  let width = this.canvas_.clientWidth;\n  let height = this.canvas_.clientHeight;\n\n  if (width === 0 | height === 0) {\n    // The canvas DOM element is not ready yet.\n    return;\n  }\n\n  if (width === this.canvasClientWidth_ &&\n      height === this.canvasClientHeight_ &&\n      !this.resolutionScaleChanged_) {\n    return;\n  }\n\n  let resolutionScale = this.resolutionScale_;\n  if (!olcsUtil.supportsImageRenderingPixelated()) {\n    resolutionScale *= window.devicePixelRatio || 1.0;\n  }\n  this.resolutionScaleChanged_ = false;\n\n  this.canvasClientWidth_ = width;\n  this.canvasClientHeight_ = height;\n\n  width *= resolutionScale;\n  height *= resolutionScale;\n\n  this.canvas_.width = width;\n  this.canvas_.height = height;\n  this.scene_.camera.frustum.aspectRatio = width / height;\n};\n\n\n/**\n * @return {!olcs.Camera}\n * @api\n */\nexports.prototype.getCamera = function() {\n  return this.camera_;\n};\n\n\n/**\n * @return {!ol.Map}\n * @api\n */\nexports.prototype.getOlMap = function() {\n  return this.map_;\n};\n\n/**\n * @return {!ol.View}\n * @api\n */\nexports.prototype.getOlView = function() {\n  const view = this.map_.getView();\n  googAsserts.assert(view);\n  return view;\n};\n\n/**\n * @return {!Cesium.Scene}\n * @api\n */\nexports.prototype.getCesiumScene = function() {\n  return this.scene_;\n};\n\n\n/**\n * @return {!Cesium.DataSourceCollection}\n * @api\n */\nexports.prototype.getDataSources = function() {\n  return this.dataSourceCollection_;\n};\n\n\n/**\n * @return {!Cesium.DataSourceDisplay}\n * @api\n */\nexports.prototype.getDataSourceDisplay = function() {\n  return this.dataSourceDisplay_;\n};\n\n\n/**\n * @return {boolean}\n * @api\n */\nexports.prototype.getEnabled = function() {\n  return this.enabled_;\n};\n\n\n/**\n * Enables/disables the Cesium.\n * This modifies the visibility style of the container element.\n * @param {boolean} enable\n * @api\n */\nexports.prototype.setEnabled = function(enable) {\n  if (this.enabled_ === enable) {\n    return;\n  }\n  this.enabled_ = enable;\n\n  // some Cesium operations are operating with canvas.clientWidth,\n  // so we can't remove it from DOM or even make display:none;\n  this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';\n  let interactions;\n  if (this.enabled_) {\n    this.throwOnUnitializedMap_();\n    if (this.isOverMap_) {\n      interactions = this.map_.getInteractions();\n      interactions.forEach(function(el, i, arr) {\n        this.pausedInteractions_.push(el);\n      }, this);\n      interactions.clear();\n\n      const rootGroup = this.map_.getLayerGroup();\n      if (rootGroup.getVisible()) {\n        this.hiddenRootGroup_ = rootGroup;\n        this.hiddenRootGroup_.setVisible(false);\n      }\n\n      this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');\n      this.map_.getOverlayContainerStopEvent().classList.add('olcs-hideoverlay');\n    }\n\n    this.camera_.readFromView();\n    this.render_();\n  } else {\n    if (this.isOverMap_) {\n      interactions = this.map_.getInteractions();\n      this.pausedInteractions_.forEach((interaction) => {\n        interactions.push(interaction);\n      });\n      this.pausedInteractions_.length = 0;\n      this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');\n      this.map_.getOverlayContainerStopEvent().classList.remove('olcs-hideoverlay');\n      if (this.hiddenRootGroup_) {\n        this.hiddenRootGroup_.setVisible(true);\n        this.hiddenRootGroup_ = null;\n      }\n    }\n\n    this.camera_.updateView();\n  }\n};\n\n\n/**\n * Preload Cesium so that it is ready when transitioning from 2D to 3D.\n * @param {number} height Target height of the camera\n * @param {number} timeout Milliseconds after which the warming will stop\n * @api\n*/\nexports.prototype.warmUp = function(height, timeout) {\n  if (this.enabled_) {\n    // already enabled\n    return;\n  }\n  this.throwOnUnitializedMap_();\n  this.camera_.readFromView();\n  const ellipsoid = this.globe_.ellipsoid;\n  const csCamera = this.scene_.camera;\n  const position = ellipsoid.cartesianToCartographic(csCamera.position);\n  if (position.height < height) {\n    position.height = height;\n    csCamera.position = ellipsoid.cartographicToCartesian(position);\n  }\n\n  this.warmingUp_ = true;\n  this.render_();\n\n  setTimeout(() => {\n    this.warmingUp_ = false;\n  }, timeout);\n};\n\n\n/**\n * Block Cesium rendering to save resources.\n * @param {boolean} block True to block.\n * @api\n*/\nexports.prototype.setBlockCesiumRendering = function(block) {\n  if (this.blockCesiumRendering_ !== block) {\n    this.blockCesiumRendering_ = block;\n\n    // reset the render loop\n    this.render_();\n  }\n};\n\n\n/**\n * Render the globe only when necessary in order to save resources.\n * Experimental.\n * @api\n */\nexports.prototype.enableAutoRenderLoop = function() {\n  if (!this.autoRenderLoop_) {\n    this.autoRenderLoop_ = new olcsAutoRenderLoop(this, false);\n  }\n};\n\n\n/**\n * Get the autorender loop.\n * @return {?olcs.AutoRenderLoop}\n * @api\n*/\nexports.prototype.getAutoRenderLoop = function() {\n  return this.autoRenderLoop_;\n};\n\n\n/**\n * The 3D Cesium globe is rendered in a canvas with two different dimensions:\n * clientWidth and clientHeight which are the dimension on the screen and\n * width and height which are the dimensions of the drawing buffer.\n *\n * By using a resolution scale lower than 1.0, it is possible to render the\n * globe in a buffer smaller than the canvas client dimensions and improve\n * performance, at the cost of quality.\n *\n * Pixel ratio should also be taken into account; by default, a device with\n * pixel ratio of 2.0 will have a buffer surface 4 times bigger than the client\n * surface.\n *\n * @param {number} value\n * @this {olcs.OLCesium}\n * @api\n */\nexports.prototype.setResolutionScale = function(value) {\n  value = Math.max(0, value);\n  if (value !== this.resolutionScale_) {\n    this.resolutionScale_ = Math.max(0, value);\n    this.resolutionScaleChanged_ = true;\n    if (this.autoRenderLoop_) {\n      this.autoRenderLoop_.restartRenderLoop();\n    }\n  }\n};\n\n\n/**\n * Set the target frame rate for the renderer. Set to `Number.POSITIVE_INFINITY`\n * to render as quickly as possible.\n * @param {number} value The frame rate, in frames per second.\n * @api\n */\nexports.prototype.setTargetFrameRate = function(value) {\n  if (this.targetFrameRate_ !== value) {\n    this.targetFrameRate_ = value;\n\n    // reset the render loop\n    this.render_();\n  }\n};\n\n\n/**\n * Check if OpenLayers map is not properly initialized.\n * @private\n */\nexports.prototype.throwOnUnitializedMap_ = function() {\n  const map = this.map_;\n  const view = map.getView();\n  const center = view.getCenter();\n  if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {\n    throw new Error(`The OpenLayers map is not properly initialized: ${center} / ${view.getResolution()}`);\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/OLCesium.js\n// module id = null\n// module chunks = ","/**\n * @module\n */\nimport olcsContribLazyLoader from '../contrib/LazyLoader.js';\nimport olcsOLCesium from '../OLCesium.js';\nimport olcsCore from '../core.js';\nimport olMath from 'ol/math';\nimport olObservable from 'ol/Observable';\nimport googAsserts from 'goog/asserts';\n\nconst exports = class extends olObservable {\n  /**\n   * @param {string} cesiumUrl\n   * @param {olcsx.contrib.ManagerOptions} options\n   * @api\n   */\n  constructor(cesiumUrl, {map, cameraExtentInRadians} = {}) {\n\n    super();\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.cesiumUrl_ = cesiumUrl;\n\n    /**\n     * @type {ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.Extent}\n     * @protected\n     */\n    this.cameraExtentInRadians = cameraExtentInRadians || null;\n\n    /**\n     * @private\n     * @type {Cesium.BoundingSphere}\n     */\n    this.boundingSphere_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.blockLimiter_ = false;\n\n    /**\n     * @type {Promise.<olcs.OLCesium>}\n     * @private\n     */\n    this.promise_;\n\n    /**\n     * @type {olcs.OLCesium}\n     * @protected\n     */\n    this.ol3d;\n\n\n    /**\n     * @const {number} Tilt angle in radians\n     * @private\n     */\n    this.cesiumInitialTilt_ = olMath.toRadians(50);\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogDensity = 0.0001;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.fogSSEFactor = 25;\n\n    /**\n     * Limit the minimum distance to the terrain to 2m.\n     * @protected\n     * @type {number}\n     */\n    this.minimumZoomDistance = 2;\n\n    /**\n     * Limit the maximum distance to the earth to 10'000km.\n     * @protected\n     * @type {number}\n     */\n    this.maximumZoomDistance = 10000000;\n\n    // when closer to 3000m, restrict the available positions harder\n    /**\n     * @protected\n     * @param {number} height\n     */\n    this.limitCameraToBoundingSphereRatio = height => (height > 3000 ? 9 : 3);\n  }\n\n\n  /**\n   * @return {Promise.<olcs.OLCesium>}\n   */\n  load() {\n    if (!this.promise_) {\n      const cesiumLazyLoader = new olcsContribLazyLoader(this.cesiumUrl_);\n      this.promise_ = cesiumLazyLoader.load().then(() => this.onCesiumLoaded());\n    }\n    return this.promise_;\n  }\n\n\n  /**\n   * @protected\n   * @return {olcs.OLCesium}\n   */\n  onCesiumLoaded() {\n    if (this.cameraExtentInRadians) {\n      const rect = new Cesium.Rectangle(...this.cameraExtentInRadians);\n      // Set the fly home rectangle\n      Cesium.Camera.DEFAULT_VIEW_RECTANGLE = rect;\n      this.boundingSphere_ = Cesium.BoundingSphere.fromRectangle3D(rect, Cesium.Ellipsoid.WGS84, 300); // lux mean height is 300m\n    }\n\n    this.ol3d = this.instantiateOLCesium();\n    const scene = this.ol3d.getCesiumScene();\n    this.configureForUsability(scene);\n    this.configureForPerformance(scene);\n    this.dispatchEvent('load');\n    return this.ol3d;\n  }\n\n\n  /**\n   * Application code should override this method.\n   * @return {olcs.OLCesium}\n   */\n  instantiateOLCesium() {\n    googAsserts.assert(this.map);\n    const ol3d = new olcsOLCesium({map: this.map});\n    const scene = ol3d.getCesiumScene();\n    const terrainProvider = new Cesium.CesiumTerrainProvider({\n      url: '//assets.agi.com/stk-terrain/world'\n    });\n    scene.terrainProvider = terrainProvider;\n    return ol3d;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForPerformance(scene) {\n    const fog = scene.fog;\n    fog.enabled = true;\n    fog.density = this.fogDensity;\n    fog.screenSpaceErrorFactor = this.fogSSEFactor;\n  }\n\n\n  /**\n   * @param {!Cesium.Scene} scene The scene, passed as parameter for convenience.\n   * @protected\n   */\n  configureForUsability(scene) {\n    const sscController = scene.screenSpaceCameraController;\n    sscController.minimumZoomDistance = this.minimumZoomDistance;\n    sscController.maximumZoomDistance = this.maximumZoomDistance;\n\n    // Do not see through the terrain. Seeing through the terrain does not make\n    // sense anyway, except for debugging\n    scene.globe.depthTestAgainstTerrain = true;\n\n    // Use white instead of the black default colour for the globe when tiles are missing\n    scene.globe.baseColor = Cesium.Color.WHITE;\n    scene.backgroundColor = Cesium.Color.WHITE;\n\n    if (this.boundingSphere_) {\n      scene.postRender.addEventListener(this.limitCameraToBoundingSphere.bind(this), scene);\n    }\n    // Stop rendering Cesium when there is nothing to do. This drastically reduces CPU/GPU consumption.\n    this.ol3d.enableAutoRenderLoop();\n  }\n\n\n  /**\n   * Constrain the camera so that it stays close to the bounding sphere of the map extent.\n   * Near the ground the allowed distance is shorter.\n   * @protected\n   */\n  limitCameraToBoundingSphere() {\n    if (this.boundingSphere_ && !this.blockLimiter_) {\n      const scene = this.ol3d.getCesiumScene();\n      const camera = scene.camera;\n      const position = camera.position;\n      const carto = Cesium.Cartographic.fromCartesian(position);\n      const ratio = this.limitCameraToBoundingSphereRatio(carto.height);\n      if (Cesium.Cartesian3.distance(this.boundingSphere_.center, position) > this.boundingSphere_.radius * ratio) {\n        const currentlyFlying = camera.flying;\n        if (currentlyFlying === true) {\n          // There is a flying property and its value is true\n          return;\n        } else {\n          this.blockLimiter_ = true;\n          const unblockLimiter = () => this.blockLimiter_ = false;\n          camera.flyToBoundingSphere(this.boundingSphere_, {\n            complete: unblockLimiter,\n            cancel: unblockLimiter\n          });\n        }\n      }\n    }\n  }\n\n\n  /**\n   * Enable or disable ol3d with a default animation.\n   * @export\n   * @return {Promise<undefined>}\n   */\n  toggle3d() {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      if (is3DCurrentlyEnabled) {\n        // Disable 3D\n        googAsserts.assert(this.map);\n        return olcsCore.resetToNorthZenith(this.map, scene).then(() => {\n          ol3d.setEnabled(false);\n          this.dispatchEvent('toggle');\n        });\n      } else {\n        // Enable 3D\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n        return olcsCore.rotateAroundBottomCenter(scene, this.cesiumInitialTilt_);\n      }\n    });\n  }\n\n\n  /**\n   * Enable ol3d with a view built from parameters.\n   *\n   * @export\n   * @param {number} lon\n   * @param {number} lat\n   * @param {number} elevation\n   * @param {number} headingDeg Heading value in degrees.\n   * @param {number} pitchDeg Pitch value in degrees.\n   * @returns {Promise<undefined>}\n   */\n  set3dWithView(lon, lat, elevation, headingDeg, pitchDeg) {\n    return this.load().then((/** @const {!olcs.OLCesium} */ ol3d) => {\n      const is3DCurrentlyEnabled = ol3d.getEnabled();\n      const scene = ol3d.getCesiumScene();\n      const camera = scene.camera;\n      const destination = Cesium.Cartesian3.fromDegrees(lon, lat, elevation);\n      const heading = Cesium.Math.toRadians(headingDeg);\n      const pitch = Cesium.Math.toRadians(pitchDeg);\n      const roll = 0;\n      const orientation = {heading, pitch, roll};\n\n      if (!is3DCurrentlyEnabled) {\n        ol3d.setEnabled(true);\n        this.dispatchEvent('toggle');\n      }\n\n      camera.setView({\n        destination,\n        orientation\n      });\n    });\n  }\n\n\n  /**\n   * @export\n   * @return {boolean}\n   */\n  is3dEnabled() {\n    return !!this.ol3d && this.ol3d.getEnabled();\n  }\n\n\n  /**\n   * @return {number}\n   */\n  getHeading() {\n    return this.map ? this.map.getView().getRotation() || 0 : 0;\n  }\n\n\n  /**\n   * @return {number|undefined}\n   */\n  getTiltOnGlobe() {\n    const scene = this.ol3d.getCesiumScene();\n    const tiltOnGlobe = olcsCore.computeSignedTiltAngleOnGlobe(scene);\n    return -tiltOnGlobe;\n  }\n\n\n  /**\n   * @param {number} angle\n   */\n  setHeading(angle) {\n    const scene = this.ol3d.getCesiumScene();\n    const bottom = olcsCore.pickBottomPoint(scene);\n    if (bottom) {\n      olcsCore.setHeadingUsingBottomCenter(scene, angle, bottom);\n    }\n  }\n\n  /**\n   * @export\n   * @return {olcs.OLCesium}\n   */\n  getOl3d() {\n    return this.ol3d;\n  }\n\n  /**\n   * @export\n   * @return {!ol.View}\n   */\n  getOlView() {\n    const view = this.map.getView();\n    googAsserts.assert(view);\n    return view;\n  }\n\n  /**\n   * @export\n   * @return {Cesium.Matrix4}\n   */\n  getCesiumViewMatrix() {\n    return this.ol3d.getCesiumScene().camera.viewMatrix;\n  }\n\n  /**\n   * @export\n   * @return {!Cesium.Scene}\n   */\n  getCesiumScene() {\n    return this.ol3d.getCesiumScene();\n  }\n\n  /**\n   * @export\n   * @param {!Cesium.Rectangle} rectangle\n   * @param {number=} offset in meters\n   * @return {Promise<undefined>}\n   */\n  flyToRectangle(rectangle, offset = 0) {\n    const camera = this.getCesiumScene().camera;\n    const destination = camera.getRectangleCameraCoordinates(rectangle);\n\n    const mag = Cesium.Cartesian3.magnitude(destination) + offset;\n    Cesium.Cartesian3.normalize(destination, destination);\n    Cesium.Cartesian3.multiplyByScalar(destination, mag, destination);\n\n    return new Promise((resolve, reject) => {\n      if (!this.cameraExtentInRadians) {\n        reject();\n        return;\n      }\n\n      camera.flyTo({\n        destination,\n        complete: () => resolve(),\n        cancel: () => reject(),\n        endTransform: Cesium.Matrix4.IDENTITY\n      });\n    });\n  }\n\n  /**\n   * @protected\n   * @return {Cesium.Rectangle|undefined}\n   */\n  getCameraExtentRectangle() {\n    if (this.cameraExtentInRadians) {\n      return new Cesium.Rectangle(...this.cameraExtentInRadians);\n    }\n  }\n};\n\nexport default exports;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/olcs/contrib/Manager.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/OSM\n */\nimport {inherits} from '../index.js';\nimport XYZ from '../source/XYZ.js';\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {ol.source.XYZ}\n * @param {olx.source.OSMOptions=} opt_options Open Street Map options.\n * @api\n */\nconst OSM = function(opt_options) {\n\n  const options = opt_options || {};\n\n  let attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [OSM.ATTRIBUTION];\n  }\n\n  const crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  const url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  XYZ.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\ninherits(OSM, XYZ);\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nOSM.ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\nexport default OSM;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/OSM.js\n// module id = 48\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 21 22 23 24 25 26 27 28 29 30","/**\n * @module ol/source/XYZ\n */\nimport {inherits} from '../index.js';\nimport TileImage from '../source/TileImage.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link ol.source.TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.XYZOptions=} opt_options XYZ options.\n * @api\n */\nconst XYZ = function(opt_options) {\n  const options = opt_options || {};\n  const projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    _ol_tilegrid_.createXYZ({\n      extent: _ol_tilegrid_.extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\ninherits(XYZ, TileImage);\nexport default XYZ;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/XYZ.js\n// module id = 49\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 21 22 23 24 25 26 27 28 29 30"],"sourceRoot":""}