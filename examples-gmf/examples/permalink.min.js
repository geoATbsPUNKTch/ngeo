webpackJsonp([8],{11:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n="1.3.0"},114:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=u(i(30)),o=u(i(45)),r=u(i(51)),a=u(i(53)),s=u(i(27)),l=u(i(42));function u(t){return t&&t.__esModule?t:{default:t}}var d={toMulti:function(t){var e=void 0;return t instanceof s.default?(e=new o.default([])).appendPoint(t):t instanceof n.default?(e=new r.default([])).appendLineString(t):t instanceof l.default?(e=new a.default([])).appendPolygon(t):e=t,e},isSafari:function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")},colorZeroPadding:function(t){return 1==t.length?"0"+t:t},rgbArrayToHex:function(t){var e=t[0],i=t[1],n=t[2];if(e!=(255&e)||i!=(255&i)||n!=(255&n))throw Error('"('+e+","+i+","+n+')" is not a valid RGB color');return"#"+d.colorZeroPadding(e.toString(16))+d.colorZeroPadding(i.toString(16))+d.colorZeroPadding(n.toString(16))},decodeQueryString:function(t){var e={};if(t){var i=t.substring(1).split("&"),n=!0,o=!1,r=void 0;try{for(var a,s=i[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=l.indexOf("=");if(u>=0){var d=l.substring(0,u),h=l.substring(u+1);e[decodeURIComponent(d)]=decodeURIComponent(h)}else e[l]=""}}catch(t){o=!0,r=t}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}}return e},encodeQueryString:function(t){var e=[];for(var i in t){var n=t[i];n?e.push(encodeURIComponent(i)+"="+encodeURIComponent(n)):e.push(encodeURIComponent(i))}return e.join("&")}};e.default=d},119:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(3)),o=(d(i(1)),d(i(82))),r=d(i(134)),a=d(i(52)),s=d(i(50)),l=d(i(57)),u=d(i(138));function d(t){return t&&t.__esModule?t:{default:t}}var h={interaction:function(t){n.default.assertInstanceof(t,o.default),Object.defineProperty(t,"active",{get:function(){return t.getActive()},set:function(e){t.setActive(e)}})},layer:function(t){n.default.assertInstanceof(t,r.default),Object.defineProperty(t,"visible",{configurable:!0,get:function(){return t.getVisible()},set:function(e){t.setVisible(e)}}),Object.defineProperty(t,"opacity",{configurable:!0,get:function(){return t.getOpacity()},set:function(e){t.setOpacity(e)}})},layerLoading:function(t,e){var i=void 0,o=null,r=null,d=function t(e){var i=e.get("load_count");var n=e.get("parent_group");e.set("load_count",++i,!0);n&&t(n)},h=function t(e){var i=e.get("load_count");var n=e.get("parent_group");e.set("load_count",--i,!0);n&&t(n)};if(t.set("load_count",0,!0),t instanceof a.default&&t.getLayers().on("add",function(e){e.element.set("parent_group",t)}),t instanceof s.default){if(null===(i=t.getSource()))return;i instanceof u.default?(o=["tileloadstart"],r=["tileloadend","tileloaderror"]):i instanceof l.default?(o=["imageloadstart"],r=["imageloadend","imageloaderror"]):n.default.fail("unsupported source type"),i.on(o,function(){d(t),e.$applyAsync()}),i.on(r,function(){h(t),e.$applyAsync()})}Object.defineProperty(t,"loading",{configurable:!0,get:function(){return t.get("load_count")>0}})}};e.default=h},12:function(t,e,i){"use strict";e.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},16:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),o=i(0),r=i(63),a=i(56),s=i(2),l=i(9),u=i(4),d=function(t,e,i,n,o,s){r.a.call(this,t,e,i,a.a.IDLE),this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=a.a.IDLE,this.imageLoadFunction_=s};Object(o.inherits)(d,r.a),d.prototype.getImage=function(){return this.image_},d.prototype.handleImageError_=function(){this.state=a.a.ERROR,this.unlistenImage_(),this.changed()},d.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(u.getHeight)(this.extent)/this.image_.height),this.state=a.a.LOADED,this.unlistenImage_(),this.changed()},d.prototype.load=function(){this.state!=a.a.IDLE&&this.state!=a.a.ERROR||(this.state=a.a.LOADING,this.changed(),this.imageListenerKeys_=[s.default.listenOnce(this.image_,l.a.ERROR,this.handleImageError_,this),s.default.listenOnce(this.image_,l.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},d.prototype.setImage=function(t){this.image_=t},d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.default.unlistenByKey),this.imageListenerKeys_=null};var h=d,c=i(10),f=i(5),p=i(6),g=i(28),_=i(57),v=i(12),y=i(15),m=i(22),C=function(t){var e=t||{};_.default.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:_.default.defaultImageLoadFunction,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};Object(o.inherits)(C,_.default),C.GETFEATUREINFO_IMAGE_SIZE_=[101,101],C.prototype.getGetFeatureInfoUrl=function(t,e,i,o){if(void 0!==this.url_){var r=Object(p.get)(i),a=this.getProjection();a&&a!==r&&(e=g.a.calculateSourceResolution(a,r,t,e),t=Object(p.transform)(t,r,a));var s=Object(u.getForViewAndSize)(t,e,0,C.GETFEATUREINFO_IMAGE_SIZE_),l={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};f.default.assign(l,this.params_,o);var d=Math.floor((t[0]-s[0])/e),h=Math.floor((s[3]-t[1])/e);return l[this.v13_?"I":"X"]=d,l[this.v13_?"J":"Y"]=h,this.getRequestUrl_(s,C.GETFEATUREINFO_IMAGE_SIZE_,1,a||r,l)}},C.prototype.getParams=function(){return this.params_},C.prototype.getImageInternal=function(t,e,i,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var r=e/i,a=Object(u.getCenter)(t),d=Math.ceil(Object(u.getWidth)(t)/r),c=Math.ceil(Object(u.getHeight)(t)/r),p=Object(u.getForViewAndSize)(a,r,0,[d,c]),g=Math.ceil(this.ratio_*Object(u.getWidth)(t)/r),_=Math.ceil(this.ratio_*Object(u.getHeight)(t)/r),v=Object(u.getForViewAndSize)(a,r,0,[g,_]),y=this.image_;if(y&&this.renderedRevision_==this.getRevision()&&y.getResolution()==e&&y.getPixelRatio()==i&&Object(u.containsExtent)(y.getExtent(),p))return y;var m={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};f.default.assign(m,this.params_),this.imageSize_[0]=Math.round(Object(u.getWidth)(v)/r),this.imageSize_[1]=Math.round(Object(u.getHeight)(v)/r);var C=this.getRequestUrl_(v,this.imageSize_,i,o,m);return this.image_=new h(v,e,i,C,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s.default.listen(this.image_,l.a.CHANGE,this.handleImageChange,this),this.image_},C.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},C.prototype.getRequestUrl_=function(t,e,i,n,o){if(Object(c.a)(void 0!==this.url_,9),o[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=i)switch(this.serverType_){case v.a.GEOSERVER:var r=90*i+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+r:o.FORMAT_OPTIONS="dpi:"+r;break;case v.a.MAPSERVER:o.MAP_RESOLUTION=90*i;break;case v.a.CARMENTA_SERVER:case v.a.QGIS:o.DPI=90*i;break;default:Object(c.a)(!1,8)}o.WIDTH=e[0],o.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,o.BBOX=a.join(","),m.default.appendParams(this.url_,o)},C.prototype.getUrl=function(){return this.url_},C.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},C.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},C.prototype.updateParams=function(t){f.default.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},C.prototype.updateV13_=function(){var t=this.params_.VERSION||n.a;this.v13_=y.default.compareVersions(t,"1.3")>=0};e.default=C},21:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(0)),o=r(i(43));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.default.call(this,t),this.detail=e};n.default.inherits(a,o.default),e.default=a},211:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(1),r=(n=o)&&n.__esModule?n:{default:n};var a=angular.module("ngeoDebounce",[]);r.default.module.requires.push(a.name),a.factory_=function(t){return function(e,i,n){var o=null;return function(){for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];var l=this;null!==o&&t.cancel(o),o=t(function(){o=null,e.apply(l,a)},i,n)}}},a.factory_.$inject=["$timeout"],a.factory("ngeoDebounce",a.factory_),e.default=a},23:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),o=i(0),r=i(10),a=i(4),s=i(5),l=i(14),u=i(6),d=i(28),h=i(60),c=i(41),f=i(12),p=i(61),g=i(15),_=i(22),v=function(t){var e=t||{},i=e.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;c.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=Object(a.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(o.inherits)(v,c.a),v.prototype.getGetFeatureInfoUrl=function(t,e,i,o){var r=Object(u.get)(i),l=this.getProjection(),c=this.getTileGrid();c||(c=this.getTileGridForProjection(r));var f=c.getTileCoordForCoordAndResolution(t,e);if(!(c.getResolutions().length<=f[0])){var p=c.getResolution(f[0]),g=c.getTileCoordExtent(f,this.tmpExtent_),_=h.default.toSize(c.getTileSize(f[0]),this.tmpSize),v=this.gutter_;0!==v&&(_=h.default.buffer(_,v,this.tmpSize),g=Object(a.buffer)(g,p*v,g)),l&&l!==r&&(p=d.a.calculateSourceResolution(l,r,t,p),g=Object(u.transformExtent)(g,r,l),t=Object(u.transform)(t,r,l));var y={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};s.default.assign(y,this.params_,o);var m=Math.floor((t[0]-g[0])/p),C=Math.floor((g[3]-t[1])/p);return y[this.v13_?"I":"X"]=m,y[this.v13_?"J":"Y"]=C,this.getRequestUrl_(f,_,g,1,l||r,y)}},v.prototype.getGutterInternal=function(){return this.gutter_},v.prototype.getParams=function(){return this.params_},v.prototype.getRequestUrl_=function(t,e,i,n,o,a){var s=this.urls;if(s){if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=n)switch(this.serverType_){case f.a.GEOSERVER:var u=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+u:a.FORMAT_OPTIONS="dpi:"+u;break;case f.a.MAPSERVER:a.MAP_RESOLUTION=90*n;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:a.DPI=90*n;break;default:Object(r.a)(!1,52)}var d,h,c=o.getAxisOrientation(),g=i;if(this.v13_&&"ne"==c.substr(0,2))d=i[0],g[0]=i[1],g[1]=d,d=i[2],g[2]=i[3],g[3]=d;if(a.BBOX=g.join(","),1==s.length)h=s[0];else h=s[Object(l.modulo)(p.a.hash(t),s.length)];return _.default.appendParams(h,a)}},v.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},v.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},v.prototype.fixedTileUrlFunction=function(t,e,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var r=o.getResolution(t[0]),l=o.getTileCoordExtent(t,this.tmpExtent_),u=h.default.toSize(o.getTileSize(t[0]),this.tmpSize),d=this.gutter_;0!==d&&(u=h.default.buffer(u,d,this.tmpSize),l=Object(a.buffer)(l,r*d,l)),1!=e&&(u=h.default.scale(u,e,this.tmpSize));var c={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return s.default.assign(c,this.params_),this.getRequestUrl_(t,u,l,e,i,c)}},v.prototype.updateParams=function(t){s.default.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},v.prototype.updateV13_=function(){var t=this.params_.VERSION||n.a;this.v13_=g.default.compareVersions(t,"1.3")>=0},e.default=v},25:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(1);(n=r)&&n.__esModule;var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.inRange_=!1!==e.inRange,this.visible_=!0===e.visible,this.attributes=e.attributes||null,this.id_=e.id,this.identifierAttribute_=e.identifierAttribute,this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.name_=e.name}return o(t,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(t){this.attributes=t}},{key:"inRange",get:function(){return this.inRange_},set:function(t){this.inRange_=t}},{key:"visible",get:function(){return this.visible_},set:function(t){this.visible_=t}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),t}();e.default=a},258:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(1)),o=r(i(114));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e){this.history_=e,this.schema_=t.protocol.substring(0,t.protocol.length-1),this.domain_=t.hostname,this.port_=t.port?parseInt(t.port,10):void 0,this.path_=t.pathname,this.queryData_=o.default.decodeQueryString(t.search),this.fragment_=o.default.decodeQueryString(t.hash)};a.replaceState=function(t,e){try{t.replaceState(null,"",e)}catch(t){}},a.prototype.getPath=function(){return this.path_},a.prototype.getUriString=function(){var t=[];this.schema_&&t.push(this.schema_,":"),(this.domain_||"file"===this.schema_)&&(t.push("//"),t.push(this.domain_),void 0!==this.port_&&t.push(":",String(this.port_))),this.path_&&(this.domain_&&"/"!==this.path_.charAt(0)&&t.push("/"),t.push(this.path_));var e=o.default.encodeQueryString(this.queryData_);e.length>0&&t.push("?",e);var i=o.default.encodeQueryString(this.fragment_);return i.length>0&&t.push("#",i),t.join("")},a.prototype.hasParam=function(t){return t in this.queryData_},a.prototype.hasFragmentParam=function(t){return t in this.fragment_},a.prototype.getParam=function(t){return this.queryData_[t]},a.prototype.getFragmentParam=function(t){return this.fragment_[t]},a.prototype.getParamAsInt=function(t){var e=this.getParam(t);if(void 0!==e){goog.asserts.assertString(e);var i=parseInt(e,10);return isNaN(i)?void 0:i}},a.prototype.getParamAsFloat=function(t){var e=this.getParam(t);if(void 0!==e){goog.asserts.assertString(e);var i=parseFloat(e);return isNaN(i)?void 0:i}},a.prototype.getFragmentParamAsInt=function(t){var e=this.getFragmentParam(t);if(void 0!==e){goog.asserts.assertString(e);var i=parseInt(e,10);return isNaN(i)?void 0:i}},a.prototype.getParamKeys=function(){var t=[];for(var e in this.queryData_)t.push(e);return t},a.prototype.getFragmentParamKeys=function(){var t=[];for(var e in this.fragment_)t.push(e);return t},a.prototype.getParamKeysWithPrefix=function(t){var e=[];for(var i in this.queryData_)0==i.indexOf(t)&&e.push(i);return e},a.prototype.getFragmentParamKeysWithPrefix=function(t){var e=[];for(var i in this.fragment_)0==i.indexOf(t)&&e.push(i);return e},a.prototype.updateParams=function(t){for(var e in t)this.queryData_[e]=t[e]},a.prototype.updateFragmentParams=function(t){for(var e in t)this.fragment_[e]=t[e]},a.prototype.deleteParam=function(t){delete this.queryData_[t]},a.prototype.deleteFragmentParam=function(t){delete this.fragment_[t]},a.prototype.refresh=function(){a.replaceState(this.history_,this.getUriString())},a.prototype.setPath=function(t){this.path_=t},(a.LocationFactory=function(t,e){var i=e.history,n=new a(e.location,e.history),o=n.getUriString();return t.$watch(function(){var e=n.getUriString();o!==e&&t.$evalAsync(function(){o=e,void 0!==i&&void 0!==i.replaceState&&a.replaceState(i,e),t.$broadcast("ngeoLocationChange")})}),n}).$inject=["$rootScope","$window"],(a.MockProvider=function(t){t.$get=function(){return{absUrl:function(){return""},hash:function(t){return void 0!==t?this:""},host:function(){return""},path:function(t){return void 0!==t?this:""},port:function(){return 0},protocol:function(){return""},replace:function(){},search:function(t,e){return void 0!==t?this:{}},url:function(t){return""}}}}).$inject=["$locationProvider"],(a.module=angular.module("ngeoLocation",[])).factory("ngeoLocation",a.LocationFactory),n.default.module.requires.push(a.module.name),e.default=a},26:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(1)),o=r(i(47));function r(t){return t&&t.__esModule?t:{default:t}}var a={};n.default.module.value("ngeoDataSources",new o.default),e.default=a},29:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(1)),o=h(i(0)),r=h(i(20)),a=h(i(5)),s=h(i(18)),l=h(i(17)),u=h(i(3)),d=h(i(36));function h(t){return t&&t.__esModule?t:{default:t}}var c=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new s.default({useSpatialIndex:!1}),this.layer_=new r.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};c.prototype.addFeature=function(t,e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length);var i=o.default.getUid(t).toString();this.featureUidToGroupIndex_[i]=e,this.groups_[e].features[i]=t,this.source_.addFeature(t)},c.prototype.removeFeature=function(t,e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length);var i=o.default.getUid(t).toString();delete this.featureUidToGroupIndex_[i],delete this.groups_[e].features[i],this.source_.removeFeature(t)},c.prototype.clear=function(t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length);var e=this.groups_[t];for(var i in e.features)this.removeFeature(e.features[i],t);u.default.assert(a.default.isEmpty(e.features))},c.prototype.getLayer=function(){return this.layer_},c.prototype.getFeatureOverlay=function(){var t=this.groups_.length;return this.groups_.push({styleFunction:l.default.defaultFunction,features:{}}),new d.default(this,t)},c.prototype.init=function(t){this.layer_.setMap(t)},c.prototype.setStyle=function(t,e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length),this.groups_[e].styleFunction=null===t?l.default.defaultFunction:l.default.createFunction(t)},c.prototype.styleFunction_=function(t,e){var i=o.default.getUid(t).toString();u.default.assert(i in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[i];return this.groups_[n].styleFunction(t,e)},(c.module=angular.module("ngeoFeatureOverlayMgr",[d.default.module.name])).service("ngeoFeatureOverlayMgr",c),n.default.module.requires.push(c.module.name),e.default=c},3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={assert:function(t,e,i){},assertNumber:function(t,e,i){},assertString:function(t,e,i){},assertFunction:function(t,e,i){},assertObject:function(t,e,i){},assertArray:function(t,e,i){},assertBoolean:function(t,e,i){},assertElement:function(t,e,i){},assertInstanceof:function(t,e,i,n){},assertObjectPrototypeIsIntact:function(){}};e.default=n},32:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(1)),o=d(i(33)),r=d(i(34)),a=d(i(29)),s=d(i(37)),l=d(i(38)),u=d(i(39));function d(t){return t&&t.__esModule?t:{default:t}}var h=angular.module("ngeoMapModule",[n.default.module.name,o.default.module.name,r.default.name,a.default.module.name,s.default.name,l.default.name,u.default.name]);e.default=h},33:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(3)),o=f(i(1)),r=f(i(21)),a=f(i(0)),s=f(i(19)),l=f(i(52)),u=f(i(50)),d=f(i(16)),h=f(i(23)),c=f(i(58));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(){s.default.call(this),this.mapUids_={}};a.default.inherits(p,s.default),p.prototype.get=function(t){return a.default.getUid(t).toString()in this.mapUids_?t.getLayers().item(0):null},p.prototype.set=function(t,e){var i=a.default.getUid(t).toString(),o=this.get(t);null!==o?(n.default.assert(i in this.mapUids_),null!==e?t.getLayers().setAt(0,e):(t.getLayers().removeAt(0),delete this.mapUids_[i])):null!==e&&(t.getLayers().insertAt(0,e),this.mapUids_[i]=!0);var s=new r.default("change",{current:e,previous:o});return this.dispatchEvent(s),o},p.prototype.updateDimensions=function(t,e){var i=this.get(t);if(i){var o=[i];i instanceof l.default&&(o=i.getLayers().getArray()),o.forEach(function(t){if(n.default.assertInstanceof(t,u.default),t){var i=!1,o={};for(var r in t.get("dimensions")){var a=e[r];void 0!==a&&(o[r]=a,i=!0)}if(i){var s=t.getSource();s instanceof c.default?(s.updateDimensions(o),s.refresh()):(s instanceof h.default||s instanceof d.default)&&(s.updateParams(o),s.refresh())}}})}},(p.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",p),o.default.module.requires.push(p.module.name),e.default=p},34:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(3)),o=s(i(1)),r=(s(i(35)),s(i(2))),a=s(i(7));function s(t){return t&&t.__esModule?t:{default:t}}var l=angular.module("ngeoMap",[]);o.default.module.requires.push(l.name),l.directive_=function(t,e){return{restrict:"A",link:function(i,o,s){var l=s.ngeoMap,u=i.$eval(l);n.default.assertInstanceof(u,a.default),u.setTarget(o[0]),e.map=u;var d=s.ngeoMapManageResize;if(i.$eval(d)){var h=s.ngeoMapResizeTransition,c=i.$eval(h);r.default.listen(t,"resize",function(){if(c){var e=Date.now(),i=!0;!function n(){u.updateSize(),u.renderSync(),i&&t.requestAnimationFrame(n),Date.now()-e>c&&(i=!1)}()}else u.updateSize()})}}}},l.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],l.directive("ngeoMap",l.directive_),e.default=l},344:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(!function(){var t=new Error('Cannot find module "examples/permalink.css"');throw t.code="MODULE_NOT_FOUND",t}()),i(59);var n=_(i(345)),o=_(i(32)),r=_(i(211)),a=_(i(119)),s=_(i(346)),l=_(i(7)),u=(_(i(13)),_(i(75))),d=_(i(62)),h=_(i(20)),c=_(i(48)),f=_(i(18)),p=_(i(78)),g=_(i(17));function _(t){return t&&t.__esModule?t:{default:t}}app.module=angular.module("app",[ngeo.module.name,o.default.name,r.default.name,s.default.name]),app.mapComponent={controller:"AppMapController as ctrl",bindings:{map:"=appMap"},template:"<div ngeo-map=ctrl.map></div>"},app.module.component("appMap",app.mapComponent),app.MapComponentController=function(t,e){this.map,this.ngeoLocation_=t,this.ngeoDebounce_=e},app.MapComponentController.$inject=["ngeoLocation","ngeoDebounce"],app.module.controller("AppMapController",app.MapComponentController),app.MapComponentController.prototype.$onInit=function(){var t=this,e=this.map.getView(),i=this.ngeoLocation_.getParam("z");i=void 0!==i?+i:4;var n=this.ngeoLocation_.getParam("x"),o=this.ngeoLocation_.getParam("y"),r=void 0!==n&&void 0!==o?[+n,+o]:[0,0];e.setCenter(r),e.setZoom(i),this.ngeoLocation_.updateParams({z:i,x:Math.round(r[0]),y:Math.round(r[1])}),e.on("propertychange",this.ngeoDebounce_(function(i){var n=e.getCenter(),o={z:e.getZoom(),x:Math.round(n[0]),y:Math.round(n[1])};t.ngeoLocation_.updateParams(o)},300,!0))},app.drawComponent={controller:"AppDrawController as ctrl",bindings:{map:"=appDrawMap",layer:"=appDrawLayer"},template:'<label>Enable drawing:<input type="checkbox" ng-model="ctrl.interaction.active" /></label><br><button ng-click="ctrl.clearLayer()">Clear layer</button>'},app.module.component("appDraw",app.drawComponent),app.DrawComponentController=function(t,e){this.map,this.layer,this.ngeoLocation_=e,this.scope_=t,this.featureSeq_=0,this.interaction},app.DrawComponentController.$inject=["$scope","ngeoLocation"],app.DrawComponentController.prototype.$onInit=function(){var t=this,e=this.layer.getSource();this.interaction=new u.default({type:"LineString",source:e}),this.interaction.setActive(!1),this.map.addInteraction(this.interaction),a.default.interaction(this.interaction),this.interaction.on("drawend",function(t){t.feature.set("id",++this.featureSeq_)},this);var i=new n.default;e.on("addfeature",function(n){n.feature.setStyle(new g.default({stroke:new p.default({color:[255,0,0,1],width:2})}));var o=e.getFeatures(),r=i.writeFeatures(o);t.scope_.$applyAsync(function(){t.ngeoLocation_.updateParams({features:r})})});var o=this.ngeoLocation_.getParam("features");if(void 0!==o){var r=i.readFeatures(o);this.featureSeq_=r.length,e.addFeatures(r)}},app.DrawComponentController.prototype.clearLayer=function(){this.layer.getSource().clear(!0),this.featureSeq_=0,this.ngeoLocation_.deleteParam("features")},app.module.controller("AppDrawController",app.DrawComponentController),app.MainController=function(){this.map=new l.default({layers:[new d.default({source:new c.default})]});var t=new f.default;this.vectorLayer=new h.default({source:t}),this.vectorLayer.setMap(this.map)},app.module.controller("MainController",app.MainController),e.default={}},345:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=C(i(3)),o=C(i(114)),r=C(i(40)),a=C(i(90)),s=C(i(249)),l=C(i(24)),u=(C(i(13)),C(i(30))),d=C(i(51)),h=C(i(45)),c=C(i(53)),f=C(i(27)),p=C(i(42)),g=C(i(108)),_=C(i(65)),v=C(i(78)),y=C(i(17)),m=C(i(98));function C(t){return t&&t.__esModule?t:{default:t}}ngeo.format.FeatureHashStyleType={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},ngeo.format.FeatureHashStyleTypes_={LineString:ngeo.format.FeatureHashStyleType.LINE_STRING,Point:ngeo.format.FeatureHashStyleType.POINT,Polygon:ngeo.format.FeatureHashStyleType.POLYGON,MultiLineString:ngeo.format.FeatureHashStyleType.LINE_STRING,MultiPoint:ngeo.format.FeatureHashStyleType.POINT,MultiPolygon:ngeo.format.FeatureHashStyleType.POLYGON},ngeo.format.FeatureHashLegacyProperties_={};var S=function t(e){s.default.call(this);var i=void 0!==e?e:{};this.accuracy_=void 0!==i.accuracy?i.accuracy:t.ACCURACY_,this.encodeStyles_=void 0===i.encodeStyles||i.encodeStyles,this.propertiesFunction_=void 0!==i.properties?i.properties:t.defaultPropertiesFunction_,this.setStyle_=void 0===i.setStyle||i.setStyle,this.prevX_=0,this.prevY_=0,ngeo.format.FeatureHashLegacyProperties_=void 0!==i.propertiesType&&i.propertiesType};ol.inherits(S,s.default),S.prototype.readFeature,S.prototype.readFeatures,S.prototype.readGeometry,S.prototype.writeFeature,S.prototype.writeFeatures,S.prototype.writeGeometry,S.CHAR64_=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz",S.ACCURACY_=.1,S.defaultPropertiesFunction_=function(t){return t.getProperties()},S.encodeSignedNumber_=function(t){var e=t<<1;return t<0&&(e=~e),S.encodeNumber_(e)},S.encodeNumber_=function(t){for(var e="";t>=32;)e+=S.CHAR64_.charAt(32|31&t),t>>=5;return e+=S.CHAR64_.charAt(t)},S.encodeStyles_=function(t,e,i){var o=ngeo.format.FeatureHashStyleTypes_[e];n.default.assert(void 0!==o);for(var r=0;r<t.length;++r){var a=t[r],s=a.getFill(),l=a.getImage(),u=a.getStroke(),d=a.getText();o==ngeo.format.FeatureHashStyleType.POLYGON?null!==s&&S.encodeStylePolygon_(s,u,i):o==ngeo.format.FeatureHashStyleType.LINE_STRING?null!==u&&S.encodeStyleLine_(u,i):o==ngeo.format.FeatureHashStyleType.POINT&&null!==l&&S.encodeStylePoint_(l,i),null!==d&&S.encodeStyleText_(d,i)}},S.encodeStyleLine_=function(t,e){S.encodeStyleStroke_(t,e)},S.encodeStylePoint_=function(t,e){if(t instanceof g.default){var i=t.getRadius();e.length>0&&e.push("'"),e.push(encodeURIComponent("pointRadius*"+i));var n=t.getFill();null!==n&&S.encodeStyleFill_(n,e);var o=t.getStroke();null!==o&&S.encodeStyleStroke_(o,e)}},S.encodeStylePolygon_=function(t,e,i){S.encodeStyleFill_(t,i),null!==e&&S.encodeStyleStroke_(e,i)},S.encodeStyleFill_=function(t,e,i){var r=void 0!==i?i:"fillColor",s=t.getColor();if(null!==s){n.default.assert(Array.isArray(s),"only supporting fill colors");var l=a.default.asArray(s);n.default.assert(Array.isArray(l),"fill color must be an array");var u=o.default.rgbArrayToHex(l);e.length>0&&e.push("'"),e.push(encodeURIComponent(r+"*"+u))}},S.encodeStyleStroke_=function(t,e){var i=t.getColor();if(null!==i){n.default.assert(Array.isArray(i));var r=a.default.asArray(i);n.default.assert(Array.isArray(r),"only supporting stroke colors");var s=o.default.rgbArrayToHex(r);e.length>0&&e.push("'"),e.push(encodeURIComponent("strokeColor*"+s))}var l=t.getWidth();void 0!==l&&(e.length>0&&e.push("'"),e.push(encodeURIComponent("strokeWidth*"+l)))},S.encodeStyleText_=function(t,e){var i=t.getFont();if(void 0!==i){var n=i.split(" ");n.length>=3&&(e.length>0&&e.push("'"),e.push(encodeURIComponent("fontSize*"+n[1])))}var o=t.getFill();null!==o&&S.encodeStyleFill_(o,e,"fontColor")},S.readLineStringGeometry_=function(t){n.default.assert("l("===t.substring(0,2)),n.default.assert(")"==t[t.length-1]),t=t.substring(2,t.length-1);var e=this.decodeCoordinates_(t),i=new u.default(null);return i.setFlatCoordinates(l.default.XY,e),i},S.readMultiLineStringGeometry_=function(t){n.default.assert("L("===t.substring(0,2)),n.default.assert(")"==t[t.length-1]);for(var e=[],i=[],o=(t=t.substring(2,t.length-1)).split("'"),r=0,a=o.length;r<a;++r)e=this.decodeCoordinates_(o[r],e),i[r]=e.length;var s=new d.default(null);return s.setFlatCoordinates(l.default.XY,e,i),s},S.readPointGeometry_=function(t){n.default.assert("p("===t.substring(0,2)),n.default.assert(")"==t[t.length-1]),t=t.substring(2,t.length-1);var e=this.decodeCoordinates_(t);n.default.assert(2===e.length);var i=new f.default(null);return i.setFlatCoordinates(l.default.XY,e),i},S.readMultiPointGeometry_=function(t){n.default.assert("P("===t.substring(0,2)),n.default.assert(")"==t[t.length-1]),t=t.substring(2,t.length-1);var e=this.decodeCoordinates_(t),i=new h.default(null);return i.setFlatCoordinates(l.default.XY,e),i},S.readPolygonGeometry_=function(t){n.default.assert("a("===t.substring(0,2)),n.default.assert(")"==t[t.length-1]);for(var e=[],i=[],o=(t=t.substring(2,t.length-1)).split("'"),r=0,a=o.length;r<a;++r){var s=(e=this.decodeCoordinates_(o[r],e)).length;0===r?(e[s++]=e[0],e[s++]=e[1]):(e[s++]=e[i[r-1]],e[s++]=e[i[r-1]+1]),i[r]=s}var u=new p.default(null);return u.setFlatCoordinates(l.default.XY,e,i),u},S.readMultiPolygonGeometry_=function(t){n.default.assert("A("===t.substring(0,2)),n.default.assert(")"==t[t.length-1]);for(var e=[],i=[],o=(t=t.substring(2,t.length-1)).split(")("),r=0,a=o.length;r<a;++r)for(var s=o[r].split("'"),u=i[r]=[],d=0,h=s.length;d<h;++d){var f=(e=this.decodeCoordinates_(s[d],e)).length;0===d?(e[f++]=e[0],e[f++]=e[1]):(e[f++]=e[u[d-1]],e[f++]=e[u[d-1]+1]),u[d]=f}var p=new c.default(null);return p.setFlatCoordinates(l.default.XY,e,i),p},S.setStyleInFeature_=function(t,e){if(""!=t){var i=S.getStyleProperties_(t,e),n=i.fillColor,o=i.fontSize,r=i.fontColor,a=i.pointRadius,s=i.strokeColor,l=i.strokeWidth,u=null;void 0!==n&&(u=new _.default({color:n}));var d=null;void 0!==s&&void 0!==l&&(d=new v.default({color:s,width:l}));var h=null;void 0!==a&&(h=new g.default({radius:a,fill:u,stroke:d}),u=d=null);var c=null;void 0!==o&&void 0!==r&&(c=new m.default({font:o+" sans-serif",fill:new _.default({color:r})}));var f=new y.default({fill:u,image:h,stroke:d,text:c});e.setStyle(f)}},S.setStyleProperties_=function(t,e){var i=S.getStyleProperties_(t,e),n=e.getGeometry();if(n instanceof f.default?i.isLabel||i[ngeo.FeatureProperties.IS_TEXT]?(delete i.strokeColor,delete i.fillColor):(delete i.fontColor,delete i.fontSize):(delete i.fontColor,n instanceof u.default&&(delete i.fillColor,delete i.fillOpacity)),i.fontSize){var o=parseFloat(i.fontSize);-1!==i.fontSize.indexOf("px")&&(o=Math.round(o/1.333333)),i.fontSize=o}var r={};for(var a in i){var s=i[a];ngeo.format.FeatureHashLegacyProperties_[a]?r[ngeo.format.FeatureHashLegacyProperties_[a]]=s:r[a]=s}e.setProperties(r)},S.castValue_=function(t,e){var i=[ngeo.FeatureProperties.ANGLE,ngeo.FeatureProperties.OPACITY,ngeo.FeatureProperties.SIZE,ngeo.FeatureProperties.STROKE,"pointRadius","strokeWidth"],n=[ngeo.FeatureProperties.IS_CIRCLE,ngeo.FeatureProperties.IS_RECTANGLE,ngeo.FeatureProperties.IS_TEXT,ngeo.FeatureProperties.SHOW_MEASURE,ngeo.FeatureProperties.SHOW_LABEL,"isCircle","isRectangle","isLabel","showMeasure","showLabel"];return ol.array.includes(i,t)?+e:ol.array.includes(n,t)?"true"===e:e},S.getStyleProperties_=function(t,e){for(var i=t.split("'"),o={},r=0;r<i.length;++r){var a=decodeURIComponent(i[r]).split("*");n.default.assert(2===a.length);var s=a[0],l=a[1];o[s]=S.castValue_(s,l)}return o},S.writeLineStringGeometry_=function(t){n.default.assertInstanceof(t,u.default);var e=t.getFlatCoordinates(),i=t.getStride(),o=e.length;return"l("+this.encodeCoordinates_(e,i,0,o)+")"},S.writeMultiLineStringGeometry_=function(t){n.default.assertInstanceof(t,d.default);for(var e=t.getEnds(),i=e.length,o=t.getFlatCoordinates(),r=t.getStride(),a=0,s=["L("],l=0;l<i;++l){var u=e[l],h=this.encodeCoordinates_(o,r,a,u);0!==l&&s.push("'"),s.push(h),a=u}return s.push(")"),s.join("")},S.writePointGeometry_=function(t){n.default.assertInstanceof(t,f.default);var e=t.getFlatCoordinates(),i=t.getStride(),o=e.length;return"p("+this.encodeCoordinates_(e,i,0,o)+")"},S.writeMultiPointGeometry_=function(t){n.default.assertInstanceof(t,h.default);var e=t.getFlatCoordinates(),i=t.getStride(),o=e.length;return"P("+this.encodeCoordinates_(e,i,0,o)+")"},S.encodeRings_=function(t,e,i,n,o){for(var r=n.length,a=0;a<r;++a){var s=n[a]-e,l=this.encodeCoordinates_(t,e,i,s);0!==a&&o.push("'"),o.push(l),i=n[a]}return i},S.writePolygonGeometry_=function(t){n.default.assertInstanceof(t,p.default);var e=t.getFlatCoordinates(),i=t.getStride(),o=t.getEnds(),r=["a("];return S.encodeRings_.call(this,e,i,0,o,r),r.push(")"),r.join("")},S.writeMultiPolygonGeometry_=function(t){n.default.assertInstanceof(t,c.default);for(var e=t.getFlatCoordinates(),i=t.getStride(),o=t.getEndss(),r=o.length,a=0,s=["A"],l=0;l<r;++l){var u=o[l];s.push("("),a=S.encodeRings_.call(this,e,i,a,u,s),s.push(")")}return s.join("")},S.GEOMETRY_READERS_={P:S.readMultiPointGeometry_,L:S.readMultiLineStringGeometry_,A:S.readMultiPolygonGeometry_,l:S.readLineStringGeometry_,p:S.readPointGeometry_,a:S.readPolygonGeometry_},S.GEOMETRY_WRITERS_={MultiLineString:S.writeMultiLineStringGeometry_,MultiPoint:S.writeMultiPointGeometry_,MultiPolygon:S.writeMultiPolygonGeometry_,LineString:S.writeLineStringGeometry_,Point:S.writePointGeometry_,Polygon:S.writePolygonGeometry_},S.prototype.decodeCoordinates_=function(t,e){for(var i=t.length,n=0,o=void 0!==e?e:[],r=o.length;n<i;){var a=void 0,s=0,l=0;do{l|=(31&(a=S.CHAR64_.indexOf(t.charAt(n++))))<<s,s+=5}while(a>=32);var u=1&l?~(l>>1):l>>1;this.prevX_+=u,s=0,l=0;do{l|=(31&(a=S.CHAR64_.indexOf(t.charAt(n++))))<<s,s+=5}while(a>=32);var d=1&l?~(l>>1):l>>1;this.prevY_+=d,o[r++]=this.prevX_*this.accuracy_,o[r++]=this.prevY_*this.accuracy_}return o},S.prototype.encodeCoordinates_=function(t,e,i,n){for(var o="",r=i;r<n;r+=e){var a=t[r],s=t[r+1];a=Math.floor(a/this.accuracy_),s=Math.floor(s/this.accuracy_);var l=a-this.prevX_,u=s-this.prevY_;this.prevX_=a,this.prevY_=s,o+=S.encodeSignedNumber_(l)+S.encodeSignedNumber_(u)}return o},S.prototype.readFeatureFromText=function(t,e){n.default.assert(t.length>2),n.default.assert("("===t[1]),n.default.assert(")"===t[t.length-1]);var i=t.indexOf("~"),o=i>=0?t.substring(0,i)+")":t,a=this.readGeometryFromText(o,e),s=new r.default(a);if(i>=0){var l=t.substring(i+1,t.length-1),u=(i=l.indexOf("~"))>=0?l.substring(0,i):l;if(""!=u)for(var d=u.split("'"),h=0;h<d.length;++h){var c=decodeURIComponent(d[h]).split("*");n.default.assert(2===c.length);var f=c[0],p=c[1];!this.setStyle_&&ngeo.format.FeatureHashLegacyProperties_[f]&&(f=ngeo.format.FeatureHashLegacyProperties_[f]),s.set(f,S.castValue_(f,p))}if(i>=0){var g=l.substring(i+1);this.setStyle_?S.setStyleInFeature_(g,s):S.setStyleProperties_(g,s)}}return s},S.prototype.readFeaturesFromText=function(t,e){n.default.assert("F"===t[0]);var i=[];for(t=t.substring(1);t.length>0;){var o=t.indexOf(")");n.default.assert(o>=0);var r=this.readFeatureFromText(t.substring(0,o+1),e);i.push(r),t=t.substring(o+1)}return i},S.prototype.readGeometryFromText=function(t,e){var i=S.GEOMETRY_READERS_[t[0]];return n.default.assert(void 0!==i),this.prevX_=0,this.prevY_=0,i.call(this,t)},S.prototype.writeFeatureText=function(t,e){var i=[],o="",r=t.getGeometry();r&&(o=this.writeGeometryText(r,e)),o.length>0&&(n.default.assert(")"===o[o.length-1]),o=o.substring(0,o.length-1),i.push(o));var a=[],s=this.propertiesFunction_(t);for(var l in s){var u=s[l];if(void 0!==u&&null!==u&&l!==t.getGeometryName()){0!==a.length&&a.push("'");var d=encodeURIComponent(l.replace(/[()'*]/g,"_")+"*"+u.toString().replace(/[()'*]/g,"_"));a.push(d)}}if(a.length>0&&(i.push("~"),Array.prototype.push.apply(i,a)),this.encodeStyles_){var h=t.getStyleFunction();if(void 0!==h){var c=h.call(t,0);if(null!==c){var f=[];c=Array.isArray(c)?c:[c],S.encodeStyles_(c,r.getType(),f),f.length>0&&(i.push("~"),Array.prototype.push.apply(i,f))}}}return i.push(")"),i.join("")},S.prototype.writeFeaturesText=function(t,e){var i=[];if(t.length>0){i.push("F");for(var n=0,o=t.length;n<o;++n)i.push(this.writeFeatureText(t[n],e))}return i.join("")},S.prototype.writeGeometryText=function(t,e){var i=S.GEOMETRY_WRITERS_[t.getType()];n.default.assert(void 0!==i);var o=ol.format.Feature.transformWithOptions(t,!0,e);return this.prevX_=0,this.prevY_=0,i.call(this,o)},e.default=S},346:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(1)),o=a(i(258)),r=a(i(347));function a(t){return t&&t.__esModule?t:{default:t}}var s=angular.module("ngeoStatemanagerModule",[n.default.module.name,o.default.module.name,r.default.module.name]);e.default=s},347:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(3)),o=a(i(1)),r=a(i(258));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){var i=this;this.initialState={},this.ngeoLocation=t,this.usedKeyRegexp=e,this.useLocalStorage_,this.setUseLocalStorage(!1);var o=t.getParamKeys().filter(function(t){return"debug"!=t&&"no_redirect"!=t});if(0===o.length){if(this.useLocalStorage_){var r=function(t){n.default.assert(t),i.usedKeyRegexp.some(function(e){if(t.match(e)){var n=window.localStorage[t];return i.initialState[t]=void 0!==n||null!==n?n:"",!0}})};for(var a in window.localStorage)r(a)}}else o.forEach(function(t){i.usedKeyRegexp.some(function(e){if(t.match(e)){var n=i.ngeoLocation.getParam(t);if(void 0!==n)return i.initialState[t]=n,!0}})})};s.$inject=["ngeoLocation","ngeoUsedKeyRegexp"],s.$inject=["ngeoLocation","ngeoUsedKeyRegexp"],s.prototype.setUseLocalStorage=function(t){if(this.useLocalStorage_=t,this.useLocalStorage_)try{"localStorage"in window?(window.localStorage.test="",delete window.localStorage.test):this.useLocalStorage_=!1}catch(t){console.error(t),this.useLocalStorage_=!1}return this.useLocalStorage_},s.prototype.getInitialValue=function(t){return this.initialState[t]},s.prototype.getInitialStringValue=function(t){var e=this.initialState[t];if(void 0!==e)return e},s.prototype.getInitialNumberValue=function(t){var e=this.initialState[t];if(void 0!==e)return parseFloat(e)},s.prototype.getInitialBooleanValue=function(t){var e=this.initialState[t];if(void 0!==e)return"true"===e},s.prototype.updateState=function(t){if(this.ngeoLocation.updateParams(t),this.useLocalStorage_)for(var e in t){n.default.assert(e);var i=t[e];n.default.assert(void 0!==i),window.localStorage[e]=i}},s.prototype.deleteParam=function(t){this.ngeoLocation.deleteParam(t),this.useLocalStorage_&&delete window.localStorage[t]},(s.module=angular.module("ngeoStateManager",[r.default.module.name])).service("ngeoStateManager",s),s.module.value("ngeoUsedKeyRegexp",[new RegExp(".*")]),o.default.module.requires.push(s.module.name),e.default=s},35:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=d(i(1)),r=d(i(25)),a=(d(i(26)),d(i(2))),s=d(i(19)),l=d(i(31)),u=d(i(3));function d(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ngeoDataSources_=e,this.map_=null,this.listenerKeys_=[],a.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return t.$inject=["ngeoDataSources"],n(t,[{key:"bindMap_",value:function(t){var e=t.getView();this.listenerKeys_.push(a.default.listen(e,"change:resolution",this.handleViewResolutionChange_,this));var i=e.getResolution();u.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"unbindMap_",value:function(t){s.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(t){var e=t.target;u.default.assertInstanceof(e,l.default);var i=e.getResolution();u.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"syncDataSourcesToResolution_",value:function(t){var e=this;this.ngeoDataSources_.forEach(function(i){e.syncDataSourceToResolution_(i,t)})}},{key:"syncDataSourceToResolution_",value:function(t,e){if(t.supportsDynamicInRange){var i=t.maxResolution,n=t.minResolution,o=(null===n||void 0===n||e>=n)&&(null===i||void 0===i||e<=i);t.inRange=o}}},{key:"handleDataSourcesAdd_",value:function(t){var e=u.default.assertInstanceof(t.element,r.default);if(this.map_){var i=this.map_.getView().getResolution();u.default.assertNumber(i),this.syncDataSourceToResolution_(e,i)}}},{key:"map",set:function(t){this.map_&&this.unbindMap_(this.map_),this.map_=t,t&&this.bindMap_(t)}}]),t}();o.default.module.service("ngeoSyncDataSourcesMap",h),e.default=h},36:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(1)),o=(r(i(0)),r(i(2)));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e){this.manager_=t,this.features_=null,this.index_=e};a.prototype.addFeature=function(t){this.manager_.addFeature(t,this.index_)},a.prototype.removeFeature=function(t){this.manager_.removeFeature(t,this.index_)},a.prototype.clear=function(){this.manager_.clear(this.index_)},a.prototype.setFeatures=function(t){null!==this.features_&&(this.features_.clear(),o.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),o.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==t&&(t.forEach(function(t){this.addFeature(t)},this),o.default.listen(t,"add",this.handleFeatureAdd_,this),o.default.listen(t,"remove",this.handleFeatureRemove_,this)),this.features_=t},a.prototype.setStyle=function(t){this.manager_.setStyle(t,this.index_)},a.prototype.handleFeatureAdd_=function(t){var e=t.element;this.addFeature(e)},a.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature(e)},a.module=angular.module("ngeoFeatureOverlay",[]),n.default.module.requires.push(a.module.name),e.default=a},37:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(1),r=(n=o)&&n.__esModule?n:{default:n};var a=angular.module("ngeoRecenter",[]);r.default.module.requires.push(a.name),a.directive_=function(){return{restrict:"A",link:function(t,e,i){var n=i.ngeoRecenterMap,o=t.$eval(n);function r(e){var i=e.attr("ngeo-extent");if(void 0!==i){var n=o.getSize();o.getView().fit(t.$eval(i),{size:n})}var r=e.attr("ngeo-zoom");void 0!==r&&o.getView().setZoom(t.$eval(r))}e.on("click","*",function(t){r(angular.element($(this)))}),e.on("change",function(t){var e=t.target.options[t.target.selectedIndex];r(angular.element(e))})}}},a.directive("ngeoRecenter",a.directive_),e.default=a},38:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(3)),o=a(i(1)),r=a(i(7));function a(t){return t&&t.__esModule?t:{default:t}}var s=angular.module("ngeoResizemap",[]);o.default.module.requires.push(s.name),s.directive_=function(t){return{restrict:"A",link:function(e,i,o){var a=o.ngeoResizemap,s=e.$eval(a);n.default.assertInstanceof(s,r.default);var l=o.ngeoResizemapState;n.default.assert(void 0!==l);var u=void 0,d=void 0,h=function e(){s.updateSize(),s.renderSync(),Date.now()-u<1e3&&(d=t.requestAnimationFrame(e))};i.on("transitionend",function(){s.updateSize(),s.renderSync()}),e.$watch(l,function(e,i){e!=i&&(u=Date.now(),t.cancelAnimationFrame(d),d=t.requestAnimationFrame(h))})}}},s.directive("ngeoResizemap",s.directive_),e.default=s},39:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(1)),o=s(i(8)),r=s(i(7)),a=s(i(2));function s(t){return t&&t.__esModule?t:{default:t}}var l=angular.module("ngeoScaleselector",[]);n.default.module.requires.push(l.name),l.value("ngeoScaleselectorTemplateUrl",function(t,e){var i=e.ngeoScaleselectorTemplateurl;return void 0!==i?i:n.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),l.directive_=function(t){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:t}},l.directive("ngeoScaleselector",l.directive_),l.ScaleselectorController_=function(t,e,i){var n=this,s=i.ngeoScaleselector;this.scales=t.$eval(s),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,t.$watch(function(){return Object.keys(n.scales).length},function(t){n.zoomLevels=Object.keys(n.scales).map(Number),n.zoomLevels.sort(o.default.numberSafeCompareFunction)});var u=i.ngeoScaleselectorMap;this.map_=t.$eval(u),goog.asserts.assertInstanceof(this.map_,r.default);var d=i.ngeoScaleselectorOptions,h=t.$eval(d);if(this.options=l.ScaleselectorController_.getOptions_(h),this.$scope_=t,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var c=this.map_.getView().getZoom();void 0!==c&&(this.currentScale=this.getScale(c))}a.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),t.scaleselectorCtrl=this},l.ScaleselectorController_.getOptions_=function(t){var e=!1;return void 0!==t&&(e=1==t.dropup),{dropup:e}},l.ScaleselectorController_.prototype.getScale=function(t){return this.scales[t]},l.ScaleselectorController_.prototype.changeZoom=function(t){this.map_.getView().setZoom(t)},l.ScaleselectorController_.prototype.handleResolutionChange_=function(t){var e=this,i=this.map_.getView(),n=this.scales[i.getZoom()];void 0!==n&&this.$scope_.$applyAsync(function(){e.currentScale=n})},l.ScaleselectorController_.prototype.handleViewChange_=function(t){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},l.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&a.default.unlistenByKey(this.resolutionChangeKey_);var t=this.map_.getView();this.resolutionChangeKey_=a.default.listen(t,"change:resolution",this.handleResolutionChange_,this)},l.controller("NgeoScaleselectorController",l.ScaleselectorController_),e.default=l},45:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(8),r=i(4),a=i(24),s=i(13),l=i(27),u=i(44),d=i(46),h=i(54),c=i(14),f=function(t,e){u.a.call(this),this.setCoordinates(t,e)};Object(n.inherits)(f,u.a),f.prototype.appendPoint=function(t){this.flatCoordinates?Object(o.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},f.prototype.clone=function(){var t=new f(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},f.prototype.closestPointXY=function(t,e,i,n){if(n<Object(r.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;var o,a,s,l=this.flatCoordinates,u=this.stride;for(o=0,a=l.length;o<a;o+=u){var d=Object(c.squaredDistance)(t,e,l[o],l[o+1]);if(d<n){for(n=d,s=0;s<u;++s)i[s]=l[o+s];i.length=u}}return n},f.prototype.getCoordinates=function(){return h.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(t<0||e<=t)return null;var i=new l.default(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),i},f.prototype.getPoints=function(){var t,e,i=this.flatCoordinates,n=this.layout,o=this.stride,r=[];for(t=0,e=i.length;t<e;t+=o){var a=new l.default(null);a.setFlatCoordinates(n,i.slice(t,t+o)),r.push(a)}return r},f.prototype.getType=function(){return s.default.MULTI_POINT},f.prototype.intersectsExtent=function(t){var e,i,n,o,a=this.flatCoordinates,s=this.stride;for(e=0,i=a.length;e<i;e+=s)if(n=a[e],o=a[e+1],Object(r.containsXY)(t,n,o))return!0;return!1},f.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=d.a.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(a.default.XY,null)},f.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=f},48:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(49),r=function(t){var e,i=t||{};e=void 0!==i.attributions?i.attributions:[r.ATTRIBUTION];var n=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",a=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o.a.call(this,{attributions:e,cacheSize:i.cacheSize,crossOrigin:n,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:a,wrapX:i.wrapX})};Object(n.inherits)(r,o.a),r.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',e.default=r},49:function(t,e,i){"use strict";var n=i(0),o=i(41),r=i(71),a=function(t){var e=t||{},i=void 0!==e.projection?e.projection:"EPSG:3857",n=void 0!==e.tileGrid?e.tileGrid:r.a.createXYZ({extent:r.a.extentFromProjection(i),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});o.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};Object(n.inherits)(a,o.a),e.a=a},51:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(8),r=i(4),a=i(24),s=i(13),l=i(30),u=i(44),d=i(67),h=i(46),c=i(54),f=i(100),p=i(70),g=i(64),_=function(t,e){u.a.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};Object(n.inherits)(_,u.a),_.prototype.appendLineString=function(t){this.flatCoordinates?Object(o.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},_.prototype.clone=function(){var t=new _(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},_.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},_.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=a.default.XYM&&this.layout!=a.default.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,o=void 0!==i&&i;return f.a.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,t,n,o)},_.prototype.getCoordinates=function(){return c.a.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},_.prototype.getEnds=function(){return this.ends_},_.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;var e=new l.default(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},_.prototype.getLineStrings=function(){var t,e,i=this.flatCoordinates,n=this.ends_,o=this.layout,r=[],a=0;for(t=0,e=n.length;t<e;++t){var s=n[t],u=new l.default(null);u.setFlatCoordinates(o,i.slice(a,s)),r.push(u),a=s}return r},_.prototype.getFlatMidpoints=function(){var t,e,i=[],n=this.flatCoordinates,r=0,a=this.ends_,s=this.stride;for(t=0,e=a.length;t<e;++t){var l=a[t],u=f.a.lineString(n,r,l,s,.5);Object(o.extend)(i,u),r=l}return i},_.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=g.a.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i);var n=new _(null);return n.setFlatCoordinates(a.default.XY,e,i),n},_.prototype.getType=function(){return s.default.MULTI_LINE_STRING},_.prototype.intersectsExtent=function(t){return p.a.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,t)},_.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=h.a.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(a.default.XY,null,this.ends_)},_.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},_.prototype.setLineStrings=function(t){var e,i,n=this.getLayout(),r=[],a=[];for(e=0,i=t.length;e<i;++e){var s=t[e];0===e&&(n=s.getLayout()),Object(o.extend)(r,s.getFlatCoordinates()),a.push(r.length)}this.setFlatCoordinates(n,r,a)},e.default=_},53:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(8),r=i(4),a=i(24),s=i(13),l=i(45),u=i(42),d=i(44),h=i(95),c=i(104),f=i(67),p=i(89),g=i(46),_=i(54),v=i(99),y=i(70),m=i(96),C=i(64),S=function(t,e){d.a.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};Object(n.inherits)(S,d.a),S.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i,n,r=this.flatCoordinates.length;for(Object(o.extend)(this.flatCoordinates,t.getFlatCoordinates()),i=0,n=(e=t.getEnds().slice()).length;i<n;++i)e[i]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},S.prototype.clone=function(){for(var t=new S(null),e=this.endss_.length,i=new Array(e),n=0;n<e;++n)i[n]=this.endss_[n].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),t},S.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f.a.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f.a.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},S.prototype.containsXY=function(t,e){return p.a.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},S.prototype.getArea=function(){return h.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},S.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),m.a.orientLinearRingss(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,_.a.coordinatesss(e,0,this.endss_,this.stride)},S.prototype.getEndss=function(){return this.endss_},S.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=c.a.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=v.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},S.prototype.getInteriorPoints=function(){var t=new l.default(null);return t.setFlatCoordinates(a.default.XYM,this.getFlatInteriorPoints().slice()),t},S.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;m.a.linearRingssAreOriented(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=m.a.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},S.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=C.a.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i);var n=new S(null);return n.setFlatCoordinates(a.default.XY,e,i),n},S.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n,o,r=this.endss_[t].slice(),a=r[r.length-1];if(0!==e)for(n=0,o=r.length;n<o;++n)r[n]-=e;var s=new u.default(null);return s.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,a),r),s},S.prototype.getPolygons=function(){var t,e,i,n,o=this.layout,r=this.flatCoordinates,a=this.endss_,s=[],l=0;for(t=0,e=a.length;t<e;++t){var d=a[t].slice(),h=d[d.length-1];if(0!==l)for(i=0,n=d.length;i<n;++i)d[i]-=l;var c=new u.default(null);c.setFlatCoordinates(o,r.slice(l,h),d),s.push(c),l=h}return s},S.prototype.getType=function(){return s.default.MULTI_POLYGON},S.prototype.intersectsExtent=function(t){return y.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},S.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=g.a.coordinatesss(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}else this.setFlatCoordinates(a.default.XY,null,this.endss_)},S.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.endss_=i,this.changed()},S.prototype.setPolygons=function(t){var e,i,n,r=this.getLayout(),a=[],s=[];for(e=0,i=t.length;e<i;++e){var l=t[e];0===e&&(r=l.getLayout());var u,d,h=a.length;for(u=0,d=(n=l.getEnds()).length;u<d;++u)n[u]+=h;Object(o.extend)(a,l.getFlatCoordinates()),s.push(n)}this.setFlatCoordinates(r,a,s)},e.default=S},75:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(40),r=i(87),a=i(76),s=i(84),l=i(2),u=i(43),d=i(83),h=i(4),c=i(66),f=i(80),p=i(13),g=i(30),_=i(51),v=i(45),y=i(53),m=i(27),C=i(42),S="drawstart",F="drawend",R=i(77),O=i(122),P=i(20),b=i(18),L=i(17),M=function(t){R.default.call(this,{handleDownEvent:M.handleDownEvent_,handleEvent:M.handleEvent,handleUpEvent:M.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=M.getMode_(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===M.Mode_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:c.TRUE;var e=t.geometryFunction;if(!e)if(this.type_===p.default.CIRCLE)e=function(t,e){var i=e||new f.default([NaN,NaN]),n=s.default.squaredDistance(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(n)),i};else{var i,n=this.mode_;n===M.Mode_.POINT?i=m.default:n===M.Mode_.LINE_STRING?i=g.default:n===M.Mode_.POLYGON&&(i=C.default),e=function(t,e){var o=e;return o?n===M.Mode_.POLYGON?t[0].length?o.setCoordinates([t[0].concat([t[0][0]])]):o.setCoordinates([]):o.setCoordinates(t):o=new i(t),o}}this.geometryFunction_=e,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new P.default({source:new b.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:M.getDefaultStyleFunction()}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:d.default.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=d.default.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:d.default.shiftKeyOnly,l.default.listen(this,a.a.getChangeEventType(O.a.ACTIVE),this.updateState_,this)};Object(n.inherits)(M,R.default),M.getDefaultStyleFunction=function(){var t=L.default.createDefaultEditing();return function(e,i){return t[e.getGeometry().getType()]}},M.prototype.setMap=function(t){R.default.prototype.setMap.call(this,t),this.updateState_()},M.handleEvent=function(t){this.freehand_=this.mode_!==M.Mode_.POINT&&this.freehandCondition_(t);var e=!0;return this.freehand_&&t.type===r.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),e=!1):this.freehand_&&t.type===r.a.POINTERDOWN?e=!1:t.type===r.a.POINTERMOVE?e=this.handlePointerMove_(t):t.type===r.a.DBLCLICK&&(e=!1),R.default.handleEvent.call(this,t)&&e},M.handleDownEvent_=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.downPx_=t.pixel,!0)},M.handleUpEvent_=function(t){var e=!0;this.handlePointerMove_(t);var i=this.mode_===M.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===M.Mode_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},M.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],o=e[1]-i[1],r=n*n+o*o;this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},M.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===M.Mode_.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===M.Mode_.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,n=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var o=t.map,r=0,a=n.length;r<a;r++){var s=n[r],l=o.getPixelFromCoordinate(s),u=t.pixel,d=u[0]-l[0],h=u[1]-l[1],c=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(d*d+h*h)<=c){this.finishCoordinate_=s;break}}}return e},M.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.default(new m.default(e)),this.updateSketchFeatures_())},M.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===M.Mode_.POINT?this.sketchCoords_=e.slice():this.mode_===M.Mode_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[e.slice(),e.slice()],this.mode_===M.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new o.default(new g.default(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new M.Event(S,this.sketchFeature_))},M.prototype.modifyDrawing_=function(t){var e,i,n=t.coordinate,r=this.sketchFeature_.getGeometry();(this.mode_===M.Mode_.POINT?i=this.sketchCoords_:this.mode_===M.Mode_.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(n);if(r instanceof C.default&&this.mode_!==M.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new o.default(new g.default(null)));var a=r.getLinearRing(0);this.sketchLine_.getGeometry().setFlatCoordinates(a.getLayout(),a.getFlatCoordinates())}else this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},M.prototype.addToDrawing_=function(t){var e,i,n=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===M.Mode_.LINE_STRING?(this.finishCoordinate_=n.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),this.geometryFunction_(i,o)):this.mode_===M.Mode_.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},M.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===M.Mode_.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===M.Mode_.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},M.prototype.finishDrawing=function(){var t=this.abortDrawing_(),e=this.sketchCoords_,i=t.getGeometry();this.mode_===M.Mode_.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===M.Mode_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===p.default.MULTI_POINT?t.setGeometry(new v.default([e])):this.type_===p.default.MULTI_LINE_STRING?t.setGeometry(new _.default([e])):this.type_===p.default.MULTI_POLYGON&&t.setGeometry(new y.default([e])),this.dispatchEvent(new M.Event(F,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},M.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},M.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new M.Event(S,this.sketchFeature_))},M.prototype.shouldStopEvent=c.FALSE,M.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},M.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},M.createRegularPolygon=function(t,e){return function(i,n){var o=i[0],r=i[1],a=Math.sqrt(s.default.squaredDistance(o,r)),l=n||Object(C.fromCircle)(new f.default(o),t),u=e||Math.atan((r[1]-o[1])/(r[0]-o[0]));return Object(C.makeRegular)(l,o,a,u),l}},M.createBox=function(){return function(t,e){var i=Object(h.boundingExtent)(t),n=e||new C.default(null);return n.setCoordinates([[Object(h.getBottomLeft)(i),Object(h.getBottomRight)(i),Object(h.getTopRight)(i),Object(h.getTopLeft)(i),Object(h.getBottomLeft)(i)]]),n}},M.getMode_=function(t){var e;return t===p.default.POINT||t===p.default.MULTI_POINT?e=M.Mode_.POINT:t===p.default.LINE_STRING||t===p.default.MULTI_LINE_STRING?e=M.Mode_.LINE_STRING:t===p.default.POLYGON||t===p.default.MULTI_POLYGON?e=M.Mode_.POLYGON:t===p.default.CIRCLE&&(e=M.Mode_.CIRCLE),e},M.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},M.Event=function(t,e){u.default.call(this,t),this.feature=e},Object(n.inherits)(M.Event,u.default);e.default=M},80:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(4),r=i(24),a=i(13),s=i(44),l=i(46),u=function(t,e,i){s.a.call(this);var n=e||0;this.setCenterAndRadius(t,n,i)};Object(n.inherits)(u,s.a),u.prototype.clone=function(){var t=new u(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},u.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,r=t-o[0],a=e-o[1],s=r*r+a*a;if(s<n){var l;if(0===s)for(l=0;l<this.stride;++l)i[l]=o[l];else{var u=this.getRadius()/Math.sqrt(s);for(i[0]=o[0]+u*r,i[1]=o[1]+u*a,l=2;l<this.stride;++l)i[l]=o[l]}return i.length=this.stride,s}return n},u.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],o=e-i[1];return n*n+o*o<=this.getRadiusSquared_()},u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},u.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(o.createOrUpdate)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},u.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},u.prototype.getType=function(){return a.default.CIRCLE},u.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(o.intersects)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(o.forEachCorner)(t,this.intersectsCoordinate,this))}return!1},u.prototype.setCenter=function(t){var e,i=this.stride,n=this.flatCoordinates[i]-this.flatCoordinates[0],o=t.slice();for(o[i]=o[0]+n,e=1;e<i;++e)o[i+e]=t[e];this.setFlatCoordinates(this.layout,o)},u.prototype.setCenterAndRadius=function(t,e,i){if(t){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n,o,a=this.flatCoordinates,s=l.a.coordinate(a,0,t,this.stride);for(a[s++]=a[0]+e,n=1,o=this.stride;n<o;++n)a[s++]=a[n];a.length=s,this.changed()}else this.setFlatCoordinates(r.default.XY,null)},u.prototype.getCoordinates=function(){},u.prototype.setCoordinates=function(t,e){},u.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},u.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},u.prototype.transform,e.default=u},98:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(65),o=i(137),r=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new n.default({color:r.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:o.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};r.DEFAULT_FILL_COLOR_="#333",r.prototype.clone=function(){return new r({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},r.prototype.getOverflow=function(){return this.overflow_},r.prototype.getFont=function(){return this.font_},r.prototype.getMaxAngle=function(){return this.maxAngle_},r.prototype.getPlacement=function(){return this.placement_},r.prototype.getOffsetX=function(){return this.offsetX_},r.prototype.getOffsetY=function(){return this.offsetY_},r.prototype.getFill=function(){return this.fill_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getStroke=function(){return this.stroke_},r.prototype.getText=function(){return this.text_},r.prototype.getTextAlign=function(){return this.textAlign_},r.prototype.getTextBaseline=function(){return this.textBaseline_},r.prototype.getBackgroundFill=function(){return this.backgroundFill_},r.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},r.prototype.getPadding=function(){return this.padding_},r.prototype.setOverflow=function(t){this.overflow_=t},r.prototype.setFont=function(t){this.font_=t},r.prototype.setMaxAngle=function(t){this.maxAngle_=t},r.prototype.setOffsetX=function(t){this.offsetX_=t},r.prototype.setOffsetY=function(t){this.offsetY_=t},r.prototype.setPlacement=function(t){this.placement_=t},r.prototype.setFill=function(t){this.fill_=t},r.prototype.setRotation=function(t){this.rotation_=t},r.prototype.setScale=function(t){this.scale_=t},r.prototype.setStroke=function(t){this.stroke_=t},r.prototype.setText=function(t){this.text_=t},r.prototype.setTextAlign=function(t){this.textAlign_=t},r.prototype.setTextBaseline=function(t){this.textBaseline_=t},r.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},r.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},r.prototype.setPadding=function(t){this.padding_=t},e.default=r}},[344]);
//# sourceMappingURL=permalink.min.js.map