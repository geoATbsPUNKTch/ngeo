webpackJsonp([9],{11:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n="1.3.0"},12:function(e,t,i){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},124:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(i(3)),s=l(i(129)),r=l(i(86)),o=l(i(72)),a=l(i(30));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,i){var s=i||{};r.default.call(this,s),this.continueMsg,void 0!==s.continueMsg?this.continueMsg=s.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to finish."),this.numberFormat=n.default.assert(t),this.unitPrefixFormat=n.default.assert(e)};ol.inherits(u,r.default),u.prototype.createDrawInteraction=function(e,t){return new s.default({source:t,style:e})},u.prototype.handleMeasure=function(e){var t=n.default.assertInstanceof(this.sketchFeature.getGeometry(),o.default),i=n.default.assertInstanceof(t.getGeometries()[0],a.default);e(u.getFormattedAzimutRadius(i,n.default.assertInstanceof(this.getMap().getView().getProjection(),ol.proj.Projection),this.decimals,this.precision,this.unitPrefixFormat,this.numberFormat),i.getLastCoordinate())},u.getFormattedAzimutRadius=function(e,t,i,n,s,o){var a=u.getFormattedAzimut(e,i,o);return a+=", "+r.default.getFormattedLength(e,t,n,s)},u.getFormattedAzimut=function(e,t,i){return i(u.getAzimut(e),t)+"Â°"},u.getAzimut=function(e){var t=e.getCoordinates(),i=t[1][0]-t[0][0],n=t[1][1]-t[0][1],s=Math.acos(n/Math.sqrt(i*i+n*n));return(i>0?1:-1)*s*180/Math.PI%360},t.default=u},129:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(i(3)),s=p(i(40)),r=(p(i(107)),p(i(2))),o=p(i(66)),a=p(i(80)),l=p(i(72)),u=p(i(30)),h=p(i(27)),d=p(i(75)),c=p(i(77)),f=p(i(20)),_=p(i(18));function p(e){return e&&e.__esModule?e:{default:e}}var g=function e(t){c.default.call(this,{handleDownEvent:e.handleDownEvent_,handleEvent:e.handleEvent_,handleUpEvent:e.handleUpEvent_}),this.downPx_=null,this.source_=void 0!==t.source?t.source:null,this.started_=!1,this.sketchFeature_=null,this.sketchPoint_=null,this.squaredClickTolerance_=4,this.sketchLayer_=new f.default({source:new _.default({useSpatialIndex:!1,wrapX:!1}),style:void 0!==t.style?t.style:d.default.getDefaultStyleFunction()}),r.default.listen(this,"change:active",this.updateState_,this)};ol.inherits(g,c.default),g.handleDownEvent_=function(e){return this.downPx_=e.pixel,!0},g.handleUpEvent_=function(e){var t=this.downPx_,i=e.pixel,n=t[0]-i[0],s=t[1]-i[1],r=!0;return n*n+s*s<=this.squaredClickTolerance_&&(this.handlePointerMove_(e),this.started_?this.finishDrawing_():this.startDrawing_(e),r=!1),r},g.handleEvent_=function(e){var t=!0;return"pointermove"===e.type?t=this.handlePointerMove_(e):"dblclick"===e.type&&(t=!1),c.default.handleEvent.call(this,e)&&t},g.prototype.handlePointerMove_=function(e){return this.started_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},g.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();if(null===this.sketchPoint_)this.sketchPoint_=new s.default(new h.default(t)),this.updateSketchFeatures_();else{var i=this.sketchPoint_.getGeometry();n.default.assertInstanceof(i,h.default),i.setCoordinates(t)}},g.prototype.updateSketchFeatures_=function(){var e=[];null!==this.sketchFeature_&&e.push(this.sketchFeature_),null!==this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.sketchLayer_.getSource();t.clear(!0),t.addFeatures(e)},g.prototype.startDrawing_=function(e){var t=e.coordinate;this.started_=!0;var i=new u.default([t.slice(),t.slice()]),r=new a.default(t,0),o=new l.default([i,r]);n.default.assert(void 0!==o),this.sketchFeature_=new s.default,this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new d.default.Event("drawstart",this.sketchFeature_))},g.prototype.modifyDrawing_=function(e){var t=e.coordinate,i=n.default.assertInstanceof(this.sketchFeature_.getGeometry(),l.default).getGeometriesArray(),s=i[0];n.default.assertInstanceof(s,u.default);var r=s.getCoordinates(),o=this.sketchPoint_.getGeometry();n.default.assertInstanceof(o,h.default),o.setCoordinates(t);var d=r[r.length-1];d[0]=t[0],d[1]=t[1],n.default.assertInstanceof(s,u.default),s.setCoordinates(r),n.default.assertInstanceof(i[1],a.default).setRadius(s.getLength()),this.updateSketchFeatures_()},g.prototype.abortDrawing_=function(){this.started_=!1;var e=this.sketchFeature_;return null!==e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLayer_.getSource().clear(!0)),e},g.prototype.shouldStopEvent=o.default.FALSE,g.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();null!==e&&t||this.abortDrawing_(),this.sketchLayer_.setMap(t?e:null)},g.prototype.finishDrawing_=function(){var e=this.abortDrawing_();n.default.assert(null!==e),null!==this.source_&&this.source_.addFeature(e),this.dispatchEvent(new d.default.Event("drawend",e))},g.prototype.setMap=function(e){c.default.prototype.setMap.call(this,e),this.updateState_()},t.default=g},16:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),s=i(0),r=i(63),o=i(56),a=i(2),l=i(9),u=i(4),h=function(e,t,i,n,s,a){r.a.call(this,e,t,i,o.a.IDLE),this.src_=n,this.image_=new Image,null!==s&&(this.image_.crossOrigin=s),this.imageListenerKeys_=null,this.state=o.a.IDLE,this.imageLoadFunction_=a};Object(s.inherits)(h,r.a),h.prototype.getImage=function(){return this.image_},h.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.changed()},h.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(u.getHeight)(this.extent)/this.image_.height),this.state=o.a.LOADED,this.unlistenImage_(),this.changed()},h.prototype.load=function(){this.state!=o.a.IDLE&&this.state!=o.a.ERROR||(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[a.default.listenOnce(this.image_,l.a.ERROR,this.handleImageError_,this),a.default.listenOnce(this.image_,l.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},h.prototype.setImage=function(e){this.image_=e},h.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.default.unlistenByKey),this.imageListenerKeys_=null};var d=h,c=i(10),f=i(5),_=i(6),p=i(28),g=i(57),v=i(12),m=i(15),y=i(22),C=function(e){var t=e||{};g.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:g.default.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(s.inherits)(C,g.default),C.GETFEATUREINFO_IMAGE_SIZE_=[101,101],C.prototype.getGetFeatureInfoUrl=function(e,t,i,s){if(void 0!==this.url_){var r=Object(_.get)(i),o=this.getProjection();o&&o!==r&&(t=p.a.calculateSourceResolution(o,r,e,t),e=Object(_.transform)(e,r,o));var a=Object(u.getForViewAndSize)(e,t,0,C.GETFEATUREINFO_IMAGE_SIZE_),l={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};f.default.assign(l,this.params_,s);var h=Math.floor((e[0]-a[0])/t),d=Math.floor((a[3]-e[1])/t);return l[this.v13_?"I":"X"]=h,l[this.v13_?"J":"Y"]=d,this.getRequestUrl_(a,C.GETFEATUREINFO_IMAGE_SIZE_,1,o||r,l)}},C.prototype.getParams=function(){return this.params_},C.prototype.getImageInternal=function(e,t,i,s){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var r=t/i,o=Object(u.getCenter)(e),h=Math.ceil(Object(u.getWidth)(e)/r),c=Math.ceil(Object(u.getHeight)(e)/r),_=Object(u.getForViewAndSize)(o,r,0,[h,c]),p=Math.ceil(this.ratio_*Object(u.getWidth)(e)/r),g=Math.ceil(this.ratio_*Object(u.getHeight)(e)/r),v=Object(u.getForViewAndSize)(o,r,0,[p,g]),m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==t&&m.getPixelRatio()==i&&Object(u.containsExtent)(m.getExtent(),_))return m;var y={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};f.default.assign(y,this.params_),this.imageSize_[0]=Math.round(Object(u.getWidth)(v)/r),this.imageSize_[1]=Math.round(Object(u.getHeight)(v)/r);var C=this.getRequestUrl_(v,this.imageSize_,i,s,y);return this.image_=new d(v,t,i,C,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),a.default.listen(this.image_,l.a.CHANGE,this.handleImageChange,this),this.image_},C.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},C.prototype.getRequestUrl_=function(e,t,i,n,s){if(Object(c.a)(void 0!==this.url_,9),s[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=i)switch(this.serverType_){case v.a.GEOSERVER:var r=90*i+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+r:s.FORMAT_OPTIONS="dpi:"+r;break;case v.a.MAPSERVER:s.MAP_RESOLUTION=90*i;break;case v.a.CARMENTA_SERVER:case v.a.QGIS:s.DPI=90*i;break;default:Object(c.a)(!1,8)}s.WIDTH=t[0],s.HEIGHT=t[1];var o,a=n.getAxisOrientation();return o=this.v13_&&"ne"==a.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,s.BBOX=o.join(","),y.default.appendParams(this.url_,s)},C.prototype.getUrl=function(){return this.url_},C.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},C.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},C.prototype.updateParams=function(e){f.default.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},C.prototype.updateV13_=function(){var e=this.params_.VERSION||n.a;this.v13_=m.default.compareVersions(e,"1.3")>=0};t.default=C},179:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(47),r=i(141),o=i(40),a=i(87),l=i(132),u=i(8),h=i(84),d=i(2),c=i(43),f=i(9),_=i(83),p=i(4),g=i(13),v=i(27),m="modifystart",y="modifyend",C=i(77),E=i(20),S=i(18),F=i(186),O=i(152),T=i(17),M=function(e){var t;if(C.default.call(this,{handleDownEvent:M.handleDownEvent_,handleDragEvent:M.handleDragEvent_,handleEvent:M.handleEvent,handleUpEvent:M.handleUpEvent_}),this.condition_=e.condition?e.condition:_.default.primaryAction,this.defaultDeleteCondition_=function(e){return _.default.altKeyOnly(e)&&_.default.singleClick(e)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_.default.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new O.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new E.default({source:new S.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:M.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,t=new s.default(this.source_.getFeatures()),d.default.listen(this.source_,F.a.ADDFEATURE,this.handleSourceAdd_,this),d.default.listen(this.source_,F.a.REMOVEFEATURE,this.handleSourceRemove_,this)):t=e.features,!t)throw new Error("The modify interaction requires features or a source");this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),d.default.listen(this.features_,r.a.ADD,this.handleFeatureAdd_,this),d.default.listen(this.features_,r.a.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null};Object(n.inherits)(M,C.default),M.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,M.prototype.addFeature_=function(e){var t=e.getGeometry();t&&t.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[t.getType()].call(this,e,t);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),d.default.listen(e,f.a.CHANGE,this.handleFeatureChange_,this)},M.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new M.Event(m,this.features_,e)))},M.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.default.unlisten(e,f.a.CHANGE,this.handleFeatureChange_,this)},M.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,i=[];t.forEach(function(t){e===t.feature&&i.push(t)});for(var n=i.length-1;n>=0;--n)t.remove(i[n])},M.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),C.default.prototype.setActive.call(this,e)},M.prototype.setMap=function(e){this.overlay_.setMap(e),C.default.prototype.setMap.call(this,e)},M.prototype.handleSourceAdd_=function(e){e.feature&&this.features_.push(e.feature)},M.prototype.handleSourceRemove_=function(e){e.feature&&this.features_.remove(e.feature)},M.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},M.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},M.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},M.prototype.writePointGeometry_=function(e,t){var i=t.getCoordinates(),n={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),n)},M.prototype.writeMultiPointGeometry_=function(e,t){var i,n,s,r,o=t.getCoordinates();for(n=0,s=o.length;n<s;++n)r={feature:e,geometry:t,depth:[n],index:n,segment:[i=o[n],i]},this.rBush_.insert(t.getExtent(),r)},M.prototype.writeLineStringGeometry_=function(e,t){var i,n,s,r,o=t.getCoordinates();for(i=0,n=o.length-1;i<n;++i)r={feature:e,geometry:t,index:i,segment:s=o.slice(i,i+2)},this.rBush_.insert(Object(p.boundingExtent)(s),r)},M.prototype.writeMultiLineStringGeometry_=function(e,t){var i,n,s,r,o,a,l,u=t.getCoordinates();for(r=0,o=u.length;r<o;++r)for(n=0,s=(i=u[r]).length-1;n<s;++n)l={feature:e,geometry:t,depth:[r],index:n,segment:a=i.slice(n,n+2)},this.rBush_.insert(Object(p.boundingExtent)(a),l)},M.prototype.writePolygonGeometry_=function(e,t){var i,n,s,r,o,a,l,u=t.getCoordinates();for(r=0,o=u.length;r<o;++r)for(n=0,s=(i=u[r]).length-1;n<s;++n)l={feature:e,geometry:t,depth:[r],index:n,segment:a=i.slice(n,n+2)},this.rBush_.insert(Object(p.boundingExtent)(a),l)},M.prototype.writeMultiPolygonGeometry_=function(e,t){var i,n,s,r,o,a,l,u,h,d,c=t.getCoordinates();for(a=0,l=c.length;a<l;++a)for(r=0,o=(u=c[a]).length;r<o;++r)for(n=0,s=(i=u[r]).length-1;n<s;++n)d={feature:e,geometry:t,depth:[r,a],index:n,segment:h=i.slice(n,n+2)},this.rBush_.insert(Object(p.boundingExtent)(h),d)},M.prototype.writeCircleGeometry_=function(e,t){var i=t.getCenter(),n={feature:e,geometry:t,index:M.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX,segment:[i,i]},s={feature:e,geometry:t,index:M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX,segment:[i,i]},r=[n,s];n.featureSegments=s.featureSegments=r,this.rBush_.insert(Object(p.createOrUpdateFromCoordinate)(i),n),this.rBush_.insert(t.getExtent(),s)},M.prototype.writeGeometryCollectionGeometry_=function(e,t){var i,n=t.getGeometriesArray();for(i=0;i<n.length;++i)this.SEGMENT_WRITERS_[n[i].getType()].call(this,e,n[i])},M.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new o.default(new v.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},M.compareIndexes_=function(e,t){return e.index-t.index},M.handleDownEvent_=function(e){if(!this.condition_(e))return!1;this.handlePointerAtPixel_(e.pixel,e.map);var t=e.map.getCoordinateFromPixel(e.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var s=[],r=i.getGeometry().getCoordinates(),o=Object(p.boundingExtent)([r]),a=this.rBush_.getInExtent(o),l={};a.sort(M.compareIndexes_);for(var u=0,d=a.length;u<d;++u){var c=a[u],f=c.segment,_=Object(n.getUid)(c.feature),v=c.depth;if(v&&(_+="-"+v.join("-")),l[_]||(l[_]=new Array(2)),c.geometry.getType()===g.default.CIRCLE&&c.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var m=M.closestOnSegmentData_(t,c);h.default.equals(m,r)&&!l[_][0]&&(this.dragSegments_.push([c,0]),l[_][0]=c)}else if(h.default.equals(f[0],r)&&!l[_][0])this.dragSegments_.push([c,0]),l[_][0]=c;else if(h.default.equals(f[1],r)&&!l[_][1]){if((c.geometry.getType()===g.default.LINE_STRING||c.geometry.getType()===g.default.MULTI_LINE_STRING)&&l[_][0]&&0===l[_][0].index)continue;this.dragSegments_.push([c,1]),l[_][1]=c}else this.insertVertexCondition_(e)&&Object(n.getUid)(f)in this.vertexSegments_&&!l[_][0]&&!l[_][1]&&s.push([c,r])}s.length&&this.willModifyFeatures_(e);for(var y=s.length-1;y>=0;--y)this.insertVertex_.apply(this,s[y])}return!!this.vertexFeature_},M.handleDragEvent_=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,i=0,n=this.dragSegments_.length;i<n;++i){for(var s,r=this.dragSegments_[i],o=r[0],a=o.depth,l=o.geometry,u=o.segment,d=r[1];t.length<l.getStride();)t.push(u[d][t.length]);switch(l.getType()){case g.default.POINT:s=t,u[0]=u[1]=t;break;case g.default.MULTI_POINT:(s=l.getCoordinates())[o.index]=t,u[0]=u[1]=t;break;case g.default.LINE_STRING:(s=l.getCoordinates())[o.index+d]=t,u[d]=t;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(s=l.getCoordinates())[a[0]][o.index+d]=t,u[d]=t;break;case g.default.MULTI_POLYGON:(s=l.getCoordinates())[a[1]][a[0]][o.index+d]=t,u[d]=t;break;case g.default.CIRCLE:u[0]=u[1]=t,o.index===M.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this.changingFeature_=!0,l.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,l.setRadius(h.default.distance(l.getCenter(),t)),this.changingFeature_=!1)}s&&this.setGeometryCoordinates_(l,s)}this.createOrUpdateVertexFeature_(t)},M.handleUpEvent_=function(e){for(var t,i,n=this.dragSegments_.length-1;n>=0;--n)if((i=(t=this.dragSegments_[n][0]).geometry).getType()===g.default.CIRCLE){var s=i.getCenter(),r=t.featureSegments[0],o=t.featureSegments[1];r.segment[0]=r.segment[1]=s,o.segment[0]=o.segment[1]=s,this.rBush_.update(Object(p.createOrUpdateFromCoordinate)(s),r),this.rBush_.update(i.getExtent(),o)}else this.rBush_.update(Object(p.boundingExtent)(t.segment),t);return this.modified_&&(this.dispatchEvent(new M.Event(y,this.features_,e)),this.modified_=!1),!1},M.handleEvent=function(e){return!(e instanceof l.default)||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=a.a.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=a.a.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==a.a.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),C.default.handleEvent.call(this,e)&&!t);var t},M.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},M.prototype.handlePointerAtPixel_=function(e,t){var i=t.getCoordinateFromPixel(e),s=Object(p.buffer)(Object(p.createOrUpdateFromCoordinate)(i),t.getView().getResolution()*this.pixelTolerance_),r=this.rBush_.getInExtent(s);if(r.length>0){r.sort(function(e,t){return M.pointDistanceToSegmentDataSquared_(i,e)-M.pointDistanceToSegmentDataSquared_(i,t)});var o=r[0],a=o.segment,l=M.closestOnSegmentData_(i,o),u=t.getPixelFromCoordinate(l),d=h.default.distance(e,u);if(d<=this.pixelTolerance_){var c={};if(o.geometry.getType()===g.default.CIRCLE&&o.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var f,_=t.getPixelFromCoordinate(a[0]),v=t.getPixelFromCoordinate(a[1]),m=h.default.squaredDistance(u,_),y=h.default.squaredDistance(u,v);d=Math.sqrt(Math.min(m,y)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(l=m>y?a[1]:a[0]),this.createOrUpdateVertexFeature_(l);for(var C=1,E=r.length;C<E&&(f=r[C].segment,h.default.equals(a[0],f[0])&&h.default.equals(a[1],f[1])||h.default.equals(a[0],f[1])&&h.default.equals(a[1],f[0]));++C)c[Object(n.getUid)(f)]=!0}return c[Object(n.getUid)(a)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},M.pointDistanceToSegmentDataSquared_=function(e,t){var i=t.geometry;if(i.getType()===g.default.CIRCLE){var n=i;if(t.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var s=h.default.squaredDistance(n.getCenter(),e),r=Math.sqrt(s)-n.getRadius();return r*r}}return h.default.squaredDistanceToSegment(e,t.segment)},M.closestOnSegmentData_=function(e,t){var i=t.geometry;return i.getType()===g.default.CIRCLE&&t.index===M.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX?i.getClosestPoint(e):h.default.closestOnSegment(e,t.segment)},M.prototype.insertVertex_=function(e,t){for(var i,n=e.segment,s=e.feature,r=e.geometry,o=e.depth,a=e.index;t.length<r.getStride();)t.push(0);switch(r.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(i=r.getCoordinates())[o[0]].splice(a+1,0,t);break;case g.default.MULTI_POLYGON:(i=r.getCoordinates())[o[1]][o[0]].splice(a+1,0,t);break;case g.default.LINE_STRING:(i=r.getCoordinates()).splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(r,i);var l=this.rBush_;l.remove(e),this.updateSegmentIndices_(r,a,o,1);var u={segment:[n[0],t],feature:s,geometry:r,depth:o,index:a};l.insert(Object(p.boundingExtent)(u.segment),u),this.dragSegments_.push([u,1]);var h={segment:[t,n[1]],feature:s,geometry:r,depth:o,index:a+1};l.insert(Object(p.boundingExtent)(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0},M.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=a.a.POINTERDRAG){var e=this.lastPointerEvent_;return this.willModifyFeatures_(e),this.removeVertex_(),this.dispatchEvent(new M.Event(y,this.features_,e)),this.modified_=!1,!0}return!1},M.prototype.removeVertex_=function(){var e,t,i,s,r,o,a,l,u,h,d,c=this.dragSegments_,f={},_=!1;for(r=c.length-1;r>=0;--r)h=(i=c[r])[0],d=Object(n.getUid)(h.feature),h.depth&&(d+="-"+h.depth.join("-")),d in f||(f[d]={}),0===i[1]?(f[d].right=h,f[d].index=h.index):1==i[1]&&(f[d].left=h,f[d].index=h.index+1);for(d in f){switch(u=f[d].right,a=f[d].left,l=(o=f[d].index)-1,h=void 0!==a?a:u,l<0&&(l=0),e=t=(s=h.geometry).getCoordinates(),_=!1,s.getType()){case g.default.MULTI_LINE_STRING:t[h.depth[0]].length>2&&(t[h.depth[0]].splice(o,1),_=!0);break;case g.default.LINE_STRING:t.length>2&&(t.splice(o,1),_=!0);break;case g.default.MULTI_POLYGON:e=e[h.depth[1]];case g.default.POLYGON:(e=e[h.depth[0]]).length>4&&(o==e.length-1&&(o=0),e.splice(o,1),_=!0,0===o&&(e.pop(),e.push(e[0]),l=e.length-1))}if(_){this.setGeometryCoordinates_(s,t);var v=[];if(void 0!==a&&(this.rBush_.remove(a),v.push(a.segment[0])),void 0!==u&&(this.rBush_.remove(u),v.push(u.segment[1])),void 0!==a&&void 0!==u){var m={depth:h.depth,feature:h.feature,geometry:h.geometry,index:l,segment:v};this.rBush_.insert(Object(p.boundingExtent)(m.segment),m)}this.updateSegmentIndices_(s,o,h.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),c.length=0}}return _},M.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},M.prototype.updateSegmentIndices_=function(e,t,i,n){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(void 0===i||void 0===s.depth||Object(u.equals)(s.depth,i))&&s.index>t&&(s.index+=n)})},M.getDefaultStyleFunction=function(){var e=T.default.createDefaultEditing();return function(t,i){return e[g.default.POINT]}},M.Event=function(e,t,i){c.default.call(this,e),this.features=t,this.mapBrowserEvent=i},Object(n.inherits)(M.Event,c.default);t.default=M},21:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(0)),s=r(i(43));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.default.call(this,e),this.detail=t};n.default.inherits(o,s.default),t.default=o},23:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),s=i(0),r=i(10),o=i(4),a=i(5),l=i(14),u=i(6),h=i(28),d=i(60),c=i(41),f=i(12),_=i(61),p=i(15),g=i(22),v=function(e){var t=e||{},i=t.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;c.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(o.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(s.inherits)(v,c.a),v.prototype.getGetFeatureInfoUrl=function(e,t,i,s){var r=Object(u.get)(i),l=this.getProjection(),c=this.getTileGrid();c||(c=this.getTileGridForProjection(r));var f=c.getTileCoordForCoordAndResolution(e,t);if(!(c.getResolutions().length<=f[0])){var _=c.getResolution(f[0]),p=c.getTileCoordExtent(f,this.tmpExtent_),g=d.default.toSize(c.getTileSize(f[0]),this.tmpSize),v=this.gutter_;0!==v&&(g=d.default.buffer(g,v,this.tmpSize),p=Object(o.buffer)(p,_*v,p)),l&&l!==r&&(_=h.a.calculateSourceResolution(l,r,e,_),p=Object(u.transformExtent)(p,r,l),e=Object(u.transform)(e,r,l));var m={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};a.default.assign(m,this.params_,s);var y=Math.floor((e[0]-p[0])/_),C=Math.floor((p[3]-e[1])/_);return m[this.v13_?"I":"X"]=y,m[this.v13_?"J":"Y"]=C,this.getRequestUrl_(f,g,p,1,l||r,m)}},v.prototype.getGutterInternal=function(){return this.gutter_},v.prototype.getParams=function(){return this.params_},v.prototype.getRequestUrl_=function(e,t,i,n,s,o){var a=this.urls;if(a){if(o.WIDTH=t[0],o.HEIGHT=t[1],o[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case f.a.GEOSERVER:var u=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+u:o.FORMAT_OPTIONS="dpi:"+u;break;case f.a.MAPSERVER:o.MAP_RESOLUTION=90*n;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:o.DPI=90*n;break;default:Object(r.a)(!1,52)}var h,d,c=s.getAxisOrientation(),p=i;if(this.v13_&&"ne"==c.substr(0,2))h=i[0],p[0]=i[1],p[1]=h,h=i[2],p[2]=i[3],p[3]=h;if(o.BBOX=p.join(","),1==a.length)d=a[0];else d=a[Object(l.modulo)(_.a.hash(e),a.length)];return g.default.appendParams(d,o)}},v.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},v.prototype.getKeyForParams_=function(){var e=0,t=[];for(var i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")},v.prototype.fixedTileUrlFunction=function(e,t,i){var s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(i)),!(s.getResolutions().length<=e[0])){1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);var r=s.getResolution(e[0]),l=s.getTileCoordExtent(e,this.tmpExtent_),u=d.default.toSize(s.getTileSize(e[0]),this.tmpSize),h=this.gutter_;0!==h&&(u=d.default.buffer(u,h,this.tmpSize),l=Object(o.buffer)(l,r*h,l)),1!=t&&(u=d.default.scale(u,t,this.tmpSize));var c={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return a.default.assign(c,this.params_),this.getRequestUrl_(e,u,l,t,i,c)}},v.prototype.updateParams=function(e){a.default.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},v.prototype.updateV13_=function(){var e=this.params_.VERSION||n.a;this.v13_=p.default.compareVersions(e,"1.3")>=0},t.default=v},25:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(1);(n=r)&&n.__esModule;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inRange_=!1!==t.inRange,this.visible_=!0===t.visible,this.attributes=t.attributes||null,this.id_=t.id,this.identifierAttribute_=t.identifierAttribute,this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.name_=t.name}return s(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e}},{key:"inRange",get:function(){return this.inRange_},set:function(e){this.inRange_=e}},{key:"visible",get:function(){return this.visible_},set:function(e){this.visible_=e}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),e}();t.default=o},26:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(1)),s=r(i(47));function r(e){return e&&e.__esModule?e:{default:e}}var o={};n.default.module.value("ngeoDataSources",new s.default),t.default=o},29:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(i(1)),s=d(i(0)),r=d(i(20)),o=d(i(5)),a=d(i(18)),l=d(i(17)),u=d(i(3)),h=d(i(36));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new a.default({useSpatialIndex:!1}),this.layer_=new r.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};c.prototype.addFeature=function(e,t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length);var i=s.default.getUid(e).toString();this.featureUidToGroupIndex_[i]=t,this.groups_[t].features[i]=e,this.source_.addFeature(e)},c.prototype.removeFeature=function(e,t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length);var i=s.default.getUid(e).toString();delete this.featureUidToGroupIndex_[i],delete this.groups_[t].features[i],this.source_.removeFeature(e)},c.prototype.clear=function(e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length);var t=this.groups_[e];for(var i in t.features)this.removeFeature(t.features[i],e);u.default.assert(o.default.isEmpty(t.features))},c.prototype.getLayer=function(){return this.layer_},c.prototype.getFeatureOverlay=function(){var e=this.groups_.length;return this.groups_.push({styleFunction:l.default.defaultFunction,features:{}}),new h.default(this,e)},c.prototype.init=function(e){this.layer_.setMap(e)},c.prototype.setStyle=function(e,t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length),this.groups_[t].styleFunction=null===e?l.default.defaultFunction:l.default.createFunction(e)},c.prototype.styleFunction_=function(e,t){var i=s.default.getUid(e).toString();u.default.assert(i in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[i];return this.groups_[n].styleFunction(e,t)},(c.module=angular.module("ngeoFeatureOverlayMgr",[h.default.module.name])).service("ngeoFeatureOverlayMgr",c),n.default.module.requires.push(c.module.name),t.default=c},3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={assert:function(e,t,i){},assertNumber:function(e,t,i){},assertString:function(e,t,i){},assertFunction:function(e,t,i){},assertObject:function(e,t,i){},assertArray:function(e,t,i){},assertBoolean:function(e,t,i){},assertElement:function(e,t,i){},assertInstanceof:function(e,t,i,n){},assertObjectPrototypeIsIntact:function(){}};t.default=n},32:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(i(1)),s=h(i(33)),r=h(i(34)),o=h(i(29)),a=h(i(37)),l=h(i(38)),u=h(i(39));function h(e){return e&&e.__esModule?e:{default:e}}var d=angular.module("ngeoMapModule",[n.default.module.name,s.default.module.name,r.default.name,o.default.module.name,a.default.name,l.default.name,u.default.name]);t.default=d},33:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(i(3)),s=f(i(1)),r=f(i(21)),o=f(i(0)),a=f(i(19)),l=f(i(52)),u=f(i(50)),h=f(i(16)),d=f(i(23)),c=f(i(58));function f(e){return e&&e.__esModule?e:{default:e}}var _=function(){a.default.call(this),this.mapUids_={}};o.default.inherits(_,a.default),_.prototype.get=function(e){return o.default.getUid(e).toString()in this.mapUids_?e.getLayers().item(0):null},_.prototype.set=function(e,t){var i=o.default.getUid(e).toString(),s=this.get(e);null!==s?(n.default.assert(i in this.mapUids_),null!==t?e.getLayers().setAt(0,t):(e.getLayers().removeAt(0),delete this.mapUids_[i])):null!==t&&(e.getLayers().insertAt(0,t),this.mapUids_[i]=!0);var a=new r.default("change",{current:t,previous:s});return this.dispatchEvent(a),s},_.prototype.updateDimensions=function(e,t){var i=this.get(e);if(i){var s=[i];i instanceof l.default&&(s=i.getLayers().getArray()),s.forEach(function(e){if(n.default.assertInstanceof(e,u.default),e){var i=!1,s={};for(var r in e.get("dimensions")){var o=t[r];void 0!==o&&(s[r]=o,i=!0)}if(i){var a=e.getSource();a instanceof c.default?(a.updateDimensions(s),a.refresh()):(a instanceof d.default||a instanceof h.default)&&(a.updateParams(s),a.refresh())}}})}},(_.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",_),s.default.module.requires.push(_.module.name),t.default=_},339:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(!function(){var e=new Error('Cannot find module "examples/modifycircle.css"');throw e.code="MODULE_NOT_FOUND",e}()),i(59);var n=_(i(340)),s=_(i(7)),r=_(i(31)),o=_(i(62)),a=_(i(20)),l=_(i(48)),u=_(i(18)),h=_(i(80)),d=_(i(47)),c=_(i(40)),f=_(i(32));function _(e){return e&&e.__esModule?e:{default:e}}var p=angular.module("app",[ngeo.module.name,f.default.name]);app.MainController=function(){this.map=new s.default({layers:[new o.default({source:new l.default})],view:new r.default({center:[-10997148,4569099],zoom:4})});var e=this.map,t=new h.default([-10691093,4966327],465e3);this.features=new d.default;var i=new c.default({geometry:ol.geom.Polygon.fromCircle(t),color:"#000000",label:"Circle 1",opacity:"0.5",stroke:"2"});i.set(ngeo.FeatureProperties.IS_CIRCLE,!0),this.features.push(i);var f=new u.default({features:this.features});new a.default({source:f}).setMap(e),this.interaction=new n.default({features:this.features});var _=this.interaction;_.setActive(!0),e.addInteraction(_)},p.controller("MainController",app.MainController),t.default={}},34:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(3)),s=a(i(1)),r=(a(i(35)),a(i(2))),o=a(i(7));function a(e){return e&&e.__esModule?e:{default:e}}var l=angular.module("ngeoMap",[]);s.default.module.requires.push(l.name),l.directive_=function(e,t){return{restrict:"A",link:function(i,s,a){var l=a.ngeoMap,u=i.$eval(l);n.default.assertInstanceof(u,o.default),u.setTarget(s[0]),t.map=u;var h=a.ngeoMapManageResize;if(i.$eval(h)){var d=a.ngeoMapResizeTransition,c=i.$eval(d);r.default.listen(e,"resize",function(){if(c){var t=Date.now(),i=!0;!function n(){u.updateSize(),u.renderSync(),i&&e.requestAnimationFrame(n),Date.now()-t>c&&(i=!1)}()}else u.updateSize()})}}}},l.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],l.directive("ngeoMap",l.directive_),t.default=l},340:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(i(3)),s=E(i(124)),r=E(i(0)),o=(E(i(47)),E(i(40))),a=E(i(132)),l=E(i(84)),u=E(i(2)),h=E(i(4)),d=E(i(80)),c=E(i(30)),f=E(i(27)),_=E(i(42)),p=E(i(179)),g=E(i(77)),v=E(i(20)),m=E(i(18)),y=E(i(152)),C=E(i(17));function E(e){return e&&e.__esModule?e:{default:e}}var S=function e(t){n.default.assert(t.features),g.default.call(this,{handleDownEvent:e.handleDownEvent_,handleDragEvent:e.handleDragEvent_,handleEvent:e.handleEvent,handleUpEvent:e.handleUpEvent_}),this.vertexFeature_=null,this.lastPixel_=[0,0],this.modified_=!1,this.rBush_=new y.default,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=null,this.overlay_=new v.default({source:new m.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:e.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.features_=t.features,this.features_.forEach(this.addFeature_,this),u.default.listen(this.features_,"add",this.handleFeatureAdd_,this),u.default.listen(this.features_,"remove",this.handleFeatureRemove_,this)};r.default.inherits(S,g.default),S.prototype.addFeature_=function(e){if("Polygon"===e.getGeometry().getType()&&e.get(ngeo.FeatureProperties.IS_CIRCLE)){var t=e.getGeometry();this.writeCircleGeometry_(e,t);var i=this.getMap();i&&this.handlePointerAtPixel_(this.lastPixel_,i)}},S.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new p.default.Event("modifystart",this.features_,e)))},S.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},S.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,i=[];t.forEach(function(t){e===t.feature&&i.push(t)});for(var n=i.length-1;n>=0;--n)t.remove(i[n])},S.prototype.setMap=function(e){this.overlay_.setMap(e),g.default.prototype.setMap.call(this,e)},S.prototype.handleFeatureAdd_=function(e){var t=e.element;n.default.assertInstanceof(t,o.default,"feature should be an ol.Feature"),this.addFeature_(t)},S.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},S.prototype.writeCircleGeometry_=function(e,t){var i,n=t.getCoordinates(),s=void 0,r=void 0,o=void 0,a=void 0,l=void 0,u=void 0;for(a=0,i=n.length;a<i;++a)for(r=0,o=(s=n[a]).length-1;r<o;++r)u={feature:e,geometry:t,depth:[a],index:r,segment:l=s.slice(r,r+2)},this.rBush_.insert(h.default.boundingExtent(l),u)},S.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new o.default(new f.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t},S.compareIndexes_=function(e,t){return e.index-t.index},S.handleDownEvent_=function(e){this.handlePointerAtPixel_(e.pixel,e.map),this.dragSegments_=[],this.modified_=!1;var t=this.vertexFeature_;if(t){var i=t.getGeometry().getCoordinates(),n=h.default.boundingExtent([i]),s=this.rBush_.getInExtent(n),o={};s.sort(S.compareIndexes_);for(var a=0,u=s.length;a<u;++a){var d=s[a],c=d.segment,f=r.default.getUid(d.feature),_=d.depth;_&&(f+="-"+_.join("-")),o[f]||(o[f]=new Array(2)),l.default.equals(c[0],i)&&!o[f][0]?(this.dragSegments_.push([d,0]),o[f][0]=d):l.default.equals(c[1],i)&&!o[f][1]&&(this.dragSegments_.push([d,1]),o[f][1]=d)}}return!!this.vertexFeature_},S.handleDragEvent_=function(e){this.willModifyFeatures_(e);var t=e.coordinate,i=this.dragSegments_[0][0].geometry,n=h.default.getCenter(i.getExtent()),r=new c.default([n,t]),o=new d.default(n,r.getLength()),a=_.default.fromCircle(o,64).getCoordinates();this.setGeometryCoordinates_(i,a);var l=s.default.getAzimut(r);this.features_.getArray()[0].set(ngeo.FeatureProperties.AZIMUT,l),this.createOrUpdateVertexFeature_(t)},S.handleUpEvent_=function(e){return this.rBush_.clear(),this.writeCircleGeometry_(this.dragSegments_[0][0].feature,this.dragSegments_[0][0].geometry),this.modified_&&(this.dispatchEvent(new p.default.Event("modifyend",this.features_,e)),this.modified_=!1),!1},S.handleEvent=function(e){if(!(e instanceof a.default))return!0;return e.map.getView().getInteracting()||"pointermove"!=e.type||this.handlingDownUpSequence||this.handlePointerMove_(e),g.default.handleEvent.call(this,e)&&!0},S.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},S.prototype.handlePointerAtPixel_=function(e,t){var i=t.getCoordinateFromPixel(e),n=t.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),s=t.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),o=h.default.boundingExtent([n,s]),a=this.rBush_.getInExtent(o);if(a.length>0){a.sort(function(e,t){return l.default.squaredDistanceToSegment(i,e.segment)-l.default.squaredDistanceToSegment(i,t.segment)});var u=a[0].segment,d=l.default.closestOnSegment(i,u),c=t.getPixelFromCoordinate(d);if(Math.sqrt(l.default.squaredDistance(e,c))<=this.pixelTolerance_){var f=t.getPixelFromCoordinate(u[0]),_=t.getPixelFromCoordinate(u[1]),p=l.default.squaredDistance(c,f),g=l.default.squaredDistance(c,_),v=Math.sqrt(Math.min(p,g));if(this.snappedToVertex_=v<=this.pixelTolerance_,this.snappedToVertex_){d=p>g?u[1]:u[0],this.createOrUpdateVertexFeature_(d);var m={};m[r.default.getUid(u)]=!0;for(var y=void 0,C=1,E=a.length;C<E&&(y=a[C].segment,l.default.equals(u[0],y[0])&&l.default.equals(u[1],y[1])||l.default.equals(u[0],y[1])&&l.default.equals(u[1],y[0]));++C)m[r.default.getUid(y)]=!0;return}}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},S.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},S.getDefaultStyleFunction=function(){var e=C.default.createDefaultEditing();return function(t,i){return e.Point}},t.default=S},35:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=h(i(1)),r=h(i(25)),o=(h(i(26)),h(i(2))),a=h(i(19)),l=h(i(31)),u=h(i(3));function h(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ngeoDataSources_=t,this.map_=null,this.listenerKeys_=[],o.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return e.$inject=["ngeoDataSources"],n(e,[{key:"bindMap_",value:function(e){var t=e.getView();this.listenerKeys_.push(o.default.listen(t,"change:resolution",this.handleViewResolutionChange_,this));var i=t.getResolution();u.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"unbindMap_",value:function(e){a.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(e){var t=e.target;u.default.assertInstanceof(t,l.default);var i=t.getResolution();u.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"syncDataSourcesToResolution_",value:function(e){var t=this;this.ngeoDataSources_.forEach(function(i){t.syncDataSourceToResolution_(i,e)})}},{key:"syncDataSourceToResolution_",value:function(e,t){if(e.supportsDynamicInRange){var i=e.maxResolution,n=e.minResolution,s=(null===n||void 0===n||t>=n)&&(null===i||void 0===i||t<=i);e.inRange=s}}},{key:"handleDataSourcesAdd_",value:function(e){var t=u.default.assertInstanceof(e.element,r.default);if(this.map_){var i=this.map_.getView().getResolution();u.default.assertNumber(i),this.syncDataSourceToResolution_(t,i)}}},{key:"map",set:function(e){this.map_&&this.unbindMap_(this.map_),this.map_=e,e&&this.bindMap_(e)}}]),e}();s.default.module.service("ngeoSyncDataSourcesMap",d),t.default=d},36:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(1)),s=(r(i(0)),r(i(2)));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){this.manager_=e,this.features_=null,this.index_=t};o.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)},o.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)},o.prototype.clear=function(){this.manager_.clear(this.index_)},o.prototype.setFeatures=function(e){null!==this.features_&&(this.features_.clear(),s.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),s.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==e&&(e.forEach(function(e){this.addFeature(e)},this),s.default.listen(e,"add",this.handleFeatureAdd_,this),s.default.listen(e,"remove",this.handleFeatureRemove_,this)),this.features_=e},o.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)},o.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)},o.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)},o.module=angular.module("ngeoFeatureOverlay",[]),n.default.module.requires.push(o.module.name),t.default=o},37:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(1),r=(n=s)&&n.__esModule?n:{default:n};var o=angular.module("ngeoRecenter",[]);r.default.module.requires.push(o.name),o.directive_=function(){return{restrict:"A",link:function(e,t,i){var n=i.ngeoRecenterMap,s=e.$eval(n);function r(t){var i=t.attr("ngeo-extent");if(void 0!==i){var n=s.getSize();s.getView().fit(e.$eval(i),{size:n})}var r=t.attr("ngeo-zoom");void 0!==r&&s.getView().setZoom(e.$eval(r))}t.on("click","*",function(e){r(angular.element($(this)))}),t.on("change",function(e){var t=e.target.options[e.target.selectedIndex];r(angular.element(t))})}}},o.directive("ngeoRecenter",o.directive_),t.default=o},38:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(i(3)),s=o(i(1)),r=o(i(7));function o(e){return e&&e.__esModule?e:{default:e}}var a=angular.module("ngeoResizemap",[]);s.default.module.requires.push(a.name),a.directive_=function(e){return{restrict:"A",link:function(t,i,s){var o=s.ngeoResizemap,a=t.$eval(o);n.default.assertInstanceof(a,r.default);var l=s.ngeoResizemapState;n.default.assert(void 0!==l);var u=void 0,h=void 0,d=function t(){a.updateSize(),a.renderSync(),Date.now()-u<1e3&&(h=e.requestAnimationFrame(t))};i.on("transitionend",function(){a.updateSize(),a.renderSync()}),t.$watch(l,function(t,i){t!=i&&(u=Date.now(),e.cancelAnimationFrame(h),h=e.requestAnimationFrame(d))})}}},a.directive("ngeoResizemap",a.directive_),t.default=a},39:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(1)),s=a(i(8)),r=a(i(7)),o=a(i(2));function a(e){return e&&e.__esModule?e:{default:e}}var l=angular.module("ngeoScaleselector",[]);n.default.module.requires.push(l.name),l.value("ngeoScaleselectorTemplateUrl",function(e,t){var i=t.ngeoScaleselectorTemplateurl;return void 0!==i?i:n.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),l.directive_=function(e){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:e}},l.directive("ngeoScaleselector",l.directive_),l.ScaleselectorController_=function(e,t,i){var n=this,a=i.ngeoScaleselector;this.scales=e.$eval(a),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,e.$watch(function(){return Object.keys(n.scales).length},function(e){n.zoomLevels=Object.keys(n.scales).map(Number),n.zoomLevels.sort(s.default.numberSafeCompareFunction)});var u=i.ngeoScaleselectorMap;this.map_=e.$eval(u),goog.asserts.assertInstanceof(this.map_,r.default);var h=i.ngeoScaleselectorOptions,d=e.$eval(h);if(this.options=l.ScaleselectorController_.getOptions_(d),this.$scope_=e,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var c=this.map_.getView().getZoom();void 0!==c&&(this.currentScale=this.getScale(c))}o.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),e.scaleselectorCtrl=this},l.ScaleselectorController_.getOptions_=function(e){var t=!1;return void 0!==e&&(t=1==e.dropup),{dropup:t}},l.ScaleselectorController_.prototype.getScale=function(e){return this.scales[e]},l.ScaleselectorController_.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)},l.ScaleselectorController_.prototype.handleResolutionChange_=function(e){var t=this,i=this.map_.getView(),n=this.scales[i.getZoom()];void 0!==n&&this.$scope_.$applyAsync(function(){t.currentScale=n})},l.ScaleselectorController_.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},l.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&o.default.unlistenByKey(this.resolutionChangeKey_);var e=this.map_.getView();this.resolutionChangeKey_=o.default.listen(e,"change:resolution",this.handleResolutionChange_,this)},l.controller("NgeoScaleselectorController",l.ScaleselectorController_),t.default=l},45:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(8),r=i(4),o=i(24),a=i(13),l=i(27),u=i(44),h=i(46),d=i(54),c=i(14),f=function(e,t){u.a.call(this),this.setCoordinates(e,t)};Object(n.inherits)(f,u.a),f.prototype.appendPoint=function(e){this.flatCoordinates?Object(s.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},f.prototype.clone=function(){var e=new f(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},f.prototype.closestPointXY=function(e,t,i,n){if(n<Object(r.closestSquaredDistanceXY)(this.getExtent(),e,t))return n;var s,o,a,l=this.flatCoordinates,u=this.stride;for(s=0,o=l.length;s<o;s+=u){var h=Object(c.squaredDistance)(e,t,l[s],l[s+1]);if(h<n){for(n=h,a=0;a<u;++a)i[a]=l[s+a];i.length=u}}return n},f.prototype.getCoordinates=function(){return d.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getPoint=function(e){var t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(e<0||t<=e)return null;var i=new l.default(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride)),i},f.prototype.getPoints=function(){var e,t,i=this.flatCoordinates,n=this.layout,s=this.stride,r=[];for(e=0,t=i.length;e<t;e+=s){var o=new l.default(null);o.setFlatCoordinates(n,i.slice(e,e+s)),r.push(o)}return r},f.prototype.getType=function(){return a.default.MULTI_POINT},f.prototype.intersectsExtent=function(e){var t,i,n,s,o=this.flatCoordinates,a=this.stride;for(t=0,i=o.length;t<i;t+=a)if(n=o[t],s=o[t+1],Object(r.containsXY)(e,n,s))return!0;return!1},f.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=h.a.coordinates(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(o.default.XY,null)},f.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},t.default=f},48:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(49),r=function(e){var t,i=e||{};t=void 0!==i.attributions?i.attributions:[r.ATTRIBUTION];var n=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",o=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";s.a.call(this,{attributions:t,cacheSize:i.cacheSize,crossOrigin:n,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:o,wrapX:i.wrapX})};Object(n.inherits)(r,s.a),r.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t.default=r},49:function(e,t,i){"use strict";var n=i(0),s=i(41),r=i(71),o=function(e){var t=e||{},i=void 0!==t.projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:r.a.createXYZ({extent:r.a.extentFromProjection(i),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});s.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(n.inherits)(o,s.a),t.a=o},51:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(8),r=i(4),o=i(24),a=i(13),l=i(30),u=i(44),h=i(67),d=i(46),c=i(54),f=i(100),_=i(70),p=i(64),g=function(e,t){u.a.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(e,t)};Object(n.inherits)(g,u.a),g.prototype.appendLineString=function(e){this.flatCoordinates?Object(s.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},g.prototype.clone=function(){var e=new g(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),e},g.prototype.closestPointXY=function(e,t,i,n){return n<Object(r.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),h.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,n))},g.prototype.getCoordinateAtM=function(e,t,i){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==t&&t,s=void 0!==i&&i;return f.a.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,n,s)},g.prototype.getCoordinates=function(){return c.a.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},g.prototype.getEnds=function(){return this.ends_},g.prototype.getLineString=function(e){if(e<0||this.ends_.length<=e)return null;var t=new l.default(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e])),t},g.prototype.getLineStrings=function(){var e,t,i=this.flatCoordinates,n=this.ends_,s=this.layout,r=[],o=0;for(e=0,t=n.length;e<t;++e){var a=n[e],u=new l.default(null);u.setFlatCoordinates(s,i.slice(o,a)),r.push(u),o=a}return r},g.prototype.getFlatMidpoints=function(){var e,t,i=[],n=this.flatCoordinates,r=0,o=this.ends_,a=this.stride;for(e=0,t=o.length;e<t;++e){var l=o[e],u=f.a.lineString(n,r,l,a,.5);Object(s.extend)(i,u),r=l}return i},g.prototype.getSimplifiedGeometryInternal=function(e){var t=[],i=[];t.length=p.a.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i);var n=new g(null);return n.setFlatCoordinates(o.default.XY,t,i),n},g.prototype.getType=function(){return a.default.MULTI_LINE_STRING},g.prototype.intersectsExtent=function(e){return _.a.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,e)},g.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=d.a.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(o.default.XY,null,this.ends_)},g.prototype.setFlatCoordinates=function(e,t,i){this.setFlatCoordinatesInternal(e,t),this.ends_=i,this.changed()},g.prototype.setLineStrings=function(e){var t,i,n=this.getLayout(),r=[],o=[];for(t=0,i=e.length;t<i;++t){var a=e[t];0===t&&(n=a.getLayout()),Object(s.extend)(r,a.getFlatCoordinates()),o.push(r.length)}this.setFlatCoordinates(n,r,o)},t.default=g},53:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(8),r=i(4),o=i(24),a=i(13),l=i(45),u=i(42),h=i(44),d=i(95),c=i(104),f=i(67),_=i(89),p=i(46),g=i(54),v=i(99),m=i(70),y=i(96),C=i(64),E=function(e,t){h.a.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(e,t)};Object(n.inherits)(E,h.a),E.prototype.appendPolygon=function(e){var t;if(this.flatCoordinates){var i,n,r=this.flatCoordinates.length;for(Object(s.extend)(this.flatCoordinates,e.getFlatCoordinates()),i=0,n=(t=e.getEnds().slice()).length;i<n;++i)t[i]+=r}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()},E.prototype.clone=function(){for(var e=new E(null),t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),e},E.prototype.closestPointXY=function(e,t,i,n){return n<Object(r.closestSquaredDistanceXY)(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f.a.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f.a.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,n))},E.prototype.containsXY=function(e,t){return _.a.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)},E.prototype.getArea=function(){return d.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},E.prototype.getCoordinates=function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),y.a.orientLinearRingss(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,g.a.coordinatesss(t,0,this.endss_,this.stride)},E.prototype.getEndss=function(){return this.endss_},E.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=c.a.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=v.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},E.prototype.getInteriorPoints=function(){var e=new l.default(null);return e.setFlatCoordinates(o.default.XYM,this.getFlatInteriorPoints().slice()),e},E.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;y.a.linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=y.a.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},E.prototype.getSimplifiedGeometryInternal=function(e){var t=[],i=[];t.length=C.a.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i);var n=new E(null);return n.setFlatCoordinates(o.default.XY,t,i),n},E.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;var t;if(0===e)t=0;else{var i=this.endss_[e-1];t=i[i.length-1]}var n,s,r=this.endss_[e].slice(),o=r[r.length-1];if(0!==t)for(n=0,s=r.length;n<s;++n)r[n]-=t;var a=new u.default(null);return a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t,o),r),a},E.prototype.getPolygons=function(){var e,t,i,n,s=this.layout,r=this.flatCoordinates,o=this.endss_,a=[],l=0;for(e=0,t=o.length;e<t;++e){var h=o[e].slice(),d=h[h.length-1];if(0!==l)for(i=0,n=h.length;i<n;++i)h[i]-=l;var c=new u.default(null);c.setFlatCoordinates(s,r.slice(l,d),h),a.push(c),l=d}return a},E.prototype.getType=function(){return a.default.MULTI_POLYGON},E.prototype.intersectsExtent=function(e){return m.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},E.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=p.a.coordinatesss(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}else this.setFlatCoordinates(o.default.XY,null,this.endss_)},E.prototype.setFlatCoordinates=function(e,t,i){this.setFlatCoordinatesInternal(e,t),this.endss_=i,this.changed()},E.prototype.setPolygons=function(e){var t,i,n,r=this.getLayout(),o=[],a=[];for(t=0,i=e.length;t<i;++t){var l=e[t];0===t&&(r=l.getLayout());var u,h,d=o.length;for(u=0,h=(n=l.getEnds()).length;u<h;++u)n[u]+=d;Object(s.extend)(o,l.getFlatCoordinates()),a.push(n)}this.setFlatCoordinates(r,o,a)},t.default=E},72:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(2),r=i(9),o=i(4),a=i(85),l=i(13),u=i(5),h=function(e){a.a.call(this),this.geometries_=e||null,this.listenGeometriesChange_()};Object(n.inherits)(h,a.a),h.cloneGeometries_=function(e){var t,i,n=[];for(t=0,i=e.length;t<i;++t)n.push(e[t].clone());return n},h.prototype.unlistenGeometriesChange_=function(){var e,t;if(this.geometries_)for(e=0,t=this.geometries_.length;e<t;++e)s.default.unlisten(this.geometries_[e],r.a.CHANGE,this.changed,this)},h.prototype.listenGeometriesChange_=function(){var e,t;if(this.geometries_)for(e=0,t=this.geometries_.length;e<t;++e)s.default.listen(this.geometries_[e],r.a.CHANGE,this.changed,this)},h.prototype.clone=function(){var e=new h(null);return e.setGeometries(this.geometries_),e},h.prototype.closestPointXY=function(e,t,i,n){if(n<Object(o.closestSquaredDistanceXY)(this.getExtent(),e,t))return n;var s,r,a=this.geometries_;for(s=0,r=a.length;s<r;++s)n=a[s].closestPointXY(e,t,i,n);return n},h.prototype.containsXY=function(e,t){var i,n,s=this.geometries_;for(i=0,n=s.length;i<n;++i)if(s[i].containsXY(e,t))return!0;return!1},h.prototype.computeExtent=function(e){Object(o.createOrUpdateEmpty)(e);for(var t=this.geometries_,i=0,n=t.length;i<n;++i)Object(o.extend)(e,t[i].getExtent());return e},h.prototype.getGeometries=function(){return h.cloneGeometries_(this.geometries_)},h.prototype.getGeometriesArray=function(){return this.geometries_},h.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()&&(u.default.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];var i,n,s=[],r=this.geometries_,o=!1;for(i=0,n=r.length;i<n;++i){var a=r[i],l=a.getSimplifiedGeometry(e);s.push(l),l!==a&&(o=!0)}if(o){var d=new h(null);return d.setGeometriesArray(s),this.simplifiedGeometryCache[t]=d,d}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},h.prototype.getType=function(){return l.default.GEOMETRY_COLLECTION},h.prototype.intersectsExtent=function(e){var t,i,n=this.geometries_;for(t=0,i=n.length;t<i;++t)if(n[t].intersectsExtent(e))return!0;return!1},h.prototype.isEmpty=function(){return 0===this.geometries_.length},h.prototype.rotate=function(e,t){for(var i=this.geometries_,n=0,s=i.length;n<s;++n)i[n].rotate(e,t);this.changed()},h.prototype.scale=function(e,t,i){var n=i;n||(n=Object(o.getCenter)(this.getExtent()));for(var s=this.geometries_,r=0,a=s.length;r<a;++r)s[r].scale(e,t,n);this.changed()},h.prototype.setGeometries=function(e){this.setGeometriesArray(h.cloneGeometries_(e))},h.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},h.prototype.applyTransform=function(e){var t,i,n=this.geometries_;for(t=0,i=n.length;t<i;++t)n[t].applyTransform(e);this.changed()},h.prototype.translate=function(e,t){var i,n,s=this.geometries_;for(i=0,n=s.length;i<n;++i)s[i].translate(e,t);this.changed()},h.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),a.a.prototype.disposeInternal.call(this)},t.default=h},75:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(40),r=i(87),o=i(76),a=i(84),l=i(2),u=i(43),h=i(83),d=i(4),c=i(66),f=i(80),_=i(13),p=i(30),g=i(51),v=i(45),m=i(53),y=i(27),C=i(42),E="drawstart",S="drawend",F=i(77),O=i(122),T=i(20),M=i(18),R=i(17),I=function(e){F.default.call(this,{handleDownEvent:I.handleDownEvent_,handleEvent:I.handleEvent,handleUpEvent:I.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=I.getMode_(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===I.Mode_.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:c.TRUE;var t=e.geometryFunction;if(!t)if(this.type_===_.default.CIRCLE)t=function(e,t){var i=t||new f.default([NaN,NaN]),n=a.default.squaredDistance(e[0],e[1]);return i.setCenterAndRadius(e[0],Math.sqrt(n)),i};else{var i,n=this.mode_;n===I.Mode_.POINT?i=y.default:n===I.Mode_.LINE_STRING?i=p.default:n===I.Mode_.POLYGON&&(i=C.default),t=function(e,t){var s=t;return s?n===I.Mode_.POLYGON?e[0].length?s.setCoordinates([e[0].concat([e[0][0]])]):s.setCoordinates([]):s.setCoordinates(e):s=new i(e),s}}this.geometryFunction_=t,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new T.default({source:new M.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:I.getDefaultStyleFunction()}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:h.default.noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=h.default.always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:h.default.shiftKeyOnly,l.default.listen(this,o.a.getChangeEventType(O.a.ACTIVE),this.updateState_,this)};Object(n.inherits)(I,F.default),I.getDefaultStyleFunction=function(){var e=R.default.createDefaultEditing();return function(t,i){return e[t.getGeometry().getType()]}},I.prototype.setMap=function(e){F.default.prototype.setMap.call(this,e),this.updateState_()},I.handleEvent=function(e){this.freehand_=this.mode_!==I.Mode_.POINT&&this.freehandCondition_(e);var t=!0;return this.freehand_&&e.type===r.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),t=!1):this.freehand_&&e.type===r.a.POINTERDOWN?t=!1:e.type===r.a.POINTERMOVE?t=this.handlePointerMove_(e):e.type===r.a.DBLCLICK&&(t=!1),F.default.handleEvent.call(this,e)&&t},I.handleDownEvent_=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):!!this.condition_(e)&&(this.downPx_=e.pixel,!0)},I.handleUpEvent_=function(e){var t=!0;this.handlePointerMove_(e);var i=this.mode_===I.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e):(this.startDrawing_(e),this.mode_===I.Mode_.POINT&&this.finishDrawing()),t=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!t&&this.stopClick_&&e.stopPropagation(),t},I.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,n=t[0]-i[0],s=t[1]-i[1],r=n*n+s*s;this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},I.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===I.Mode_.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===I.Mode_.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,n=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var s=e.map,r=0,o=n.length;r<o;r++){var a=n[r],l=s.getPixelFromCoordinate(a),u=e.pixel,h=u[0]-l[0],d=u[1]-l[1],c=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(h*h+d*d)<=c){this.finishCoordinate_=a;break}}}return t},I.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new s.default(new y.default(t)),this.updateSketchFeatures_())},I.prototype.startDrawing_=function(e){var t=e.coordinate;this.finishCoordinate_=t,this.mode_===I.Mode_.POINT?this.sketchCoords_=t.slice():this.mode_===I.Mode_.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[t.slice(),t.slice()],this.mode_===I.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new s.default(new p.default(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new s.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new I.Event(E,this.sketchFeature_))},I.prototype.modifyDrawing_=function(e){var t,i,n=e.coordinate,r=this.sketchFeature_.getGeometry();(this.mode_===I.Mode_.POINT?i=this.sketchCoords_:this.mode_===I.Mode_.POLYGON?(i=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(e)&&(n=this.finishCoordinate_.slice())):i=(t=this.sketchCoords_)[t.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(n);if(r instanceof C.default&&this.mode_!==I.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new s.default(new p.default(null)));var o=r.getLinearRing(0);this.sketchLine_.getGeometry().setFlatCoordinates(o.getLayout(),o.getFlatCoordinates())}else this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},I.prototype.addToDrawing_=function(e){var t,i,n=e.coordinate,s=this.sketchFeature_.getGeometry();this.mode_===I.Mode_.LINE_STRING?(this.finishCoordinate_=n.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(n.slice()),this.geometryFunction_(i,s)):this.mode_===I.Mode_.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(n.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,s)),this.updateSketchFeatures_(),t&&this.finishDrawing()},I.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry();this.mode_===I.Mode_.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===I.Mode_.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},I.prototype.finishDrawing=function(){var e=this.abortDrawing_(),t=this.sketchCoords_,i=e.getGeometry();this.mode_===I.Mode_.LINE_STRING?(t.pop(),this.geometryFunction_(t,i)):this.mode_===I.Mode_.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i),t=i.getCoordinates()),this.type_===_.default.MULTI_POINT?e.setGeometry(new v.default([t])):this.type_===_.default.MULTI_LINE_STRING?e.setGeometry(new g.default([t])):this.type_===_.default.MULTI_POLYGON&&e.setGeometry(new m.default([t])),this.dispatchEvent(new I.Event(S,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)},I.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),e},I.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new I.Event(E,this.sketchFeature_))},I.prototype.shouldStopEvent=c.FALSE,I.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},I.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing_(),this.overlay_.setMap(t?e:null)},I.createRegularPolygon=function(e,t){return function(i,n){var s=i[0],r=i[1],o=Math.sqrt(a.default.squaredDistance(s,r)),l=n||Object(C.fromCircle)(new f.default(s),e),u=t||Math.atan((r[1]-s[1])/(r[0]-s[0]));return Object(C.makeRegular)(l,s,o,u),l}},I.createBox=function(){return function(e,t){var i=Object(d.boundingExtent)(e),n=t||new C.default(null);return n.setCoordinates([[Object(d.getBottomLeft)(i),Object(d.getBottomRight)(i),Object(d.getTopRight)(i),Object(d.getTopLeft)(i),Object(d.getBottomLeft)(i)]]),n}},I.getMode_=function(e){var t;return e===_.default.POINT||e===_.default.MULTI_POINT?t=I.Mode_.POINT:e===_.default.LINE_STRING||e===_.default.MULTI_LINE_STRING?t=I.Mode_.LINE_STRING:e===_.default.POLYGON||e===_.default.MULTI_POLYGON?t=I.Mode_.POLYGON:e===_.default.CIRCLE&&(t=I.Mode_.CIRCLE),t},I.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},I.Event=function(e,t){u.default.call(this,e),this.feature=t},Object(n.inherits)(I.Event,u.default);t.default=I},80:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(4),r=i(24),o=i(13),a=i(44),l=i(46),u=function(e,t,i){a.a.call(this);var n=t||0;this.setCenterAndRadius(e,n,i)};Object(n.inherits)(u,a.a),u.prototype.clone=function(){var e=new u(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},u.prototype.closestPointXY=function(e,t,i,n){var s=this.flatCoordinates,r=e-s[0],o=t-s[1],a=r*r+o*o;if(a<n){var l;if(0===a)for(l=0;l<this.stride;++l)i[l]=s[l];else{var u=this.getRadius()/Math.sqrt(a);for(i[0]=s[0]+u*r,i[1]=s[1]+u*o,l=2;l<this.stride;++l)i[l]=s[l]}return i.length=this.stride,a}return n},u.prototype.containsXY=function(e,t){var i=this.flatCoordinates,n=e-i[0],s=t-i[1];return n*n+s*s<=this.getRadiusSquared_()},u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},u.prototype.computeExtent=function(e){var t=this.flatCoordinates,i=t[this.stride]-t[0];return Object(s.createOrUpdate)(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)},u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},u.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t},u.prototype.getType=function(){return o.default.CIRCLE},u.prototype.intersectsExtent=function(e){var t=this.getExtent();if(Object(s.intersects)(e,t)){var i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||(e[1]<=i[1]&&e[3]>=i[1]||Object(s.forEachCorner)(e,this.intersectsCoordinate,this))}return!1},u.prototype.setCenter=function(e){var t,i=this.stride,n=this.flatCoordinates[i]-this.flatCoordinates[0],s=e.slice();for(s[i]=s[0]+n,t=1;t<i;++t)s[i+t]=e[t];this.setFlatCoordinates(this.layout,s)},u.prototype.setCenterAndRadius=function(e,t,i){if(e){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var n,s,o=this.flatCoordinates,a=l.a.coordinate(o,0,e,this.stride);for(o[a++]=o[0]+t,n=1,s=this.stride;n<s;++n)o[a++]=o[n];o.length=a,this.changed()}else this.setFlatCoordinates(r.default.XY,null)},u.prototype.getCoordinates=function(){},u.prototype.setCoordinates=function(e,t){},u.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},u.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},u.prototype.transform,t.default=u},86:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(i(21)),s=g(i(3)),r=g(i(68)),o=(g(i(40)),g(i(107)),g(i(139))),a=g(i(133)),l=g(i(2)),u=g(i(82)),h=g(i(20)),d=g(i(143)),c=g(i(18)),f=g(i(65)),_=g(i(78)),p=g(i(17));function g(e){return e&&e.__esModule?e:{default:e}}ngeo.interaction.MeasureBaseOptions;var v=function e(t){var i=void 0!==t?t:{};u.default.call(this,{handleEvent:e.handleEvent_}),this.helpTooltipElement_=null,this.helpTooltipOverlay_=null,this.measureTooltipElement_=null,this.measureTooltipOverlay_=null,this.measureTooltipOverlayCoord_=null,this.sketchFeature=null,this.continueMsg=null,this.decimals=i.decimals,this.precision=i.precision,this.displayHelpTooltip_=void 0===i.displayHelpTooltip||i.displayHelpTooltip,this.startMsg,void 0!==i.startMsg?this.startMsg=i.startMsg:(this.startMsg=document.createElement("span"),this.startMsg.textContent="Click to start drawing."),this.changeEventKey_=null,this.postcomposeEventKey_=null;var n=void 0!==i.style?i.style:[new p.default({fill:new f.default({color:"rgba(255, 255, 255, 0.2)"})}),new p.default({stroke:new _.default({color:"white",width:5})}),new p.default({stroke:new _.default({color:"#ffcc33",width:3})})];this.vectorLayer_=new h.default({source:new c.default,style:n}),this.drawInteraction_=this.createDrawInteraction(i.sketchStyle,this.vectorLayer_.getSource()),this.shouldHandleDrawInteractionActiveChange_=!0,l.default.listen(this.drawInteraction_,"change:active",this.handleDrawInteractionActiveChange_,this),l.default.listen(this.drawInteraction_,"drawstart",this.onDrawStart_,this),l.default.listen(this.drawInteraction_,"drawend",this.onDrawEnd_,this),l.default.listen(this,"change:active",this.updateState_,this)};ol.inherits(v,u.default),v.SPHERE_WGS84=new a.default(d.default.RADIUS),v.getFormattedArea=function(e,t,i,n){var s=e.clone().transform(t,"EPSG:4326").getLinearRing(0).getCoordinates();return n(Math.abs(v.SPHERE_WGS84.geodesicArea(s)),"mÂ²","square",i)},v.getFormattedCircleArea=function(e,t,i){return i(Math.PI*Math.pow(e.getRadius(),2),"mÂ²","square",t)},v.getFormattedLength=function(e,t,i,n){for(var s=0,r=e.getCoordinates(),o=0,a=r.length-1;o<a;++o){var l=ol.proj.transform(r[o],t,"EPSG:4326"),u=ol.proj.transform(r[o+1],t,"EPSG:4326");s+=v.SPHERE_WGS84.haversineDistance(l,u)}return n(s,"m","unit",i)},v.getFormattedPoint=function(e,t,i,n){return i(e.getCoordinates(),t,n)},v.handleEvent_=function(e){if("pointermove"!=e.type||e.dragging)return!0;var t=this.startMsg;return null!==this.sketchFeature&&(t=this.continueMsg),this.displayHelpTooltip_&&(r.default.removeChildren(this.helpTooltipElement_),this.helpTooltipElement_.appendChild(t),this.helpTooltipOverlay_.setPosition(e.coordinate)),!0},v.prototype.getDrawInteraction=function(){return this.drawInteraction_},v.prototype.createDrawInteraction=function(e,t){},v.prototype.setMap=function(e){u.default.prototype.setMap.call(this,e),this.vectorLayer_.setMap(e);var t=this.drawInteraction_.getMap();null!==t&&t.removeInteraction(this.drawInteraction_),null!==e&&e.addInteraction(this.drawInteraction_)},v.prototype.onDrawStart_=function(e){var t=this;this.sketchFeature=e.feature,this.vectorLayer_.getSource().clear(!0),this.createMeasureTooltip_();var i=this.sketchFeature.getGeometry();s.default.assert(void 0!==i),this.changeEventKey_=l.default.listen(i,"change",function(){t.handleMeasure(function(e,i){null!==i&&(t.measureTooltipElement_.innerHTML=e,t.measureTooltipOverlayCoord_=i)})}),this.postcomposeEventKey_=l.default.listen(this.getMap(),"postcompose",function(){t.measureTooltipOverlay_.setPosition(t.measureTooltipOverlayCoord_)})},v.prototype.onDrawEnd_=function(e){this.measureTooltipElement_.classList.add("ngeo-tooltip-static"),this.measureTooltipOverlay_.setOffset([0,-7]);var t=new n.default("measureend",{feature:this.sketchFeature});this.dispatchEvent(t),this.sketchFeature=null,s.default.assert(null!==this.changeEventKey_),s.default.assert(null!==this.postcomposeEventKey_),l.default.unlistenByKey(this.changeEventKey_),l.default.unlistenByKey(this.postcomposeEventKey_),this.changeEventKey_=null,this.postcomposeEventKey_=null},v.prototype.createHelpTooltip_=function(){this.removeHelpTooltip_(),this.displayHelpTooltip_&&(this.helpTooltipElement_=document.createElement("div"),this.helpTooltipElement_.classList.add("tooltip"),this.helpTooltipOverlay_=new o.default({element:this.helpTooltipElement_,offset:[15,0],positioning:"center-left"}),this.getMap().addOverlay(this.helpTooltipOverlay_))},v.prototype.removeHelpTooltip_=function(){this.displayHelpTooltip_&&(this.getMap().removeOverlay(this.helpTooltipOverlay_),null!==this.helpTooltipElement_&&this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_),this.helpTooltipElement_=null,this.helpTooltipOverlay_=null)},v.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_(),this.measureTooltipElement_=document.createElement("div"),this.measureTooltipElement_.classList.add("tooltip"),this.measureTooltipElement_.classList.add("ngeo-tooltip-measure"),this.measureTooltipOverlay_=new o.default({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),this.getMap().addOverlay(this.measureTooltipOverlay_)},v.prototype.removeMeasureTooltip_=function(){null!==this.measureTooltipElement_&&(this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_),this.measureTooltipElement_=null,this.measureTooltipOverlay_=null,this.measureTooltipOverlayCoord_=null)},v.prototype.updateState_=function(){var e=this.getActive();this.shouldHandleDrawInteractionActiveChange_=!1,this.drawInteraction_.setActive(e),this.shouldHandleDrawInteractionActiveChange_=!0,this.getMap()&&(e?this.measureTooltipOverlay_||(this.createMeasureTooltip_(),this.createHelpTooltip_()):(this.vectorLayer_.getSource().clear(!0),this.getMap().removeOverlay(this.measureTooltipOverlay_),this.removeMeasureTooltip_(),this.removeHelpTooltip_()))},v.prototype.handleMeasure=function(e){},v.prototype.getTooltipElement=function(){return this.measureTooltipElement_},v.prototype.handleDrawInteractionActiveChange_=function(){this.shouldHandleDrawInteractionActiveChange_&&this.setActive(this.drawInteraction_.getActive())},t.default=v}},[339]);
//# sourceMappingURL=modifycircle.min.js.map