webpackJsonp([11],{106:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(1);(n=o)&&n.__esModule;e.default=function(t,e){this.getActive=function(){return t[e]},this.setActive=function(i){t[e]=i}}},11:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var n="1.3.0"},110:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(1),s=(n=o)&&n.__esModule?n:{default:n};var r=angular.module("ngeoBtnComponent",[]);s.default.module.requires.push(r.name),r.btnGroupComponent_=function(t){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(e,i,n,o){var s=t(n.ngeoBtnGroupActive).assign;s&&e.$watch(function(){return o.buttons_.some(function(t){return!0===t(e)})},function(t){s(e,t)})}}},r.directive("ngeoBtnGroup",r.btnGroupComponent_),r.BtnGroupController=function(t){this.buttons_=[],this.scope_=t},r.BtnGroupController.prototype.activate=function(t){this.buttons_.forEach(function(e,i){i!=t&&e.assign(this.scope_,!1)},this)},r.BtnGroupController.prototype.addButton=function(t){return this.buttons_.push(t),this.buttons_.length-1},r.controller("ngeoBtnGroupController",r.BtnGroupController),r.btnComponent_=function(t){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(e,i,n,o){var s=o[0],r=o[1],a=-1,u=t(n.ngModel),l=u.assign;void 0===u(e)&&l(e,!1),null!==s&&(a=s.addButton(u)),i.on("click",function(){e.$apply(function(){r.$setViewValue(!r.$viewValue),r.$render()})}),r.$render=function(){r.$viewValue&&null!==s&&s.activate(a),i.toggleClass("active",r.$viewValue)}}}},r.directive("ngeoBtn",r.btnComponent_),e.default=r},119:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(3)),o=(h(i(1)),h(i(82))),s=h(i(134)),r=h(i(52)),a=h(i(50)),u=h(i(57)),l=h(i(138));function h(t){return t&&t.__esModule?t:{default:t}}var d={interaction:function(t){n.default.assertInstanceof(t,o.default),Object.defineProperty(t,"active",{get:function(){return t.getActive()},set:function(e){t.setActive(e)}})},layer:function(t){n.default.assertInstanceof(t,s.default),Object.defineProperty(t,"visible",{configurable:!0,get:function(){return t.getVisible()},set:function(e){t.setVisible(e)}}),Object.defineProperty(t,"opacity",{configurable:!0,get:function(){return t.getOpacity()},set:function(e){t.setOpacity(e)}})},layerLoading:function(t,e){var i=void 0,o=null,s=null,h=function t(e){var i=e.get("load_count");var n=e.get("parent_group");e.set("load_count",++i,!0);n&&t(n)},d=function t(e){var i=e.get("load_count");var n=e.get("parent_group");e.set("load_count",--i,!0);n&&t(n)};if(t.set("load_count",0,!0),t instanceof r.default&&t.getLayers().on("add",function(e){e.element.set("parent_group",t)}),t instanceof a.default){if(null===(i=t.getSource()))return;i instanceof l.default?(o=["tileloadstart"],s=["tileloadend","tileloaderror"]):i instanceof u.default?(o=["imageloadstart"],s=["imageloadend","imageloaderror"]):n.default.fail("unsupported source type"),i.on(o,function(){h(t),e.$applyAsync()}),i.on(s,function(){d(t),e.$applyAsync()})}Object.defineProperty(t,"loading",{configurable:!0,get:function(){return t.get("load_count")>0}})}};e.default=d},12:function(t,e,i){"use strict";e.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},130:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(1)),o=s(i(3));s(i(106));function s(t){return t&&t.__esModule?t:{default:t}}var r=function(t){this.groups_={},this.scope_=t};r.$inject=["$rootScope"],r.$inject=["$rootScope"],r.prototype.registerTool=function(t,e,i){var n=this,s=this.groups_[t];s||(s=this.groups_[t]=[]);var r=this.scope_.$watch(e.getActive,function(i,o){i!==o&&(i?n.deactivateTools_(t,e):n.activateDefault_(t))});if(s.push({tool:e,defaultTool:i||!1,unlisten:r}),o.default.ENABLE_ASSERTS){var a=0;s.forEach(function(t){t.defaultTool&&a++}),o.default.assert(a<=1,"more than one default tool in group "+t)}},r.prototype.unregisterTool=function(t,e){var i=this.groups_[t];if(i)for(var n=0;n<i.length;n++)if(i[n].tool==e){i[n].unlisten(),i.splice(n,1);break}},r.prototype.unregisterGroup=function(t){var e=this.groups_[t];if(e){for(var i=0;i<e.length;i++)e[i].unlisten();delete this.groups_[t]}},r.prototype.activateTool=function(t){t.setActive(!0)},r.prototype.deactivateTool=function(t){t.setActive(!1)},r.prototype.deactivateTools_=function(t,e){for(var i=this.groups_[t],n=0;n<i.length;n++)e!=i[n].tool&&i[n].tool.setActive(!1)},r.prototype.activateDefault_=function(t){for(var e=this.groups_[t],i=null,n=!1,o=0;o<e.length;o++)n=n||e[o].tool.getActive(),e[o].defaultTool&&(i=e[o].tool);n||null===i||i.setActive(!0)},(r.module=angular.module("ngeoToolActivateMgr",[])).service("ngeoToolActivateMgr",r),n.default.module.requires.push(r.module.name),e.default=r},16:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),o=i(0),s=i(63),r=i(56),a=i(2),u=i(9),l=i(4),h=function(t,e,i,n,o,a){s.a.call(this,t,e,i,r.a.IDLE),this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=r.a.IDLE,this.imageLoadFunction_=a};Object(o.inherits)(h,s.a),h.prototype.getImage=function(){return this.image_},h.prototype.handleImageError_=function(){this.state=r.a.ERROR,this.unlistenImage_(),this.changed()},h.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.getHeight)(this.extent)/this.image_.height),this.state=r.a.LOADED,this.unlistenImage_(),this.changed()},h.prototype.load=function(){this.state!=r.a.IDLE&&this.state!=r.a.ERROR||(this.state=r.a.LOADING,this.changed(),this.imageListenerKeys_=[a.default.listenOnce(this.image_,u.a.ERROR,this.handleImageError_,this),a.default.listenOnce(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},h.prototype.setImage=function(t){this.image_=t},h.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.default.unlistenByKey),this.imageListenerKeys_=null};var d=h,c=i(10),f=i(5),_=i(6),p=i(28),g=i(57),v=i(12),m=i(15),y=i(22),C=function(t){var e=t||{};g.default.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:g.default.defaultImageLoadFunction,this.params_=e.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5};Object(o.inherits)(C,g.default),C.GETFEATUREINFO_IMAGE_SIZE_=[101,101],C.prototype.getGetFeatureInfoUrl=function(t,e,i,o){if(void 0!==this.url_){var s=Object(_.get)(i),r=this.getProjection();r&&r!==s&&(e=p.a.calculateSourceResolution(r,s,t,e),t=Object(_.transform)(t,s,r));var a=Object(l.getForViewAndSize)(t,e,0,C.GETFEATUREINFO_IMAGE_SIZE_),u={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};f.default.assign(u,this.params_,o);var h=Math.floor((t[0]-a[0])/e),d=Math.floor((a[3]-t[1])/e);return u[this.v13_?"I":"X"]=h,u[this.v13_?"J":"Y"]=d,this.getRequestUrl_(a,C.GETFEATUREINFO_IMAGE_SIZE_,1,r||s,u)}},C.prototype.getParams=function(){return this.params_},C.prototype.getImageInternal=function(t,e,i,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var s=e/i,r=Object(l.getCenter)(t),h=Math.ceil(Object(l.getWidth)(t)/s),c=Math.ceil(Object(l.getHeight)(t)/s),_=Object(l.getForViewAndSize)(r,s,0,[h,c]),p=Math.ceil(this.ratio_*Object(l.getWidth)(t)/s),g=Math.ceil(this.ratio_*Object(l.getHeight)(t)/s),v=Object(l.getForViewAndSize)(r,s,0,[p,g]),m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==e&&m.getPixelRatio()==i&&Object(l.containsExtent)(m.getExtent(),_))return m;var y={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};f.default.assign(y,this.params_),this.imageSize_[0]=Math.round(Object(l.getWidth)(v)/s),this.imageSize_[1]=Math.round(Object(l.getHeight)(v)/s);var C=this.getRequestUrl_(v,this.imageSize_,i,o,y);return this.image_=new d(v,e,i,C,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),a.default.listen(this.image_,u.a.CHANGE,this.handleImageChange,this),this.image_},C.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},C.prototype.getRequestUrl_=function(t,e,i,n,o){if(Object(c.a)(void 0!==this.url_,9),o[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=i)switch(this.serverType_){case v.a.GEOSERVER:var s=90*i+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case v.a.MAPSERVER:o.MAP_RESOLUTION=90*i;break;case v.a.CARMENTA_SERVER:case v.a.QGIS:o.DPI=90*i;break;default:Object(c.a)(!1,8)}o.WIDTH=e[0],o.HEIGHT=e[1];var r,a=n.getAxisOrientation();return r=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,o.BBOX=r.join(","),y.default.appendParams(this.url_,o)},C.prototype.getUrl=function(){return this.url_},C.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},C.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},C.prototype.updateParams=function(t){f.default.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},C.prototype.updateV13_=function(){var t=this.params_.VERSION||n.a;this.v13_=m.default.compareVersions(t,"1.3")>=0};e.default=C},21:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(0)),o=s(i(43));function s(t){return t&&t.__esModule?t:{default:t}}var r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.default.call(this,t),this.detail=e};n.default.inherits(r,o.default),e.default=r},23:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(11),o=i(0),s=i(10),r=i(4),a=i(5),u=i(14),l=i(6),h=i(28),d=i(60),c=i(41),f=i(12),_=i(61),p=i(15),g=i(22),v=function(t){var e=t||{},i=e.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;c.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=Object(r.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(o.inherits)(v,c.a),v.prototype.getGetFeatureInfoUrl=function(t,e,i,o){var s=Object(l.get)(i),u=this.getProjection(),c=this.getTileGrid();c||(c=this.getTileGridForProjection(s));var f=c.getTileCoordForCoordAndResolution(t,e);if(!(c.getResolutions().length<=f[0])){var _=c.getResolution(f[0]),p=c.getTileCoordExtent(f,this.tmpExtent_),g=d.default.toSize(c.getTileSize(f[0]),this.tmpSize),v=this.gutter_;0!==v&&(g=d.default.buffer(g,v,this.tmpSize),p=Object(r.buffer)(p,_*v,p)),u&&u!==s&&(_=h.a.calculateSourceResolution(u,s,t,_),p=Object(l.transformExtent)(p,s,u),t=Object(l.transform)(t,s,u));var m={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};a.default.assign(m,this.params_,o);var y=Math.floor((t[0]-p[0])/_),C=Math.floor((p[3]-t[1])/_);return m[this.v13_?"I":"X"]=y,m[this.v13_?"J":"Y"]=C,this.getRequestUrl_(f,g,p,1,u||s,m)}},v.prototype.getGutterInternal=function(){return this.gutter_},v.prototype.getParams=function(){return this.params_},v.prototype.getRequestUrl_=function(t,e,i,n,o,r){var a=this.urls;if(a){if(r.WIDTH=e[0],r.HEIGHT=e[1],r[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=n)switch(this.serverType_){case f.a.GEOSERVER:var l=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+l:r.FORMAT_OPTIONS="dpi:"+l;break;case f.a.MAPSERVER:r.MAP_RESOLUTION=90*n;break;case f.a.CARMENTA_SERVER:case f.a.QGIS:r.DPI=90*n;break;default:Object(s.a)(!1,52)}var h,d,c=o.getAxisOrientation(),p=i;if(this.v13_&&"ne"==c.substr(0,2))h=i[0],p[0]=i[1],p[1]=h,h=i[2],p[2]=i[3],p[3]=h;if(r.BBOX=p.join(","),1==a.length)d=a[0];else d=a[Object(u.modulo)(_.a.hash(t),a.length)];return g.default.appendParams(d,r)}},v.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},v.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},v.prototype.fixedTileUrlFunction=function(t,e,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var s=o.getResolution(t[0]),u=o.getTileCoordExtent(t,this.tmpExtent_),l=d.default.toSize(o.getTileSize(t[0]),this.tmpSize),h=this.gutter_;0!==h&&(l=d.default.buffer(l,h,this.tmpSize),u=Object(r.buffer)(u,s*h,u)),1!=e&&(l=d.default.scale(l,e,this.tmpSize));var c={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return a.default.assign(c,this.params_),this.getRequestUrl_(t,l,u,e,i,c)}},v.prototype.updateParams=function(t){a.default.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},v.prototype.updateV13_=function(){var t=this.params_.VERSION||n.a;this.v13_=p.default.compareVersions(t,"1.3")>=0},e.default=v},25:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(1);(n=s)&&n.__esModule;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.inRange_=!1!==e.inRange,this.visible_=!0===e.visible,this.attributes=e.attributes||null,this.id_=e.id,this.identifierAttribute_=e.identifierAttribute,this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.name_=e.name}return o(t,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(t){this.attributes=t}},{key:"inRange",get:function(){return this.inRange_},set:function(t){this.inRange_=t}},{key:"visible",get:function(){return this.visible_},set:function(t){this.visible_=t}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),t}();e.default=r},26:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(1)),o=s(i(47));function s(t){return t&&t.__esModule?t:{default:t}}var r={};n.default.module.value("ngeoDataSources",new o.default),e.default=r},29:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i(1)),o=d(i(0)),s=d(i(20)),r=d(i(5)),a=d(i(18)),u=d(i(17)),l=d(i(3)),h=d(i(36));function d(t){return t&&t.__esModule?t:{default:t}}var c=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new a.default({useSpatialIndex:!1}),this.layer_=new s.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};c.prototype.addFeature=function(t,e){l.default.assert(e>=0),l.default.assert(e<this.groups_.length);var i=o.default.getUid(t).toString();this.featureUidToGroupIndex_[i]=e,this.groups_[e].features[i]=t,this.source_.addFeature(t)},c.prototype.removeFeature=function(t,e){l.default.assert(e>=0),l.default.assert(e<this.groups_.length);var i=o.default.getUid(t).toString();delete this.featureUidToGroupIndex_[i],delete this.groups_[e].features[i],this.source_.removeFeature(t)},c.prototype.clear=function(t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var e=this.groups_[t];for(var i in e.features)this.removeFeature(e.features[i],t);l.default.assert(r.default.isEmpty(e.features))},c.prototype.getLayer=function(){return this.layer_},c.prototype.getFeatureOverlay=function(){var t=this.groups_.length;return this.groups_.push({styleFunction:u.default.defaultFunction,features:{}}),new h.default(this,t)},c.prototype.init=function(t){this.layer_.setMap(t)},c.prototype.setStyle=function(t,e){l.default.assert(e>=0),l.default.assert(e<this.groups_.length),this.groups_[e].styleFunction=null===t?u.default.defaultFunction:u.default.createFunction(t)},c.prototype.styleFunction_=function(t,e){var i=o.default.getUid(t).toString();l.default.assert(i in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[i];return this.groups_[n].styleFunction(t,e)},(c.module=angular.module("ngeoFeatureOverlayMgr",[h.default.module.name])).service("ngeoFeatureOverlayMgr",c),n.default.module.requires.push(c.module.name),e.default=c},3:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={assert:function(t,e,i){},assertNumber:function(t,e,i){},assertString:function(t,e,i){},assertFunction:function(t,e,i){},assertObject:function(t,e,i){},assertArray:function(t,e,i){},assertBoolean:function(t,e,i){},assertElement:function(t,e,i){},assertInstanceof:function(t,e,i,n){},assertObjectPrototypeIsIntact:function(){}};e.default=n},32:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(i(1)),o=h(i(33)),s=h(i(34)),r=h(i(29)),a=h(i(37)),u=h(i(38)),l=h(i(39));function h(t){return t&&t.__esModule?t:{default:t}}var d=angular.module("ngeoMapModule",[n.default.module.name,o.default.module.name,s.default.name,r.default.module.name,a.default.name,u.default.name,l.default.name]);e.default=d},33:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=f(i(3)),o=f(i(1)),s=f(i(21)),r=f(i(0)),a=f(i(19)),u=f(i(52)),l=f(i(50)),h=f(i(16)),d=f(i(23)),c=f(i(58));function f(t){return t&&t.__esModule?t:{default:t}}var _=function(){a.default.call(this),this.mapUids_={}};r.default.inherits(_,a.default),_.prototype.get=function(t){return r.default.getUid(t).toString()in this.mapUids_?t.getLayers().item(0):null},_.prototype.set=function(t,e){var i=r.default.getUid(t).toString(),o=this.get(t);null!==o?(n.default.assert(i in this.mapUids_),null!==e?t.getLayers().setAt(0,e):(t.getLayers().removeAt(0),delete this.mapUids_[i])):null!==e&&(t.getLayers().insertAt(0,e),this.mapUids_[i]=!0);var a=new s.default("change",{current:e,previous:o});return this.dispatchEvent(a),o},_.prototype.updateDimensions=function(t,e){var i=this.get(t);if(i){var o=[i];i instanceof u.default&&(o=i.getLayers().getArray()),o.forEach(function(t){if(n.default.assertInstanceof(t,l.default),t){var i=!1,o={};for(var s in t.get("dimensions")){var r=e[s];void 0!==r&&(o[s]=r,i=!0)}if(i){var a=t.getSource();a instanceof c.default?(a.updateDimensions(o),a.refresh()):(a instanceof d.default||a instanceof h.default)&&(a.updateParams(o),a.refresh())}}})}},(_.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",_),o.default.module.requires.push(_.module.name),e.default=_},34:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(3)),o=a(i(1)),s=(a(i(35)),a(i(2))),r=a(i(7));function a(t){return t&&t.__esModule?t:{default:t}}var u=angular.module("ngeoMap",[]);o.default.module.requires.push(u.name),u.directive_=function(t,e){return{restrict:"A",link:function(i,o,a){var u=a.ngeoMap,l=i.$eval(u);n.default.assertInstanceof(l,r.default),l.setTarget(o[0]),e.map=l;var h=a.ngeoMapManageResize;if(i.$eval(h)){var d=a.ngeoMapResizeTransition,c=i.$eval(d);s.default.listen(t,"resize",function(){if(c){var e=Date.now(),i=!0;!function n(){l.updateSize(),l.renderSync(),i&&t.requestAnimationFrame(n),Date.now()-e>c&&(i=!1)}()}else l.updateSize()})}}}},u.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],u.directive("ngeoMap",u.directive_),e.default=u},35:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=h(i(1)),s=h(i(25)),r=(h(i(26)),h(i(2))),a=h(i(19)),u=h(i(31)),l=h(i(3));function h(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ngeoDataSources_=e,this.map_=null,this.listenerKeys_=[],r.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return t.$inject=["ngeoDataSources"],n(t,[{key:"bindMap_",value:function(t){var e=t.getView();this.listenerKeys_.push(r.default.listen(e,"change:resolution",this.handleViewResolutionChange_,this));var i=e.getResolution();l.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"unbindMap_",value:function(t){a.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(t){var e=t.target;l.default.assertInstanceof(e,u.default);var i=e.getResolution();l.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"syncDataSourcesToResolution_",value:function(t){var e=this;this.ngeoDataSources_.forEach(function(i){e.syncDataSourceToResolution_(i,t)})}},{key:"syncDataSourceToResolution_",value:function(t,e){if(t.supportsDynamicInRange){var i=t.maxResolution,n=t.minResolution,o=(null===n||void 0===n||e>=n)&&(null===i||void 0===i||e<=i);t.inRange=o}}},{key:"handleDataSourcesAdd_",value:function(t){var e=l.default.assertInstanceof(t.element,s.default);if(this.map_){var i=this.map_.getView().getResolution();l.default.assertNumber(i),this.syncDataSourceToResolution_(e,i)}}},{key:"map",set:function(t){this.map_&&this.unbindMap_(this.map_),this.map_=t,t&&this.bindMap_(t)}}]),t}();o.default.module.service("ngeoSyncDataSourcesMap",d),e.default=d},36:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(i(1)),o=(s(i(0)),s(i(2)));function s(t){return t&&t.__esModule?t:{default:t}}var r=function(t,e){this.manager_=t,this.features_=null,this.index_=e};r.prototype.addFeature=function(t){this.manager_.addFeature(t,this.index_)},r.prototype.removeFeature=function(t){this.manager_.removeFeature(t,this.index_)},r.prototype.clear=function(){this.manager_.clear(this.index_)},r.prototype.setFeatures=function(t){null!==this.features_&&(this.features_.clear(),o.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),o.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==t&&(t.forEach(function(t){this.addFeature(t)},this),o.default.listen(t,"add",this.handleFeatureAdd_,this),o.default.listen(t,"remove",this.handleFeatureRemove_,this)),this.features_=t},r.prototype.setStyle=function(t){this.manager_.setStyle(t,this.index_)},r.prototype.handleFeatureAdd_=function(t){var e=t.element;this.addFeature(e)},r.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature(e)},r.module=angular.module("ngeoFeatureOverlay",[]),n.default.module.requires.push(r.module.name),e.default=r},364:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(!function(){var t=new Error('Cannot find module "examples/toolActivate.css"');throw t.code="MODULE_NOT_FOUND",t}()),i(59);var n=y(i(32)),o=y(i(110)),s=y(i(119)),r=y(i(106)),a=y(i(130)),u=y(i(47)),l=y(i(7)),h=y(i(31)),d=(y(i(0)),y(i(84))),c=y(i(75)),f=y(i(62)),_=y(i(48)),p=y(i(108)),g=y(i(65)),v=y(i(78)),m=y(i(17));function y(t){return t&&t.__esModule?t:{default:t}}app.module=angular.module("app",[ngeo.module.name,n.default.name,o.default.name,a.default.module.name]),app.MainController=function(t,e){var i=this;this.map=new l.default({layers:[new f.default({source:new _.default})],view:new h.default({center:[1444682,5979706],zoom:4})});var n=this.map;t.init(n);var o=new u.default,a=t.getFeatureOverlay();a.setFeatures(o),a.setStyle(new m.default({fill:new g.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new v.default({color:"#ffcc33",width:2}),image:new p.default({radius:7,fill:new g.default({color:"#ffcc33"})})})),this.mapClickIsEnabled=!0;var y=document.getElementById("popup-content");this.map.on("singleclick",function(t){if(i.mapClickIsEnabled){var e=d.default.toStringXY(t.coordinate);y.innerHTML="<p>You clicked here: <code>"+e+"</code></p>"}});var C=new r.default(this,"mapClickIsEnabled");e.registerTool("mapTools",C,!0),this.drawPoint=new c.default({type:"Point",features:o}),this.drawPoint.setActive(!1),s.default.interaction(this.drawPoint),n.addInteraction(this.drawPoint);var O=new r.default(this.drawPoint,"active");e.registerTool("mapTools",O),this.drawLine=new c.default({type:"LineString",features:o}),this.drawLine.setActive(!1),s.default.interaction(this.drawLine),n.addInteraction(this.drawLine);var R=new r.default(this.drawLine,"active");e.registerTool("mapTools",R),this.drawPolygon=new c.default({type:"Polygon",features:o}),this.drawPolygon.setActive(!1),s.default.interaction(this.drawPolygon),n.addInteraction(this.drawPolygon);var S=new r.default(this.drawPolygon,"active");e.registerTool("mapTools",S)},app.MainController.$inject=["ngeoFeatureOverlayMgr","ngeoToolActivateMgr"],app.module.controller("MainController",app.MainController),e.default={}},37:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=i(1),s=(n=o)&&n.__esModule?n:{default:n};var r=angular.module("ngeoRecenter",[]);s.default.module.requires.push(r.name),r.directive_=function(){return{restrict:"A",link:function(t,e,i){var n=i.ngeoRecenterMap,o=t.$eval(n);function s(e){var i=e.attr("ngeo-extent");if(void 0!==i){var n=o.getSize();o.getView().fit(t.$eval(i),{size:n})}var s=e.attr("ngeo-zoom");void 0!==s&&o.getView().setZoom(t.$eval(s))}e.on("click","*",function(t){s(angular.element($(this)))}),e.on("change",function(t){var e=t.target.options[t.target.selectedIndex];s(angular.element(e))})}}},r.directive("ngeoRecenter",r.directive_),e.default=r},38:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(3)),o=r(i(1)),s=r(i(7));function r(t){return t&&t.__esModule?t:{default:t}}var a=angular.module("ngeoResizemap",[]);o.default.module.requires.push(a.name),a.directive_=function(t){return{restrict:"A",link:function(e,i,o){var r=o.ngeoResizemap,a=e.$eval(r);n.default.assertInstanceof(a,s.default);var u=o.ngeoResizemapState;n.default.assert(void 0!==u);var l=void 0,h=void 0,d=function e(){a.updateSize(),a.renderSync(),Date.now()-l<1e3&&(h=t.requestAnimationFrame(e))};i.on("transitionend",function(){a.updateSize(),a.renderSync()}),e.$watch(u,function(e,i){e!=i&&(l=Date.now(),t.cancelAnimationFrame(h),h=t.requestAnimationFrame(d))})}}},a.directive("ngeoResizemap",a.directive_),e.default=a},39:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(i(1)),o=a(i(8)),s=a(i(7)),r=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var u=angular.module("ngeoScaleselector",[]);n.default.module.requires.push(u.name),u.value("ngeoScaleselectorTemplateUrl",function(t,e){var i=e.ngeoScaleselectorTemplateurl;return void 0!==i?i:n.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),u.directive_=function(t){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:t}},u.directive("ngeoScaleselector",u.directive_),u.ScaleselectorController_=function(t,e,i){var n=this,a=i.ngeoScaleselector;this.scales=t.$eval(a),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,t.$watch(function(){return Object.keys(n.scales).length},function(t){n.zoomLevels=Object.keys(n.scales).map(Number),n.zoomLevels.sort(o.default.numberSafeCompareFunction)});var l=i.ngeoScaleselectorMap;this.map_=t.$eval(l),goog.asserts.assertInstanceof(this.map_,s.default);var h=i.ngeoScaleselectorOptions,d=t.$eval(h);if(this.options=u.ScaleselectorController_.getOptions_(d),this.$scope_=t,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var c=this.map_.getView().getZoom();void 0!==c&&(this.currentScale=this.getScale(c))}r.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),t.scaleselectorCtrl=this},u.ScaleselectorController_.getOptions_=function(t){var e=!1;return void 0!==t&&(e=1==t.dropup),{dropup:e}},u.ScaleselectorController_.prototype.getScale=function(t){return this.scales[t]},u.ScaleselectorController_.prototype.changeZoom=function(t){this.map_.getView().setZoom(t)},u.ScaleselectorController_.prototype.handleResolutionChange_=function(t){var e=this,i=this.map_.getView(),n=this.scales[i.getZoom()];void 0!==n&&this.$scope_.$applyAsync(function(){e.currentScale=n})},u.ScaleselectorController_.prototype.handleViewChange_=function(t){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},u.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&r.default.unlistenByKey(this.resolutionChangeKey_);var t=this.map_.getView();this.resolutionChangeKey_=r.default.listen(t,"change:resolution",this.handleResolutionChange_,this)},u.controller("NgeoScaleselectorController",u.ScaleselectorController_),e.default=u},45:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(8),s=i(4),r=i(24),a=i(13),u=i(27),l=i(44),h=i(46),d=i(54),c=i(14),f=function(t,e){l.a.call(this),this.setCoordinates(t,e)};Object(n.inherits)(f,l.a),f.prototype.appendPoint=function(t){this.flatCoordinates?Object(o.extend)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},f.prototype.clone=function(){var t=new f(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},f.prototype.closestPointXY=function(t,e,i,n){if(n<Object(s.closestSquaredDistanceXY)(this.getExtent(),t,e))return n;var o,r,a,u=this.flatCoordinates,l=this.stride;for(o=0,r=u.length;o<r;o+=l){var h=Object(c.squaredDistance)(t,e,u[o],u[o+1]);if(h<n){for(n=h,a=0;a<l;++a)i[a]=u[o+a];i.length=l}}return n},f.prototype.getCoordinates=function(){return d.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},f.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(t<0||e<=t)return null;var i=new u.default(null);return i.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride)),i},f.prototype.getPoints=function(){var t,e,i=this.flatCoordinates,n=this.layout,o=this.stride,s=[];for(t=0,e=i.length;t<e;t+=o){var r=new u.default(null);r.setFlatCoordinates(n,i.slice(t,t+o)),s.push(r)}return s},f.prototype.getType=function(){return a.default.MULTI_POINT},f.prototype.intersectsExtent=function(t){var e,i,n,o,r=this.flatCoordinates,a=this.stride;for(e=0,i=r.length;e<i;e+=a)if(n=r[e],o=r[e+1],Object(s.containsXY)(t,n,o))return!0;return!1},f.prototype.setCoordinates=function(t,e){t?(this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=h.a.coordinates(this.flatCoordinates,0,t,this.stride),this.changed()):this.setFlatCoordinates(r.default.XY,null)},f.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},e.default=f},48:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(49),s=function(t){var e,i=t||{};e=void 0!==i.attributions?i.attributions:[s.ATTRIBUTION];var n=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",r=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o.a.call(this,{attributions:e,cacheSize:i.cacheSize,crossOrigin:n,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:r,wrapX:i.wrapX})};Object(n.inherits)(s,o.a),s.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',e.default=s},49:function(t,e,i){"use strict";var n=i(0),o=i(41),s=i(71),r=function(t){var e=t||{},i=void 0!==e.projection?e.projection:"EPSG:3857",n=void 0!==e.tileGrid?e.tileGrid:s.a.createXYZ({extent:s.a.extentFromProjection(i),maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});o.a.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,opaque:e.opaque,projection:i,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})};Object(n.inherits)(r,o.a),e.a=r},51:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(8),s=i(4),r=i(24),a=i(13),u=i(30),l=i(44),h=i(67),d=i(46),c=i(54),f=i(100),_=i(70),p=i(64),g=function(t,e){l.a.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(t,e)};Object(n.inherits)(g,l.a),g.prototype.appendLineString=function(t){this.flatCoordinates?Object(o.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},g.prototype.clone=function(){var t=new g(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),t},g.prototype.closestPointXY=function(t,e,i,n){return n<Object(s.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),h.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},g.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=r.default.XYM&&this.layout!=r.default.XYZM||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,o=void 0!==i&&i;return f.a.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,t,n,o)},g.prototype.getCoordinates=function(){return c.a.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},g.prototype.getEnds=function(){return this.ends_},g.prototype.getLineString=function(t){if(t<0||this.ends_.length<=t)return null;var e=new u.default(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t])),e},g.prototype.getLineStrings=function(){var t,e,i=this.flatCoordinates,n=this.ends_,o=this.layout,s=[],r=0;for(t=0,e=n.length;t<e;++t){var a=n[t],l=new u.default(null);l.setFlatCoordinates(o,i.slice(r,a)),s.push(l),r=a}return s},g.prototype.getFlatMidpoints=function(){var t,e,i=[],n=this.flatCoordinates,s=0,r=this.ends_,a=this.stride;for(t=0,e=r.length;t<e;++t){var u=r[t],l=f.a.lineString(n,s,u,a,.5);Object(o.extend)(i,l),s=u}return i},g.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=p.a.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i);var n=new g(null);return n.setFlatCoordinates(r.default.XY,e,i),n},g.prototype.getType=function(){return a.default.MULTI_LINE_STRING},g.prototype.intersectsExtent=function(t){return _.a.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,t)},g.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=d.a.coordinatess(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(r.default.XY,null,this.ends_)},g.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.ends_=i,this.changed()},g.prototype.setLineStrings=function(t){var e,i,n=this.getLayout(),s=[],r=[];for(e=0,i=t.length;e<i;++e){var a=t[e];0===e&&(n=a.getLayout()),Object(o.extend)(s,a.getFlatCoordinates()),r.push(s.length)}this.setFlatCoordinates(n,s,r)},e.default=g},53:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(8),s=i(4),r=i(24),a=i(13),u=i(45),l=i(42),h=i(44),d=i(95),c=i(104),f=i(67),_=i(89),p=i(46),g=i(54),v=i(99),m=i(70),y=i(96),C=i(64),O=function(t,e){h.a.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(t,e)};Object(n.inherits)(O,h.a),O.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i,n,s=this.flatCoordinates.length;for(Object(o.extend)(this.flatCoordinates,t.getFlatCoordinates()),i=0,n=(e=t.getEnds().slice()).length;i<n;++i)e[i]+=s}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},O.prototype.clone=function(){for(var t=new O(null),e=this.endss_.length,i=new Array(e),n=0;n<e;++n)i[n]=this.endss_[n].slice();return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),i),t},O.prototype.closestPointXY=function(t,e,i,n){return n<Object(s.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(f.a.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),f.a.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},O.prototype.containsXY=function(t,e){return _.a.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},O.prototype.getArea=function(){return d.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},O.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),y.a.orientLinearRingss(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,g.a.coordinatesss(e,0,this.endss_,this.stride)},O.prototype.getEndss=function(){return this.endss_},O.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=c.a.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=v.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},O.prototype.getInteriorPoints=function(){var t=new u.default(null);return t.setFlatCoordinates(r.default.XYM,this.getFlatInteriorPoints().slice()),t},O.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;y.a.linearRingssAreOriented(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=y.a.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},O.prototype.getSimplifiedGeometryInternal=function(t){var e=[],i=[];e.length=C.a.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i);var n=new O(null);return n.setFlatCoordinates(r.default.XY,e,i),n},O.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n,o,s=this.endss_[t].slice(),r=s[s.length-1];if(0!==e)for(n=0,o=s.length;n<o;++n)s[n]-=e;var a=new l.default(null);return a.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e,r),s),a},O.prototype.getPolygons=function(){var t,e,i,n,o=this.layout,s=this.flatCoordinates,r=this.endss_,a=[],u=0;for(t=0,e=r.length;t<e;++t){var h=r[t].slice(),d=h[h.length-1];if(0!==u)for(i=0,n=h.length;i<n;++i)h[i]-=u;var c=new l.default(null);c.setFlatCoordinates(o,s.slice(u,d),h),a.push(c),u=d}return a},O.prototype.getType=function(){return a.default.MULTI_POLYGON},O.prototype.intersectsExtent=function(t){return m.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},O.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=p.a.coordinatesss(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}else this.setFlatCoordinates(r.default.XY,null,this.endss_)},O.prototype.setFlatCoordinates=function(t,e,i){this.setFlatCoordinatesInternal(t,e),this.endss_=i,this.changed()},O.prototype.setPolygons=function(t){var e,i,n,s=this.getLayout(),r=[],a=[];for(e=0,i=t.length;e<i;++e){var u=t[e];0===e&&(s=u.getLayout());var l,h,d=r.length;for(l=0,h=(n=u.getEnds()).length;l<h;++l)n[l]+=d;Object(o.extend)(r,u.getFlatCoordinates()),a.push(n)}this.setFlatCoordinates(s,r,a)},e.default=O},75:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(40),s=i(87),r=i(76),a=i(84),u=i(2),l=i(43),h=i(83),d=i(4),c=i(66),f=i(80),_=i(13),p=i(30),g=i(51),v=i(45),m=i(53),y=i(27),C=i(42),O="drawstart",R="drawend",S=i(77),E=i(122),F=i(20),T=i(18),M=i(17),b=function(t){S.default.call(this,{handleDownEvent:b.handleDownEvent_,handleEvent:b.handleEvent,handleUpEvent:b.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=b.getMode_(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:this.mode_===b.Mode_.POLYGON?3:2,this.maxPoints_=t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:c.TRUE;var e=t.geometryFunction;if(!e)if(this.type_===_.default.CIRCLE)e=function(t,e){var i=e||new f.default([NaN,NaN]),n=a.default.squaredDistance(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(n)),i};else{var i,n=this.mode_;n===b.Mode_.POINT?i=y.default:n===b.Mode_.LINE_STRING?i=p.default:n===b.Mode_.POLYGON&&(i=C.default),e=function(t,e){var o=e;return o?n===b.Mode_.POLYGON?t[0].length?o.setCoordinates([t[0].concat([t[0][0]])]):o.setCoordinates([]):o.setCoordinates(t):o=new i(t),o}}this.geometryFunction_=e,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new F.default({source:new T.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:b.getDefaultStyleFunction()}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:h.default.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=h.default.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:h.default.shiftKeyOnly,u.default.listen(this,r.a.getChangeEventType(E.a.ACTIVE),this.updateState_,this)};Object(n.inherits)(b,S.default),b.getDefaultStyleFunction=function(){var t=M.default.createDefaultEditing();return function(e,i){return t[e.getGeometry().getType()]}},b.prototype.setMap=function(t){S.default.prototype.setMap.call(this,t),this.updateState_()},b.handleEvent=function(t){this.freehand_=this.mode_!==b.Mode_.POINT&&this.freehandCondition_(t);var e=!0;return this.freehand_&&t.type===s.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),e=!1):this.freehand_&&t.type===s.a.POINTERDOWN?e=!1:t.type===s.a.POINTERMOVE?e=this.handlePointerMove_(t):t.type===s.a.DBLCLICK&&(e=!1),S.default.handleEvent.call(this,t)&&e},b.handleDownEvent_=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.downPx_=t.pixel,!0)},b.handleUpEvent_=function(t){var e=!0;this.handlePointerMove_(t);var i=this.mode_===b.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===b.Mode_.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},b.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],o=e[1]-i[1],s=n*n+o*o;this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},b.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===b.Mode_.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===b.Mode_.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,n=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var o=t.map,s=0,r=n.length;s<r;s++){var a=n[s],u=o.getPixelFromCoordinate(a),l=t.pixel,h=l[0]-u[0],d=l[1]-u[1],c=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+d*d)<=c){this.finishCoordinate_=a;break}}}return e},b.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.default(new y.default(e)),this.updateSketchFeatures_())},b.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===b.Mode_.POINT?this.sketchCoords_=e.slice():this.mode_===b.Mode_.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[e.slice(),e.slice()],this.mode_===b.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new o.default(new p.default(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new b.Event(O,this.sketchFeature_))},b.prototype.modifyDrawing_=function(t){var e,i,n=t.coordinate,s=this.sketchFeature_.getGeometry();(this.mode_===b.Mode_.POINT?i=this.sketchCoords_:this.mode_===b.Mode_.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,s),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(n);if(s instanceof C.default&&this.mode_!==b.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new o.default(new p.default(null)));var r=s.getLinearRing(0);this.sketchLine_.getGeometry().setFlatCoordinates(r.getLayout(),r.getFlatCoordinates())}else this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},b.prototype.addToDrawing_=function(t){var e,i,n=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===b.Mode_.LINE_STRING?(this.finishCoordinate_=n.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),this.geometryFunction_(i,o)):this.mode_===b.Mode_.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},b.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===b.Mode_.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===b.Mode_.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},b.prototype.finishDrawing=function(){var t=this.abortDrawing_(),e=this.sketchCoords_,i=t.getGeometry();this.mode_===b.Mode_.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===b.Mode_.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===_.default.MULTI_POINT?t.setGeometry(new v.default([e])):this.type_===_.default.MULTI_LINE_STRING?t.setGeometry(new g.default([e])):this.type_===_.default.MULTI_POLYGON&&t.setGeometry(new m.default([e])),this.dispatchEvent(new b.Event(R,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)},b.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},b.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new b.Event(O,this.sketchFeature_))},b.prototype.shouldStopEvent=c.FALSE,b.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},b.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},b.createRegularPolygon=function(t,e){return function(i,n){var o=i[0],s=i[1],r=Math.sqrt(a.default.squaredDistance(o,s)),u=n||Object(C.fromCircle)(new f.default(o),t),l=e||Math.atan((s[1]-o[1])/(s[0]-o[0]));return Object(C.makeRegular)(u,o,r,l),u}},b.createBox=function(){return function(t,e){var i=Object(d.boundingExtent)(t),n=e||new C.default(null);return n.setCoordinates([[Object(d.getBottomLeft)(i),Object(d.getBottomRight)(i),Object(d.getTopRight)(i),Object(d.getTopLeft)(i),Object(d.getBottomLeft)(i)]]),n}},b.getMode_=function(t){var e;return t===_.default.POINT||t===_.default.MULTI_POINT?e=b.Mode_.POINT:t===_.default.LINE_STRING||t===_.default.MULTI_LINE_STRING?e=b.Mode_.LINE_STRING:t===_.default.POLYGON||t===_.default.MULTI_POLYGON?e=b.Mode_.POLYGON:t===_.default.CIRCLE&&(e=b.Mode_.CIRCLE),e},b.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},b.Event=function(t,e){l.default.call(this,t),this.feature=e},Object(n.inherits)(b.Event,l.default);e.default=b},80:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(4),s=i(24),r=i(13),a=i(44),u=i(46),l=function(t,e,i){a.a.call(this);var n=e||0;this.setCenterAndRadius(t,n,i)};Object(n.inherits)(l,a.a),l.prototype.clone=function(){var t=new l(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),t},l.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,s=t-o[0],r=e-o[1],a=s*s+r*r;if(a<n){var u;if(0===a)for(u=0;u<this.stride;++u)i[u]=o[u];else{var l=this.getRadius()/Math.sqrt(a);for(i[0]=o[0]+l*s,i[1]=o[1]+l*r,u=2;u<this.stride;++u)i[u]=o[u]}return i.length=this.stride,a}return n},l.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],o=e-i[1];return n*n+o*o<=this.getRadiusSquared_()},l.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},l.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(o.createOrUpdate)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},l.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},l.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},l.prototype.getType=function(){return r.default.CIRCLE},l.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(o.intersects)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(o.forEachCorner)(t,this.intersectsCoordinate,this))}return!1},l.prototype.setCenter=function(t){var e,i=this.stride,n=this.flatCoordinates[i]-this.flatCoordinates[0],o=t.slice();for(o[i]=o[0]+n,e=1;e<i;++e)o[i+e]=t[e];this.setFlatCoordinates(this.layout,o)},l.prototype.setCenterAndRadius=function(t,e,i){if(t){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n,o,r=this.flatCoordinates,a=u.a.coordinate(r,0,t,this.stride);for(r[a++]=r[0]+e,n=1,o=this.stride;n<o;++n)r[a++]=r[n];r.length=a,this.changed()}else this.setFlatCoordinates(s.default.XY,null)},l.prototype.getCoordinates=function(){},l.prototype.setCoordinates=function(t,e){},l.prototype.setFlatCoordinates=function(t,e){this.setFlatCoordinatesInternal(t,e),this.changed()},l.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},l.prototype.transform,e.default=l}},[364]);
//# sourceMappingURL=toolActivate.min.js.map