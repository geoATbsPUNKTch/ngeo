{"version":3,"sources":["webpack:///./node_modules/openlayers/src/ol/source/common.js","webpack:///./node_modules/openlayers/src/ol/source/WMSServerType.js","webpack:///./src/message/Message.js","webpack:///./node_modules/openlayers/src/ol/Image.js","webpack:///./node_modules/openlayers/src/ol/source/ImageWMS.js","webpack:///./src/message/Popup.js","webpack:///./src/message/popupComponent.js","webpack:///./src/CustomEvent.js","webpack:///./node_modules/openlayers/src/ol/source/TileWMS.js","webpack:///./src/datasource/DataSource.js","webpack:///./src/datasource/DataSources.js","webpack:///./src/map/FeatureOverlayMgr.js","webpack:///./examples/disclaimer.js","webpack:///./src/goog.asserts.prod.js","webpack:///./src/message/Disclaimer.js","webpack:///./src/map/module.js","webpack:///./src/map/BackgroundLayerMgr.js","webpack:///./src/map/directive.js","webpack:///./src/datasource/SyncDataSourcesMap.js","webpack:///./src/map/FeatureOverlay.js","webpack:///./src/map/recenter.js","webpack:///./src/map/resizemap.js","webpack:///./src/map/scaleselector.js","webpack:///./node_modules/openlayers/src/ol/source/OSM.js","webpack:///./node_modules/openlayers/src/ol/source/XYZ.js"],"names":["__webpack_require__","d","__webpack_exports__","DEFAULT_WMS_VERSION","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","exports","prototype","showMessage","message","show","object","this","getMessageObjects","forEach","error","Type","ERROR","info","INFORMATION","success","SUCCESS","warn","WARNING","opt_type","msgObjects","msgObject","defaultType","push","msg","type","undefined","Array","isArray","_ol_Image_","extent","resolution","pixelRatio","src","crossOrigin","imageLoadFunction","ImageBase","call","ImageState","IDLE","src_","image_","Image","imageListenerKeys_","state","imageLoadFunction_","Object","ol","getImage","handleImageError_","unlistenImage_","changed","handleImageLoad_","ol_extent","height","LOADED","load","LOADING","events","listenOnce","EventType","LOAD","setImage","image","unlistenByKey","ol_Image","ImageWMS","opt_options","options","source_Image","attributions","projection","resolutions","crossOrigin_","url_","url","defaultImageLoadFunction","params_","params","v13_","updateV13_","serverType_","hidpi_","hidpi","imageSize_","renderedRevision_","ratio_","ratio","GETFEATUREINFO_IMAGE_SIZE_","getGetFeatureInfoUrl","coordinate","projectionObj","proj","sourceProjectionObj","getProjection","reproj","calculateSourceResolution","baseParams","SERVICE","VERSION","common","REQUEST","FORMAT","TRANSPARENT","QUERY_LAYERS","obj","assign","x","Math","floor","y","getRequestUrl_","getParams","getImageInternal","findNearestResolution","imageResolution","center","viewWidth","ceil","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","getRevision","getResolution","getPixelRatio","getExtent","round","listen","CHANGE","handleImageChange","getImageLoadFunction","size","asserts","getCode","WMSServerType","dpi","bbox","axisOrientation","getAxisOrientation","substr","join","uri","appendParams","getUrl","setImageLoadFunction","setUrl","updateParams","version","string","compareVersions","$compile","$rootScope","$sce","$timeout","_this","scope","$new","$watch","open","autoDestroy_","timeout_","destroy","sce_","element_","angular","element","document","body","append","getOpen","setOpen","$destroy","remove","setTitle","title","trustedTitle","trustAsHtml","setContent","content","opt_trusted","setWidth","width","setHeight","setSize","setAutoDestroy","autoDestroy","addClass","cls","_asserts2","default","fail","Factory","module","_popupComponent2","name","factory","_ngeo2","requires","_ngeo","value","attrs","templateUrl","baseModuleTemplateUrl","directive_","ngeoPopupTemplateUrl","restrict","link","close","evt","stopPropagation","preventDefault","newVal","oldVal","css","directive","detail","arguments","length","_Event2","_ol2","inherits","__WEBPACK_IMPORTED_MODULE_13__uri_js__","TileWMS","transparent","__WEBPACK_IMPORTED_MODULE_9__source_TileImage_js__","cacheSize","opaque","reprojectionErrorThreshold","tileClass","tileGrid","tileLoadFunction","urls","wrapX","transition","gutter_","gutter","tmpExtent_","__WEBPACK_IMPORTED_MODULE_3__extent_js__","setKey","getKeyForParams_","__WEBPACK_IMPORTED_MODULE_1__index_js__","__WEBPACK_IMPORTED_MODULE_6__proj_js__","getTileGrid","getTileGridForProjection","tileCoord","getTileCoordForCoordAndResolution","getResolutions","tileResolution","tileExtent","getTileCoordExtent","tileSize","__WEBPACK_IMPORTED_MODULE_8__size_js__","toSize","getTileSize","tmpSize","buffer","__WEBPACK_IMPORTED_MODULE_7__reproj_js__","__WEBPACK_IMPORTED_MODULE_0__common_js__","__WEBPACK_IMPORTED_MODULE_4__obj_js__","getGutterInternal","__WEBPACK_IMPORTED_MODULE_10__source_WMSServerType_js__","__WEBPACK_IMPORTED_MODULE_2__asserts_js__","tmp","__WEBPACK_IMPORTED_MODULE_5__math_js__","__WEBPACK_IMPORTED_MODULE_11__tilecoord_js__","hash","getTilePixelRatio","i","res","key","fixedTileUrlFunction","scale","__WEBPACK_IMPORTED_MODULE_12__string_js__","_classCallCheck","inRange_","inRange","visible_","visible","attributes","id_","id","identifierAttribute_","identifierAttribute","maxResolution_","maxResolution","minResolution_","minResolution","name_","_createClass","get","set","_Collection2","featureUidToGroupIndex_","groups_","source_","_Vector4","useSpatialIndex","layer_","_Vector2","source","style","styleFunction_","bind","updateWhileAnimating","updateWhileInteracting","addFeature","feature","groupIndex","assert","featureUid","getUid","toString","features","removeFeature","clear","group","_obj2","isEmpty","getLayer","getFeatureOverlay","styleFunction","_Style2","defaultFunction","_FeatureOverlay2","init","map","setMap","setStyle","createFunction","service","e","Error","code","app","ngeo","_module2","_Disclaimer2","MainController","ngeoDisclaimer","disclaimer","_Map2","layers","_Tile2","_OSM2","view","_View2","zoom","successMsg_","infoMsg_","warningMsg_","errorMsg_","inMapMsgs_","$","tooltip","container","trigger","inMap","alert","target","_Message2","closeAll","controller","condition","opt_message","var_args","gettextCatalog","ngeoCreatePopup","gettextCatalog_","createPopup_","container_","messages_","closeMessage_","assertString","uid","getMessageUid_","popup","classNames","el","button","getString","html","on","hasClass","_Popup2","_BackgroundLayerMgr2","_directive2","_FeatureOverlayMgr2","_recenter2","_resizemap2","_scaleselector2","_Observable2","mapUids_","getLayers","item","layer","mapUid","previous","setAt","removeAt","insertAt","event","_CustomEvent2","current","dispatchEvent","updateDimensions","dimensions","baseBgLayer","getArray","assertInstanceof","_Layer2","hasUpdates","updatedDimensions","getSource","refresh","$window","ngeoSyncDataSourcesMap","prop","$eval","setTarget","manageResizeProp","resizeTransitionProp","resizeTransition","_events2","start","Date","now","loop","adjustSize","updateSize","renderSync","requestAnimationFrame","ngeoDataSources","ngeoDataSources_","map_","listenerKeys_","handleDataSourcesAdd_","$inject","getView","handleViewResolutionChange_","assertNumber","syncDataSourcesToResolution_","unByKey","dataSource","syncDataSourceToResolution_","supportsDynamicInRange","_DataSource2","unbindMap_","bindMap_","manager","index","manager_","features_","index_","setFeatures","unlisten","handleFeatureAdd_","handleFeatureRemove_","$scope","$element","$attrs","mapExpr","recenter","attr","getSize","fit","setZoom","selected","selectedIndex","stateExpr","animationDelayKey","animationDelay","cancelAnimationFrame","ngeoScaleselectorTemplateUrl","ScaleselectorController_","scalesExpr","scales","goog","zoomLevels","keys","newLength","Number","sort","_array2","numberSafeCompareFunction","optionsExpr","getOptions_","$scope_","resolutionChangeKey_","currentScale","currentZoom","getZoom","getScale","handleViewChange_","registerResolutionChangeListener_","dropup","changeZoom","handleResolutionChange_","_this2","$applyAsync","__WEBPACK_IMPORTED_MODULE_1__source_XYZ_js__","OSM","ATTRIBUTION","maxZoom","__WEBPACK_IMPORTED_MODULE_0__index_js__","__WEBPACK_IMPORTED_MODULE_2__tilegrid_js__","XYZ","createXYZ","extentFromProjection","minZoom","__WEBPACK_IMPORTED_MODULE_1__source_TileImage_js__","tilePixelRatio","tileUrlFunction"],"mappings":"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","file":"disclaimer.min.js","sourcesContent":["/**\n * @type {string} Default WMS version.\n */\nexport var DEFAULT_WMS_VERSION = '1.3.0';\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/common.js\n// module id = 11\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/WMSServerType.js\n// module id = 12\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.message.Message\n*/\n/**\n * Abstract class for services that display messages.\n *\n * @constructor\n * @struct\n * @abstract\n */\nconst exports = function() {};\n\n\n/**\n * Show the message.\n *\n * @abstract\n * @param {ngeox.Message} message Message.\n * @protected\n */\nexports.prototype.showMessage = function(message) {};\n\n\n/**\n * Show disclaimer message string or object or list of disclame message\n * strings or objects.\n *\n * @param {string|Array.<string>|ngeox.Message|Array.<ngeox.Message>}\n *     object A message or list of messages as text or configuration objects.\n * @export\n */\nexports.prototype.show = function(object) {\n  const msgObjects = this.getMessageObjects(object);\n  msgObjects.forEach(this.showMessage, this);\n};\n\n\n/**\n * Display the given error message or list of error messages.\n *\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.error = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.ERROR));\n};\n\n\n/**\n * Display the given info message or list of info messages.\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.info = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.INFORMATION));\n};\n\n\n/**\n * Display the given success message or list of success messages.\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.success = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.SUCCESS));\n};\n\n\n/**\n * Display the given warning message or list of warning messages.\n * @param {string|Array.<string>} message Message or list of messages.\n * @export\n */\nexports.prototype.warn = function(message) {\n  this.show(this.getMessageObjects(message, exports.Type.WARNING));\n};\n\n\n/**\n * Returns an array of message object from any given message string, list of\n * message strings, message object or list message objects. The type can be\n * overridden here as well OR defined (if the message(s) is/are string(s),\n * defaults to 'information').\n * @param {string|Array.<string>|ngeox.Message|Array.<ngeox.Message>}\n *     object A message or list of messages as text or configuration objects.\n * @param {string=} opt_type The type of message to override the messages with.\n * @return {Array.<ngeox.Message>} List of message objects.\n * @protected\n */\nexports.prototype.getMessageObjects = function(object, opt_type) {\n  const msgObjects = [];\n  let msgObject = null;\n  const defaultType = exports.Type.INFORMATION;\n\n  if (typeof object === 'string') {\n    msgObjects.push({\n      msg: object,\n      type: opt_type !== undefined ? opt_type : defaultType\n    });\n  } else if (Array.isArray(object)) {\n    object.forEach((msg) => {\n      if (typeof object === 'string') {\n        msgObject = {\n          msg: msg,\n          type: opt_type !== undefined ? opt_type : defaultType\n        };\n      } else {\n        msgObject = msg;\n        if (opt_type !== undefined) {\n          msgObject.type = opt_type;\n        }\n      }\n      msgObjects.push(msgObject);\n    }, this);\n  } else {\n    msgObject = object;\n    if (opt_type !== undefined) {\n      msgObject.type = opt_type;\n    }\n    if (msgObject.type === undefined) {\n      msgObject.type = defaultType;\n    }\n    msgObjects.push(msgObject);\n  }\n\n  return msgObjects;\n};\n\n\n/**\n * @enum {string}\n * @export\n */\nexports.Type = {\n  /**\n   * @type {string}\n   * @export\n   */\n  ERROR: 'error',\n  /**\n   * @type {string}\n   * @export\n   */\n  INFORMATION: 'information',\n  /**\n   * @type {string}\n   * @export\n   */\n  SUCCESS: 'success',\n  /**\n   * @type {string}\n   * @export\n   */\n  WARNING: 'warning'\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/message/Message.js","/**\n * @module ol/Image\n */\nimport {inherits} from './index.js';\nimport _ol_ImageBase_ from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport _ol_events_ from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n/**\n * @constructor\n * @extends {ol.ImageBase}\n * @param {ol.Extent} extent Extent.\n * @param {number|undefined} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @param {string} src Image source URI.\n * @param {?string} crossOrigin Cross origin.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n */\nvar _ol_Image_ = function(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n  _ol_ImageBase_.call(this, extent, resolution, pixelRatio, ImageState.IDLE);\n\n  /**\n   * @private\n   * @type {string}\n   */\n  this.src_ = src;\n\n  /**\n   * @private\n   * @type {HTMLCanvasElement|Image|HTMLVideoElement}\n   */\n  this.image_ = new Image();\n  if (crossOrigin !== null) {\n    this.image_.crossOrigin = crossOrigin;\n  }\n\n  /**\n   * @private\n   * @type {Array.<ol.EventsKey>}\n   */\n  this.imageListenerKeys_ = null;\n\n  /**\n   * @protected\n   * @type {ol.ImageState}\n   */\n  this.state = ImageState.IDLE;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = imageLoadFunction;\n\n};\n\ninherits(_ol_Image_, _ol_ImageBase_);\n\n\n/**\n * @inheritDoc\n * @api\n */\n_ol_Image_.prototype.getImage = function() {\n  return this.image_;\n};\n\n\n/**\n * Tracks loading or read errors.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageError_ = function() {\n  this.state = ImageState.ERROR;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Tracks successful image load.\n *\n * @private\n */\n_ol_Image_.prototype.handleImageLoad_ = function() {\n  if (this.resolution === undefined) {\n    this.resolution = getHeight(this.extent) / this.image_.height;\n  }\n  this.state = ImageState.LOADED;\n  this.unlistenImage_();\n  this.changed();\n};\n\n\n/**\n * Load the image or retry if loading previously failed.\n * Loading is taken care of by the tile queue, and calling this method is\n * only needed for preloading or for reloading in case of an error.\n * @override\n * @api\n */\n_ol_Image_.prototype.load = function() {\n  if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n    this.state = ImageState.LOADING;\n    this.changed();\n    this.imageListenerKeys_ = [\n      _ol_events_.listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n      _ol_events_.listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n    ];\n    this.imageLoadFunction_(this, this.src_);\n  }\n};\n\n\n/**\n * @param {HTMLCanvasElement|Image|HTMLVideoElement} image Image.\n */\n_ol_Image_.prototype.setImage = function(image) {\n  this.image_ = image;\n};\n\n\n/**\n * Discards event handlers which listen for load completion or errors.\n *\n * @private\n */\n_ol_Image_.prototype.unlistenImage_ = function() {\n  this.imageListenerKeys_.forEach(_ol_events_.unlistenByKey);\n  this.imageListenerKeys_ = null;\n};\nexport default _ol_Image_;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/Image.js\n// module id = null\n// module chunks = ","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport _ol_Image_ from '../Image.js';\nimport {assert} from '../asserts.js';\nimport _ol_events_ from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport _ol_obj_ from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport ImageSource from '../source/Image.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_string_ from '../string.js';\nimport _ol_uri_ from '../uri.js';\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @constructor\n * @fires ol.source.Image.Event\n * @extends {ol.source.Image}\n * @param {olx.source.ImageWMSOptions=} opt_options Options.\n * @api\n */\nvar ImageWMS = function(opt_options) {\n\n  var options = opt_options || {};\n\n  ImageSource.call(this, {\n    attributions: options.attributions,\n    projection: options.projection,\n    resolutions: options.resolutions\n  });\n\n  /**\n   * @private\n   * @type {?string}\n   */\n  this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n  /**\n   * @private\n   * @type {string|undefined}\n   */\n  this.url_ = options.url;\n\n  /**\n   * @private\n   * @type {ol.ImageLoadFunctionType}\n   */\n  this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n    options.imageLoadFunction : ImageSource.defaultImageLoadFunction;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = options.params || {};\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n  this.updateV13_();\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Image}\n   */\n  this.image_ = null;\n\n  /**\n   * @private\n   * @type {ol.Size}\n   */\n  this.imageSize_ = [0, 0];\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.renderedRevision_ = 0;\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n};\n\ninherits(ImageWMS, ImageSource);\n\n\n/**\n * @const\n * @type {ol.Size}\n * @private\n */\nImageWMS.GETFEATUREINFO_IMAGE_SIZE_ = [101, 101];\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nImageWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  if (this.url_ === undefined) {\n    return undefined;\n  }\n  var projectionObj = getProjection(projection);\n  var sourceProjectionObj = this.getProjection();\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    resolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  var extent = getForViewAndSize(coordinate, resolution, 0,\n      ImageWMS.GETFEATUREINFO_IMAGE_SIZE_);\n\n  var baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  _ol_obj_.assign(baseParams, this.params_, params);\n\n  var x = Math.floor((coordinate[0] - extent[0]) / resolution);\n  var y = Math.floor((extent[3] - coordinate[1]) / resolution);\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(\n      extent, ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,\n      1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nImageWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @inheritDoc\n */\nImageWMS.prototype.getImageInternal = function(extent, resolution, pixelRatio, projection) {\n\n  if (this.url_ === undefined) {\n    return null;\n  }\n\n  resolution = this.findNearestResolution(resolution);\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  var imageResolution = resolution / pixelRatio;\n\n  var center = getCenter(extent);\n  var viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n  var viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n  var viewExtent = getForViewAndSize(center, imageResolution, 0,\n      [viewWidth, viewHeight]);\n  var requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n  var requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n  var requestExtent = getForViewAndSize(center, imageResolution, 0,\n      [requestWidth, requestHeight]);\n\n  var image = this.image_;\n  if (image &&\n      this.renderedRevision_ == this.getRevision() &&\n      image.getResolution() == resolution &&\n      image.getPixelRatio() == pixelRatio &&\n      containsExtent(image.getExtent(), viewExtent)) {\n    return image;\n  }\n\n  var params = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  _ol_obj_.assign(params, this.params_);\n\n  this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n  this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n  var url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n      projection, params);\n\n  this.image_ = new _ol_Image_(requestExtent, resolution, pixelRatio,\n      url, this.crossOrigin_, this.imageLoadFunction_);\n\n  this.renderedRevision_ = this.getRevision();\n\n  _ol_events_.listen(this.image_, EventType.CHANGE,\n      this.handleImageChange, this);\n\n  return this.image_;\n\n};\n\n\n/**\n * Return the image load function of the source.\n * @return {ol.ImageLoadFunctionType} The image load function.\n * @api\n */\nImageWMS.prototype.getImageLoadFunction = function() {\n  return this.imageLoadFunction_;\n};\n\n\n/**\n * @param {ol.Extent} extent Extent.\n * @param {ol.Size} size Size.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string} Request URL.\n * @private\n */\nImageWMS.prototype.getRequestUrl_ = function(extent, size, pixelRatio, projection, params) {\n\n  assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        var dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 8); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  params['WIDTH'] = size[0];\n  params['HEIGHT'] = size[1];\n\n  var axisOrientation = projection.getAxisOrientation();\n  var bbox;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    bbox = [extent[1], extent[0], extent[3], extent[2]];\n  } else {\n    bbox = extent;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  return _ol_uri_.appendParams(/** @type {string} */ (this.url_), params);\n};\n\n\n/**\n * Return the URL used for this WMS source.\n * @return {string|undefined} URL.\n * @api\n */\nImageWMS.prototype.getUrl = function() {\n  return this.url_;\n};\n\n\n/**\n * Set the image load function of the source.\n * @param {ol.ImageLoadFunctionType} imageLoadFunction Image load function.\n * @api\n */\nImageWMS.prototype.setImageLoadFunction = function(\n    imageLoadFunction) {\n  this.image_ = null;\n  this.imageLoadFunction_ = imageLoadFunction;\n  this.changed();\n};\n\n\n/**\n * Set the URL to use for requests.\n * @param {string|undefined} url URL.\n * @api\n */\nImageWMS.prototype.setUrl = function(url) {\n  if (url != this.url_) {\n    this.url_ = url;\n    this.image_ = null;\n    this.changed();\n  }\n};\n\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nImageWMS.prototype.updateParams = function(params) {\n  _ol_obj_.assign(this.params_, params);\n  this.updateV13_();\n  this.image_ = null;\n  this.changed();\n};\n\n\n/**\n * @private\n */\nImageWMS.prototype.updateV13_ = function() {\n  var version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default ImageWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/ImageWMS.js\n// module id = null\n// module chunks = ","/**\n * @module ngeo.message.Popup\n*/\nimport ngeoBase from 'ngeo';\nimport googAsserts from 'goog/asserts';\n\n/**\n * This goog.require is needed because of 'ngeo-popup' used in\n * the template.\n * @suppress {extraRequire}\n */\nimport ngeoMessagePopupComponent from 'ngeo/message/popupComponent';\n\n/**\n * Provides a factory to create a popup in the page.\n * The factory returns a ngeo.message.Popup object.\n *\n * Example:\n *\n *     let popup = ngeoCreatePopup();\n *     popup.setTitle(\"A title\");\n *     popup.setContent(\"Some content\");\n *     popup.setOpen(true);\n *\n * @constructor\n * @struct\n * @param {angular.$compile} $compile The compile provider.\n * @param {angular.Scope} $rootScope The rootScope provider.\n * @param {angular.$sce} $sce Angular sce service.\n * @param {angular.$timeout} $timeout Angular timeout service.\n * @ngdoc service\n * @ngname ngeoCreatePopup\n */\nconst exports = function($compile, $rootScope, $sce, $timeout) {\n\n  /**\n   * The scope the compiled element is link to.\n   * @type {angular.Scope}\n   * @export\n   */\n  this.scope = $rootScope.$new(true);\n\n  // manage the auto destruction of the popup\n  this.scope.$watch(\n    () => this.scope['open'],\n    (open) => {\n      if (!open && this.autoDestroy_) {\n        this.timeout_(() => {\n          this.destroy();\n        });\n      }\n    }\n  );\n\n  /**\n   * @private\n   * @type {angular.$sce}\n   */\n  this.sce_ = $sce;\n\n  /**\n   * @type {angular.$timeout}\n   * @private\n   */\n  this.timeout_ = $timeout;\n\n  /**\n   * The element.\n   * @type {angular.JQLite}\n   * @private\n   */\n  this.element_ = angular.element('<div ngeo-popup></div>');\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this.autoDestroy_ = false;\n\n\n  // Compile the element, link it to the scope and add it to the document.\n  $compile(this.element_)(this.scope);\n  angular.element(document.body).append(this.element_);\n};\n\n\n/**\n * Get the current popup state.\n * @return {boolean} `true` if the popup is currently, otherwise `false`.\n * @export\n */\nexports.prototype.getOpen = function() {\n  return this.scope['open'];\n};\n\n\n/**\n * Show/hide the popup.\n * @param {boolean} open `true` to show the popup, `false` to hide it.\n * @export\n */\nexports.prototype.setOpen = function(open) {\n  this.scope['open'] = open;\n};\n\n\n/**\n * Destroy the popup.\n * @export\n */\nexports.prototype.destroy = function() {\n  this.scope.$destroy();\n  this.element_.remove();\n};\n\n\n/**\n * Set the popup's title.\n * @param {string} title The title.\n * @export\n */\nexports.prototype.setTitle = function(title) {\n  const trustedTitle = this.sce_.trustAsHtml(title);\n  this.scope['title'] = trustedTitle;\n};\n\n\n/**\n * Set the popup's content.\n * Note: the type of the `content` param is `*` instead of `string`, this\n * is because the content may be trusted using `$sce.trustAsHtml`.\n * @param {*} content The content.\n * @param {boolean=} opt_trusted Whether the content can be trusted.\n *     Default is false.\n * @export\n */\nexports.prototype.setContent = function(content, opt_trusted) {\n  this.scope['content'] = opt_trusted ? this.sce_.trustAsHtml(/** @type {string} */ (content)) : content;\n};\n\n\n/**\n * Set the popup's content with an iframe using the given url.\n * @param {string} url The url of the page.\n * @export\n */\nexports.prototype.setUrl = function(url) {\n  const content = this.sce_.trustAsHtml(\n    `<iframe src=\"${url}\" width=\"100%\" height=\"100%\"></iframe>`\n  );\n  this.setContent(content);\n};\n\n\n/**\n * Set the popup's width.\n * @param {string} width Width the popup should have.\n * @export\n */\nexports.prototype.setWidth = function(width) {\n  this.element_.width(width);\n};\n\n\n/**\n * Set the popup's height.\n * @param {string} height Height the popup should have.\n * @export\n */\nexports.prototype.setHeight = function(height) {\n  this.element_.height(height);\n};\n\n\n/**\n * Set the popup's width and height.\n * @param {string} width Width the popup should have.\n * @param {string} height Height the popup should have.\n * @export\n */\nexports.prototype.setSize = function(width, height) {\n  this.setWidth(width);\n  this.setHeight(height);\n};\n\n\n/**\n * Set the popup's autoDestroy property.\n * @param {boolean} autoDestroy Whether to automatically destroy the popup when\n *     being closed or not.\n * @export\n */\nexports.prototype.setAutoDestroy = function(autoDestroy) {\n  this.autoDestroy_ = autoDestroy;\n};\n\n\n/**\n * Add an extra CSS class name to the popup.\n * @param {string} cls Class name to add to the popup element.\n * @export\n */\nexports.prototype.addClass = function(cls) {\n  this.element_.addClass(cls);\n};\n\n\n/**\n * Open a popup with the given properties.\n * @param {ngeox.PopupOptions} options Options.\n * @export\n */\nexports.prototype.open = function(options) {\n\n  if (options.url) {\n    this.setUrl(options.url);\n  } else if (options.content) {\n    this.setContent(options.content);\n  } else {\n    googAsserts.fail('ngeo.message.Popup options requirest \"url\" or \"content\".');\n  }\n\n  if (options.autoDestroy !== undefined) {\n    this.setAutoDestroy(options.autoDestroy);\n  }\n\n  if (options.cls !== undefined) {\n    this.addClass(options.cls);\n  }\n\n  if (options.height !== undefined) {\n    this.setHeight(options.height);\n  }\n\n  if (options.title !== undefined) {\n    this.setTitle(options.title);\n  }\n\n  if (options.width !== undefined) {\n    this.setWidth(options.width);\n  }\n\n  this.setOpen(true);\n};\n\n\n/**\n * @param {angular.$compile} $compile Angular compile service.\n * @param {angular.Scope} $rootScope Angular rootScope service.\n * @param {angular.$sce} $sce Angular sce service.\n * @param {angular.$timeout} $timeout Angular timeout service.\n * @return {ngeox.PopupFactory} The function to create a popup.\n *//* @ngInject\n */\nexports.Factory = function($compile, $rootScope, $sce, $timeout) {\n  return (\n    /**\n     * @return {!ngeo.message.Popup} The popup instance.\n     */\n    function() {\n      return new exports($compile, $rootScope, $sce, $timeout);\n    }\n  );\n};\n\n/**\n * @type {angular.Module}\n */\nexports.module = angular.module('ngeoCreatePopup', [\n  ngeoMessagePopupComponent.name,\n]);\nexports.module.factory('ngeoCreatePopup', exports.Factory);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/message/Popup.js","/**\n * @module ngeo.message.popupComponent\n*/\nimport ngeoBase from 'ngeo';\nconst exports = angular.module('ngeoPopup', []);\nngeoBase.module.requires.push(exports.name);\n\nexports.value('ngeoPopupTemplateUrl',\n  /**\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @return {string} Template URL.\n     */\n  (element, attrs) => {\n    const templateUrl = attrs['ngeoPopupTemplateurl'];\n    return templateUrl !== undefined ? templateUrl :\n      `${ngeoBase.baseModuleTemplateUrl}/message/popupcomponent.html`;\n  });\n\n\n/**\n * Provides a directive used to show a popup over the page with\n * a title and content.\n *\n *\n * Things to know about this directive:\n *\n * - This directive is intented to be used along with the popup service.\n *\n * - By default the directive uses \"popup.html\" as its templateUrl. This can be\n *   changed by redefining the \"ngeoPopupTemplateUrl\" value.\n *\n * - The directive doesn't create any scope but relies on its parent scope.\n *   Properties like 'content', 'title' or 'open' come from the parent scope.\n *\n * @private\n * @param {string} ngeoPopupTemplateUrl URL to popup template.\n * @return {angular.Directive} Directive Definition Object.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoPopup\n */\nexports.directive_ = function(ngeoPopupTemplateUrl) {\n  return {\n    restrict: 'A',\n    templateUrl: ngeoPopupTemplateUrl,\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      element.addClass('popover');\n\n      /**\n       * @param {jQuery.Event} evt Event.\n       */\n      scope.close = function(evt) {\n        if (evt) {\n          evt.stopPropagation();\n          evt.preventDefault();\n        }\n        element.addClass('hidden');\n      };\n\n      // Watch the open property\n      scope.$watch('open', (newVal, oldVal) => {\n        element.css('display', newVal ? 'block' : 'none');\n      });\n    }\n  };\n};\n\nexports.directive('ngeoPopup', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/message/popupComponent.js","/**\n * @module ngeo.CustomEvent\n*/\nimport olBase from 'ol';\nimport olEventsEvent from 'ol/events/Event';\n\n/**\n * @constructor\n * @extends {ol.events.Event}\n * @param {string} type Event type.\n * @param {T} detail Event Detail.\n * @template T\n */\nconst exports = function(type, detail = {}) {\n\n  olEventsEvent.call(this, type);\n\n  /**\n   * @type {T}\n   */\n  this.detail = detail;\n\n};\n\nolBase.inherits(exports, olEventsEvent);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/CustomEvent.js","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\nimport {inherits} from '../index.js';\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport _ol_obj_ from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport _ol_reproj_ from '../reproj.js';\nimport _ol_size_ from '../size.js';\nimport TileImage from '../source/TileImage.js';\nimport WMSServerType from '../source/WMSServerType.js';\nimport _ol_tilecoord_ from '../tilecoord.js';\nimport _ol_string_ from '../string.js';\nimport _ol_uri_ from '../uri.js';\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.TileWMSOptions=} opt_options Tile WMS options.\n * @api\n */\nvar TileWMS = function(opt_options) {\n\n  var options = opt_options || {};\n\n  var params = options.params || {};\n\n  var transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: !transparent,\n    projection: options.projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileClass: options.tileClass,\n    tileGrid: options.tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n  /**\n   * @private\n   * @type {number}\n   */\n  this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n  /**\n   * @private\n   * @type {!Object}\n   */\n  this.params_ = params;\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.v13_ = true;\n\n  /**\n   * @private\n   * @type {ol.source.WMSServerType|undefined}\n   */\n  this.serverType_ = /** @type {ol.source.WMSServerType|undefined} */ (options.serverType);\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n  /**\n   * @private\n   * @type {ol.Extent}\n   */\n  this.tmpExtent_ = createEmpty();\n\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n\n};\n\ninherits(TileWMS, TileImage);\n\n\n/**\n * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n * constructed.\n * @param {ol.Coordinate} coordinate Coordinate.\n * @param {number} resolution Resolution.\n * @param {ol.ProjectionLike} projection Projection.\n * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n *     in the `LAYERS` parameter will be used. `VERSION` should not be\n *     specified here.\n * @return {string|undefined} GetFeatureInfo URL.\n * @api\n */\nTileWMS.prototype.getGetFeatureInfoUrl = function(coordinate, resolution, projection, params) {\n  var projectionObj = getProjection(projection);\n  var sourceProjectionObj = this.getProjection();\n\n  var tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projectionObj);\n  }\n\n  var tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  var tileResolution = tileGrid.getResolution(tileCoord[0]);\n  var tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  var tileSize = _ol_size_.toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n  var gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n    tileResolution = _ol_reproj_.calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n    tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n    coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n  }\n\n  var baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetFeatureInfo',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true,\n    'QUERY_LAYERS': this.params_['LAYERS']\n  };\n  _ol_obj_.assign(baseParams, this.params_, params);\n\n  var x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n  var y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n  baseParams[this.v13_ ? 'I' : 'X'] = x;\n  baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n      1, sourceProjectionObj || projectionObj, baseParams);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getGutterInternal = function() {\n  return this.gutter_;\n};\n\n\n/**\n * Get the user-provided params, i.e. those passed to the constructor through\n * the \"params\" option, and possibly updated using the updateParams method.\n * @return {Object} Params.\n * @api\n */\nTileWMS.prototype.getParams = function() {\n  return this.params_;\n};\n\n\n/**\n * @param {ol.TileCoord} tileCoord Tile coordinate.\n * @param {ol.Size} tileSize Tile size.\n * @param {ol.Extent} tileExtent Tile extent.\n * @param {number} pixelRatio Pixel ratio.\n * @param {ol.proj.Projection} projection Projection.\n * @param {Object} params Params.\n * @return {string|undefined} Request URL.\n * @private\n */\nTileWMS.prototype.getRequestUrl_ = function(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, params) {\n\n  var urls = this.urls;\n  if (!urls) {\n    return undefined;\n  }\n\n  params['WIDTH'] = tileSize[0];\n  params['HEIGHT'] = tileSize[1];\n\n  params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n  if (!('STYLES' in this.params_)) {\n    params['STYLES'] = '';\n  }\n\n  if (pixelRatio != 1) {\n    switch (this.serverType_) {\n      case WMSServerType.GEOSERVER:\n        var dpi = (90 * pixelRatio + 0.5) | 0;\n        if ('FORMAT_OPTIONS' in params) {\n          params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n        } else {\n          params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n        }\n        break;\n      case WMSServerType.MAPSERVER:\n        params['MAP_RESOLUTION'] = 90 * pixelRatio;\n        break;\n      case WMSServerType.CARMENTA_SERVER:\n      case WMSServerType.QGIS:\n        params['DPI'] = 90 * pixelRatio;\n        break;\n      default:\n        assert(false, 52); // Unknown `serverType` configured\n        break;\n    }\n  }\n\n  var axisOrientation = projection.getAxisOrientation();\n  var bbox = tileExtent;\n  if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n    var tmp;\n    tmp = tileExtent[0];\n    bbox[0] = tileExtent[1];\n    bbox[1] = tmp;\n    tmp = tileExtent[2];\n    bbox[2] = tileExtent[3];\n    bbox[3] = tmp;\n  }\n  params['BBOX'] = bbox.join(',');\n\n  var url;\n  if (urls.length == 1) {\n    url = urls[0];\n  } else {\n    var index = modulo(_ol_tilecoord_.hash(tileCoord), urls.length);\n    url = urls[index];\n  }\n  return _ol_uri_.appendParams(url, params);\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.getTilePixelRatio = function(pixelRatio) {\n  return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n  /** @type {number} */ (pixelRatio);\n};\n\n\n/**\n * @private\n * @return {string} The key for the current params.\n */\nTileWMS.prototype.getKeyForParams_ = function() {\n  var i = 0;\n  var res = [];\n  for (var key in this.params_) {\n    res[i++] = key + '-' + this.params_[key];\n  }\n  return res.join('/');\n};\n\n\n/**\n * @inheritDoc\n */\nTileWMS.prototype.fixedTileUrlFunction = function(tileCoord, pixelRatio, projection) {\n\n  var tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  var tileResolution = tileGrid.getResolution(tileCoord[0]);\n  var tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  var tileSize = _ol_size_.toSize(\n      tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  var gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = _ol_size_.buffer(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = _ol_size_.scale(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  var baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  _ol_obj_.assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n      pixelRatio, projection, baseParams);\n};\n\n/**\n * Update the user-provided params.\n * @param {Object} params Params.\n * @api\n */\nTileWMS.prototype.updateParams = function(params) {\n  _ol_obj_.assign(this.params_, params);\n  this.updateV13_();\n  this.setKey(this.getKeyForParams_());\n};\n\n\n/**\n * @private\n */\nTileWMS.prototype.updateV13_ = function() {\n  var version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n  this.v13_ = _ol_string_.compareVersions(version, '1.3') >= 0;\n};\nexport default TileWMS;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/TileWMS.js\n// module id = 23\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31","/**\n * @module ngeo.datasource.DataSource\n*/\nimport ngeoBase from 'ngeo';\n\n/**\n * @implements {ngeox.datasource.DataSource}\n */\nconst exports = class {\n\n  /**\n   * A `ngeo.datasource.DataSource` represents a single source of data, which\n   * can combine different type of servers to display or fetch the data. It can\n   * serve as a point of entry to get all the information about a single data\n   * source.\n   *\n   * You can use the information in a data source to do all sorts of things:\n   *  - create `ol.layer.Layer` objects using the WMS, WMTS or even WFS\n   *    information\n   *  - issue WMS/WFS queries\n   *  - know whether the data is visible or not\n   *  - apply filter rules on it\n   *\n   * @struct\n   * @param {ngeox.datasource.DataSourceOptions} options Options.\n   */\n  constructor(options) {\n\n    // === DYNAMIC properties (i.e. that can change / be watched ===\n\n    /**\n     * A data source is considered 'in range' when it is synchronized to\n     * a map view and the resolution of that view is within the range of\n     * the `maxResolution` and `minResolution`. These 2 properties are\n     * required for the `inRange` property to be dynamic, otherwise its\n     * value is always `true` by default.\n     *\n     * The synchronization is made in the `ngeo.datasource.SyncDataSourcesMap`\n     * service.\n     *\n     * @type {boolean}\n     * @private\n     */\n    this.inRange_ = options.inRange !== false;\n\n    /**\n     * Whether the data source is visible or not, i.e. whether its is ON or OFF.\n     * Defaults to `false`.\n     * @type {boolean}\n     * @private\n     */\n    this.visible_ = options.visible === true;\n\n\n    // === STATIC properties (i.e. that never change) ===\n\n    /**\n     * The attributes of the data source.\n     *\n     * Note: `attributes` is not using the conventionnal getter/setter due\n     * to:  See: https://github.com/google/closure-compiler/issues/1089\n     *\n     * @type {?Array.<ngeox.Attribute>}\n     * @export\n     */\n    this.attributes = options.attributes || null;\n\n    /**\n     * (Required) The data source id.\n     * @type {number}\n     * @private\n     */\n    this.id_ = options.id;\n\n    /**\n     * The name of an attribute among the attributes of the data source.\n     * The value of that attribute, in records, can be used to identify\n     * each record individually.\n     * @type {string|undefined}\n     * @private\n     */\n    this.identifierAttribute_ = options.identifierAttribute;\n\n    /**\n     * Maximum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.maxResolution_ = options.maxResolution;\n\n    /**\n     * Minimum resolution where the data source can be displayed or queried.\n     * @type {number|undefined}\n     * @private\n     */\n    this.minResolution_ = options.minResolution;\n\n    /**\n     * (Required) A human-readable name for the data source.\n     * @type {string}\n     * @private\n     */\n    this.name_ = options.name;\n  }\n\n  // ========================================\n  // === Dynamic property getters/setters ===\n  // ========================================\n\n  /**\n   * @return {boolean} In range\n   * @export\n   */\n  get inRange() {\n    return this.inRange_;\n  }\n\n  /**\n   * @param {boolean} inRange In range\n   * @export\n   */\n  set inRange(inRange) {\n    this.inRange_ = inRange;\n  }\n\n  /**\n   * @return {boolean} Visible\n   * @export\n   */\n  get visible() {\n    return this.visible_;\n  }\n\n  /**\n   * @param {boolean} visible Visible\n   * @export\n   */\n  set visible(visible) {\n    this.visible_ = visible;\n  }\n\n  // =======================================\n  // === Static property getters/setters ===\n  // =======================================\n\n  /**\n   * @return {?Array.<ngeox.Attribute>} Attributes\n   * @export\n   */\n  getAttributes() {\n    return this.attributes;\n  }\n\n  /**\n   * @param {?Array.<ngeox.Attribute>} attributes Attributes\n   * @export\n   */\n  setAttributes(attributes) {\n    this.attributes = attributes;\n  }\n\n  /**\n   * @return {number} Id\n   * @export\n   */\n  get id() {\n    return this.id_;\n  }\n\n  /**\n   * @return {string|undefined} Identifier attribute\n   * @export\n   */\n  get identifierAttribute() {\n    return this.identifierAttribute_;\n  }\n\n  /**\n   * @return {number|undefined} Maximum resolution\n   * @export\n   */\n  get maxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * @return {number|undefined} Minimum resolution\n   * @export\n   */\n  get minResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * @return {string} Name\n   * @export\n   */\n  get name() {\n    return this.name_;\n  }\n\n\n  // ===================================\n  // === Calculated property getters ===\n  // ===================================\n\n  /**\n   * Whether the data source is queryable or not.\n   * @return {boolean} Whether the data source is queryable or not.\n   * @export\n   */\n  get queryable() {\n    return false;\n  }\n\n  /**\n   * @return {boolean} Whether the data source supports a dynamic `inRange`\n   *     property or not, i.e. whether it can be calculated.\n   * @export\n   */\n  get supportsDynamicInRange() {\n    return this.maxResolution !== null || this.minResolution !== null;\n  }\n};\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSource.js","/**\n * @module ngeo.datasource.DataSources\n*/\nconst exports = {};\nimport ngeoBase from 'ngeo';\nimport olCollection from 'ol/Collection';\n\n\nngeoBase.module.value('ngeoDataSources', new olCollection());\n\n\n/**\n * @typedef {!ol.Collection.<!ngeo.datasource.DataSource>}\n */\nexports;\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/DataSources.js","/**\n * @module ngeo.map.FeatureOverlayMgr\n*/\nimport ngeoBase from 'ngeo';\nimport olBase from 'ol';\nimport olLayerVector from 'ol/layer/Vector';\nimport olObj from 'ol/obj';\nimport olSourceVector from 'ol/source/Vector';\nimport olStyleStyle from 'ol/style/Style';\nimport googAsserts from 'goog/asserts';\nimport ngeoMapFeatureOverlay from 'ngeo/map/FeatureOverlay';\n\n/**\n * Provides a service that wraps an \"unmanaged\" vector layer,\n * used as a shared vector layer across the application.\n *\n * Example:\n *\n * The application's main component/controller initializes the feature\n * overlay manager with the map:\n *\n *     ngeoFeatureOverlayMgr.init(map);\n *\n * Once initialized, components of the application can use the manager to\n * create a feature overlay, configuring it with specific styles:\n *\n *     let featureOverlay = ngeoFeatureOverlayMgr.getFeatureOverlay();\n *     featureOverlay.setStyle(myStyle);\n *     featureOverlay.addFeature(myFeature);\n *\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoFeatureOverlayMgr\n */\nconst exports = function() {\n\n  /**\n   * @type {Object.<string, number>}\n   * @private\n   */\n  this.featureUidToGroupIndex_ = {};\n\n  /**\n   * @type {Array.<ngeox.MapFeatureOverlayGroup>}\n   * @private\n   */\n  this.groups_ = [];\n\n  /**\n   * @type {ol.source.Vector}\n   * @private\n   */\n  this.source_ = new olSourceVector({\n    useSpatialIndex: false\n  });\n\n  /**\n   * @type {ol.layer.Vector}\n   * @private\n   */\n  this.layer_ = new olLayerVector({\n    source: this.source_,\n    style: this.styleFunction_.bind(this),\n    updateWhileAnimating: true,\n    updateWhileInteracting: true\n  });\n\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.addFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  this.featureUidToGroupIndex_[featureUid] = groupIndex;\n  this.groups_[groupIndex].features[featureUid] = feature;\n  this.source_.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Feature} feature The feature to add.\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.removeFeature = function(feature, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const featureUid = olBase.getUid(feature).toString();\n  delete this.featureUidToGroupIndex_[featureUid];\n  delete this.groups_[groupIndex].features[featureUid];\n  this.source_.removeFeature(feature);\n};\n\n\n/**\n * @param {number} groupIndex The group groupIndex.\n * @export\n */\nexports.prototype.clear = function(groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  const group = this.groups_[groupIndex];\n  for (const featureUid in group.features) {\n    this.removeFeature(group.features[featureUid], groupIndex);\n  }\n  googAsserts.assert(olObj.isEmpty(group.features));\n};\n\n\n/**\n * @return {ol.layer.Vector} The vector layer used internally.\n * @export\n */\nexports.prototype.getLayer = function() {\n  return this.layer_;\n};\n\n\n/**\n * @return {ngeo.map.FeatureOverlay} Feature overlay.\n * @export\n */\nexports.prototype.getFeatureOverlay = function() {\n  const groupIndex = this.groups_.length;\n  this.groups_.push({\n    styleFunction: olStyleStyle.defaultFunction,\n    features: {}\n  });\n  return new ngeoMapFeatureOverlay(this, groupIndex);\n};\n\n\n/**\n * @param {ol.Map} map Map.\n * @export\n */\nexports.prototype.init = function(map) {\n  this.layer_.setMap(map);\n};\n\n\n/**\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @param {number} groupIndex Group index.\n * @export\n */\nexports.prototype.setStyle = function(style, groupIndex) {\n  googAsserts.assert(groupIndex >= 0);\n  googAsserts.assert(groupIndex < this.groups_.length);\n  this.groups_[groupIndex].styleFunction = style === null ?\n    olStyleStyle.defaultFunction : olStyleStyle.createFunction(style);\n};\n\n\n/**\n * @param {ol.Feature|ol.render.Feature} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array.<ol.style.Style>|ol.style.Style} Styles.\n * @private\n */\nexports.prototype.styleFunction_ = function(feature, resolution) {\n  const featureUid = olBase.getUid(feature).toString();\n  googAsserts.assert(featureUid in this.featureUidToGroupIndex_);\n  const groupIndex = this.featureUidToGroupIndex_[featureUid];\n  const group = this.groups_[groupIndex];\n  return group.styleFunction(feature, resolution);\n};\n\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlayMgr', [\n  ngeoMapFeatureOverlay.module.name\n]);\nexports.module.service('ngeoFeatureOverlayMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlayMgr.js","/**\n * @module app.disclaimer\n*/\nconst exports = {};\n\nimport 'examples/disclaimer.css';\nimport './common_dependencies.js';\nimport ngeoMessageDisclaimer from 'ngeo/message/Disclaimer';\n\nimport ngeoMessageMessage from 'ngeo/message/Message';\nimport olMap from 'ol/Map';\nimport olView from 'ol/View';\nimport olLayerTile from 'ol/layer/Tile';\nimport olSourceOSM from 'ol/source/OSM';\nimport ngeoMapModule from 'ngeo/map/module';\n\n\n/** @type {!angular.Module} **/\napp.module = angular.module('app', [\n  ngeo.module.name,\n  ngeoMapModule.name,\n  ngeoMessageDisclaimer.module.name,\n]);\n\n\n/**\n * @param {ngeo.message.Disclaimer} ngeoDisclaimer Ngeo disclaimer service.\n *//* @ngInject\n * @constructor\n */\napp.MainController = function(ngeoDisclaimer) {\n\n  /**\n   * @type {ngeo.message.Disclaimer}\n   * @export\n   */\n  this.disclaimer = ngeoDisclaimer;\n\n  /**\n   * @type {ol.Map}\n   * @export\n   */\n  this.map = new olMap({\n    layers: [\n      new olLayerTile({\n        source: new olSourceOSM()\n      })\n    ],\n    view: new olView({\n      center: [0, 0],\n      zoom: 4\n    })\n  });\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.successMsg_ = 'Disclaimer with success style';\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.infoMsg_ = 'Disclaimer with info style';\n  /**\n   * @type {string}\n   * @private\n   */\n  this.warningMsg_ = 'Disclaimer with warning style';\n\n  /**\n   * @type {string}\n   * @private\n   */\n  this.errorMsg_ = 'Disclaimer with error style';\n\n  /**\n   * @type {Array.<string>}\n   * @private\n   */\n  this.inMapMsgs_ = [\n    'Disclaimer inside the map',\n    'An other message ',\n    'Map contributors',\n    'This is a long message inside a map'\n  ];\n\n  // initialize tooltips\n  $('[data-toggle=\"tooltip\"]').tooltip({\n    container: 'body',\n    trigger: 'hover'\n  });\n};\n\n\n/**\n * @export\n */\napp.MainController.prototype.success = function() {\n  this.disclaimer.success(this.successMsg_);\n};\n\n\n/**\n * @export\n */\napp.MainController.prototype.info = function() {\n  this.disclaimer.info(this.infoMsg_);\n};\n\n\n/**\n * @export\n */\napp.MainController.prototype.warn = function() {\n  this.disclaimer.warn(this.warningMsg_);\n};\n\n\n/**\n * @export\n */\napp.MainController.prototype.error = function() {\n  this.disclaimer.error(this.errorMsg_);\n};\n\n\n/**\n * Demonstrates how to display a disclaimer message in an other target. In\n * this case, it's shown in the map.\n * @export\n */\napp.MainController.prototype.inMap = function() {\n  this.inMapMsgs_.forEach(function(message) {\n    this.disclaimer.alert({\n      msg: message,\n      target: angular.element('#disclaimers-in-map'),\n      type: ngeoMessageMessage.Type.WARNING\n    });\n  }, this);\n};\n\n\n/**\n * Demonstrates how to close disclaimer messages using JavaScript, i.e.\n * instead of clicking on the close button.\n * @export\n */\napp.MainController.prototype.closeAll = function() {\n\n  this.disclaimer.close({\n    msg: this.successMsg_,\n    type: ngeoMessageMessage.Type.SUCCESS\n  });\n\n  this.disclaimer.close({\n    msg: this.infoMsg_,\n    type: ngeoMessageMessage.Type.INFORMATION\n  });\n\n  this.disclaimer.close({\n    msg: this.warningMsg_,\n    type: ngeoMessageMessage.Type.WARNING\n  });\n\n  this.disclaimer.close({\n    msg: this.errorMsg_,\n    type: ngeoMessageMessage.Type.ERROR\n  });\n\n  this.inMapMsgs_.forEach(function(message) {\n    this.disclaimer.close({\n      msg: message,\n      type: ngeoMessageMessage.Type.WARNING\n    });\n  }, this);\n\n};\n\n\napp.module.controller('MainController', app.MainController);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./examples/disclaimer.js","const exports = {};\n\nexports.assert = function(condition, opt_message, var_args) {};\nexports.assertNumber = function(value, opt_message, var_args) {};\nexports.assertString = function(value, opt_message, var_args) {};\nexports.assertFunction = function(value, opt_message, var_args) {};\nexports.assertObject = function(value, opt_message, var_args) {};\nexports.assertArray = function(value, opt_message, var_args) {};\nexports.assertBoolean = function(value, opt_message, var_args) {};\nexports.assertElement = function(value, opt_message, var_args) {};\nexports.assertInstanceof = function(value, type, opt_message, var_args) {};\nexports.assertObjectPrototypeIsIntact = function() {};\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/goog.asserts.prod.js","/**\n * @module ngeo.message.Disclaimer\n*/\nimport googAsserts from 'goog/asserts';\nimport ngeoBase from 'ngeo';\nimport ngeoMessagePopup from 'ngeo/message/Popup';\nimport ngeoMessageMessage from 'ngeo/message/Message';\nimport olBase from 'ol';\n\n/**\n * Provides methods to display any sort of messages, disclaimers, errors,\n * etc. Requires Bootstrap library (both CSS and JS) to display the alerts\n * properly.\n *\n * @param {angular.$sce} $sce Angular sce service.\n * @param {angularGettext.Catalog} gettextCatalog Gettext service.\n * @param {ngeox.PopupFactory} ngeoCreatePopup Popup service.\n * @constructor\n * @struct\n * @extends {ngeo.message.Message}\n * @ngdoc service\n * @ngname ngeoDisclaimer\n *//* @ngInject\n */\nconst exports = function($sce, gettextCatalog, ngeoCreatePopup) {\n\n  /**\n   * @private\n   * @type {angular.$sce}\n   */\n  this.sce_ = $sce;\n\n  /**\n   * @type {angularGettext.Catalog}\n   * @private\n   */\n  this.gettextCatalog_ = gettextCatalog;\n\n  /**\n   * @private\n   * @type {ngeox.PopupFactory}\n   */\n  this.createPopup_ = ngeoCreatePopup;\n\n  ngeoMessageMessage.call(this);\n\n  const container = angular.element('<div class=\"ngeo-disclaimer\"></div>');\n  angular.element(document.body).append(container);\n\n  /**\n   * @type {angular.JQLite}\n   * @private\n   */\n  this.container_ = container;\n\n  /**\n   * Cache of messages.\n   * @type {Object.<string, angular.JQLite|ngeo.message.Popup>}\n   * @private\n   */\n  this.messages_ = {};\n\n};\n\nolBase.inherits(exports, ngeoMessageMessage);\n\n\n/**\n * Show disclaimer message string or object or list of disclamer message\n * strings or objects.\n * @param {string|Array.<string>|ngeox.Message|Array.<ngeox.Message>}\n *     object A message or list of messages as text or configuration objects.\n * @export\n */\nexports.prototype.alert = function(object) {\n  this.show(object);\n};\n\n\n/**\n * Close disclaimer message string or object or list of disclamer message\n * strings or objects.\n * @param {string|Array.<string>|ngeox.Message|Array.<ngeox.Message>}\n *     object A message or list of messages as text or configuration objects.\n * @export\n */\nexports.prototype.close = function(object) {\n  const msgObjects = this.getMessageObjects(object);\n  msgObjects.forEach(this.closeMessage_, this);\n};\n\n\n/**\n * Show the message.\n * @param {ngeox.Message} message Message.\n * @protected\n * @override\n */\nexports.prototype.showMessage = function(message) {\n  const gettextCatalog = this.gettextCatalog_;\n  const type = message.type;\n  googAsserts.assertString(type, 'Type should be set.');\n\n  // No need to do anything if message already exist.\n  const uid = this.getMessageUid_(message);\n  if (this.messages_[uid] !== undefined) {\n    return;\n  }\n\n  const showInPopup = message.popup === true;\n\n  if (showInPopup) {\n    // display the message in a popup, i.e. using the ngeo create popup\n    const popup = this.createPopup_();\n    const content = this.sce_.trustAsHtml(message.msg);\n    popup.open({\n      autoDestroy: true,\n      content: content,\n      title: '&nbsp;'\n    });\n\n    // Watch the open property\n    popup.scope.$watch('open', (newVal, oldVal) => {\n      if (!newVal) {\n        this.closeMessage_(message);\n      }\n    });\n\n    this.messages_[uid] =  popup;\n\n  } else {\n    // display the message using a boostrap dismissible alert\n    const classNames = ['alert', 'fade', 'alert-dismissible'];\n    switch (type) {\n      case ngeoMessageMessage.Type.ERROR:\n        classNames.push('alert-danger');\n        break;\n      case ngeoMessageMessage.Type.INFORMATION:\n        classNames.push('alert-info');\n        break;\n      case ngeoMessageMessage.Type.SUCCESS:\n        classNames.push('alert-success');\n        break;\n      case ngeoMessageMessage.Type.WARNING:\n        classNames.push('alert-warning');\n        break;\n      default:\n        break;\n    }\n\n    const el = angular.element(\n      `<div role=\"alert\" class=\"${classNames.join(' ')}\"></div>`);\n    const button = angular.element(\n      `<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"${\n        gettextCatalog.getString('Close')\n      }\"><span aria-hidden=\"true\" class=\"fa fa-times\"></span></button>`);\n    const msg = angular.element('<span />').html(message.msg);\n    el.append(button).append(msg);\n\n    let container;\n\n    if (message.target) {\n      container = angular.element(message.target);\n    } else {\n      container = this.container_;\n    }\n\n    container.append(el);\n    el.addClass('in');\n\n    // Listen when the message gets closed to cleanup the cache of messages\n    el.on('closed.bs.alert', () => {\n      this.closeMessage_(message);\n    });\n\n    this.messages_[uid] =  el;\n  }\n};\n\n\n/**\n * @param {ngeox.Message} message Message.\n * @return {string} The uid.\n * @private\n */\nexports.prototype.getMessageUid_ = function(message) {\n  return `${message.msg}-${message.type}`;\n};\n\n\n/**\n * Close the message.\n * @param {ngeox.Message} message Message.\n * @protected\n */\nexports.prototype.closeMessage_ = function(message) {\n  const uid = this.getMessageUid_(message);\n  const obj = this.messages_[uid];\n\n  // (1) No need to do anything if message doesn't exist\n  if (obj === undefined) {\n    return;\n  }\n\n  // (2) Close message (popup or alert)\n  if (obj instanceof ngeoMessagePopup) {\n    // (2.1) Close popup, if not already closed\n    if (obj.getOpen()) {\n      obj.setOpen(false);\n    }\n  } else {\n    // (2.2) Check if the message hasn't been closed using the UI, i.e. by\n    //       clicking the close button. If not, then close it.\n    if (obj.hasClass('in')) {\n      obj.alert('close');\n    }\n  }\n\n  // (3) Remove message from cache since it's closed now.\n  delete this.messages_[uid];\n};\n\n\n/**\n * @type {angular.Module}\n */\nexports.module = angular.module('ngeoDisclaimer', [\n  ngeoMessagePopup.module.name,\n]);\n\nexports.module.service('ngeoDisclaimer', exports);\n\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/message/Disclaimer.js","/**\n * @module ngeo.map.module\n*/\nimport ngeoBase from 'ngeo';\nimport ngeoMapBackgroundLayerMgr from 'ngeo/map/BackgroundLayerMgr';\nimport ngeoMapDirective from 'ngeo/map/directive';\nimport ngeoMapFeatureOverlayMgr from 'ngeo/map/FeatureOverlayMgr';\nimport ngeoMapRecenter from 'ngeo/map/recenter';\nimport ngeoMapResizemap from 'ngeo/map/resizemap';\nimport ngeoMapScaleselector from 'ngeo/map/scaleselector';\n\n/**\n * Also related to the map but not included in the module:\n *  - ngeo.map.FeatureOverlay (already required by ngeo.map.FeatureOverlayMgr)\n *\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMapModule', [\n  ngeoBase.module.name, // Change me when all dependencies are in a module.\n  ngeoMapBackgroundLayerMgr.module.name,\n  ngeoMapDirective.name,\n  ngeoMapFeatureOverlayMgr.module.name,\n  ngeoMapRecenter.name,\n  ngeoMapResizemap.name,\n  ngeoMapScaleselector.name\n]);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/module.js","/**\n * @module ngeo.map.BackgroundLayerMgr\n*/\nimport googAsserts from 'goog/asserts';\nimport ngeoBase from 'ngeo';\nimport ngeoCustomEvent from 'ngeo/CustomEvent';\nimport olBase from 'ol';\nimport olObservable from 'ol/Observable';\nimport olLayerGroup from 'ol/layer/Group';\nimport olLayerLayer from 'ol/layer/Layer';\nimport olSourceImageWMS from 'ol/source/ImageWMS';\nimport olSourceTileWMS from 'ol/source/TileWMS';\nimport olSourceWMTS from 'ol/source/WMTS';\n\n/**\n * Provides a service for setting/unsetting background layers\n * in maps.\n *\n * The notion of background/base layers doesn't exist in OpenLayers. This\n * service adds that notion.\n *\n * Setting a background layer to map is done with the `set` function:\n *\n *     ngeoBackgroundLayerMgr.set(map, layer);\n *\n * To unset the background layer pass `null` as the `layer` argument:\n *\n *     ngeoBackgroundLayerMgr.set(map, null);\n *\n * The `get` function returns the current background layer of the map passed\n * as an argument. `null` is returned if the map doesn't have a background\n * layer.\n *\n * The background layer is always added at index 0 in the map's layers\n * collection. When a background layer is set it is inserted (at index 0)\n * if the map does not already have a background layer, otherwise the\n * new background layer replaces the previous one at index 0.\n *\n * Users can subscribe to a 'change' event to get notified when the background\n * layer changes:\n *\n *     ngeoBackgroundLayerMgr.on('change', function(e) {\n *       // do something with the layer\n *       let layer = ngeoBackgroundLayerMgr.get();\n *       // know which layer was used before\n *       let previous = e.previous\n *     });\n *\n * See our live examples:\n * [../examples/backgroundlayer.html](../examples/backgroundlayer.html)\n * [../examples/backgroundlayerdropdown.html](../examples/backgroundlayerdropdown.html)\n *\n * @extends {ol.Observable}\n * @constructor\n * @struct\n * @ngdoc service\n * @ngname ngeoBackgroundLayerMgr\n */\nconst exports = function() {\n\n  olObservable.call(this);\n\n  /**\n   * Object used to track if maps have background layers.\n   * @type {Object.<string, boolean>}\n   * @private\n   */\n  this.mapUids_ = {};\n};\n\nolBase.inherits(exports, olObservable);\n\n\n/**\n * Return the current background layer of a given map. `null` is returned if\n * the map does not have a background layer.\n * @param {ol.Map} map Map.\n * @return {ol.layer.Base} layer The background layer.\n * @export\n */\nexports.prototype.get = function(map) {\n  const mapUid = olBase.getUid(map).toString();\n  return mapUid in this.mapUids_ ? map.getLayers().item(0) : null;\n};\n\n\n/**\n * Set the background layer of a map. If `layer` is `null` the background layer\n * is removed.\n * @param {ol.Map} map The map.\n * @param {ol.layer.Base} layer The new background layer.\n * @return {ol.layer.Base} The previous background layer.\n * @export\n */\nexports.prototype.set = function(map, layer) {\n  const mapUid = olBase.getUid(map).toString();\n  const previous = this.get(map);\n  if (previous !== null) {\n    googAsserts.assert(mapUid in this.mapUids_);\n    if (layer !== null) {\n      map.getLayers().setAt(0, layer);\n    } else {\n      map.getLayers().removeAt(0);\n      delete this.mapUids_[mapUid];\n    }\n  } else if (layer !== null) {\n    map.getLayers().insertAt(0, layer);\n    this.mapUids_[mapUid] = true;\n  }\n  /** @type {ngeox.BackgroundEvent} */\n  const event = new ngeoCustomEvent('change', {\n    current: layer,\n    previous: previous\n  });\n  this.dispatchEvent(event);\n\n  return previous;\n};\n\n/**\n * @param {ol.Map} map The map.\n * @param {Object.<string, string>} dimensions The global dimensions object.\n * @export\n */\nexports.prototype.updateDimensions = function(map, dimensions) {\n  const baseBgLayer = this.get(map);\n  if (baseBgLayer) {\n    let layers = [baseBgLayer];\n    if (baseBgLayer instanceof olLayerGroup) {\n      // Handle the first level of layers of the base background layer.\n      layers = baseBgLayer.getLayers().getArray();\n    }\n\n    layers.forEach((layer) => {\n      googAsserts.assertInstanceof(layer, olLayerLayer);\n      if (layer) {\n        let hasUpdates = false;\n        const updatedDimensions = {};\n        for (const key in layer.get('dimensions')) {\n          const value = dimensions[key];\n          if (value !== undefined) {\n            updatedDimensions[key] = value;\n            hasUpdates = true;\n          }\n        }\n        if (hasUpdates) {\n          const source = layer.getSource();\n          if (source instanceof olSourceWMTS) {\n            source.updateDimensions(updatedDimensions);\n            source.refresh();\n          } else if (source instanceof olSourceTileWMS || source instanceof olSourceImageWMS) {\n            source.updateParams(updatedDimensions);\n            source.refresh();\n          }\n        }\n      }\n    });\n  }\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoBackgroundLayerMgr', []);\nexports.module.service('ngeoBackgroundLayerMgr', exports);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/BackgroundLayerMgr.js","/**\n * @module ngeo.map.directive\n*/\nimport googAsserts from 'goog/asserts';\nimport ngeoBase from 'ngeo';\n\n// TODO Remove me, there should not be a dependency on datasources from the map.\nimport ngeoDatasourceSyncDataSourcesMap from 'ngeo/datasource/SyncDataSourcesMap';\n\nimport olEvents from 'ol/events';\nimport olMap from 'ol/Map';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoMap', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\n/**\n * Provides a directive used to insert a user-defined OpenLayers\n * map in the DOM. The directive does not create an isolate scope.\n *\n * Examples:\n *\n *   Simple:\n *\n *      <div ngeo-map=\"ctrl.map\"></div>\n *\n *   Manage window resizing:\n *\n *      <div\n *        ngeo-map=\"ctrl.map\"\n *        ngeo-map-manage-resize=\"ctrl.manageResize\"\n *        ngeo-map-resize-transition=\"ctrl.resizeTransition\">\n *      </div>\n *\n * See our live examples:\n * [../examples/permalink.html](../examples/permalink.html)\n * [../examples/simple.html](../examples/simple.html)\n *\n * @htmlAttribute {ol.Map} ngeo-map The map.\n * @param {angular.$window} $window The Angular $window service.\n * @param {ngeo.datasource.SyncDataSourcesMap} ngeoSyncDataSourcesMap Ngeo sync\n *     data sources map service.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoMap\n *//* @ngInject\n */\nexports.directive_ = function($window, ngeoSyncDataSourcesMap) {\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      // Get the 'ol.Map' object from attributes and manage it accordingly\n      const attr = 'ngeoMap';\n      const prop = attrs[attr];\n\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      map.setTarget(element[0]);\n\n      ngeoSyncDataSourcesMap.map = map;\n\n\n      // Get the 'window resize' attributes, which are optionnal. If defined,\n      // the browser window 'resize' event is listened to update the size of\n      // the map when fired. A transition option is also available to let any\n      // animation that may occur on the div of the map to smootly resize the\n      // map while in progress.\n      const manageResizeAttr = 'ngeoMapManageResize';\n      const manageResizeProp = attrs[manageResizeAttr];\n      const manageResize = scope.$eval(manageResizeProp);\n\n      if (manageResize) {\n        const resizeTransitionAttr = 'ngeoMapResizeTransition';\n        const resizeTransitionProp = attrs[resizeTransitionAttr];\n\n        const resizeTransition = /** @type {number|undefined} */ (\n          scope.$eval(resizeTransitionProp));\n\n        olEvents.listen(\n          $window,\n          'resize',\n          () => {\n            if (resizeTransition) {\n              // Resize with transition\n              const start = Date.now();\n              let loop = true;\n              const adjustSize = function() {\n                map.updateSize();\n                map.renderSync();\n                if (loop) {\n                  $window.requestAnimationFrame(adjustSize);\n                }\n                if (Date.now() - start > resizeTransition) {\n                  loop = false;\n                }\n              };\n              adjustSize();\n            } else {\n              // A single plain resize\n              map.updateSize();\n            }\n          }\n        );\n      }\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoMap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/directive.js","/**\n * @module ngeo.datasource.SyncDataSourcesMap\n*/\nimport ngeoBase from 'ngeo';\nimport ngeoDatasourceDataSource from 'ngeo/datasource/DataSource';\n\n/** @suppress {extraRequire} */\nimport ngeoDatasourceDataSources from 'ngeo/datasource/DataSources';\n\nimport olEvents from 'ol/events';\nimport olObservable from 'ol/Observable';\nimport olView from 'ol/View';\nimport googAsserts from 'goog/asserts';\n\nconst exports = class {\n\n  /**\n   * This service is responsible of the synchronization between the ngeo\n   * collection of data sources and a specific map. It listens to events\n   * that come directly or indirectly from the map and update the inner\n   * properties of the data sources.\n   *\n   * The following data sources properties are synchronized here:\n   *\n   * - inRange: The map view 'change:resolution' event is listened and the\n   *   property is updated depending on the current resolution.\n   *\n   * @param {ngeo.datasource.DataSources} ngeoDataSources Ngeo collection of\n   *     data sources objects.\n   *\n   * @struct\n   * @ngdoc service\n   * @ngname ngeoSyncDataSourcesMap\n   *//* @ngInject\n   */\n  constructor(ngeoDataSources) {\n\n    /**\n     * @type {ngeo.datasource.DataSources}\n     * @private\n     */\n    this.ngeoDataSources_ = ngeoDataSources;\n\n    /**\n     * @type {ol.Map}\n     * @private\n     */\n    this.map_ = null;\n\n    /**\n     * @type {!Array.<!ol.EventsKey>}\n     * @private\n     */\n    this.listenerKeys_ = [];\n\n    olEvents.listen(this.ngeoDataSources_, 'add', this.handleDataSourcesAdd_, this);\n  }\n\n  /**\n   * Set a map to this service. Null can be given to unset the map.\n   * @param {?ol.Map} map Map.\n   */\n  set map(map) {\n    if (this.map_) {\n      this.unbindMap_(this.map_);\n    }\n\n    this.map_ = map;\n\n    if (map) {\n      this.bindMap_(map);\n    }\n  }\n\n  /**\n   * Bind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  bindMap_(map) {\n\n    // (1) Event listeners\n    const view = map.getView();\n    this.listenerKeys_.push(\n      olEvents.listen(view, 'change:resolution', this.handleViewResolutionChange_, this)\n    );\n\n    // (2) Sync resolution with existing data sources\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Unbind a map to this service.\n   * @param {ol.Map} map Map.\n   * @private\n   */\n  unbindMap_(map) {\n    olObservable.unByKey(this.listenerKeys_);\n    this.listenerKeys_ = [];\n  }\n\n  /**\n   * Called when the resolution of the map view changes. Synchronize the\n   * datasources to current resolution of the view.\n   * @param {Event} evt Event.\n   * @private\n   */\n  handleViewResolutionChange_(evt) {\n    const view = evt.target;\n    googAsserts.assertInstanceof(view, olView);\n    const resolution = view.getResolution();\n    googAsserts.assertNumber(resolution);\n    this.syncDataSourcesToResolution_(resolution);\n  }\n\n  /**\n   * Synchronize all datasources in the ngeo collection with a given resolution.\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourcesToResolution_(resolution) {\n    this.ngeoDataSources_.forEach((dataSource) => {\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    });\n  }\n\n  /**\n   * Synchronize a data source `inRange` property with a given resolution.\n   * @param {ngeo.datasource.DataSource} dataSource Data source\n   * @param {number} resolution Resolution\n   * @private\n   */\n  syncDataSourceToResolution_(dataSource, resolution) {\n    // No need to do anything if the data source doesn't support dynamic\n    // setting of inRange\n    if (!dataSource.supportsDynamicInRange) {\n      return;\n    }\n\n    const maxResolution = dataSource.maxResolution;\n    const minResolution = dataSource.minResolution;\n\n    const inMinRange = minResolution === null ||\n        minResolution === undefined ||\n        resolution >= minResolution;\n    const inMaxRange = maxResolution === null ||\n        maxResolution === undefined ||\n        resolution <= maxResolution;\n    const inRange = inMinRange && inMaxRange;\n\n    dataSource.inRange = inRange;\n  }\n\n  /**\n   * Called when a new data source is added to the ngeo collection. If there's\n   * map bound, update its `inRange` right away.\n   * @param {!ol.Collection.Event} event Event\n   * @private\n   */\n  handleDataSourcesAdd_(event) {\n    const dataSource = googAsserts.assertInstanceof(\n      event.element, ngeoDatasourceDataSource);\n    if (this.map_) {\n      const resolution = this.map_.getView().getResolution();\n      googAsserts.assertNumber(resolution);\n      this.syncDataSourceToResolution_(dataSource, resolution);\n    }\n  }\n\n};\n\n\nngeoBase.module.service(\n  'ngeoSyncDataSourcesMap', exports);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/datasource/SyncDataSourcesMap.js","/**\n * @module ngeo.map.FeatureOverlay\n*/\nimport ngeoBase from 'ngeo';\nimport olBase from 'ol';\nimport olEvents from 'ol/events';\n\n/**\n * @constructor\n * @param {ngeo.map.FeatureOverlayMgr} manager The feature overlay manager.\n * @param {number} index This feature overlay's index.\n */\nconst exports = function(manager, index) {\n\n  /**\n   * @type {ngeo.map.FeatureOverlayMgr}\n   * @private\n   */\n  this.manager_ = manager;\n\n  /**\n   * @type {ol.Collection.<ol.Feature>}\n   * @private\n   */\n  this.features_ = null;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  this.index_ = index;\n};\n\n\n/**\n * Add a feature to the feature overlay.\n * @param {ol.Feature} feature The feature to add.\n * @export\n */\nexports.prototype.addFeature = function(feature) {\n  this.manager_.addFeature(feature, this.index_);\n};\n\n\n/**\n * Remove a feature from the feature overlay.\n * @param {ol.Feature} feature The feature to remove.\n * @export\n */\nexports.prototype.removeFeature = function(feature) {\n  this.manager_.removeFeature(feature, this.index_);\n};\n\n\n/**\n * Remove all the features from the feature overlay.\n * @export\n */\nexports.prototype.clear = function() {\n  this.manager_.clear(this.index_);\n};\n\n\n/**\n * Configure this feature overlay with a feature collection. Features added\n * to the collection are also added to the overlay. Same for removal. If you\n * configure the feature overlay with a feature collection you will use the\n * collection to add and remove features instead of using the overlay's\n * `addFeature`, `removeFeature` and `clear` functions.\n * @param {ol.Collection.<ol.Feature>} features Feature collection.\n * @export\n */\nexports.prototype.setFeatures = function(features) {\n  if (this.features_ !== null) {\n    this.features_.clear();\n    olEvents.unlisten(this.features_, 'add', this.handleFeatureAdd_, this);\n    olEvents.unlisten(this.features_, 'remove', this.handleFeatureRemove_, this);\n  }\n  if (features !== null) {\n    features.forEach(function(feature) {\n      this.addFeature(feature);\n    }, this);\n    olEvents.listen(features, 'add', this.handleFeatureAdd_, this);\n    olEvents.listen(features, 'remove', this.handleFeatureRemove_, this);\n  }\n  this.features_ = features;\n};\n\n\n/**\n * Set a style for the feature overlay.\n * @param {ol.style.Style|Array.<ol.style.Style>|ol.StyleFunction} style\n * Style.\n * @export\n */\nexports.prototype.setStyle = function(style) {\n  this.manager_.setStyle(style, this.index_);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureAdd_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.addFeature(feature);\n};\n\n\n/**\n * @param {ol.Collection.Event} evt Feature collection event.\n * @private\n */\nexports.prototype.handleFeatureRemove_ = function(evt) {\n  const feature = /** @type {ol.Feature} */ (evt.element);\n  this.removeFeature(feature);\n};\n\n/**\n * @type {!angular.Module}\n */\nexports.module = angular.module('ngeoFeatureOverlay', []);\nngeoBase.module.requires.push(exports.module.name);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/FeatureOverlay.js","/**\n * @module ngeo.map.recenter\n*/\nimport ngeoBase from 'ngeo';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoRecenter', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides the \"ngeoRecenter\" directive, a widget for recentering a map\n * to a specific extent (by using `ngeo-extent`) or a specific zoom level\n * (by using `ngeo-zoom`).\n *\n * Example:\n *\n *      <div ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <a href=\"#\" ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</a>\n *        <a href=\"#\" ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</a>\n *        <a href=\"#\" ngeo-zoom=\"1\">Zoom to level 1</a>\n *      </div>\n *\n * Or with a select:\n *\n *      <select ngeo-recenter ngeo-recenter-map=\"::ctrl.map\">\n *        <option ngeo-extent=\"[-1898084, 4676723, 3972279, 8590299]\">A</option>\n *        <option ngeo-extent=\"[727681, 5784754, 1094579, 6029353]\">B</option>\n *      </select>\n *\n * See our live example: [../examples/recenter.html](../examples/recenter.html)\n *\n * @htmlAttribute {ol.Map} ngeo-recenter-map The map.\n * @return {angular.Directive} Directive Definition Object.\n * @ngdoc directive\n * @ngname ngeoRecenter\n */\nexports.directive_ = function() {\n  return {\n    restrict: 'A',\n    link: ($scope, $element, $attrs) => {\n      const mapExpr = $attrs['ngeoRecenterMap'];\n      const map = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n\n      function recenter(element) {\n        const extent = element.attr('ngeo-extent');\n        if (extent !== undefined) {\n          const size = /** @type {ol.Size} */ (map.getSize());\n          map.getView().fit($scope.$eval(extent), {size});\n        }\n        const zoom = element.attr('ngeo-zoom');\n        if (zoom !== undefined) {\n          map.getView().setZoom($scope.$eval(zoom));\n        }\n      }\n\n      // if the children is a link or button\n      $element.on('click', '*', function(event) {\n        recenter(angular.element($(this)));\n      });\n\n      // if the children is an option inside a select\n      $element.on('change', (event) => {\n        const selected = event.target.options[event.target.selectedIndex];\n        recenter(angular.element(selected));\n      });\n\n    }\n  };\n};\n\n// Register the directive in the module\nexports.directive('ngeoRecenter', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/recenter.js","/**\n * @module ngeo.map.resizemap\n*/\nimport googAsserts from 'goog/asserts';\nimport ngeoBase from 'ngeo';\nimport olMap from 'ol/Map';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoResizemap', []);\n\nngeoBase.module.requires.push(exports.name);\n\n/**\n * Provides a directive that resizes the map in an animation loop\n * during 1 second when the value of \"state\" changes. This is especially useful\n * when changing the size of other elements with a transition leads to a change\n * of the map size.\n *\n * Example:\n *\n *      <div ng-class=\"ctrl.open ? 'open' : 'close' ngeo-resizemap=\"ctrl.map\"\n *        ngeo-resizemap-state=\"open\">\n *      <div>\n *      <input type=\"checkbox\" ng-model=\"ctrl.open\" />\n *\n * See our live example: [../examples/animation.html](../examples/animation.html)\n *\n * @param {angular.$window} $window Angular window service.\n * @return {angular.Directive} The directive specs.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoResizemap\n */\nexports.directive_ = function($window) {\n  const /** @type {number} */ duration = 1000;\n\n  return {\n    restrict: 'A',\n    /**\n     * @param {angular.Scope} scope Scope.\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Atttributes.\n     */\n    link: (scope, element, attrs) => {\n      const attr = 'ngeoResizemap';\n      const prop = attrs[attr];\n      const map = scope.$eval(prop);\n      googAsserts.assertInstanceof(map, olMap);\n\n      const stateExpr = attrs['ngeoResizemapState'];\n      googAsserts.assert(stateExpr !== undefined);\n\n      let start;\n      let animationDelayKey;\n\n      const animationDelay = () => {\n        map.updateSize();\n        map.renderSync();\n\n        if (Date.now() - start < duration) {\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      };\n\n      // Make sure the map is resized when the animation ends.\n      // It may help in case the animation didn't start correctly.\n      element.on('transitionend', () => {\n        map.updateSize();\n        map.renderSync();\n      });\n\n      scope.$watch(stateExpr, (newVal, oldVal) => {\n        if (newVal != oldVal) {\n          start = Date.now();\n          $window.cancelAnimationFrame(animationDelayKey);\n          animationDelayKey = $window.requestAnimationFrame(animationDelay);\n        }\n      });\n    }\n  };\n};\n\n\nexports.directive('ngeoResizemap', exports.directive_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/resizemap.js","/**\n * @module ngeo.map.scaleselector\n*/\nimport ngeoBase from 'ngeo';\nimport olArray from 'ol/array';\nimport olMap from 'ol/Map';\nimport olEvents from 'ol/events';\n\n/**\n * @type {!angular.Module}\n */\nconst exports = angular.module('ngeoScaleselector', []);\n\nngeoBase.module.requires.push(exports.name);\n\n\nexports.value('ngeoScaleselectorTemplateUrl',\n  /**\n     * @param {angular.JQLite} element Element.\n     * @param {angular.Attributes} attrs Attributes.\n     * @return {string} Template URL.\n     */\n  (element, attrs) => {\n    const templateUrl = attrs['ngeoScaleselectorTemplateurl'];\n    return templateUrl !== undefined ? templateUrl :\n      `${ngeoBase.baseModuleTemplateUrl}/map/scaleselector.html`;\n  });\n\n\n/**\n * Provides the \"ngeoScaleselector\" directive, a widget for\n * selecting map scales.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\" ngeo-scaleselector-map=\"ctrl.map\">\n *     </div>\n *\n * The expression passed to the ngeo-scaleselector attribute should return an\n * array of this form:\n *\n *    [20000, 10000, 5000, 2500]\n *\n * That directive's partial uses Bootstrap's `dropdown` and `dropdown-menu`\n * classes, and `data-toggle=\"dropdown\"`, so it is meant to be used with\n * Bootstrap's \"dropdown\" jQuery plugin.\n *\n * You can pass options to configure the behaviors of this element. Options is\n * a {@link ngeox.ScaleselectorOptions} object.\n *\n * Example:\n *\n *     <div ngeo-scaleselector=\"ctrl.scales\"\n *       ngeo-scaleselector-map=\"ctrl.map\"\n *       ngeo-scaleselector-options=\"ctrl.scaleSelectorOptions\">\n *     </div>\n *\n * By default the directive uses \"scaleselector.html\" as its templateUrl. This\n * can be changed by redefining the \"ngeoScaleselectorTemplateUrl\" value.\n *\n * The directive has its own scope, but it is not isolate scope. That scope\n * includes a reference to the directive's controller: the \"scaleselectorCtrl\"\n * scope property.\n *\n * The directive doesn't create any watcher. In particular the object including\n * the scales information is now watched.\n *\n * See our live example: [../examples/scaleselector.html](../examples/scaleselector.html)\n *\n * @htmlAttribute {!Array.<number>} ngeo-scaleselector The available scales.\n * @htmlAttribute {ol.Map} ngeo-scaleselector-map The map.\n * @htmlAttribute {ngeox.ScaleselectorOptions} ngeo-scaleselector-options\n *     Optionnal. The configuration options.\n * @param {string|function(!angular.JQLite=, !angular.Attributes=)}\n *     ngeoScaleselectorTemplateUrl Template URL for the directive.\n * @return {angular.Directive} Directive Definition Object.\n *//* @ngInject\n * @ngdoc directive\n * @ngname ngeoScaleselector\n */\nexports.directive_ = function(ngeoScaleselectorTemplateUrl) {\n  return {\n    restrict: 'A',\n    scope: true,\n    controller: 'NgeoScaleselectorController',\n    templateUrl: ngeoScaleselectorTemplateUrl\n  };\n};\n\n\nexports.directive('ngeoScaleselector', exports.directive_);\n\n\n/**\n * @constructor\n * @private\n * @struct\n * @param {angular.Scope} $scope Directive scope.\n * @param {angular.JQLite} $element Element.\n * @param {angular.Attributes} $attrs Attributes.\n *//* @ngInject\n * @ngdoc controller\n * @ngname NgeoScaleselectorController\n */\nexports.ScaleselectorController_ = function($scope, $element, $attrs) {\n\n  const scalesExpr = $attrs['ngeoScaleselector'];\n\n  /**\n   * The zoom level/scale map object.\n   * @type {!Array.<number>}\n   * @export\n   */\n  this.scales = /** @type {!Array.<number>} */\n    ($scope.$eval(scalesExpr));\n  goog.asserts.assert(this.scales !== undefined);\n\n  /**\n   * @type {Array.<number>}\n   * @export\n   */\n  this.zoomLevels;\n\n  $scope.$watch(() => Object.keys(this.scales).length, (newLength) => {\n    this.zoomLevels = Object.keys(this.scales).map(Number);\n    this.zoomLevels.sort(olArray.numberSafeCompareFunction);\n  });\n\n  const mapExpr = $attrs['ngeoScaleselectorMap'];\n\n  /**\n   * @type {ol.Map}\n   * @private\n   */\n  this.map_ = /** @type {ol.Map} */ ($scope.$eval(mapExpr));\n  goog.asserts.assertInstanceof(this.map_, olMap);\n\n  const optionsExpr = $attrs['ngeoScaleselectorOptions'];\n  const options = $scope.$eval(optionsExpr);\n\n  /**\n   * @type {!ngeox.ScaleselectorOptions}\n   * @export\n   */\n  this.options = exports.ScaleselectorController_.getOptions_(options);\n\n  /**\n   * @type {angular.Scope}\n   * @private\n   */\n  this.$scope_ = $scope;\n\n  /**\n   * @type {?ol.EventsKey}\n   * @private\n   */\n  this.resolutionChangeKey_ = null;\n\n  /**\n   * @type {number|undefined}\n   * @export\n   */\n  this.currentScale = undefined;\n\n  const view = this.map_.getView();\n  if (view !== null) {\n    const currentZoom = this.map_.getView().getZoom();\n    if (currentZoom !== undefined) {\n      this.currentScale = this.getScale(currentZoom);\n    }\n  }\n\n  olEvents.listen(this.map_, 'change:view', this.handleViewChange_, this);\n\n  this.registerResolutionChangeListener_();\n\n  $scope['scaleselectorCtrl'] = this;\n\n};\n\n\n/**\n * @param {?} options Options after expression evaluation.\n * @return {!ngeox.ScaleselectorOptions} Options object.\n * @private\n */\nexports.ScaleselectorController_.getOptions_ = function(options) {\n  let dropup = false;\n  if (options !== undefined) {\n    dropup = options['dropup'] == true;\n  }\n  return /** @type {ngeox.ScaleselectorOptions} */ ({\n    dropup: dropup\n  });\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @return {number} Scale.\n * @export\n */\nexports.ScaleselectorController_.prototype.getScale = function(zoom) {\n  return this.scales[zoom];\n};\n\n\n/**\n * @param {number} zoom Zoom level.\n * @export\n */\nexports.ScaleselectorController_.prototype.changeZoom = function(zoom) {\n  this.map_.getView().setZoom(zoom);\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleResolutionChange_ = function(e) {\n  const view = this.map_.getView();\n  const currentScale = this.scales[/** @type {number} */ (view.getZoom())];\n\n  // handleResolutionChange_ is a change:resolution listener. The listener\n  // may be executed outside the Angular context, for example when the user\n  // double-clicks to zoom on the map.\n  //\n  // But it may also be executed inside the Angular context, when a function\n  // in Angular context calls setZoom or setResolution on the view, which\n  // is for example what happens when this controller's changeZoom function\n  // is called.\n  //\n  // For that reason we use $applyAsync instead of $apply here.\n\n  if (currentScale !== undefined) {\n    this.$scope_.$applyAsync(() => {\n      this.currentScale = currentScale;\n    });\n  }\n};\n\n\n/**\n * @param {ol.Object.Event} e OpenLayers object event.\n * @private\n */\nexports.ScaleselectorController_.prototype.handleViewChange_ = function(e) {\n  this.registerResolutionChangeListener_();\n  this.handleResolutionChange_(null);\n};\n\n\n/**\n * @private\n */\nexports.ScaleselectorController_.prototype.registerResolutionChangeListener_ = function() {\n  if (this.resolutionChangeKey_ !== null) {\n    olEvents.unlistenByKey(this.resolutionChangeKey_);\n  }\n  const view = this.map_.getView();\n  this.resolutionChangeKey_ = olEvents.listen(view,\n    'change:resolution', this.handleResolutionChange_,\n    this);\n};\n\n\nexports.controller('NgeoScaleselectorController',\n  exports.ScaleselectorController_);\n\n\nexport default exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/map/scaleselector.js","/**\n * @module ol/source/OSM\n */\nimport {inherits} from '../index.js';\nimport XYZ from '../source/XYZ.js';\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n *\n * @constructor\n * @extends {ol.source.XYZ}\n * @param {olx.source.OSMOptions=} opt_options Open Street Map options.\n * @api\n */\nvar OSM = function(opt_options) {\n\n  var options = opt_options || {};\n\n  var attributions;\n  if (options.attributions !== undefined) {\n    attributions = options.attributions;\n  } else {\n    attributions = [OSM.ATTRIBUTION];\n  }\n\n  var crossOrigin = options.crossOrigin !== undefined ?\n    options.crossOrigin : 'anonymous';\n\n  var url = options.url !== undefined ?\n    options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n  XYZ.call(this, {\n    attributions: attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: crossOrigin,\n    opaque: options.opaque !== undefined ? options.opaque : true,\n    maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileLoadFunction: options.tileLoadFunction,\n    url: url,\n    wrapX: options.wrapX\n  });\n\n};\n\ninherits(OSM, XYZ);\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nOSM.ATTRIBUTION = '&copy; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\nexport default OSM;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/OSM.js\n// module id = 48\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 20 21 22 23 25 26 27 28 29 30","/**\n * @module ol/source/XYZ\n */\nimport {inherits} from '../index.js';\nimport TileImage from '../source/TileImage.js';\nimport _ol_tilegrid_ from '../tilegrid.js';\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link ol.source.TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n *\n * @constructor\n * @extends {ol.source.TileImage}\n * @param {olx.source.XYZOptions=} opt_options XYZ options.\n * @api\n */\nvar XYZ = function(opt_options) {\n  var options = opt_options || {};\n  var projection = options.projection !== undefined ?\n    options.projection : 'EPSG:3857';\n\n  var tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n    _ol_tilegrid_.createXYZ({\n      extent: _ol_tilegrid_.extentFromProjection(projection),\n      maxZoom: options.maxZoom,\n      minZoom: options.minZoom,\n      tileSize: options.tileSize\n    });\n\n  TileImage.call(this, {\n    attributions: options.attributions,\n    cacheSize: options.cacheSize,\n    crossOrigin: options.crossOrigin,\n    opaque: options.opaque,\n    projection: projection,\n    reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n    tileGrid: tileGrid,\n    tileLoadFunction: options.tileLoadFunction,\n    tilePixelRatio: options.tilePixelRatio,\n    tileUrlFunction: options.tileUrlFunction,\n    url: options.url,\n    urls: options.urls,\n    wrapX: options.wrapX !== undefined ? options.wrapX : true,\n    transition: options.transition\n  });\n\n};\n\ninherits(XYZ, TileImage);\nexport default XYZ;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/openlayers/src/ol/source/XYZ.js\n// module id = 49\n// module chunks = 0 1 2 3 4 6 7 8 9 10 11 14 15 16 19 20 21 22 23 25 26 27 28 29 30"],"sourceRoot":""}