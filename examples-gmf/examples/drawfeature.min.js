webpackJsonp([2],{101:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(1)),i=o(r(14)),n=o(r(15));function o(e){return e&&e.__esModule?e:{default:e}}a.default.Scalify=function(e){var t=e("number"),r=function(e){var r=t(e,0);return r?"1 : "+r:""};return r.$stateful=!0,r},a.default.module.filter("ngeoScalify",a.default.Scalify),a.default.Number=function(e){var t=e.NUMBER_FORMATS;return function(e,r){var a=t.GROUP_SEP,i=t.DECIMAL_SEP;if(void 0===r&&(r=3),e===1/0)return"∞";if(e===-1/0)return"-∞";if(0===e)return"0";var n=e<0;e=Math.abs(e);var o=r-Math.floor(Math.log(e)/Math.log(10))-1,s=Math.pow(10,o);e=Math.round(e*s);var l="",u=Math.floor(e/s);if(o>0){for(var d=""+e;d.length<o;)d="0"+d;for(l=d.substring(d.length-o);"0"===l[l.length-1];)l=l.substring(0,l.length-1)}for(var c=[],f=""+u;f.length>3;){var h=f.length-3;c.unshift(f.substring(h)),f=f.substring(0,h)}return c.unshift(f),(n?"-":"")+c.join(a)+(0===l.length?"":i+l)}},a.default.module.filter("ngeoNumber",a.default.Number),a.default.UnitPrefix=function(e){var t=e("ngeoNumber"),r=["","k","M","G","T","P"],a=["","Ki","Mi","Gi","Ti","Pi"];return function(e,i,n,o){void 0===i&&(i="");var s=1e3,l=r;"square"===n?s=1e6:"binary"===n&&(s=1024,l=a);for(var u=0,d=l.length-1;e>=s&&u<d;)e/=s,u++;var c=l[u]+i,f=0==c.length?"":" ";return t(e,o)+f+c}},a.default.module.filter("ngeoUnitPrefix",a.default.UnitPrefix),a.default.NumberCoordinates=function(e){return function(t,r,a){var i=a||"{x} {y}",n=t[0],o=t[1],s=0|parseInt(r,10);return n=e("number")(n,s),o=e("number")(o,s),i.replace("{x}",n).replace("{y}",o)}},a.default.module.filter("ngeoNumberCoordinates",a.default.NumberCoordinates),a.default.DMSCoordinates=function(){var e=function(e,t,r){var a=i.default.modulo(e+180,360)-180,o=Math.abs(3600*a),s=Math.floor(o/3600),l=Math.floor(o/60%60),u=o%60;return s+"° "+n.default.padNumber(l,2)+"′ "+n.default.padNumber(u,2,r)+"″ "+t.charAt(a<0?1:0)};return function(t,r,a){var i=0|parseInt(r,10),n=a||"{x} {y}",o=e(t[0],"EW",i),s=e(t[1],"NS",i);return n.replace("{x}",o).replace("{y}",s)}},a.default.module.filter("ngeoDMSCoordinates",a.default.DMSCoordinates),a.default.trustHtmlFilter=function(e){return function(t){return void 0!==t&&null!==t?e.trustAsHtml(""+t):e.trustAsHtml("&nbsp;")}},a.default.module.filter("ngeoTrustHtml",a.default.trustHtmlFilter),t.default={}},106:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=r(1);(a=i)&&a.__esModule;t.default=function(e,t){this.getActive=function(){return e[t]},this.setActive=function(r){e[t]=r}}},11:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var a="1.3.0"},110:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=r(1),n=(a=i)&&a.__esModule?a:{default:a};var o=angular.module("ngeoBtnComponent",[]);n.default.module.requires.push(o.name),o.btnGroupComponent_=function(e){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(t,r,a,i){var n=e(a.ngeoBtnGroupActive).assign;n&&t.$watch(function(){return i.buttons_.some(function(e){return!0===e(t)})},function(e){n(t,e)})}}},o.directive("ngeoBtnGroup",o.btnGroupComponent_),o.BtnGroupController=function(e){this.buttons_=[],this.scope_=e},o.BtnGroupController.prototype.activate=function(e){this.buttons_.forEach(function(t,r){r!=e&&t.assign(this.scope_,!1)},this)},o.BtnGroupController.prototype.addButton=function(e){return this.buttons_.push(e),this.buttons_.length-1},o.controller("ngeoBtnGroupController",o.BtnGroupController),o.btnComponent_=function(e){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(t,r,a,i){var n=i[0],o=i[1],s=-1,l=e(a.ngModel),u=l.assign;void 0===l(t)&&u(t,!1),null!==n&&(s=n.addButton(l)),r.on("click",function(){t.$apply(function(){o.$setViewValue(!o.$viewValue),o.$render()})}),o.$render=function(){o.$viewValue&&null!==n&&n.activate(s),r.toggleClass("active",o.$viewValue)}}}},o.directive("ngeoBtn",o.btnComponent_),t.default=o},114:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(r(30)),i=u(r(45)),n=u(r(51)),o=u(r(53)),s=u(r(27)),l=u(r(42));function u(e){return e&&e.__esModule?e:{default:e}}var d={toMulti:function(e){var t=void 0;return e instanceof s.default?(t=new i.default([])).appendPoint(e):e instanceof a.default?(t=new n.default([])).appendLineString(e):e instanceof l.default?(t=new o.default([])).appendPolygon(e):t=e,t},isSafari:function(){return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")},colorZeroPadding:function(e){return 1==e.length?"0"+e:e},rgbArrayToHex:function(e){var t=e[0],r=e[1],a=e[2];if(t!=(255&t)||r!=(255&r)||a!=(255&a))throw Error('"('+t+","+r+","+a+')" is not a valid RGB color');return"#"+d.colorZeroPadding(t.toString(16))+d.colorZeroPadding(r.toString(16))+d.colorZeroPadding(a.toString(16))},decodeQueryString:function(e){var t={};if(e){var r=e.substring(1).split("&"),a=!0,i=!1,n=void 0;try{for(var o,s=r[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value,u=l.indexOf("=");if(u>=0){var d=l.substring(0,u),c=l.substring(u+1);t[decodeURIComponent(d)]=decodeURIComponent(c)}else t[l]=""}}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}return t},encodeQueryString:function(e){var t=[];for(var r in e){var a=e[r];a?t.push(encodeURIComponent(r)+"="+encodeURIComponent(a)):t.push(encodeURIComponent(r))}return t.join("&")}};t.default=d},119:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(r(3)),i=(d(r(1)),d(r(82))),n=d(r(134)),o=d(r(52)),s=d(r(50)),l=d(r(57)),u=d(r(138));function d(e){return e&&e.__esModule?e:{default:e}}var c={interaction:function(e){a.default.assertInstanceof(e,i.default),Object.defineProperty(e,"active",{get:function(){return e.getActive()},set:function(t){e.setActive(t)}})},layer:function(e){a.default.assertInstanceof(e,n.default),Object.defineProperty(e,"visible",{configurable:!0,get:function(){return e.getVisible()},set:function(t){e.setVisible(t)}}),Object.defineProperty(e,"opacity",{configurable:!0,get:function(){return e.getOpacity()},set:function(t){e.setOpacity(t)}})},layerLoading:function(e,t){var r=void 0,i=null,n=null,d=function e(t){var r=t.get("load_count");var a=t.get("parent_group");t.set("load_count",++r,!0);a&&e(a)},c=function e(t){var r=t.get("load_count");var a=t.get("parent_group");t.set("load_count",--r,!0);a&&e(a)};if(e.set("load_count",0,!0),e instanceof o.default&&e.getLayers().on("add",function(t){t.element.set("parent_group",e)}),e instanceof s.default){if(null===(r=e.getSource()))return;r instanceof u.default?(i=["tileloadstart"],n=["tileloadend","tileloaderror"]):r instanceof l.default?(i=["imageloadstart"],n=["imageloadend","imageloaderror"]):a.default.fail("unsupported source type"),r.on(i,function(){d(e),t.$applyAsync()}),r.on(n,function(){c(e),t.$applyAsync()})}Object.defineProperty(e,"loading",{configurable:!0,get:function(){return e.get("load_count")>0}})}};t.default=c},12:function(e,t,r){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},124:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(r(3)),i=l(r(129)),n=l(r(86)),o=l(r(72)),s=l(r(30));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,r){var i=r||{};n.default.call(this,i),this.continueMsg,void 0!==i.continueMsg?this.continueMsg=i.continueMsg:(this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to finish."),this.numberFormat=a.default.assert(t),this.unitPrefixFormat=a.default.assert(e)};ol.inherits(u,n.default),u.prototype.createDrawInteraction=function(e,t){return new i.default({source:t,style:e})},u.prototype.handleMeasure=function(e){var t=a.default.assertInstanceof(this.sketchFeature.getGeometry(),o.default),r=a.default.assertInstanceof(t.getGeometries()[0],s.default);e(u.getFormattedAzimutRadius(r,a.default.assertInstanceof(this.getMap().getView().getProjection(),ol.proj.Projection),this.decimals,this.precision,this.unitPrefixFormat,this.numberFormat),r.getLastCoordinate())},u.getFormattedAzimutRadius=function(e,t,r,a,i,o){var s=u.getFormattedAzimut(e,r,o);return s+=", "+n.default.getFormattedLength(e,t,a,i)},u.getFormattedAzimut=function(e,t,r){return r(u.getAzimut(e),t)+"°"},u.getAzimut=function(e){var t=e.getCoordinates(),r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],i=Math.acos(a/Math.sqrt(r*r+a*a));return(r>0?1:-1)*i*180/Math.PI%360},t.default=u},129:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=_(r(3)),i=_(r(40)),n=(_(r(107)),_(r(2))),o=_(r(66)),s=_(r(80)),l=_(r(72)),u=_(r(30)),d=_(r(27)),c=_(r(75)),f=_(r(77)),h=_(r(20)),p=_(r(18));function _(e){return e&&e.__esModule?e:{default:e}}var g=function e(t){f.default.call(this,{handleDownEvent:e.handleDownEvent_,handleEvent:e.handleEvent_,handleUpEvent:e.handleUpEvent_}),this.downPx_=null,this.source_=void 0!==t.source?t.source:null,this.started_=!1,this.sketchFeature_=null,this.sketchPoint_=null,this.squaredClickTolerance_=4,this.sketchLayer_=new h.default({source:new p.default({useSpatialIndex:!1,wrapX:!1}),style:void 0!==t.style?t.style:c.default.getDefaultStyleFunction()}),n.default.listen(this,"change:active",this.updateState_,this)};ol.inherits(g,f.default),g.handleDownEvent_=function(e){return this.downPx_=e.pixel,!0},g.handleUpEvent_=function(e){var t=this.downPx_,r=e.pixel,a=t[0]-r[0],i=t[1]-r[1],n=!0;return a*a+i*i<=this.squaredClickTolerance_&&(this.handlePointerMove_(e),this.started_?this.finishDrawing_():this.startDrawing_(e),n=!1),n},g.handleEvent_=function(e){var t=!0;return"pointermove"===e.type?t=this.handlePointerMove_(e):"dblclick"===e.type&&(t=!1),f.default.handleEvent.call(this,e)&&t},g.prototype.handlePointerMove_=function(e){return this.started_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},g.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();if(null===this.sketchPoint_)this.sketchPoint_=new i.default(new d.default(t)),this.updateSketchFeatures_();else{var r=this.sketchPoint_.getGeometry();a.default.assertInstanceof(r,d.default),r.setCoordinates(t)}},g.prototype.updateSketchFeatures_=function(){var e=[];null!==this.sketchFeature_&&e.push(this.sketchFeature_),null!==this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.sketchLayer_.getSource();t.clear(!0),t.addFeatures(e)},g.prototype.startDrawing_=function(e){var t=e.coordinate;this.started_=!0;var r=new u.default([t.slice(),t.slice()]),n=new s.default(t,0),o=new l.default([r,n]);a.default.assert(void 0!==o),this.sketchFeature_=new i.default,this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new c.default.Event("drawstart",this.sketchFeature_))},g.prototype.modifyDrawing_=function(e){var t=e.coordinate,r=a.default.assertInstanceof(this.sketchFeature_.getGeometry(),l.default).getGeometriesArray(),i=r[0];a.default.assertInstanceof(i,u.default);var n=i.getCoordinates(),o=this.sketchPoint_.getGeometry();a.default.assertInstanceof(o,d.default),o.setCoordinates(t);var c=n[n.length-1];c[0]=t[0],c[1]=t[1],a.default.assertInstanceof(i,u.default),i.setCoordinates(n),a.default.assertInstanceof(r[1],s.default).setRadius(i.getLength()),this.updateSketchFeatures_()},g.prototype.abortDrawing_=function(){this.started_=!1;var e=this.sketchFeature_;return null!==e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLayer_.getSource().clear(!0)),e},g.prototype.shouldStopEvent=o.default.FALSE,g.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();null!==e&&t||this.abortDrawing_(),this.sketchLayer_.setMap(t?e:null)},g.prototype.finishDrawing_=function(){var e=this.abortDrawing_();a.default.assert(null!==e),null!==this.source_&&this.source_.addFeature(e),this.dispatchEvent(new c.default.Event("drawend",e))},g.prototype.setMap=function(e){f.default.prototype.setMap.call(this,e),this.updateState_()},t.default=g},130:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(1)),i=n(r(3));n(r(106));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){this.groups_={},this.scope_=e};o.$inject=["$rootScope"],o.$inject=["$rootScope"],o.prototype.registerTool=function(e,t,r){var a=this,n=this.groups_[e];n||(n=this.groups_[e]=[]);var o=this.scope_.$watch(t.getActive,function(r,i){r!==i&&(r?a.deactivateTools_(e,t):a.activateDefault_(e))});if(n.push({tool:t,defaultTool:r||!1,unlisten:o}),i.default.ENABLE_ASSERTS){var s=0;n.forEach(function(e){e.defaultTool&&s++}),i.default.assert(s<=1,"more than one default tool in group "+e)}},o.prototype.unregisterTool=function(e,t){var r=this.groups_[e];if(r)for(var a=0;a<r.length;a++)if(r[a].tool==t){r[a].unlisten(),r.splice(a,1);break}},o.prototype.unregisterGroup=function(e){var t=this.groups_[e];if(t){for(var r=0;r<t.length;r++)t[r].unlisten();delete this.groups_[e]}},o.prototype.activateTool=function(e){e.setActive(!0)},o.prototype.deactivateTool=function(e){e.setActive(!1)},o.prototype.deactivateTools_=function(e,t){for(var r=this.groups_[e],a=0;a<r.length;a++)t!=r[a].tool&&r[a].tool.setActive(!1)},o.prototype.activateDefault_=function(e){for(var t=this.groups_[e],r=null,a=!1,i=0;i<t.length;i++)a=a||t[i].tool.getActive(),t[i].defaultTool&&(r=t[i].tool);a||null===r||r.setActive(!0)},(o.module=angular.module("ngeoToolActivateMgr",[])).service("ngeoToolActivateMgr",o),a.default.module.requires.push(o.module.name),t.default=o},148:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(40),n=r(8),o=r(10),s=r(90),l=r(69),u=r(97),d=r(79),c=r(72),f=r(24),h=r(13),p=r(30),_=r(51),g=r(45),m=r(53),S=r(27),y=r(42),v=r(14),E=r(6),A=r(65),P=r(144),T=r(161),C=r(162),R=r(78),O=r(17),N=r(98),I=r(55),k=function(e){var t=e||{};u.a.call(this),k.DEFAULT_STYLE_ARRAY_||k.createStyleDefaults_(),this.defaultDataProjection=Object(E.get)("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:k.DEFAULT_STYLE_ARRAY_,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames};Object(a.inherits)(k,u.a),k.GX_NAMESPACE_URIS_=["http://www.google.com/kml/ext/2.2"],k.NAMESPACE_URIS_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],k.SCHEMA_LOCATION_="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",k.createStyleDefaults_=function(){return k.DEFAULT_COLOR_=[255,255,255,1],k.DEFAULT_FILL_STYLE_=new A.default({color:k.DEFAULT_COLOR_}),k.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2],k.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=T.a.PIXELS,k.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=T.a.PIXELS,k.DEFAULT_IMAGE_STYLE_SIZE_=[64,64],k.DEFAULT_IMAGE_STYLE_SRC_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",k.DEFAULT_IMAGE_SCALE_MULTIPLIER_=.5,k.DEFAULT_IMAGE_STYLE_=new P.default({anchor:k.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:C.a.BOTTOM_LEFT,anchorXUnits:k.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:k.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:"anonymous",rotation:0,scale:k.DEFAULT_IMAGE_SCALE_MULTIPLIER_,size:k.DEFAULT_IMAGE_STYLE_SIZE_,src:k.DEFAULT_IMAGE_STYLE_SRC_}),k.DEFAULT_NO_IMAGE_STYLE_="NO_IMAGE",k.DEFAULT_STROKE_STYLE_=new R.default({color:k.DEFAULT_COLOR_,width:1}),k.DEFAULT_TEXT_STROKE_STYLE_=new R.default({color:[51,51,51,1],width:2}),k.DEFAULT_TEXT_STYLE_=new N.default({font:"bold 16px Helvetica",fill:k.DEFAULT_FILL_STYLE_,stroke:k.DEFAULT_TEXT_STROKE_STYLE_,scale:.8}),k.DEFAULT_STYLE_=new O.default({fill:k.DEFAULT_FILL_STYLE_,image:k.DEFAULT_IMAGE_STYLE_,text:k.DEFAULT_TEXT_STYLE_,stroke:k.DEFAULT_STROKE_STYLE_,zIndex:0}),k.DEFAULT_STYLE_ARRAY_=[k.DEFAULT_STYLE_],k.DEFAULT_STYLE_ARRAY_},k.ICON_ANCHOR_UNITS_MAP_={fraction:T.a.FRACTION,pixels:T.a.PIXELS,insetPixels:T.a.PIXELS},k.createNameStyleFunction_=function(e,t){var r=null,a=[0,0],i="start";if(e.getImage()){var n=e.getImage().getImageSize();if(null===n&&(n=k.DEFAULT_IMAGE_STYLE_SIZE_),2==n.length){var o=e.getImage().getScale();a[0]=o*n[0]/2,a[1]=-o*n[1]/2,i="left"}}if(null!==e.getText()){var s=e.getText();(r=s.clone()).setFont(s.getFont()||k.DEFAULT_TEXT_STYLE_.getFont()),r.setScale(s.getScale()||k.DEFAULT_TEXT_STYLE_.getScale()),r.setFill(s.getFill()||k.DEFAULT_TEXT_STYLE_.getFill()),r.setStroke(s.getStroke()||k.DEFAULT_TEXT_STROKE_STYLE_)}else r=k.DEFAULT_TEXT_STYLE_.clone();return r.setText(t),r.setOffsetX(a[0]),r.setOffsetY(a[1]),r.setTextAlign(i),new O.default({text:r})},k.createFeatureStyleFunction_=function(e,t,r,a,i){return function(n){var o,s=i,l="";if(s&&this.getGeometry()&&(s=this.getGeometry().getType()===h.default.POINT),s&&(l=this.get("name"),s=s&&l),e)return s?(o=k.createNameStyleFunction_(e[0],l),e.concat(o)):e;if(t){var u=k.findStyle_(t,r,a);return s?(o=k.createNameStyleFunction_(u[0],l),u.concat(o)):u}return s?(o=k.createNameStyleFunction_(r[0],l),r.concat(o)):r}},k.findStyle_=function(e,t,r){return Array.isArray(e)?e:"string"==typeof e?(!(e in r)&&"#"+e in r&&(e="#"+e),k.findStyle_(r[e],t,r)):t},k.readColor_=function(e){var t=I.default.getAllTextContent(e,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(r){var a=r[1];return[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}},k.readFlatCoordinates_=function(e){for(var t,r=I.default.getAllTextContent(e,!1),a=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;t=i.exec(r);){var n=parseFloat(t[1]),o=parseFloat(t[2]),s=t[3]?parseFloat(t[3]):0;a.push(n,o,s),r=r.substr(t[0].length)}if(""===r)return a},k.readURI_=function(e){var t=I.default.getAllTextContent(e,!1).trim(),r=e.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(t,r).href:t},k.readVec2_=function(e){var t,r=e.getAttribute("xunits"),a=e.getAttribute("yunits");return t="insetPixels"!==r?"insetPixels"!==a?C.a.BOTTOM_LEFT:C.a.TOP_LEFT:"insetPixels"!==a?C.a.BOTTOM_RIGHT:C.a.TOP_RIGHT,{x:parseFloat(e.getAttribute("x")),xunits:k.ICON_ANCHOR_UNITS_MAP_[r],y:parseFloat(e.getAttribute("y")),yunits:k.ICON_ANCHOR_UNITS_MAP_[a],origin:t}},k.readScale_=function(e){return d.a.readDecimal(e)},k.readStyleMapValue_=function(e,t){return I.default.pushParseAndPop(void 0,k.STYLE_MAP_PARSERS_,e,t)},k.IconStyleParser_=function(e,t){var r=I.default.pushParseAndPop({},k.ICON_STYLE_PARSERS_,e,t);if(r){var a,i,n,o,s=t[t.length-1],l="Icon"in r?r.Icon:{},u=!("Icon"in r)||Object.keys(l).length>0,d=l.href;d?a=d:u&&(a=k.DEFAULT_IMAGE_STYLE_SRC_);var c,f=C.a.BOTTOM_LEFT,h=r.hotSpot;h?(i=[h.x,h.y],n=h.xunits,o=h.yunits,f=h.origin):a===k.DEFAULT_IMAGE_STYLE_SRC_?(i=k.DEFAULT_IMAGE_STYLE_ANCHOR_,n=k.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,o=k.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(i=[.5,0],n=T.a.FRACTION,o=T.a.FRACTION);var p,_=l.x,g=l.y;void 0!==_&&void 0!==g&&(c=[_,g]);var m,S=l.w,y=l.h;void 0!==S&&void 0!==y&&(p=[S,y]);var E=r.heading;void 0!==E&&(m=Object(v.toRadians)(E));var A=r.scale;if(u){a==k.DEFAULT_IMAGE_STYLE_SRC_&&(p=k.DEFAULT_IMAGE_STYLE_SIZE_,void 0===A&&(A=k.DEFAULT_IMAGE_SCALE_MULTIPLIER_));var R=new P.default({anchor:i,anchorOrigin:f,anchorXUnits:n,anchorYUnits:o,crossOrigin:"anonymous",offset:c,offsetOrigin:C.a.BOTTOM_LEFT,rotation:m,scale:A,size:p,src:a});s.imageStyle=R}else s.imageStyle=k.DEFAULT_NO_IMAGE_STYLE_}},k.LabelStyleParser_=function(e,t){var r=I.default.pushParseAndPop({},k.LABEL_STYLE_PARSERS_,e,t);if(r){var a=t[t.length-1],i=new N.default({fill:new A.default({color:"color"in r?r.color:k.DEFAULT_COLOR_}),scale:r.scale});a.textStyle=i}},k.LineStyleParser_=function(e,t){var r=I.default.pushParseAndPop({},k.LINE_STYLE_PARSERS_,e,t);if(r){var a=t[t.length-1],i=new R.default({color:"color"in r?r.color:k.DEFAULT_COLOR_,width:"width"in r?r.width:1});a.strokeStyle=i}},k.PolyStyleParser_=function(e,t){var r=I.default.pushParseAndPop({},k.POLY_STYLE_PARSERS_,e,t);if(r){var a=t[t.length-1],i=new A.default({color:"color"in r?r.color:k.DEFAULT_COLOR_});a.fillStyle=i;var n=r.fill;void 0!==n&&(a.fill=n);var o=r.outline;void 0!==o&&(a.outline=o)}},k.readFlatLinearRing_=function(e,t){return I.default.pushParseAndPop(null,k.FLAT_LINEAR_RING_PARSERS_,e,t)},k.gxCoordParser_=function(e,t){var r=t[t.length-1].flatCoordinates,a=I.default.getAllTextContent(e,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a);if(i){var n=parseFloat(i[1]),o=parseFloat(i[2]),s=parseFloat(i[3]);r.push(n,o,s,0)}else r.push(0,0,0,0)},k.readGxMultiTrack_=function(e,t){var r=I.default.pushParseAndPop([],k.GX_MULTITRACK_GEOMETRY_PARSERS_,e,t);if(r){var a=new _.default(null);return a.setLineStrings(r),a}},k.readGxTrack_=function(e,t){var r=I.default.pushParseAndPop({flatCoordinates:[],whens:[]},k.GX_TRACK_PARSERS_,e,t);if(r){var a,i,n=r.flatCoordinates,o=r.whens;for(a=0,i=Math.min(n.length,o.length);a<i;++a)n[4*a+3]=o[a];var s=new p.default(null);return s.setFlatCoordinates(f.default.XYZM,n),s}},k.readIcon_=function(e,t){var r=I.default.pushParseAndPop({},k.ICON_PARSERS_,e,t);return r||null},k.readFlatCoordinatesFromNode_=function(e,t){return I.default.pushParseAndPop(null,k.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t)},k.readLineString_=function(e,t){var r=I.default.pushParseAndPop({},k.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),a=k.readFlatCoordinatesFromNode_(e,t);if(a){var i=new p.default(null);return i.setFlatCoordinates(f.default.XYZ,a),i.setProperties(r),i}},k.readLinearRing_=function(e,t){var r=I.default.pushParseAndPop({},k.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),a=k.readFlatCoordinatesFromNode_(e,t);if(a){var i=new y.default(null);return i.setFlatCoordinates(f.default.XYZ,a,[a.length]),i.setProperties(r),i}},k.readMultiGeometry_=function(e,t){var r,a=I.default.pushParseAndPop([],k.MULTI_GEOMETRY_PARSERS_,e,t);if(!a)return null;if(0===a.length)return new c.default(a);var i,s,l,u,d,f=!0,p=a[0].getType();for(s=1,l=a.length;s<l;++s)if((i=a[s]).getType()!=p){f=!1;break}if(f)if(p==h.default.POINT){var S=a[0];for(u=S.getLayout(),d=S.getFlatCoordinates(),s=1,l=a.length;s<l;++s)i=a[s],Object(n.extend)(d,i.getFlatCoordinates());(r=new g.default(null)).setFlatCoordinates(u,d),k.setCommonGeometryProperties_(r,a)}else p==h.default.LINE_STRING?((r=new _.default(null)).setLineStrings(a),k.setCommonGeometryProperties_(r,a)):p==h.default.POLYGON?((r=new m.default(null)).setPolygons(a),k.setCommonGeometryProperties_(r,a)):p==h.default.GEOMETRY_COLLECTION?r=new c.default(a):Object(o.a)(!1,37);else r=new c.default(a);return r},k.readPoint_=function(e,t){var r=I.default.pushParseAndPop({},k.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),a=k.readFlatCoordinatesFromNode_(e,t);if(a){var i=new S.default(null);return i.setFlatCoordinates(f.default.XYZ,a),i.setProperties(r),i}},k.readPolygon_=function(e,t){var r=I.default.pushParseAndPop({},k.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),a=I.default.pushParseAndPop([null],k.FLAT_LINEAR_RINGS_PARSERS_,e,t);if(a&&a[0]){var i,o,s=new y.default(null),l=a[0],u=[l.length];for(i=1,o=a.length;i<o;++i)Object(n.extend)(l,a[i]),u.push(l.length);return s.setFlatCoordinates(f.default.XYZ,l,u),s.setProperties(r),s}},k.readStyle_=function(e,t){var r=I.default.pushParseAndPop({},k.STYLE_PARSERS_,e,t);if(!r)return null;var a="fillStyle"in r?r.fillStyle:k.DEFAULT_FILL_STYLE_,i=r.fill;void 0===i||i||(a=null);var n="imageStyle"in r?r.imageStyle:k.DEFAULT_IMAGE_STYLE_;n==k.DEFAULT_NO_IMAGE_STYLE_&&(n=void 0);var o="textStyle"in r?r.textStyle:k.DEFAULT_TEXT_STYLE_,s="strokeStyle"in r?r.strokeStyle:k.DEFAULT_STROKE_STYLE_,l=r.outline;return void 0===l||l||(s=null),[new O.default({fill:a,image:n,stroke:s,text:o,zIndex:void 0})]},k.setCommonGeometryProperties_=function(e,t){var r,a,i,n,o,s=t.length,l=new Array(t.length),u=new Array(t.length),d=new Array(t.length);for(i=n=o=!1,a=0;a<s;++a)r=t[a],l[a]=r.get("extrude"),u[a]=r.get("tessellate"),d[a]=r.get("altitudeMode"),i=i||void 0!==l[a],n=n||void 0!==u[a],o=o||d[a];i&&e.set("extrude",l),n&&e.set("tessellate",u),o&&e.set("altitudeMode",d)},k.DataParser_=function(e,t){var r=e.getAttribute("name");I.default.parseNode(k.DATA_PARSERS_,e,t);var a=t[t.length-1];null!==r?a[r]=a.value:null!==a.displayName&&(a[a.displayName]=a.value),delete a.value},k.ExtendedDataParser_=function(e,t){I.default.parseNode(k.EXTENDED_DATA_PARSERS_,e,t)},k.RegionParser_=function(e,t){I.default.parseNode(k.REGION_PARSERS_,e,t)},k.PairDataParser_=function(e,t){var r=I.default.pushParseAndPop({},k.PAIR_PARSERS_,e,t);if(r){var a=r.key;if(a&&"normal"==a){var i=r.styleUrl;i&&(t[t.length-1]=i);var n=r.Style;n&&(t[t.length-1]=n)}}},k.PlacemarkStyleMapParser_=function(e,t){var r=k.readStyleMapValue_(e,t);if(r){var a=t[t.length-1];Array.isArray(r)?a.Style=r:"string"==typeof r?a.styleUrl=r:Object(o.a)(!1,38)}},k.SchemaDataParser_=function(e,t){I.default.parseNode(k.SCHEMA_DATA_PARSERS_,e,t)},k.SimpleDataParser_=function(e,t){var r=e.getAttribute("name");if(null!==r){var a=d.a.readString(e);t[t.length-1][r]=a}},k.LatLonAltBoxParser_=function(e,t){var r=I.default.pushParseAndPop({},k.LAT_LON_ALT_BOX_PARSERS_,e,t);if(r){var a=t[t.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];a.extent=i,a.altitudeMode=r.altitudeMode,a.minAltitude=parseFloat(r.minAltitude),a.maxAltitude=parseFloat(r.maxAltitude)}},k.LodParser_=function(e,t){var r=I.default.pushParseAndPop({},k.LOD_PARSERS_,e,t);if(r){var a=t[t.length-1];a.minLodPixels=parseFloat(r.minLodPixels),a.maxLodPixels=parseFloat(r.maxLodPixels),a.minFadeExtent=parseFloat(r.minFadeExtent),a.maxFadeExtent=parseFloat(r.maxFadeExtent)}},k.innerBoundaryIsParser_=function(e,t){var r=I.default.pushParseAndPop(void 0,k.INNER_BOUNDARY_IS_PARSERS_,e,t);r&&t[t.length-1].push(r)},k.outerBoundaryIsParser_=function(e,t){var r=I.default.pushParseAndPop(void 0,k.OUTER_BOUNDARY_IS_PARSERS_,e,t);r&&(t[t.length-1][0]=r)},k.LinkParser_=function(e,t){I.default.parseNode(k.LINK_PARSERS_,e,t)},k.whenParser_=function(e,t){var r=t[t.length-1].whens,a=I.default.getAllTextContent(e,!1),i=Date.parse(a);r.push(isNaN(i)?0:i)},k.DATA_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{displayName:I.default.makeObjectPropertySetter(d.a.readString),value:I.default.makeObjectPropertySetter(d.a.readString)}),k.EXTENDED_DATA_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Data:k.DataParser_,SchemaData:k.SchemaDataParser_}),k.REGION_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{LatLonAltBox:k.LatLonAltBoxParser_,Lod:k.LodParser_}),k.LAT_LON_ALT_BOX_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{altitudeMode:I.default.makeObjectPropertySetter(d.a.readString),minAltitude:I.default.makeObjectPropertySetter(d.a.readDecimal),maxAltitude:I.default.makeObjectPropertySetter(d.a.readDecimal),north:I.default.makeObjectPropertySetter(d.a.readDecimal),south:I.default.makeObjectPropertySetter(d.a.readDecimal),east:I.default.makeObjectPropertySetter(d.a.readDecimal),west:I.default.makeObjectPropertySetter(d.a.readDecimal)}),k.LOD_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{minLodPixels:I.default.makeObjectPropertySetter(d.a.readDecimal),maxLodPixels:I.default.makeObjectPropertySetter(d.a.readDecimal),minFadeExtent:I.default.makeObjectPropertySetter(d.a.readDecimal),maxFadeExtent:I.default.makeObjectPropertySetter(d.a.readDecimal)}),k.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{extrude:I.default.makeObjectPropertySetter(d.a.readBoolean),tessellate:I.default.makeObjectPropertySetter(d.a.readBoolean),altitudeMode:I.default.makeObjectPropertySetter(d.a.readString)}),k.FLAT_LINEAR_RING_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{coordinates:I.default.makeReplacer(k.readFlatCoordinates_)}),k.FLAT_LINEAR_RINGS_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{innerBoundaryIs:k.innerBoundaryIsParser_,outerBoundaryIs:k.outerBoundaryIsParser_}),k.GX_TRACK_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{when:k.whenParser_},I.default.makeStructureNS(k.GX_NAMESPACE_URIS_,{coord:k.gxCoordParser_})),k.GEOMETRY_FLAT_COORDINATES_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{coordinates:I.default.makeReplacer(k.readFlatCoordinates_)}),k.ICON_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{href:I.default.makeObjectPropertySetter(k.readURI_)},I.default.makeStructureNS(k.GX_NAMESPACE_URIS_,{x:I.default.makeObjectPropertySetter(d.a.readDecimal),y:I.default.makeObjectPropertySetter(d.a.readDecimal),w:I.default.makeObjectPropertySetter(d.a.readDecimal),h:I.default.makeObjectPropertySetter(d.a.readDecimal)})),k.ICON_STYLE_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Icon:I.default.makeObjectPropertySetter(k.readIcon_),heading:I.default.makeObjectPropertySetter(d.a.readDecimal),hotSpot:I.default.makeObjectPropertySetter(k.readVec2_),scale:I.default.makeObjectPropertySetter(k.readScale_)}),k.INNER_BOUNDARY_IS_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{LinearRing:I.default.makeReplacer(k.readFlatLinearRing_)}),k.LABEL_STYLE_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{color:I.default.makeObjectPropertySetter(k.readColor_),scale:I.default.makeObjectPropertySetter(k.readScale_)}),k.LINE_STYLE_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{color:I.default.makeObjectPropertySetter(k.readColor_),width:I.default.makeObjectPropertySetter(d.a.readDecimal)}),k.MULTI_GEOMETRY_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{LineString:I.default.makeArrayPusher(k.readLineString_),LinearRing:I.default.makeArrayPusher(k.readLinearRing_),MultiGeometry:I.default.makeArrayPusher(k.readMultiGeometry_),Point:I.default.makeArrayPusher(k.readPoint_),Polygon:I.default.makeArrayPusher(k.readPolygon_)}),k.GX_MULTITRACK_GEOMETRY_PARSERS_=I.default.makeStructureNS(k.GX_NAMESPACE_URIS_,{Track:I.default.makeArrayPusher(k.readGxTrack_)}),k.NETWORK_LINK_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{ExtendedData:k.ExtendedDataParser_,Region:k.RegionParser_,Link:k.LinkParser_,address:I.default.makeObjectPropertySetter(d.a.readString),description:I.default.makeObjectPropertySetter(d.a.readString),name:I.default.makeObjectPropertySetter(d.a.readString),open:I.default.makeObjectPropertySetter(d.a.readBoolean),phoneNumber:I.default.makeObjectPropertySetter(d.a.readString),visibility:I.default.makeObjectPropertySetter(d.a.readBoolean)}),k.LINK_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{href:I.default.makeObjectPropertySetter(k.readURI_)}),k.OUTER_BOUNDARY_IS_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{LinearRing:I.default.makeReplacer(k.readFlatLinearRing_)}),k.PAIR_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Style:I.default.makeObjectPropertySetter(k.readStyle_),key:I.default.makeObjectPropertySetter(d.a.readString),styleUrl:I.default.makeObjectPropertySetter(k.readURI_)}),k.PLACEMARK_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{ExtendedData:k.ExtendedDataParser_,Region:k.RegionParser_,MultiGeometry:I.default.makeObjectPropertySetter(k.readMultiGeometry_,"geometry"),LineString:I.default.makeObjectPropertySetter(k.readLineString_,"geometry"),LinearRing:I.default.makeObjectPropertySetter(k.readLinearRing_,"geometry"),Point:I.default.makeObjectPropertySetter(k.readPoint_,"geometry"),Polygon:I.default.makeObjectPropertySetter(k.readPolygon_,"geometry"),Style:I.default.makeObjectPropertySetter(k.readStyle_),StyleMap:k.PlacemarkStyleMapParser_,address:I.default.makeObjectPropertySetter(d.a.readString),description:I.default.makeObjectPropertySetter(d.a.readString),name:I.default.makeObjectPropertySetter(d.a.readString),open:I.default.makeObjectPropertySetter(d.a.readBoolean),phoneNumber:I.default.makeObjectPropertySetter(d.a.readString),styleUrl:I.default.makeObjectPropertySetter(k.readURI_),visibility:I.default.makeObjectPropertySetter(d.a.readBoolean)},I.default.makeStructureNS(k.GX_NAMESPACE_URIS_,{MultiTrack:I.default.makeObjectPropertySetter(k.readGxMultiTrack_,"geometry"),Track:I.default.makeObjectPropertySetter(k.readGxTrack_,"geometry")})),k.POLY_STYLE_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{color:I.default.makeObjectPropertySetter(k.readColor_),fill:I.default.makeObjectPropertySetter(d.a.readBoolean),outline:I.default.makeObjectPropertySetter(d.a.readBoolean)}),k.SCHEMA_DATA_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{SimpleData:k.SimpleDataParser_}),k.STYLE_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{IconStyle:k.IconStyleParser_,LabelStyle:k.LabelStyleParser_,LineStyle:k.LineStyleParser_,PolyStyle:k.PolyStyleParser_}),k.STYLE_MAP_PARSERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Pair:k.PairDataParser_}),k.prototype.readDocumentOrFolder_=function(e,t){var r=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Document:I.default.makeArrayExtender(this.readDocumentOrFolder_,this),Folder:I.default.makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:I.default.makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),a=I.default.pushParseAndPop([],r,e,t,this);return a||void 0},k.prototype.readPlacemark_=function(e,t){var r=I.default.pushParseAndPop({geometry:null},k.PLACEMARK_PARSERS_,e,t);if(r){var a=new i.default,n=e.getAttribute("id");null!==n&&a.setId(n);var o=t[0],s=r.geometry;if(s&&Object(l.b)(s,!1,o),a.setGeometry(s),delete r.geometry,this.extractStyles_){var u=r.Style,d=r.styleUrl,c=k.createFeatureStyleFunction_(u,d,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);a.setStyle(c)}return delete r.Style,a.setProperties(r),a}},k.prototype.readSharedStyle_=function(e,t){var r=e.getAttribute("id");if(null!==r){var a=k.readStyle_(e,t);if(a){var i,n=e.baseURI;if(n&&"about:blank"!=n||(n=window.location.href),n)i=new URL("#"+r,n).href;else i="#"+r;this.sharedStyles_[i]=a}}},k.prototype.readSharedStyleMap_=function(e,t){var r=e.getAttribute("id");if(null!==r){var a=k.readStyleMapValue_(e,t);if(a){var i,n=e.baseURI;if(n&&"about:blank"!=n||(n=window.location.href),n)i=new URL("#"+r,n).href;else i="#"+r;this.sharedStyles_[i]=a}}},k.prototype.readFeature,k.prototype.readFeatureFromNode=function(e,t){if(!Object(n.includes)(k.NAMESPACE_URIS_,e.namespaceURI))return null;var r=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return r||null},k.prototype.readFeatures,k.prototype.readFeaturesFromNode=function(e,t){if(!Object(n.includes)(k.NAMESPACE_URIS_,e.namespaceURI))return[];var r,a=e.localName;if("Document"==a||"Folder"==a)return(r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]))||[];if("Placemark"==a){var i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i?[i]:[]}if("kml"==a){var o;for(r=[],o=e.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,t);s&&Object(n.extend)(r,s)}return r}return[]},k.prototype.readName=function(e){if(I.default.isDocument(e))return this.readNameFromDocument(e);if(I.default.isNode(e))return this.readNameFromNode(e);if("string"==typeof e){var t=I.default.parse(e);return this.readNameFromDocument(t)}},k.prototype.readNameFromDocument=function(e){var t;for(t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(t);if(r)return r}},k.prototype.readNameFromNode=function(e){var t;for(t=e.firstElementChild;t;t=t.nextElementSibling)if(Object(n.includes)(k.NAMESPACE_URIS_,t.namespaceURI)&&"name"==t.localName)return d.a.readString(t);for(t=e.firstElementChild;t;t=t.nextElementSibling){var r=t.localName;if(Object(n.includes)(k.NAMESPACE_URIS_,t.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var a=this.readNameFromNode(t);if(a)return a}}},k.prototype.readNetworkLinks=function(e){var t=[];if(I.default.isDocument(e))Object(n.extend)(t,this.readNetworkLinksFromDocument(e));else if(I.default.isNode(e))Object(n.extend)(t,this.readNetworkLinksFromNode(e));else if("string"==typeof e){var r=I.default.parse(e);Object(n.extend)(t,this.readNetworkLinksFromDocument(r))}return t},k.prototype.readNetworkLinksFromDocument=function(e){var t,r=[];for(t=e.firstChild;t;t=t.nextSibling)t.nodeType==Node.ELEMENT_NODE&&Object(n.extend)(r,this.readNetworkLinksFromNode(t));return r},k.prototype.readNetworkLinksFromNode=function(e){var t,r=[];for(t=e.firstElementChild;t;t=t.nextElementSibling)if(Object(n.includes)(k.NAMESPACE_URIS_,t.namespaceURI)&&"NetworkLink"==t.localName){var a=I.default.pushParseAndPop({},k.NETWORK_LINK_PARSERS_,t,[]);r.push(a)}for(t=e.firstElementChild;t;t=t.nextElementSibling){var i=t.localName;!Object(n.includes)(k.NAMESPACE_URIS_,t.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Object(n.extend)(r,this.readNetworkLinksFromNode(t))}return r},k.prototype.readRegion=function(e){var t=[];if(I.default.isDocument(e))Object(n.extend)(t,this.readRegionFromDocument(e));else if(I.default.isNode(e))Object(n.extend)(t,this.readRegionFromNode(e));else if("string"==typeof e){var r=I.default.parse(e);Object(n.extend)(t,this.readRegionFromDocument(r))}return t},k.prototype.readRegionFromDocument=function(e){var t,r=[];for(t=e.firstChild;t;t=t.nextSibling)t.nodeType==Node.ELEMENT_NODE&&Object(n.extend)(r,this.readRegionFromNode(t));return r},k.prototype.readRegionFromNode=function(e){var t,r=[];for(t=e.firstElementChild;t;t=t.nextElementSibling)if(Object(n.includes)(k.NAMESPACE_URIS_,t.namespaceURI)&&"Region"==t.localName){var a=I.default.pushParseAndPop({},k.REGION_PARSERS_,t,[]);r.push(a)}for(t=e.firstElementChild;t;t=t.nextElementSibling){var i=t.localName;!Object(n.includes)(k.NAMESPACE_URIS_,t.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||Object(n.extend)(r,this.readRegionFromNode(t))}return r},k.prototype.readProjection,k.writeColorTextNode_=function(e,t){var r,a=Object(s.asArray)(t),i=[255*(4==a.length?a[3]:1),a[2],a[1],a[0]];for(r=0;r<4;++r){var n=parseInt(i[r],10).toString(16);i[r]=1==n.length?"0"+n:n}d.a.writeStringTextNode(e,i.join(""))},k.writeCoordinatesTextNode_=function(e,t,r){var a,i,n,s=r[r.length-1],l=s.layout,u=s.stride;l==f.default.XY||l==f.default.XYM?a=2:l==f.default.XYZ||l==f.default.XYZM?a=3:Object(o.a)(!1,34);var c=t.length,h="";if(c>0){for(h+=t[0],i=1;i<a;++i)h+=","+t[i];for(n=u;n<c;n+=u)for(h+=" "+t[n],i=1;i<a;++i)h+=","+t[n+i]}d.a.writeStringTextNode(e,h)},k.writeDataNode_=function(e,t,r){e.setAttribute("name",t.name);var a={node:e},i=t.value;"object"==typeof i?(null!==i&&i.displayName&&I.default.pushSerializeAndPop(a,k.EXTENDEDDATA_NODE_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,[i.displayName],r,["displayName"]),null!==i&&i.value&&I.default.pushSerializeAndPop(a,k.EXTENDEDDATA_NODE_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,[i.value],r,["value"])):I.default.pushSerializeAndPop(a,k.EXTENDEDDATA_NODE_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,[i],r,["value"])},k.writeDataNodeName_=function(e,t){d.a.writeCDATASection(e,t)},k.writeDataNodeValue_=function(e,t){d.a.writeStringTextNode(e,t)},k.writeDocument_=function(e,t,r){var a={node:e};I.default.pushSerializeAndPop(a,k.DOCUMENT_SERIALIZERS_,k.DOCUMENT_NODE_FACTORY_,t,r,void 0,this)},k.writeExtendedData_=function(e,t,r){for(var a={node:e},i=t.names,n=t.values,o=i.length,s=0;s<o;s++)I.default.pushSerializeAndPop(a,k.EXTENDEDDATA_NODE_SERIALIZERS_,k.DATA_NODE_FACTORY_,[{name:i[s],value:n[s]}],r)},k.writeIcon_=function(e,t,r){var a={node:e},i=r[r.length-1].node,n=k.ICON_SEQUENCE_[i.namespaceURI],o=I.default.makeSequence(t,n);I.default.pushSerializeAndPop(a,k.ICON_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,o,r,n),n=k.ICON_SEQUENCE_[k.GX_NAMESPACE_URIS_[0]],o=I.default.makeSequence(t,n),I.default.pushSerializeAndPop(a,k.ICON_SERIALIZERS_,k.GX_NODE_FACTORY_,o,r,n)},k.writeIconStyle_=function(e,t,r){var a={node:e},i={},n=t.getSrc(),o=t.getSize(),s=t.getImageSize(),l={href:n};if(o){l.w=o[0],l.h=o[1];var u=t.getAnchor(),d=t.getOrigin();if(d&&s&&0!==d[0]&&d[1]!==o[1]&&(l.x=d[0],l.y=s[1]-(d[1]+o[1])),u&&(u[0]!==o[0]/2||u[1]!==o[1]/2)){var c={x:u[0],xunits:T.a.PIXELS,y:o[1]-u[1],yunits:T.a.PIXELS};i.hotSpot=c}}i.Icon=l;var f=t.getScale();1!==f&&(i.scale=f);var h=t.getRotation();0!==h&&(i.heading=h);var p=r[r.length-1].node,_=k.ICON_STYLE_SEQUENCE_[p.namespaceURI],g=I.default.makeSequence(i,_);I.default.pushSerializeAndPop(a,k.ICON_STYLE_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,g,r,_)},k.writeLabelStyle_=function(e,t,r){var a={node:e},i={},n=t.getFill();n&&(i.color=n.getColor());var o=t.getScale();o&&1!==o&&(i.scale=o);var s=r[r.length-1].node,l=k.LABEL_STYLE_SEQUENCE_[s.namespaceURI],u=I.default.makeSequence(i,l);I.default.pushSerializeAndPop(a,k.LABEL_STYLE_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,u,r,l)},k.writeLineStyle_=function(e,t,r){var a={node:e},i={color:t.getColor(),width:t.getWidth()},n=r[r.length-1].node,o=k.LINE_STYLE_SEQUENCE_[n.namespaceURI],s=I.default.makeSequence(i,o);I.default.pushSerializeAndPop(a,k.LINE_STYLE_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,s,r,o)},k.writeMultiGeometry_=function(e,t,r){var a,i,n={node:e},s=t.getType();s==h.default.GEOMETRY_COLLECTION?(a=t.getGeometries(),i=k.GEOMETRY_NODE_FACTORY_):s==h.default.MULTI_POINT?(a=t.getPoints(),i=k.POINT_NODE_FACTORY_):s==h.default.MULTI_LINE_STRING?(a=t.getLineStrings(),i=k.LINE_STRING_NODE_FACTORY_):s==h.default.MULTI_POLYGON?(a=t.getPolygons(),i=k.POLYGON_NODE_FACTORY_):Object(o.a)(!1,39),I.default.pushSerializeAndPop(n,k.MULTI_GEOMETRY_SERIALIZERS_,i,a,r)},k.writeBoundaryIs_=function(e,t,r){var a={node:e};I.default.pushSerializeAndPop(a,k.BOUNDARY_IS_SERIALIZERS_,k.LINEAR_RING_NODE_FACTORY_,[t],r)},k.writePlacemark_=function(e,t,r){var a={node:e};t.getId()&&e.setAttribute("id",t.getId());var i=t.getProperties(),n={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};n[t.getGeometryName()]=1;var o=Object.keys(i||{}).sort().filter(function(e){return!n[e]});if(o.length>0){var s={names:o,values:I.default.makeSequence(i,o)};I.default.pushSerializeAndPop(a,k.PLACEMARK_SERIALIZERS_,k.EXTENDEDDATA_NODE_FACTORY_,[s],r)}var u=t.getStyleFunction();if(u){var d=u.call(t,0);if(d){var c=Array.isArray(d)?d[0]:d;this.writeStyles_&&(i.Style=c);var f=c.getText();f&&(i.name=f.getText())}}var h=r[r.length-1].node,p=k.PLACEMARK_SEQUENCE_[h.namespaceURI],_=I.default.makeSequence(i,p);I.default.pushSerializeAndPop(a,k.PLACEMARK_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,_,r,p);var g=r[0],m=t.getGeometry();m&&(m=Object(l.b)(m,!0,g)),I.default.pushSerializeAndPop(a,k.PLACEMARK_SERIALIZERS_,k.GEOMETRY_NODE_FACTORY_,[m],r)},k.writePrimitiveGeometry_=function(e,t,r){var a=t.getFlatCoordinates(),i={node:e};i.layout=t.getLayout(),i.stride=t.getStride();var n=t.getProperties();n.coordinates=a;var o=r[r.length-1].node,s=k.PRIMITIVE_GEOMETRY_SEQUENCE_[o.namespaceURI],l=I.default.makeSequence(n,s);I.default.pushSerializeAndPop(i,k.PRIMITIVE_GEOMETRY_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,l,r,s)},k.writePolygon_=function(e,t,r){var a=t.getLinearRings(),i=a.shift(),n={node:e};I.default.pushSerializeAndPop(n,k.POLYGON_SERIALIZERS_,k.INNER_BOUNDARY_NODE_FACTORY_,a,r),I.default.pushSerializeAndPop(n,k.POLYGON_SERIALIZERS_,k.OUTER_BOUNDARY_NODE_FACTORY_,[i],r)},k.writePolyStyle_=function(e,t,r){var a={node:e};I.default.pushSerializeAndPop(a,k.POLY_STYLE_SERIALIZERS_,k.COLOR_NODE_FACTORY_,[t.getColor()],r)},k.writeScaleTextNode_=function(e,t){d.a.writeDecimalTextNode(e,Math.round(1e6*t)/1e6)},k.writeStyle_=function(e,t,r){var a={node:e},i={},n=t.getFill(),o=t.getStroke(),s=t.getImage(),l=t.getText();s instanceof P.default&&(i.IconStyle=s),l&&(i.LabelStyle=l),o&&(i.LineStyle=o),n&&(i.PolyStyle=n);var u=r[r.length-1].node,d=k.STYLE_SEQUENCE_[u.namespaceURI],c=I.default.makeSequence(i,d);I.default.pushSerializeAndPop(a,k.STYLE_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,c,r,d)},k.writeVec2_=function(e,t){e.setAttribute("x",t.x),e.setAttribute("y",t.y),e.setAttribute("xunits",t.xunits),e.setAttribute("yunits",t.yunits)},k.KML_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["Document","Placemark"]),k.KML_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Document:I.default.makeChildAppender(k.writeDocument_),Placemark:I.default.makeChildAppender(k.writePlacemark_)}),k.DOCUMENT_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Placemark:I.default.makeChildAppender(k.writePlacemark_)}),k.EXTENDEDDATA_NODE_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Data:I.default.makeChildAppender(k.writeDataNode_),value:I.default.makeChildAppender(k.writeDataNodeValue_),displayName:I.default.makeChildAppender(k.writeDataNodeName_)}),k.GEOMETRY_TYPE_TO_NODENAME_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},k.ICON_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["href"],I.default.makeStructureNS(k.GX_NAMESPACE_URIS_,["x","y","w","h"])),k.ICON_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{href:I.default.makeChildAppender(d.a.writeStringTextNode)},I.default.makeStructureNS(k.GX_NAMESPACE_URIS_,{x:I.default.makeChildAppender(d.a.writeDecimalTextNode),y:I.default.makeChildAppender(d.a.writeDecimalTextNode),w:I.default.makeChildAppender(d.a.writeDecimalTextNode),h:I.default.makeChildAppender(d.a.writeDecimalTextNode)})),k.ICON_STYLE_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["scale","heading","Icon","hotSpot"]),k.ICON_STYLE_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{Icon:I.default.makeChildAppender(k.writeIcon_),heading:I.default.makeChildAppender(d.a.writeDecimalTextNode),hotSpot:I.default.makeChildAppender(k.writeVec2_),scale:I.default.makeChildAppender(k.writeScaleTextNode_)}),k.LABEL_STYLE_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["color","scale"]),k.LABEL_STYLE_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{color:I.default.makeChildAppender(k.writeColorTextNode_),scale:I.default.makeChildAppender(k.writeScaleTextNode_)}),k.LINE_STYLE_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["color","width"]),k.LINE_STYLE_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{color:I.default.makeChildAppender(k.writeColorTextNode_),width:I.default.makeChildAppender(d.a.writeDecimalTextNode)}),k.BOUNDARY_IS_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{LinearRing:I.default.makeChildAppender(k.writePrimitiveGeometry_)}),k.MULTI_GEOMETRY_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{LineString:I.default.makeChildAppender(k.writePrimitiveGeometry_),Point:I.default.makeChildAppender(k.writePrimitiveGeometry_),Polygon:I.default.makeChildAppender(k.writePolygon_),GeometryCollection:I.default.makeChildAppender(k.writeMultiGeometry_)}),k.PLACEMARK_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),k.PLACEMARK_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{ExtendedData:I.default.makeChildAppender(k.writeExtendedData_),MultiGeometry:I.default.makeChildAppender(k.writeMultiGeometry_),LineString:I.default.makeChildAppender(k.writePrimitiveGeometry_),LinearRing:I.default.makeChildAppender(k.writePrimitiveGeometry_),Point:I.default.makeChildAppender(k.writePrimitiveGeometry_),Polygon:I.default.makeChildAppender(k.writePolygon_),Style:I.default.makeChildAppender(k.writeStyle_),address:I.default.makeChildAppender(d.a.writeStringTextNode),description:I.default.makeChildAppender(d.a.writeStringTextNode),name:I.default.makeChildAppender(d.a.writeStringTextNode),open:I.default.makeChildAppender(d.a.writeBooleanTextNode),phoneNumber:I.default.makeChildAppender(d.a.writeStringTextNode),styleUrl:I.default.makeChildAppender(d.a.writeStringTextNode),visibility:I.default.makeChildAppender(d.a.writeBooleanTextNode)}),k.PRIMITIVE_GEOMETRY_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["extrude","tessellate","altitudeMode","coordinates"]),k.PRIMITIVE_GEOMETRY_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{extrude:I.default.makeChildAppender(d.a.writeBooleanTextNode),tessellate:I.default.makeChildAppender(d.a.writeBooleanTextNode),altitudeMode:I.default.makeChildAppender(d.a.writeStringTextNode),coordinates:I.default.makeChildAppender(k.writeCoordinatesTextNode_)}),k.POLYGON_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{outerBoundaryIs:I.default.makeChildAppender(k.writeBoundaryIs_),innerBoundaryIs:I.default.makeChildAppender(k.writeBoundaryIs_)}),k.POLY_STYLE_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{color:I.default.makeChildAppender(k.writeColorTextNode_)}),k.STYLE_SEQUENCE_=I.default.makeStructureNS(k.NAMESPACE_URIS_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),k.STYLE_SERIALIZERS_=I.default.makeStructureNS(k.NAMESPACE_URIS_,{IconStyle:I.default.makeChildAppender(k.writeIconStyle_),LabelStyle:I.default.makeChildAppender(k.writeLabelStyle_),LineStyle:I.default.makeChildAppender(k.writeLineStyle_),PolyStyle:I.default.makeChildAppender(k.writePolyStyle_)}),k.GX_NODE_FACTORY_=function(e,t,r){return I.default.createElementNS(k.GX_NAMESPACE_URIS_[0],"gx:"+r)},k.DOCUMENT_NODE_FACTORY_=function(e,t,r){var a=t[t.length-1].node;return I.default.createElementNS(a.namespaceURI,"Placemark")},k.GEOMETRY_NODE_FACTORY_=function(e,t,r){if(e){var a=t[t.length-1].node;return I.default.createElementNS(a.namespaceURI,k.GEOMETRY_TYPE_TO_NODENAME_[e.getType()])}},k.COLOR_NODE_FACTORY_=I.default.makeSimpleNodeFactory("color"),k.DATA_NODE_FACTORY_=I.default.makeSimpleNodeFactory("Data"),k.EXTENDEDDATA_NODE_FACTORY_=I.default.makeSimpleNodeFactory("ExtendedData"),k.INNER_BOUNDARY_NODE_FACTORY_=I.default.makeSimpleNodeFactory("innerBoundaryIs"),k.POINT_NODE_FACTORY_=I.default.makeSimpleNodeFactory("Point"),k.LINE_STRING_NODE_FACTORY_=I.default.makeSimpleNodeFactory("LineString"),k.LINEAR_RING_NODE_FACTORY_=I.default.makeSimpleNodeFactory("LinearRing"),k.POLYGON_NODE_FACTORY_=I.default.makeSimpleNodeFactory("Polygon"),k.OUTER_BOUNDARY_NODE_FACTORY_=I.default.makeSimpleNodeFactory("outerBoundaryIs"),k.prototype.writeFeatures,k.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var r=I.default.createElementNS(k.NAMESPACE_URIS_[4],"kml"),a="http://www.w3.org/2000/xmlns/",i="http://www.w3.org/2001/XMLSchema-instance";I.default.setAttributeNS(r,a,"xmlns:gx",k.GX_NAMESPACE_URIS_[0]),I.default.setAttributeNS(r,a,"xmlns:xsi",i),I.default.setAttributeNS(r,i,"xsi:schemaLocation",k.SCHEMA_LOCATION_);var n={node:r},o={};e.length>1?o.Document=e:1==e.length&&(o.Placemark=e[0]);var s=k.KML_SEQUENCE_[r.namespaceURI],l=I.default.makeSequence(o,s);return I.default.pushSerializeAndPop(n,k.KML_SERIALIZERS_,I.default.OBJECT_PROPERTY_NODE_FACTORY,l,[t],s,this),r},t.default=k},16:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(11),i=r(0),n=r(63),o=r(56),s=r(2),l=r(9),u=r(4),d=function(e,t,r,a,i,s){n.a.call(this,e,t,r,o.a.IDLE),this.src_=a,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.imageListenerKeys_=null,this.state=o.a.IDLE,this.imageLoadFunction_=s};Object(i.inherits)(d,n.a),d.prototype.getImage=function(){return this.image_},d.prototype.handleImageError_=function(){this.state=o.a.ERROR,this.unlistenImage_(),this.changed()},d.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(u.getHeight)(this.extent)/this.image_.height),this.state=o.a.LOADED,this.unlistenImage_(),this.changed()},d.prototype.load=function(){this.state!=o.a.IDLE&&this.state!=o.a.ERROR||(this.state=o.a.LOADING,this.changed(),this.imageListenerKeys_=[s.default.listenOnce(this.image_,l.a.ERROR,this.handleImageError_,this),s.default.listenOnce(this.image_,l.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},d.prototype.setImage=function(e){this.image_=e},d.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.default.unlistenByKey),this.imageListenerKeys_=null};var c=d,f=r(10),h=r(5),p=r(6),_=r(28),g=r(57),m=r(12),S=r(15),y=r(22),v=function(e){var t=e||{};g.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:g.default.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(i.inherits)(v,g.default),v.GETFEATUREINFO_IMAGE_SIZE_=[101,101],v.prototype.getGetFeatureInfoUrl=function(e,t,r,i){if(void 0!==this.url_){var n=Object(p.get)(r),o=this.getProjection();o&&o!==n&&(t=_.a.calculateSourceResolution(o,n,e,t),e=Object(p.transform)(e,n,o));var s=Object(u.getForViewAndSize)(e,t,0,v.GETFEATUREINFO_IMAGE_SIZE_),l={SERVICE:"WMS",VERSION:a.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};h.default.assign(l,this.params_,i);var d=Math.floor((e[0]-s[0])/t),c=Math.floor((s[3]-e[1])/t);return l[this.v13_?"I":"X"]=d,l[this.v13_?"J":"Y"]=c,this.getRequestUrl_(s,v.GETFEATUREINFO_IMAGE_SIZE_,1,o||n,l)}},v.prototype.getParams=function(){return this.params_},v.prototype.getImageInternal=function(e,t,r,i){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var n=t/r,o=Object(u.getCenter)(e),d=Math.ceil(Object(u.getWidth)(e)/n),f=Math.ceil(Object(u.getHeight)(e)/n),p=Object(u.getForViewAndSize)(o,n,0,[d,f]),_=Math.ceil(this.ratio_*Object(u.getWidth)(e)/n),g=Math.ceil(this.ratio_*Object(u.getHeight)(e)/n),m=Object(u.getForViewAndSize)(o,n,0,[_,g]),S=this.image_;if(S&&this.renderedRevision_==this.getRevision()&&S.getResolution()==t&&S.getPixelRatio()==r&&Object(u.containsExtent)(S.getExtent(),p))return S;var y={SERVICE:"WMS",VERSION:a.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};h.default.assign(y,this.params_),this.imageSize_[0]=Math.round(Object(u.getWidth)(m)/n),this.imageSize_[1]=Math.round(Object(u.getHeight)(m)/n);var v=this.getRequestUrl_(m,this.imageSize_,r,i,y);return this.image_=new c(m,t,r,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s.default.listen(this.image_,l.a.CHANGE,this.handleImageChange,this),this.image_},v.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},v.prototype.getRequestUrl_=function(e,t,r,a,i){if(Object(f.a)(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=a.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case m.a.GEOSERVER:var n=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+n:i.FORMAT_OPTIONS="dpi:"+n;break;case m.a.MAPSERVER:i.MAP_RESOLUTION=90*r;break;case m.a.CARMENTA_SERVER:case m.a.QGIS:i.DPI=90*r;break;default:Object(f.a)(!1,8)}i.WIDTH=t[0],i.HEIGHT=t[1];var o,s=a.getAxisOrientation();return o=this.v13_&&"ne"==s.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,i.BBOX=o.join(","),y.default.appendParams(this.url_,i)},v.prototype.getUrl=function(){return this.url_},v.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},v.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},v.prototype.updateParams=function(e){h.default.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},v.prototype.updateV13_=function(){var e=this.params_.VERSION||a.a;this.v13_=S.default.compareVersions(e,"1.3")>=0};t.default=v},167:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=C(r(1)),i=(C(r(101)),C(r(168))),n=C(r(86)),o=C(r(124)),s=C(r(8)),l=C(r(90)),u=C(r(4)),d=C(r(40)),c=C(r(30)),f=C(r(51)),h=C(r(45)),p=C(r(27)),_=C(r(42)),g=C(r(53)),m=C(r(169)),S=C(r(148)),y=C(r(108)),v=C(r(65)),E=C(r(160)),A=C(r(78)),P=C(r(17)),T=C(r(98));function C(e){return e&&e.__esModule?e:{default:e}}var R=function(e,t){if(this.$filter_=t,this.decimals_=void 0,e.has("ngeoMeasureDecimals")&&(this.decimals_=e.get("ngeoMeasureDecimals")),this.precision_=void 0,e.has("ngeoMeasurePrecision")&&(this.precision_=e.get("ngeoMeasurePrecision")),this.numberFormat_=t("number"),this.unitPrefixFormat_=t("ngeoUnitPrefix"),this.ngeoNumberCoordinates_=t("ngeoNumberCoordinates"),this.pointFilterFn_=null,this.pointFilterArgs_=[],e.has("ngeoPointfilter")){var r=e.get("ngeoPointfilter").split(":"),a=r.shift(),i=this.$filter_(a);goog.asserts.assertFunction(i),this.pointFilterFn_=i,this.pointFilterArgs_=r}else this.pointFilterFn_=null;this.projection_,this.download_=e.get("ngeoDownload")};R.$inject=["$injector","$filter"],R.$inject=["$injector","$filter"],R.prototype.setProjection=function(e){this.projection_=e},R.prototype.setStyle=function(e,t){var r=this.getStyle(e);t&&(this.supportsVertex_(e)&&r.push(this.getVertexStyle()),r.unshift(this.getHaloStyle_(e))),e.setStyle(r)},R.prototype.getStyle=function(e){var t=void 0;switch(this.getType(e)){case a.default.GeometryType.LINE_STRING:t=this.getLineStringStyle_(e);break;case a.default.GeometryType.POINT:t=this.getPointStyle_(e);break;case a.default.GeometryType.CIRCLE:case a.default.GeometryType.POLYGON:case a.default.GeometryType.RECTANGLE:t=this.getPolygonStyle_(e);break;case a.default.GeometryType.TEXT:t=this.getTextStyle_(e)}goog.asserts.assert(t,"Style should be thruthy");return t.constructor===Array?t:[t]},R.prototype.getLineStringStyle_=function(e){var t=this.getStrokeProperty(e),r=this.getShowLabelProperty(e),a=this.getShowMeasureProperty(e),i=this.getRGBAColorProperty(e),n=[new P.default({stroke:new A.default({color:i,width:t})})],o=[];if(a&&o.push(this.getMeasure(e)),r&&o.push(this.getNameProperty(e)),r||a){var s=o.join("\n");n.push(new P.default({text:this.createTextStyle_({text:s})}))}return n},R.prototype.getPointStyle_=function(e){var t=this.getSizeProperty(e),r=this.getRGBAColorProperty(e),a=this.getShowLabelProperty(e),i=this.getShowMeasureProperty(e),n=[new P.default({image:new y.default({radius:t,fill:new v.default({color:r})})})],o=[];if(i&&o.push(this.getMeasure(e)),a&&o.push(this.getNameProperty(e)),a||i){var s=o.join("\n");n.push(new P.default({text:this.createTextStyle_({text:s,offsetY:-(t+5+4)})}))}return n},R.prototype.optNumber=function(e,t){var r=e.get(t);return void 0!==r?"string"==typeof r?+r:goog.asserts.assertNumber(r):void 0},R.prototype.getNumber=function(e,t){var r=e.get(t);return"string"==typeof r?+r:goog.asserts.assertNumber(r)},R.prototype.getPolygonStyle_=function(e){var t=this.getStrokeProperty(e),r=this.getOpacityProperty(e),i=this.getRGBAColorProperty(e),o=this.getShowLabelProperty(e),s=this.getShowMeasureProperty(e),l=i.slice();l[3]=r;var u=this.optNumber(e,a.default.FeatureProperties.AZIMUT),d=[new P.default({fill:new v.default({color:l}),stroke:new A.default({color:i,width:t})})];if(s||o)if(void 0!==u){var c=this.getRadiusLine(e,u),f=n.default.getFormattedLength(c,this.projection_,this.precision_,this.unitPrefixFormat_);d.push(new P.default({geometry:c,fill:new v.default({color:l}),stroke:new A.default({color:i,width:t}),text:this.createTextStyle_({text:f,angle:(u%180+180)%180-90})})),d.push(new P.default({geometry:new p.default(c.getLastCoordinate()),text:this.createTextStyle_({text:this.numberFormat_(u,this.decimals_)+"°",size:10,offsetX:20*Math.cos((u-90)*Math.PI/180),offsetY:20*Math.sin((u-90)*Math.PI/180)})}))}else{var h=[];if(s&&h.push(this.getMeasure(e)),o&&h.push(this.getNameProperty(e)),o||s){var _=h.join("\n");d.push(new P.default({text:this.createTextStyle_({text:_,offsetY:-8})}))}}return d},R.prototype.getTextStyle_=function(e){return new P.default({text:this.createTextStyle_({text:this.getNameProperty(e),size:this.getSizeProperty(e),angle:this.getAngleProperty(e),color:this.getRGBAColorProperty(e),width:this.getStrokeProperty(e)})})},R.prototype.createEditingStyles=function(e){var t=[255,255,255,1],r=[0,153,255,1],a=[],i=e.getGeometry();console.assert(i);var n=i.getType();return"Point"===n?a.push(new P.default({image:new y.default({radius:6,fill:new v.default({color:r}),stroke:new A.default({color:t,width:1.5})}),zIndex:1/0})):("LineString"===n?(a.push(new P.default({stroke:new A.default({color:t,width:5})})),a.push(new P.default({stroke:new A.default({color:r,width:3})}))):a.push(new P.default({stroke:new A.default({color:r,width:1.5}),fill:new v.default({color:[255,255,255,.5]})})),a.push(this.getVertexStyle(!0))),a},R.prototype.getVertexStyle=function(e){var t=void 0===e||e,r={image:new E.default({radius:6,points:4,angle:Math.PI/4,fill:new v.default({color:[255,255,255,.5]}),stroke:new A.default({color:[0,0,0,1]})})};return t&&(r.geometry=function(e){var t=e.getGeometry();if("Point"!=t.getType()){var r=void 0,a=[],i=[],n=void 0,o=void 0;if(t instanceof c.default?i=t.getCoordinates():t instanceof f.default?a=t.getCoordinates():t instanceof _.default?i=t.getCoordinates()[0]:t instanceof g.default&&(r=t.getCoordinates()),r)for(n=0,o=r.length;n<o;n++)a=a.concat(r[n]);for(n=0,o=a.length;n<o;n++)i=i.concat(a[n]);return i.length?new h.default(i):t}}),new P.default(r)},R.prototype.supportsVertex_=function(e){var t=[a.default.GeometryType.LINE_STRING,a.default.GeometryType.POLYGON,a.default.GeometryType.RECTANGLE],r=this.getType(e);return s.default.includes(t,r)},R.prototype.getHaloStyle_=function(e){var t=void 0;switch(this.getType(e)){case a.default.GeometryType.POINT:var r=this.getSizeProperty(e);t=new P.default({image:new y.default({radius:r+3,fill:new v.default({color:[255,255,255,1]})})});break;case a.default.GeometryType.LINE_STRING:case a.default.GeometryType.CIRCLE:case a.default.GeometryType.POLYGON:case a.default.GeometryType.RECTANGLE:var i=this.getStrokeProperty(e);t=new P.default({stroke:new A.default({color:[255,255,255,1],width:i+6})});break;case a.default.GeometryType.TEXT:t=new P.default({text:this.createTextStyle_({text:this.getNameProperty(e),size:this.getSizeProperty(e),angle:this.getAngleProperty(e),width:9})})}return goog.asserts.assert(t,"Style should be thruthy"),t},R.getFilteredFeatureValues=function(e){var t=e.getProperties();return delete t.boundedBy,delete t[e.getGeometryName()],delete t.ngeo_feature_type_,t},R.prototype.getAngleProperty=function(e){var t=+e.get(a.default.FeatureProperties.ANGLE);return goog.asserts.assertNumber(t),t},R.prototype.getColorProperty=function(e){var t=goog.asserts.assertString(e.get(a.default.FeatureProperties.COLOR));return goog.asserts.assertString(t),t},R.prototype.getRGBAColorProperty=function(e){return l.default.fromString(this.getColorProperty(e))},R.prototype.getNameProperty=function(e){var t=goog.asserts.assertString(e.get(a.default.FeatureProperties.NAME));return goog.asserts.assertString(t),t},R.prototype.getOpacityProperty=function(e){return this.getNumber(e,a.default.FeatureProperties.OPACITY)},R.prototype.getShowMeasureProperty=function(e){var t=e.get(a.default.FeatureProperties.SHOW_MEASURE);return void 0===t?t=!1:"string"==typeof t&&(t="true"===t),goog.asserts.assertBoolean(t)},R.prototype.getShowLabelProperty=function(e){var t=e.get(a.default.FeatureProperties.SHOW_LABEL);return void 0===t?t=!1:"string"==typeof t&&(t="true"===t),goog.asserts.assertBoolean(t)},R.prototype.getSizeProperty=function(e){return this.getNumber(e,a.default.FeatureProperties.SIZE)},R.prototype.getStrokeProperty=function(e){return this.getNumber(e,a.default.FeatureProperties.STROKE)},R.prototype.export=function(e,t){switch(t){case R.FormatType.GPX:this.exportGPX(e);break;case R.FormatType.KML:this.exportKML(e)}},R.prototype.exportGPX=function(e){var t=new m.default;this.export_(e,t,"export.gpx","application/gpx+xml")},R.prototype.exportKML=function(e){var t=new S.default;this.export_(e,t,"export.kml","application/vnd.google-earth.kml+xml")},R.prototype.export_=function(e,t,r,a){var i=this,n=void 0!==a?a:"text/plain",o=[],s=void 0;e.forEach(function(e){s=new d.default(e.getProperties()),i.setStyle(s,!1),o.push(s)});var l=this.projection_?{dataProjection:"EPSG:4326",featureProjection:this.projection_}:{},u=t.writeFeatures(o,l);this.download_(u,r,n+";charset=utf-8")},R.prototype.createTextStyle_=function(e){if(e.angle){var t=(void 0!==e.angle?e.angle:0)*Math.PI/180;e.rotation=t,delete e.angle}return e.font=["normal",(e.size||10)+"pt","Arial"].join(" "),e.color&&(e.fill=new v.default({color:e.color||[0,0,0,1]}),delete e.color),e.stroke=new A.default({color:[255,255,255,1],width:e.width||3}),delete e.width,new T.default(e)},R.prototype.getMeasure=function(e){var t=e.getGeometry();goog.asserts.assert(t,"Geometry should be truthy");var r="";if(t instanceof _.default)if(this.getType(e)===a.default.GeometryType.CIRCLE){var i=this.optNumber(e,a.default.FeatureProperties.AZIMUT);goog.asserts.assertNumber(i);var s=this.getRadiusLine(e,i);r=o.default.getFormattedAzimutRadius(s,this.projection_,this.decimals_,this.precision_,this.unitPrefixFormat_,this.numberFormat_)}else r=n.default.getFormattedArea(t,this.projection_,this.precision_,this.unitPrefixFormat_);else if(t instanceof c.default)r=n.default.getFormattedLength(t,this.projection_,this.precision_,this.unitPrefixFormat_);else if(t instanceof p.default)if(null===this.pointFilterFn_)r=n.default.getFormattedPoint(t,this.decimals_,this.ngeoNumberCoordinates_);else{var l=t.getCoordinates(),u=this.pointFilterArgs_.slice(0);u.unshift(l),r=this.pointFilterFn_.apply(this,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(u))}return r},R.prototype.getType=function(e){var t=e.getGeometry();goog.asserts.assert(t,"Geometry should be thruthy");var r=void 0;return t instanceof p.default?r=e.get(a.default.FeatureProperties.IS_TEXT)?a.default.GeometryType.TEXT:a.default.GeometryType.POINT:t instanceof h.default?r=a.default.GeometryType.MULTI_POINT:t instanceof _.default?r=e.get(a.default.FeatureProperties.IS_CIRCLE)?a.default.GeometryType.CIRCLE:e.get(a.default.FeatureProperties.IS_RECTANGLE)?a.default.GeometryType.RECTANGLE:a.default.GeometryType.POLYGON:t instanceof g.default?r=a.default.GeometryType.MULTI_POLYGON:t instanceof c.default?r=a.default.GeometryType.LINE_STRING:t instanceof f.default&&(r=a.default.GeometryType.MULTI_LINE_STRING),goog.asserts.assert(r,"Type should be thruthy"),r},R.prototype.panMapToFeature=function(e,t,r){var a=void 0!==r?r:250,i=t.getSize();goog.asserts.assertArray(i);var n=t.getView(),o=n.calculateExtent(i),s=e.getGeometry();if(!s.intersectsExtent(o)){var l=n.getCenter();goog.asserts.assertArray(l);var d=void 0;d=s instanceof c.default?s.getCoordinateAt(.5):s instanceof _.default?s.getInteriorPoint().getCoordinates():s instanceof p.default?s.getCoordinates():u.default.getCenter(s.getExtent()),n.animate({center:l,duration:a},{center:d,duration:a})}},R.prototype.getRadiusLine=function(e,t){var r=e.getGeometry(),a=r.getExtent(),i=(a[3]-a[1])/2,n=u.default.getCenter(r.getExtent()),o=Math.cos((t-90)*Math.PI/180)*i,s=-Math.sin((t-90)*Math.PI/180)*i,l=[o+n[0],s+n[1]];return new c.default([n,l])},R.prototype.getNonSpatialProperties=function(e){var t=e.getGeometryName(),r={},a=e.getProperties();for(var i in a)i!==t&&(r[i]=a[i]);return r},R.prototype.clearNonSpatialProperties=function(e){var t=e.getGeometryName(),r=e.getProperties();for(var a in r)a!==t&&e.set(a,void 0)},R.FormatType={GPX:"GPX",KML:"KML"},(R.module=angular.module("ngeoFeatureHelper",[i.default.name])).service("ngeoFeatureHelper",R),a.default.module.requires.push(R.module.name),t.default=R},168:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(1)),i=n(r(114));function n(e){return e&&e.__esModule?e:{default:e}}var o=angular.module("ngeoDownload",[]);a.default.module.requires.push(o.name),o.factory_=function(){return function(e,t,r){var a=void 0===r||i.default.isSafari()?"text/plain;charset=utf-8":r,n=new Blob([e],{type:a});saveAs(n,t)}},o.factory("ngeoDownload",o.factory_),t.default=o},169:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(40),n=r(8),o=r(69),s=r(97),l=r(79),u=r(24),d=r(30),c=r(51),f=r(27),h=r(6),p=r(55),_=function(e){var t=e||{};s.a.call(this),this.defaultDataProjection=Object(h.get)("EPSG:4326"),this.readExtensions_=t.readExtensions};Object(a.inherits)(_,s.a);var g=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],m={rte:B,trk:z,wpt:q},S=p.default.makeStructureNS(g,{rte:p.default.makeArrayPusher(B),trk:p.default.makeArrayPusher(z),wpt:p.default.makeArrayPusher(q)}),y=p.default.makeStructureNS(g,{text:p.default.makeObjectPropertySetter(l.a.readString,"linkText"),type:p.default.makeObjectPropertySetter(l.a.readString,"linkType")}),v=p.default.makeStructureNS(g,{name:p.default.makeObjectPropertySetter(l.a.readString),cmt:p.default.makeObjectPropertySetter(l.a.readString),desc:p.default.makeObjectPropertySetter(l.a.readString),src:p.default.makeObjectPropertySetter(l.a.readString),link:Y,number:p.default.makeObjectPropertySetter(l.a.readNonNegativeInteger),extensions:X,type:p.default.makeObjectPropertySetter(l.a.readString),rtept:function(e,t){var r=p.default.pushParseAndPop({},E,e,t);if(r){var a=t[t.length-1],i=a.flatCoordinates,n=a.layoutOptions;j(i,n,e,r)}}}),E=p.default.makeStructureNS(g,{ele:p.default.makeObjectPropertySetter(l.a.readDecimal),time:p.default.makeObjectPropertySetter(l.a.readDateTime)}),A=p.default.makeStructureNS(g,{name:p.default.makeObjectPropertySetter(l.a.readString),cmt:p.default.makeObjectPropertySetter(l.a.readString),desc:p.default.makeObjectPropertySetter(l.a.readString),src:p.default.makeObjectPropertySetter(l.a.readString),link:Y,number:p.default.makeObjectPropertySetter(l.a.readNonNegativeInteger),type:p.default.makeObjectPropertySetter(l.a.readString),extensions:X,trkseg:function(e,t){var r=t[t.length-1];p.default.parseNode(P,e,t);var a=r.flatCoordinates;r.ends.push(a.length)}}),P=p.default.makeStructureNS(g,{trkpt:function(e,t){var r=p.default.pushParseAndPop({},T,e,t);if(r){var a=t[t.length-1],i=a.flatCoordinates,n=a.layoutOptions;j(i,n,e,r)}}}),T=p.default.makeStructureNS(g,{ele:p.default.makeObjectPropertySetter(l.a.readDecimal),time:p.default.makeObjectPropertySetter(l.a.readDateTime)}),C=p.default.makeStructureNS(g,{ele:p.default.makeObjectPropertySetter(l.a.readDecimal),time:p.default.makeObjectPropertySetter(l.a.readDateTime),magvar:p.default.makeObjectPropertySetter(l.a.readDecimal),geoidheight:p.default.makeObjectPropertySetter(l.a.readDecimal),name:p.default.makeObjectPropertySetter(l.a.readString),cmt:p.default.makeObjectPropertySetter(l.a.readString),desc:p.default.makeObjectPropertySetter(l.a.readString),src:p.default.makeObjectPropertySetter(l.a.readString),link:Y,sym:p.default.makeObjectPropertySetter(l.a.readString),type:p.default.makeObjectPropertySetter(l.a.readString),fix:p.default.makeObjectPropertySetter(l.a.readString),sat:p.default.makeObjectPropertySetter(l.a.readNonNegativeInteger),hdop:p.default.makeObjectPropertySetter(l.a.readDecimal),vdop:p.default.makeObjectPropertySetter(l.a.readDecimal),pdop:p.default.makeObjectPropertySetter(l.a.readDecimal),ageofdgpsdata:p.default.makeObjectPropertySetter(l.a.readDecimal),dgpsid:p.default.makeObjectPropertySetter(l.a.readNonNegativeInteger),extensions:X}),R=["text","type"],O=p.default.makeStructureNS(g,{text:p.default.makeChildAppender(l.a.writeStringTextNode),type:p.default.makeChildAppender(l.a.writeStringTextNode)}),N=p.default.makeStructureNS(g,["name","cmt","desc","src","link","number","type","rtept"]),I=p.default.makeStructureNS(g,{name:p.default.makeChildAppender(l.a.writeStringTextNode),cmt:p.default.makeChildAppender(l.a.writeStringTextNode),desc:p.default.makeChildAppender(l.a.writeStringTextNode),src:p.default.makeChildAppender(l.a.writeStringTextNode),link:p.default.makeChildAppender(V),number:p.default.makeChildAppender(l.a.writeNonNegativeIntegerTextNode),type:p.default.makeChildAppender(l.a.writeStringTextNode),rtept:p.default.makeArraySerializer(p.default.makeChildAppender(Z))}),k=p.default.makeStructureNS(g,["ele","time"]),w=p.default.makeStructureNS(g,["name","cmt","desc","src","link","number","type","trkseg"]),L=p.default.makeStructureNS(g,{name:p.default.makeChildAppender(l.a.writeStringTextNode),cmt:p.default.makeChildAppender(l.a.writeStringTextNode),desc:p.default.makeChildAppender(l.a.writeStringTextNode),src:p.default.makeChildAppender(l.a.writeStringTextNode),link:p.default.makeChildAppender(V),number:p.default.makeChildAppender(l.a.writeNonNegativeIntegerTextNode),type:p.default.makeChildAppender(l.a.writeStringTextNode),trkseg:p.default.makeArraySerializer(p.default.makeChildAppender(function(e,t,r){var a={node:e,geometryLayout:t.getLayout(),properties:{}};p.default.pushSerializeAndPop(a,F,M,t.getCoordinates(),r)}))}),M=p.default.makeSimpleNodeFactory("trkpt"),F=p.default.makeStructureNS(g,{trkpt:p.default.makeChildAppender(Z)}),b=p.default.makeStructureNS(g,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),x=p.default.makeStructureNS(g,{ele:p.default.makeChildAppender(l.a.writeDecimalTextNode),time:p.default.makeChildAppender(l.a.writeDateTimeTextNode),magvar:p.default.makeChildAppender(l.a.writeDecimalTextNode),geoidheight:p.default.makeChildAppender(l.a.writeDecimalTextNode),name:p.default.makeChildAppender(l.a.writeStringTextNode),cmt:p.default.makeChildAppender(l.a.writeStringTextNode),desc:p.default.makeChildAppender(l.a.writeStringTextNode),src:p.default.makeChildAppender(l.a.writeStringTextNode),link:p.default.makeChildAppender(V),sym:p.default.makeChildAppender(l.a.writeStringTextNode),type:p.default.makeChildAppender(l.a.writeStringTextNode),fix:p.default.makeChildAppender(l.a.writeStringTextNode),sat:p.default.makeChildAppender(l.a.writeNonNegativeIntegerTextNode),hdop:p.default.makeChildAppender(l.a.writeDecimalTextNode),vdop:p.default.makeChildAppender(l.a.writeDecimalTextNode),pdop:p.default.makeChildAppender(l.a.writeDecimalTextNode),ageofdgpsdata:p.default.makeChildAppender(l.a.writeDecimalTextNode),dgpsid:p.default.makeChildAppender(l.a.writeNonNegativeIntegerTextNode)}),D={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function G(e,t,r){var a=e.getGeometry();if(a){var i=D[a.getType()];if(i){var n=t[t.length-1].node;return p.default.createElementNS(n.namespaceURI,i)}}}var U=p.default.makeStructureNS(g,{rte:p.default.makeChildAppender(function(e,t,r){var a=r[0],i=t.getProperties(),n={node:e,properties:i},s=t.getGeometry();s&&(s=Object(o.b)(s,!0,a),n.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates());var l=r[r.length-1].node,u=N[l.namespaceURI],d=p.default.makeSequence(i,u);p.default.pushSerializeAndPop(n,I,p.default.OBJECT_PROPERTY_NODE_FACTORY,d,r,u)}),trk:p.default.makeChildAppender(function(e,t,r){var a=r[0],i=t.getProperties(),n={node:e,properties:i},s=t.getGeometry();s&&(s=Object(o.b)(s,!0,a),i.trkseg=s.getLineStrings());var l=r[r.length-1].node,u=w[l.namespaceURI],d=p.default.makeSequence(i,u);p.default.pushSerializeAndPop(n,L,p.default.OBJECT_PROPERTY_NODE_FACTORY,d,r,u)}),wpt:p.default.makeChildAppender(function(e,t,r){var a=r[0],i=r[r.length-1];i.properties=t.getProperties();var n=t.getGeometry();n&&(n=Object(o.b)(n,!0,a),i.geometryLayout=n.getLayout(),Z(e,n.getCoordinates(),r))})});function j(e,t,r,a){return e.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in a?(e.push(a.ele),delete a.ele,t.hasZ=!0):e.push(0),"time"in a?(e.push(a.time),delete a.time,t.hasM=!0):e.push(0),e}function Y(e,t){var r=t[t.length-1],a=e.getAttribute("href");null!==a&&(r.link=a),p.default.parseNode(y,e,t)}function X(e,t){t[t.length-1].extensionsNode_=e}function B(e,t){var r=t[0],a=p.default.pushParseAndPop({flatCoordinates:[],layoutOptions:{}},v,e,t);if(a){var n=a.flatCoordinates;delete a.flatCoordinates;var s=a.layoutOptions;delete a.layoutOptions;var l=_.applyLayoutOptions_(s,n),u=new d.default(null);u.setFlatCoordinates(l,n),Object(o.b)(u,!1,r);var c=new i.default(u);return c.setProperties(a),c}}function z(e,t){var r=t[0],a=p.default.pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},A,e,t);if(a){var n=a.flatCoordinates;delete a.flatCoordinates;var s=a.ends;delete a.ends;var l=a.layoutOptions;delete a.layoutOptions;var u=_.applyLayoutOptions_(l,n,s),d=new c.default(null);d.setFlatCoordinates(u,n,s),Object(o.b)(d,!1,r);var f=new i.default(d);return f.setProperties(a),f}}function q(e,t){var r=t[0],a=p.default.pushParseAndPop({},C,e,t);if(a){var n={},s=j([],n,e,a),l=_.applyLayoutOptions_(n,s),u=new f.default(s,l);Object(o.b)(u,!1,r);var d=new i.default(u);return d.setProperties(a),d}}function V(e,t,r){e.setAttribute("href",t);var a=r[r.length-1].properties,i=[a.linkText,a.linkType];p.default.pushSerializeAndPop({node:e},O,p.default.OBJECT_PROPERTY_NODE_FACTORY,i,r,R)}function Z(e,t,r){var a=r[r.length-1],i=a.node.namespaceURI,n=a.properties;switch(p.default.setAttributeNS(e,null,"lat",t[1]),p.default.setAttributeNS(e,null,"lon",t[0]),a.geometryLayout){case u.default.XYZM:0!==t[3]&&(n.time=t[3]);case u.default.XYZ:0!==t[2]&&(n.ele=t[2]);break;case u.default.XYM:0!==t[2]&&(n.time=t[2])}var o="rtept"==e.nodeName?k[i]:b[i],s=p.default.makeSequence(n,o);p.default.pushSerializeAndPop({node:e,properties:n},x,p.default.OBJECT_PROPERTY_NODE_FACTORY,s,r,o)}_.applyLayoutOptions_=function(e,t,r){var a=u.default.XY,i=2;if(e.hasZ&&e.hasM?(a=u.default.XYZM,i=4):e.hasZ?(a=u.default.XYZ,i=3):e.hasM&&(a=u.default.XYM,i=3),4!==i){var n,o;for(n=0,o=t.length/4;n<o;n++)t[n*i]=t[4*n],t[n*i+1]=t[4*n+1],e.hasZ&&(t[n*i+2]=t[4*n+2]),e.hasM&&(t[n*i+2]=t[4*n+3]);if(t.length=t.length/4*i,r)for(n=0,o=r.length;n<o;n++)r[n]=r[n]/4*i}return a},_.prototype.handleReadExtensions_=function(e){e||(e=[]);for(var t=0,r=e.length;t<r;++t){var a=e[t];if(this.readExtensions_){var i=a.get("extensionsNode_")||null;this.readExtensions_(a,i)}a.set("extensionsNode_",void 0)}},_.prototype.readFeature,_.prototype.readFeatureFromNode=function(e,t){if(!Object(n.includes)(g,e.namespaceURI))return null;var r=m[e.localName];if(!r)return null;var a=r(e,[this.getReadOptions(e,t)]);return a?(this.handleReadExtensions_([a]),a):null},_.prototype.readFeatures,_.prototype.readFeaturesFromNode=function(e,t){if(!Object(n.includes)(g,e.namespaceURI))return[];if("gpx"==e.localName){var r=p.default.pushParseAndPop([],S,e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},_.prototype.readProjection,_.prototype.writeFeatures,_.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var r=p.default.createElementNS("http://www.topografix.com/GPX/1/1","gpx"),a="http://www.w3.org/2001/XMLSchema-instance";return p.default.setAttributeNS(r,"http://www.w3.org/2000/xmlns/","xmlns:xsi",a),p.default.setAttributeNS(r,a,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),p.default.pushSerializeAndPop({node:r},U,G,e,[t]),r},t.default=_},172:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(86)),i=o(r(42)),n=o(r(75));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){var r=void 0!==t?t:{};if(a.default.call(this,r),this.continueMsg,void 0!==r.continueMsg)this.continueMsg=r.continueMsg;else{this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to continue drawing the polygon.";var i=document.createElement("br");i.textContent="Double-click or click starting point to finish.",this.continueMsg.appendChild(i)}this.format=e};ol.inherits(s,a.default),s.prototype.createDrawInteraction=function(e,t){return new n.default({type:"Polygon",source:t,style:e})},s.prototype.handleMeasure=function(e){var t=goog.asserts.assertInstanceof(this.sketchFeature.getGeometry(),i.default),r=this.getMap().getView().getProjection();goog.asserts.assert(r);var n=a.default.getFormattedArea(t,r,this.precision,this.format),o=null;t.getCoordinates()[0].length>3&&(o=t.getInteriorPoint().getCoordinates()),e(n,o)},t.default=s},173:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(86)),i=o(r(30)),n=o(r(75));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){var r=void 0!==t?t:{};if(a.default.call(this,r),this.continueMsg,void 0!==r.continueMsg)this.continueMsg=r.continueMsg;else{this.continueMsg=document.createElement("span"),this.continueMsg.textContent="Click to continue drawing the line.";var i=document.createElement("br");i.textContent="Double-click or click last point to finish.",this.continueMsg.appendChild(i)}this.format=e};ol.inherits(s,a.default),s.prototype.createDrawInteraction=function(e,t){return new n.default({type:"LineString",source:t,style:e})},s.prototype.handleMeasure=function(e){var t=goog.asserts.assertInstanceof(this.sketchFeature.getGeometry(),i.default),r=this.getMap().getView().getProjection();goog.asserts.assert(r),e(a.default.getFormattedLength(t,r,this.precision,this.format),t.getLastCoordinate())},t.default=s},177:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(r(1)),i=l(r(254)),n=(l(r(110)),l(r(119))),o=l(r(167)),s=l(r(40));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,r,a,i){var n=this;this.active,void 0===this.active&&(this.active=!1),this.features,this.map,this.showMeasure,this.gettextCatalog_=r,r.getString("Point"),r.getString("LineString"),r.getString("Polygon"),r.getString("Circle"),r.getString("Rectangle"),r.getString("Text"),this.featureHelper_=a,this.ngeoFeatures_=i,this.interactions_=[],this.drawPoint,this.measureLength,this.measureArea,this.measureAzimut,this.drawRectangle,this.drawText,e.$watch(function(){return n.active},function(e){!1===e&&n.interactions_.forEach(function(e){e.setActive(!1)},n)})};u.$inject=["$scope","$sce","gettextCatalog","ngeoFeatureHelper","ngeoFeatures"],u.prototype.registerInteraction=function(e){this.interactions_.push(e),e.setActive(!1),n.default.interaction(e),this.map.addInteraction(e)},u.prototype.handleActiveChange=function(e){this.active=this.interactions_.some(function(e){return e.getActive()},this)},u.prototype.handleDrawEnd=function(e,t){var r=void 0;r=t.feature?t.feature:t.detail.feature,goog.asserts.assert(r);var i=r.get("azimut"),n=this.features||this.ngeoFeatures_,o=new s.default(r.getGeometry()),l=a.default.FeatureProperties;switch(e){case a.default.GeometryType.CIRCLE:o.set(l.IS_CIRCLE,!0),void 0!==i&&o.set(l.AZIMUT,i);break;case a.default.GeometryType.TEXT:o.set(l.IS_TEXT,!0);break;case a.default.GeometryType.RECTANGLE:o.set(l.IS_RECTANGLE,!0)}var u=this.gettextCatalog_.getString(e);o.set(l.NAME,u+" "+(n.getLength()+1));var d=e!==a.default.GeometryType.TEXT?"#DB4436":"#000000";o.set(l.COLOR,d),o.set(l.ANGLE,0),o.set(l.OPACITY,.2),o.set(l.SHOW_LABEL,!1),o.set(l.SHOW_MEASURE,!!this.showMeasure),o.set(l.SIZE,10),o.set(l.STROKE,2),this.featureHelper_.setStyle(o),n.push(o)},(u.module=angular.module("ngeoDrawfeatureController",[i.default.name,o.default.module.name])).controller("ngeoDrawfeatureController",u),a.default.module.requires.push(u.module.name),t.default=u},21:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(0)),i=n(r(43));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.default.call(this,e),this.detail=t};a.default.inherits(o,i.default),t.default=o},23:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(11),i=r(0),n=r(10),o=r(4),s=r(5),l=r(14),u=r(6),d=r(28),c=r(60),f=r(41),h=r(12),p=r(61),_=r(15),g=r(22),m=function(e){var t=e||{},r=t.params||{},a=!("TRANSPARENT"in r)||r.TRANSPARENT;f.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!a,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=r,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(o.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(i.inherits)(m,f.a),m.prototype.getGetFeatureInfoUrl=function(e,t,r,i){var n=Object(u.get)(r),l=this.getProjection(),f=this.getTileGrid();f||(f=this.getTileGridForProjection(n));var h=f.getTileCoordForCoordAndResolution(e,t);if(!(f.getResolutions().length<=h[0])){var p=f.getResolution(h[0]),_=f.getTileCoordExtent(h,this.tmpExtent_),g=c.default.toSize(f.getTileSize(h[0]),this.tmpSize),m=this.gutter_;0!==m&&(g=c.default.buffer(g,m,this.tmpSize),_=Object(o.buffer)(_,p*m,_)),l&&l!==n&&(p=d.a.calculateSourceResolution(l,n,e,p),_=Object(u.transformExtent)(_,n,l),e=Object(u.transform)(e,n,l));var S={SERVICE:"WMS",VERSION:a.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};s.default.assign(S,this.params_,i);var y=Math.floor((e[0]-_[0])/p),v=Math.floor((_[3]-e[1])/p);return S[this.v13_?"I":"X"]=y,S[this.v13_?"J":"Y"]=v,this.getRequestUrl_(h,g,_,1,l||n,S)}},m.prototype.getGutterInternal=function(){return this.gutter_},m.prototype.getParams=function(){return this.params_},m.prototype.getRequestUrl_=function(e,t,r,a,i,o){var s=this.urls;if(s){if(o.WIDTH=t[0],o.HEIGHT=t[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=a)switch(this.serverType_){case h.a.GEOSERVER:var u=90*a+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+u:o.FORMAT_OPTIONS="dpi:"+u;break;case h.a.MAPSERVER:o.MAP_RESOLUTION=90*a;break;case h.a.CARMENTA_SERVER:case h.a.QGIS:o.DPI=90*a;break;default:Object(n.a)(!1,52)}var d,c,f=i.getAxisOrientation(),_=r;if(this.v13_&&"ne"==f.substr(0,2))d=r[0],_[0]=r[1],_[1]=d,d=r[2],_[2]=r[3],_[3]=d;if(o.BBOX=_.join(","),1==s.length)c=s[0];else c=s[Object(l.modulo)(p.a.hash(e),s.length)];return g.default.appendParams(c,o)}},m.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},m.prototype.getKeyForParams_=function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")},m.prototype.fixedTileUrlFunction=function(e,t,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=e[0])){1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);var n=i.getResolution(e[0]),l=i.getTileCoordExtent(e,this.tmpExtent_),u=c.default.toSize(i.getTileSize(e[0]),this.tmpSize),d=this.gutter_;0!==d&&(u=c.default.buffer(u,d,this.tmpSize),l=Object(o.buffer)(l,n*d,l)),1!=t&&(u=c.default.scale(u,t,this.tmpSize));var f={SERVICE:"WMS",VERSION:a.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return s.default.assign(f,this.params_),this.getRequestUrl_(e,u,l,t,r,f)}},m.prototype.updateParams=function(e){s.default.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},m.prototype.updateV13_=function(){var e=this.params_.VERSION||a.a;this.v13_=_.default.compareVersions(e,"1.3")>=0},t.default=m},25:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=r(1);(a=n)&&a.__esModule;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inRange_=!1!==t.inRange,this.visible_=!0===t.visible,this.attributes=t.attributes||null,this.id_=t.id,this.identifierAttribute_=t.identifierAttribute,this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.name_=t.name}return i(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e}},{key:"inRange",get:function(){return this.inRange_},set:function(e){this.inRange_=e}},{key:"visible",get:function(){return this.visible_},set:function(e){this.visible_=e}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),e}();t.default=o},254:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(1)),i=n(r(47));function n(e){return e&&e.__esModule?e:{default:e}}var o=angular.module("ngeoFeatures",[]);a.default.module.requires.push(o.name),o.value("ngeoFeatures",new i.default),t.default=o},255:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(1)),i=o(r(2)),n=o(r(75));function o(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("ngeoDrawpoint",[]);a.default.module.requires.push(s.name),s.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,t,r,o){var s=new n.default({type:"Point"});o.registerInteraction(s),o.drawPoint=s,i.default.listen(s,"drawend",o.handleDrawEnd.bind(o,a.default.GeometryType.POINT),o),i.default.listen(s,"change:active",o.handleActiveChange,o)}}},s.directive("ngeoDrawpoint",s.directive_),t.default=s},256:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(1)),i=s(r(2)),n=s(r(75)),o=s(r(42));function s(e){return e&&e.__esModule?e:{default:e}}var l=angular.module("ngeoDrawrectangle",[]);a.default.module.requires.push(l.name),l.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,t,r,s){var l=new n.default({type:"LineString",geometryFunction:function(e,t){t||(t=new o.default(null));var r=e[0],a=e[1];return t.setCoordinates([[r,[r[0],a[1]],a,[a[0],r[1]],r]]),t},maxPoints:2});s.registerInteraction(l),s.drawRectangle=l,i.default.listen(l,"drawend",s.handleDrawEnd.bind(s,a.default.GeometryType.RECTANGLE),s),i.default.listen(l,"change:active",s.handleActiveChange,s)}}},l.directive("ngeoDrawrectangle",l.directive_),t.default=l},257:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(1)),i=o(r(2)),n=o(r(75));function o(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("ngeoDrawtext",[]);a.default.module.requires.push(s.name),s.directive_=function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(e,t,r,o){var s=new n.default({type:"Point"});o.registerInteraction(s),o.drawText=s,i.default.listen(s,"drawend",o.handleDrawEnd.bind(o,a.default.GeometryType.TEXT),o),i.default.listen(s,"change:active",o.handleActiveChange,o)}}},s.directive("ngeoDrawtext",s.directive_),t.default=s},26:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(1)),i=n(r(47));function n(e){return e&&e.__esModule?e:{default:e}}var o={};a.default.module.value("ngeoDataSources",new i.default),t.default=o},29:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=c(r(1)),i=c(r(0)),n=c(r(20)),o=c(r(5)),s=c(r(18)),l=c(r(17)),u=c(r(3)),d=c(r(36));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new s.default({useSpatialIndex:!1}),this.layer_=new n.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};f.prototype.addFeature=function(e,t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length);var r=i.default.getUid(e).toString();this.featureUidToGroupIndex_[r]=t,this.groups_[t].features[r]=e,this.source_.addFeature(e)},f.prototype.removeFeature=function(e,t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length);var r=i.default.getUid(e).toString();delete this.featureUidToGroupIndex_[r],delete this.groups_[t].features[r],this.source_.removeFeature(e)},f.prototype.clear=function(e){u.default.assert(e>=0),u.default.assert(e<this.groups_.length);var t=this.groups_[e];for(var r in t.features)this.removeFeature(t.features[r],e);u.default.assert(o.default.isEmpty(t.features))},f.prototype.getLayer=function(){return this.layer_},f.prototype.getFeatureOverlay=function(){var e=this.groups_.length;return this.groups_.push({styleFunction:l.default.defaultFunction,features:{}}),new d.default(this,e)},f.prototype.init=function(e){this.layer_.setMap(e)},f.prototype.setStyle=function(e,t){u.default.assert(t>=0),u.default.assert(t<this.groups_.length),this.groups_[t].styleFunction=null===e?l.default.defaultFunction:l.default.createFunction(e)},f.prototype.styleFunction_=function(e,t){var r=i.default.getUid(e).toString();u.default.assert(r in this.featureUidToGroupIndex_);var a=this.featureUidToGroupIndex_[r];return this.groups_[a].styleFunction(e,t)},(f.module=angular.module("ngeoFeatureOverlayMgr",[d.default.module.name])).service("ngeoFeatureOverlayMgr",f),a.default.module.requires.push(f.module.name),t.default=f},3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={assert:function(e,t,r){},assertNumber:function(e,t,r){},assertString:function(e,t,r){},assertFunction:function(e,t,r){},assertObject:function(e,t,r){},assertArray:function(e,t,r){},assertBoolean:function(e,t,r){},assertElement:function(e,t,r){},assertInstanceof:function(e,t,r,a){},assertObjectPrototypeIsIntact:function(){}};t.default=a},301:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(!function(){var e=new Error('Cannot find module "examples/drawfeature.css"');throw e.code="MODULE_NOT_FOUND",e}()),r(59);var a=h(r(302)),i=h(r(32)),n=h(r(106)),o=h(r(130)),s=h(r(7)),l=h(r(31)),u=h(r(62)),d=h(r(20)),c=h(r(48)),f=h(r(18));function h(e){return e&&e.__esModule?e:{default:e}}app.module=angular.module("app",[ngeo.module.name,a.default.name,i.default.name,o.default.module.name]),app.MainController=function(e,t,r){this.scope_=e;var a=new d.default({source:new f.default({wrapX:!1,features:t})});this.map=new s.default({layers:[new u.default({source:new c.default}),a],view:new l.default({center:[0,0],zoom:3})}),this.drawActive=!1;var i=new n.default(this,"drawActive");r.registerTool("mapTools",i,!1),this.dummyActive=!0;var o=new n.default(this,"dummyActive");r.registerTool("mapTools",o,!0)},app.module.controller("MainController",app.MainController),t.default={}},302:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(r(1)),i=d(r(303)),n=d(r(177)),o=d(r(254)),s=d(r(255)),l=d(r(256)),u=d(r(257));function d(e){return e&&e.__esModule?e:{default:e}}var c=angular.module("ngeoDrawModule",[a.default.module.name,n.default.module.name,i.default.name,o.default.name,s.default.name,l.default.name,u.default.name]);t.default=c},303:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(r(177)),i=d(r(255)),n=d(r(256)),o=d(r(257)),s=d(r(304)),l=d(r(305)),u=d(r(306));function d(e){return e&&e.__esModule?e:{default:e}}var c=angular.module("ngeoDrawfeature",[a.default.module.name,i.default.name,n.default.name,o.default.name,s.default.name,l.default.name,u.default.name]);ngeo.module.requires.push(c.name),c.directive_=function(){return{controller:"ngeoDrawfeatureController as dfCtrl",scope:!0,bindToController:{active:"=ngeoDrawfeatureActive",features:"=?ngeoDrawfeatureFeatures",map:"=ngeoDrawfeatureMap",showMeasure:"=?ngeoDrawfeatureShowmeasure"}}},c.directive("ngeoDrawfeature",c.directive_),t.default=c},304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(r(1)),i=l(r(2)),n=l(r(17)),o=l(r(172)),s=l(r(177));function l(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoMeasurearea",[s.default.module.name]);a.default.module.requires.push(u.name),u.directive_=function(e,t,r,s){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(l,u,d,c){var f=t.getString("Click to start drawing polygon"),h=t.getString("Click to continue drawing<br/>Double-click or click starting point to finish"),p=new o.default(r("ngeoUnitPrefix"),{style:new n.default,startMsg:e("<div translate>"+f+"</div>")(l)[0],continueMsg:e("<div translate>"+h+"</div>")(l)[0],precision:s.has("ngeoMeasurePrecision")?s.get("ngeoMeasurePrecision"):void 0});c.registerInteraction(p),c.measureArea=p,i.default.listen(p,"measureend",c.handleDrawEnd.bind(c,a.default.GeometryType.POLYGON),c),i.default.listen(p,"change:active",c.handleActiveChange,c)}}},u.directive("ngeoMeasurearea",u.directive_),t.default=u},305:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(r(1)),i=(d(r(101)),d(r(2))),n=d(r(40)),o=d(r(42)),s=d(r(17)),l=d(r(124)),u=d(r(177));function d(e){return e&&e.__esModule?e:{default:e}}var c=angular.module("ngeoMeasureazimut",[u.default.module.name]);a.default.module.requires.push(c.name),c.directive_=function(e,t,r,u){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(d,c,f,h){var p=t.getString("Click to start drawing circle"),_=t.getString("Click to finish"),g=new l.default(r("ngeoUnitPrefix"),r("number"),{style:new s.default,startMsg:e("<div translate>"+p+"</div>")(d)[0],continueMsg:e("<div translate>"+_+"</div>")(d)[0],precision:u.has("ngeoMeasurePrecision")?u.get("ngeoMeasurePrecision"):void 0,decimals:u.has("ngeoMeasureDecimals")?u.get("ngeoMeasureDecimals"):void 0});h.registerInteraction(g),h.measureAzimut=g,i.default.listen(g,"measureend",function(e){var t=e.detail.feature.getGeometry(),r=t.getGeometries()[1],i=o.default.fromCircle(r,64);e.feature=new n.default(i);var s=l.default.getAzimut(t.getGeometries()[0]);e.detail.feature.set("azimut",s),h.handleDrawEnd(a.default.GeometryType.CIRCLE,e)},h),i.default.listen(g,"change:active",h.handleActiveChange,h)}}},c.directive("ngeoMeasureazimut",c.directive_),t.default=c},306:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(r(1)),i=(l(r(101)),l(r(2))),n=l(r(17)),o=l(r(173)),s=l(r(177));function l(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoMeasurelength",[s.default.module.name]);a.default.module.requires.push(u.name),u.directive_=function(e,t,r,s){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(l,u,d,c){var f=t.getString("Click to start drawing line"),h=t.getString("Click to continue drawing<br/>Double-click or click last point to finish"),p=new o.default(r("ngeoUnitPrefix"),{style:new n.default,startMsg:e("<div translate>"+f+"</div>")(l)[0],continueMsg:e("<div translate>"+h+"</div>")(l)[0],precision:s.has("ngeoMeasurePrecision")?s.get("ngeoMeasurePrecision"):void 0});c.registerInteraction(p),c.measureLength=p,i.default.listen(p,"measureend",c.handleDrawEnd.bind(c,a.default.GeometryType.LINE_STRING),c),i.default.listen(p,"change:active",c.handleActiveChange,c)}}},u.directive("ngeoMeasurelength",u.directive_),t.default=u},32:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(r(1)),i=d(r(33)),n=d(r(34)),o=d(r(29)),s=d(r(37)),l=d(r(38)),u=d(r(39));function d(e){return e&&e.__esModule?e:{default:e}}var c=angular.module("ngeoMapModule",[a.default.module.name,i.default.module.name,n.default.name,o.default.module.name,s.default.name,l.default.name,u.default.name]);t.default=c},33:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=h(r(3)),i=h(r(1)),n=h(r(21)),o=h(r(0)),s=h(r(19)),l=h(r(52)),u=h(r(50)),d=h(r(16)),c=h(r(23)),f=h(r(58));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){s.default.call(this),this.mapUids_={}};o.default.inherits(p,s.default),p.prototype.get=function(e){return o.default.getUid(e).toString()in this.mapUids_?e.getLayers().item(0):null},p.prototype.set=function(e,t){var r=o.default.getUid(e).toString(),i=this.get(e);null!==i?(a.default.assert(r in this.mapUids_),null!==t?e.getLayers().setAt(0,t):(e.getLayers().removeAt(0),delete this.mapUids_[r])):null!==t&&(e.getLayers().insertAt(0,t),this.mapUids_[r]=!0);var s=new n.default("change",{current:t,previous:i});return this.dispatchEvent(s),i},p.prototype.updateDimensions=function(e,t){var r=this.get(e);if(r){var i=[r];r instanceof l.default&&(i=r.getLayers().getArray()),i.forEach(function(e){if(a.default.assertInstanceof(e,u.default),e){var r=!1,i={};for(var n in e.get("dimensions")){var o=t[n];void 0!==o&&(i[n]=o,r=!0)}if(r){var s=e.getSource();s instanceof f.default?(s.updateDimensions(i),s.refresh()):(s instanceof c.default||s instanceof d.default)&&(s.updateParams(i),s.refresh())}}})}},(p.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",p),i.default.module.requires.push(p.module.name),t.default=p},34:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(3)),i=s(r(1)),n=(s(r(35)),s(r(2))),o=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}var l=angular.module("ngeoMap",[]);i.default.module.requires.push(l.name),l.directive_=function(e,t){return{restrict:"A",link:function(r,i,s){var l=s.ngeoMap,u=r.$eval(l);a.default.assertInstanceof(u,o.default),u.setTarget(i[0]),t.map=u;var d=s.ngeoMapManageResize;if(r.$eval(d)){var c=s.ngeoMapResizeTransition,f=r.$eval(c);n.default.listen(e,"resize",function(){if(f){var t=Date.now(),r=!0;!function a(){u.updateSize(),u.renderSync(),r&&e.requestAnimationFrame(a),Date.now()-t>f&&(r=!1)}()}else u.updateSize()})}}}},l.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],l.directive("ngeoMap",l.directive_),t.default=l},35:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=d(r(1)),n=d(r(25)),o=(d(r(26)),d(r(2))),s=d(r(19)),l=d(r(31)),u=d(r(3));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ngeoDataSources_=t,this.map_=null,this.listenerKeys_=[],o.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return e.$inject=["ngeoDataSources"],a(e,[{key:"bindMap_",value:function(e){var t=e.getView();this.listenerKeys_.push(o.default.listen(t,"change:resolution",this.handleViewResolutionChange_,this));var r=t.getResolution();u.default.assertNumber(r),this.syncDataSourcesToResolution_(r)}},{key:"unbindMap_",value:function(e){s.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(e){var t=e.target;u.default.assertInstanceof(t,l.default);var r=t.getResolution();u.default.assertNumber(r),this.syncDataSourcesToResolution_(r)}},{key:"syncDataSourcesToResolution_",value:function(e){var t=this;this.ngeoDataSources_.forEach(function(r){t.syncDataSourceToResolution_(r,e)})}},{key:"syncDataSourceToResolution_",value:function(e,t){if(e.supportsDynamicInRange){var r=e.maxResolution,a=e.minResolution,i=(null===a||void 0===a||t>=a)&&(null===r||void 0===r||t<=r);e.inRange=i}}},{key:"handleDataSourcesAdd_",value:function(e){var t=u.default.assertInstanceof(e.element,n.default);if(this.map_){var r=this.map_.getView().getResolution();u.default.assertNumber(r),this.syncDataSourceToResolution_(t,r)}}},{key:"map",set:function(e){this.map_&&this.unbindMap_(this.map_),this.map_=e,e&&this.bindMap_(e)}}]),e}();i.default.module.service("ngeoSyncDataSourcesMap",c),t.default=c},36:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(r(1)),i=(n(r(0)),n(r(2)));function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){this.manager_=e,this.features_=null,this.index_=t};o.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)},o.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)},o.prototype.clear=function(){this.manager_.clear(this.index_)},o.prototype.setFeatures=function(e){null!==this.features_&&(this.features_.clear(),i.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),i.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==e&&(e.forEach(function(e){this.addFeature(e)},this),i.default.listen(e,"add",this.handleFeatureAdd_,this),i.default.listen(e,"remove",this.handleFeatureRemove_,this)),this.features_=e},o.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)},o.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)},o.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)},o.module=angular.module("ngeoFeatureOverlay",[]),a.default.module.requires.push(o.module.name),t.default=o},37:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=r(1),n=(a=i)&&a.__esModule?a:{default:a};var o=angular.module("ngeoRecenter",[]);n.default.module.requires.push(o.name),o.directive_=function(){return{restrict:"A",link:function(e,t,r){var a=r.ngeoRecenterMap,i=e.$eval(a);function n(t){var r=t.attr("ngeo-extent");if(void 0!==r){var a=i.getSize();i.getView().fit(e.$eval(r),{size:a})}var n=t.attr("ngeo-zoom");void 0!==n&&i.getView().setZoom(e.$eval(n))}t.on("click","*",function(e){n(angular.element($(this)))}),t.on("change",function(e){var t=e.target.options[e.target.selectedIndex];n(angular.element(t))})}}},o.directive("ngeoRecenter",o.directive_),t.default=o},38:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(r(3)),i=o(r(1)),n=o(r(7));function o(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("ngeoResizemap",[]);i.default.module.requires.push(s.name),s.directive_=function(e){return{restrict:"A",link:function(t,r,i){var o=i.ngeoResizemap,s=t.$eval(o);a.default.assertInstanceof(s,n.default);var l=i.ngeoResizemapState;a.default.assert(void 0!==l);var u=void 0,d=void 0,c=function t(){s.updateSize(),s.renderSync(),Date.now()-u<1e3&&(d=e.requestAnimationFrame(t))};r.on("transitionend",function(){s.updateSize(),s.renderSync()}),t.$watch(l,function(t,r){t!=r&&(u=Date.now(),e.cancelAnimationFrame(d),d=e.requestAnimationFrame(c))})}}},s.directive("ngeoResizemap",s.directive_),t.default=s},39:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(r(1)),i=s(r(8)),n=s(r(7)),o=s(r(2));function s(e){return e&&e.__esModule?e:{default:e}}var l=angular.module("ngeoScaleselector",[]);a.default.module.requires.push(l.name),l.value("ngeoScaleselectorTemplateUrl",function(e,t){var r=t.ngeoScaleselectorTemplateurl;return void 0!==r?r:a.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),l.directive_=function(e){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:e}},l.directive("ngeoScaleselector",l.directive_),l.ScaleselectorController_=function(e,t,r){var a=this,s=r.ngeoScaleselector;this.scales=e.$eval(s),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,e.$watch(function(){return Object.keys(a.scales).length},function(e){a.zoomLevels=Object.keys(a.scales).map(Number),a.zoomLevels.sort(i.default.numberSafeCompareFunction)});var u=r.ngeoScaleselectorMap;this.map_=e.$eval(u),goog.asserts.assertInstanceof(this.map_,n.default);var d=r.ngeoScaleselectorOptions,c=e.$eval(d);if(this.options=l.ScaleselectorController_.getOptions_(c),this.$scope_=e,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var f=this.map_.getView().getZoom();void 0!==f&&(this.currentScale=this.getScale(f))}o.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),e.scaleselectorCtrl=this},l.ScaleselectorController_.getOptions_=function(e){var t=!1;return void 0!==e&&(t=1==e.dropup),{dropup:t}},l.ScaleselectorController_.prototype.getScale=function(e){return this.scales[e]},l.ScaleselectorController_.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)},l.ScaleselectorController_.prototype.handleResolutionChange_=function(e){var t=this,r=this.map_.getView(),a=this.scales[r.getZoom()];void 0!==a&&this.$scope_.$applyAsync(function(){t.currentScale=a})},l.ScaleselectorController_.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},l.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&o.default.unlistenByKey(this.resolutionChangeKey_);var e=this.map_.getView();this.resolutionChangeKey_=o.default.listen(e,"change:resolution",this.handleResolutionChange_,this)},l.controller("NgeoScaleselectorController",l.ScaleselectorController_),t.default=l},45:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(8),n=r(4),o=r(24),s=r(13),l=r(27),u=r(44),d=r(46),c=r(54),f=r(14),h=function(e,t){u.a.call(this),this.setCoordinates(e,t)};Object(a.inherits)(h,u.a),h.prototype.appendPoint=function(e){this.flatCoordinates?Object(i.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},h.prototype.clone=function(){var e=new h(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},h.prototype.closestPointXY=function(e,t,r,a){if(a<Object(n.closestSquaredDistanceXY)(this.getExtent(),e,t))return a;var i,o,s,l=this.flatCoordinates,u=this.stride;for(i=0,o=l.length;i<o;i+=u){var d=Object(f.squaredDistance)(e,t,l[i],l[i+1]);if(d<a){for(a=d,s=0;s<u;++s)r[s]=l[i+s];r.length=u}}return a},h.prototype.getCoordinates=function(){return c.a.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},h.prototype.getPoint=function(e){var t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;if(e<0||t<=e)return null;var r=new l.default(null);return r.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride)),r},h.prototype.getPoints=function(){var e,t,r=this.flatCoordinates,a=this.layout,i=this.stride,n=[];for(e=0,t=r.length;e<t;e+=i){var o=new l.default(null);o.setFlatCoordinates(a,r.slice(e,e+i)),n.push(o)}return n},h.prototype.getType=function(){return s.default.MULTI_POINT},h.prototype.intersectsExtent=function(e){var t,r,a,i,o=this.flatCoordinates,s=this.stride;for(t=0,r=o.length;t<r;t+=s)if(a=o[t],i=o[t+1],Object(n.containsXY)(e,a,i))return!0;return!1},h.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=d.a.coordinates(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(o.default.XY,null)},h.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},t.default=h},48:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(49),n=function(e){var t,r=e||{};t=void 0!==r.attributions?r.attributions:[n.ATTRIBUTION];var a=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";i.a.call(this,{attributions:t,cacheSize:r.cacheSize,crossOrigin:a,opaque:void 0===r.opaque||r.opaque,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:o,wrapX:r.wrapX})};Object(a.inherits)(n,i.a),n.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t.default=n},49:function(e,t,r){"use strict";var a=r(0),i=r(41),n=r(71),o=function(e){var t=e||{},r=void 0!==t.projection?t.projection:"EPSG:3857",a=void 0!==t.tileGrid?t.tileGrid:n.a.createXYZ({extent:n.a.extentFromProjection(r),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});i.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:r,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:a,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(a.inherits)(o,i.a),t.a=o},51:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(8),n=r(4),o=r(24),s=r(13),l=r(30),u=r(44),d=r(67),c=r(46),f=r(54),h=r(100),p=r(70),_=r(64),g=function(e,t){u.a.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(e,t)};Object(a.inherits)(g,u.a),g.prototype.appendLineString=function(e){this.flatCoordinates?Object(i.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},g.prototype.clone=function(){var e=new g(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),e},g.prototype.closestPointXY=function(e,t,r,a){return a<Object(n.closestSquaredDistanceXY)(this.getExtent(),e,t)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(d.a.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),d.a.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,r,a))},g.prototype.getCoordinateAtM=function(e,t,r){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM||0===this.flatCoordinates.length)return null;var a=void 0!==t&&t,i=void 0!==r&&r;return h.a.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,a,i)},g.prototype.getCoordinates=function(){return f.a.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},g.prototype.getEnds=function(){return this.ends_},g.prototype.getLineString=function(e){if(e<0||this.ends_.length<=e)return null;var t=new l.default(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e])),t},g.prototype.getLineStrings=function(){var e,t,r=this.flatCoordinates,a=this.ends_,i=this.layout,n=[],o=0;for(e=0,t=a.length;e<t;++e){var s=a[e],u=new l.default(null);u.setFlatCoordinates(i,r.slice(o,s)),n.push(u),o=s}return n},g.prototype.getFlatMidpoints=function(){var e,t,r=[],a=this.flatCoordinates,n=0,o=this.ends_,s=this.stride;for(e=0,t=o.length;e<t;++e){var l=o[e],u=h.a.lineString(a,n,l,s,.5);Object(i.extend)(r,u),n=l}return r},g.prototype.getSimplifiedGeometryInternal=function(e){var t=[],r=[];t.length=_.a.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,r);var a=new g(null);return a.setFlatCoordinates(o.default.XY,t,r),a},g.prototype.getType=function(){return s.default.MULTI_LINE_STRING},g.prototype.intersectsExtent=function(e){return p.a.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,e)},g.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=c.a.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()}else this.setFlatCoordinates(o.default.XY,null,this.ends_)},g.prototype.setFlatCoordinates=function(e,t,r){this.setFlatCoordinatesInternal(e,t),this.ends_=r,this.changed()},g.prototype.setLineStrings=function(e){var t,r,a=this.getLayout(),n=[],o=[];for(t=0,r=e.length;t<r;++t){var s=e[t];0===t&&(a=s.getLayout()),Object(i.extend)(n,s.getFlatCoordinates()),o.push(n.length)}this.setFlatCoordinates(a,n,o)},t.default=g},53:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(8),n=r(4),o=r(24),s=r(13),l=r(45),u=r(42),d=r(44),c=r(95),f=r(104),h=r(67),p=r(89),_=r(46),g=r(54),m=r(99),S=r(70),y=r(96),v=r(64),E=function(e,t){d.a.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(e,t)};Object(a.inherits)(E,d.a),E.prototype.appendPolygon=function(e){var t;if(this.flatCoordinates){var r,a,n=this.flatCoordinates.length;for(Object(i.extend)(this.flatCoordinates,e.getFlatCoordinates()),r=0,a=(t=e.getEnds().slice()).length;r<a;++r)t[r]+=n}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()},E.prototype.clone=function(){for(var e=new E(null),t=this.endss_.length,r=new Array(t),a=0;a<t;++a)r[a]=this.endss_[a].slice();return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),r),e},E.prototype.closestPointXY=function(e,t,r,a){return a<Object(n.closestSquaredDistanceXY)(this.getExtent(),e,t)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(h.a.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),h.a.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,r,a))},E.prototype.containsXY=function(e,t){return p.a.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)},E.prototype.getArea=function(){return c.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},E.prototype.getCoordinates=function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),y.a.orientLinearRingss(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,g.a.coordinatesss(t,0,this.endss_,this.stride)},E.prototype.getEndss=function(){return this.endss_},E.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=f.a.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=m.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},E.prototype.getInteriorPoints=function(){var e=new l.default(null);return e.setFlatCoordinates(o.default.XYM,this.getFlatInteriorPoints().slice()),e},E.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;y.a.linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=y.a.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},E.prototype.getSimplifiedGeometryInternal=function(e){var t=[],r=[];t.length=v.a.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,r);var a=new E(null);return a.setFlatCoordinates(o.default.XY,t,r),a},E.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;var t;if(0===e)t=0;else{var r=this.endss_[e-1];t=r[r.length-1]}var a,i,n=this.endss_[e].slice(),o=n[n.length-1];if(0!==t)for(a=0,i=n.length;a<i;++a)n[a]-=t;var s=new u.default(null);return s.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t,o),n),s},E.prototype.getPolygons=function(){var e,t,r,a,i=this.layout,n=this.flatCoordinates,o=this.endss_,s=[],l=0;for(e=0,t=o.length;e<t;++e){var d=o[e].slice(),c=d[d.length-1];if(0!==l)for(r=0,a=d.length;r<a;++r)d[r]-=l;var f=new u.default(null);f.setFlatCoordinates(i,n.slice(l,c),d),s.push(f),l=c}return s},E.prototype.getType=function(){return s.default.MULTI_POLYGON},E.prototype.intersectsExtent=function(e){return S.a.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},E.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=_.a.coordinatesss(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var a=r[r.length-1];this.flatCoordinates.length=0===a.length?0:a[a.length-1]}this.changed()}else this.setFlatCoordinates(o.default.XY,null,this.endss_)},E.prototype.setFlatCoordinates=function(e,t,r){this.setFlatCoordinatesInternal(e,t),this.endss_=r,this.changed()},E.prototype.setPolygons=function(e){var t,r,a,n=this.getLayout(),o=[],s=[];for(t=0,r=e.length;t<r;++t){var l=e[t];0===t&&(n=l.getLayout());var u,d,c=o.length;for(u=0,d=(a=l.getEnds()).length;u<d;++u)a[u]+=c;Object(i.extend)(o,l.getFlatCoordinates()),s.push(a)}this.setFlatCoordinates(n,o,s)},t.default=E},72:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(2),n=r(9),o=r(4),s=r(85),l=r(13),u=r(5),d=function(e){s.a.call(this),this.geometries_=e||null,this.listenGeometriesChange_()};Object(a.inherits)(d,s.a),d.cloneGeometries_=function(e){var t,r,a=[];for(t=0,r=e.length;t<r;++t)a.push(e[t].clone());return a},d.prototype.unlistenGeometriesChange_=function(){var e,t;if(this.geometries_)for(e=0,t=this.geometries_.length;e<t;++e)i.default.unlisten(this.geometries_[e],n.a.CHANGE,this.changed,this)},d.prototype.listenGeometriesChange_=function(){var e,t;if(this.geometries_)for(e=0,t=this.geometries_.length;e<t;++e)i.default.listen(this.geometries_[e],n.a.CHANGE,this.changed,this)},d.prototype.clone=function(){var e=new d(null);return e.setGeometries(this.geometries_),e},d.prototype.closestPointXY=function(e,t,r,a){if(a<Object(o.closestSquaredDistanceXY)(this.getExtent(),e,t))return a;var i,n,s=this.geometries_;for(i=0,n=s.length;i<n;++i)a=s[i].closestPointXY(e,t,r,a);return a},d.prototype.containsXY=function(e,t){var r,a,i=this.geometries_;for(r=0,a=i.length;r<a;++r)if(i[r].containsXY(e,t))return!0;return!1},d.prototype.computeExtent=function(e){Object(o.createOrUpdateEmpty)(e);for(var t=this.geometries_,r=0,a=t.length;r<a;++r)Object(o.extend)(e,t[r].getExtent());return e},d.prototype.getGeometries=function(){return d.cloneGeometries_(this.geometries_)},d.prototype.getGeometriesArray=function(){return this.geometries_},d.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()&&(u.default.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];var r,a,i=[],n=this.geometries_,o=!1;for(r=0,a=n.length;r<a;++r){var s=n[r],l=s.getSimplifiedGeometry(e);i.push(l),l!==s&&(o=!0)}if(o){var c=new d(null);return c.setGeometriesArray(i),this.simplifiedGeometryCache[t]=c,c}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},d.prototype.getType=function(){return l.default.GEOMETRY_COLLECTION},d.prototype.intersectsExtent=function(e){var t,r,a=this.geometries_;for(t=0,r=a.length;t<r;++t)if(a[t].intersectsExtent(e))return!0;return!1},d.prototype.isEmpty=function(){return 0===this.geometries_.length},d.prototype.rotate=function(e,t){for(var r=this.geometries_,a=0,i=r.length;a<i;++a)r[a].rotate(e,t);this.changed()},d.prototype.scale=function(e,t,r){var a=r;a||(a=Object(o.getCenter)(this.getExtent()));for(var i=this.geometries_,n=0,s=i.length;n<s;++n)i[n].scale(e,t,a);this.changed()},d.prototype.setGeometries=function(e){this.setGeometriesArray(d.cloneGeometries_(e))},d.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},d.prototype.applyTransform=function(e){var t,r,a=this.geometries_;for(t=0,r=a.length;t<r;++t)a[t].applyTransform(e);this.changed()},d.prototype.translate=function(e,t){var r,a,i=this.geometries_;for(r=0,a=i.length;r<a;++r)i[r].translate(e,t);this.changed()},d.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),s.a.prototype.disposeInternal.call(this)},t.default=d},75:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(40),n=r(87),o=r(76),s=r(84),l=r(2),u=r(43),d=r(83),c=r(4),f=r(66),h=r(80),p=r(13),_=r(30),g=r(51),m=r(45),S=r(53),y=r(27),v=r(42),E="drawstart",A="drawend",P=r(77),T=r(122),C=r(20),R=r(18),O=r(17),N=function(e){P.default.call(this,{handleDownEvent:N.handleDownEvent_,handleEvent:N.handleEvent,handleUpEvent:N.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=N.getMode_(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===N.Mode_.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:f.TRUE;var t=e.geometryFunction;if(!t)if(this.type_===p.default.CIRCLE)t=function(e,t){var r=t||new h.default([NaN,NaN]),a=s.default.squaredDistance(e[0],e[1]);return r.setCenterAndRadius(e[0],Math.sqrt(a)),r};else{var r,a=this.mode_;a===N.Mode_.POINT?r=y.default:a===N.Mode_.LINE_STRING?r=_.default:a===N.Mode_.POLYGON&&(r=v.default),t=function(e,t){var i=t;return i?a===N.Mode_.POLYGON?e[0].length?i.setCoordinates([e[0].concat([e[0][0]])]):i.setCoordinates([]):i.setCoordinates(e):i=new r(e),i}}this.geometryFunction_=t,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new C.default({source:new R.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:N.getDefaultStyleFunction()}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:d.default.noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=d.default.always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:d.default.shiftKeyOnly,l.default.listen(this,o.a.getChangeEventType(T.a.ACTIVE),this.updateState_,this)};Object(a.inherits)(N,P.default),N.getDefaultStyleFunction=function(){var e=O.default.createDefaultEditing();return function(t,r){return e[t.getGeometry().getType()]}},N.prototype.setMap=function(e){P.default.prototype.setMap.call(this,e),this.updateState_()},N.handleEvent=function(e){this.freehand_=this.mode_!==N.Mode_.POINT&&this.freehandCondition_(e);var t=!0;return this.freehand_&&e.type===n.a.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),t=!1):this.freehand_&&e.type===n.a.POINTERDOWN?t=!1:e.type===n.a.POINTERMOVE?t=this.handlePointerMove_(e):e.type===n.a.DBLCLICK&&(t=!1),P.default.handleEvent.call(this,e)&&t},N.handleDownEvent_=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):!!this.condition_(e)&&(this.downPx_=e.pixel,!0)},N.handleUpEvent_=function(e){var t=!0;this.handlePointerMove_(e);var r=this.mode_===N.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e):(this.startDrawing_(e),this.mode_===N.Mode_.POINT&&this.finishDrawing()),t=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!t&&this.stopClick_&&e.stopPropagation(),t},N.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,r=e.pixel,a=t[0]-r[0],i=t[1]-r[1],n=a*a+i*i;this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},N.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var r=!1,a=[this.finishCoordinate_];if(this.mode_===N.Mode_.LINE_STRING?r=this.sketchCoords_.length>this.minPoints_:this.mode_===N.Mode_.POLYGON&&(r=this.sketchCoords_[0].length>this.minPoints_,a=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),r)for(var i=e.map,n=0,o=a.length;n<o;n++){var s=a[n],l=i.getPixelFromCoordinate(s),u=e.pixel,d=u[0]-l[0],c=u[1]-l[1],f=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(d*d+c*c)<=f){this.finishCoordinate_=s;break}}}return t},N.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(t):(this.sketchPoint_=new i.default(new y.default(t)),this.updateSketchFeatures_())},N.prototype.startDrawing_=function(e){var t=e.coordinate;this.finishCoordinate_=t,this.mode_===N.Mode_.POINT?this.sketchCoords_=t.slice():this.mode_===N.Mode_.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[t.slice(),t.slice()],this.mode_===N.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new i.default(new _.default(this.sketchLineCoords_)));var r=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new i.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new N.Event(E,this.sketchFeature_))},N.prototype.modifyDrawing_=function(e){var t,r,a=e.coordinate,n=this.sketchFeature_.getGeometry();(this.mode_===N.Mode_.POINT?r=this.sketchCoords_:this.mode_===N.Mode_.POLYGON?(r=(t=this.sketchCoords_[0])[t.length-1],this.atFinish_(e)&&(a=this.finishCoordinate_.slice())):r=(t=this.sketchCoords_)[t.length-1],r[0]=a[0],r[1]=a[1],this.geometryFunction_(this.sketchCoords_,n),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(a);if(n instanceof v.default&&this.mode_!==N.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new i.default(new _.default(null)));var o=n.getLinearRing(0);this.sketchLine_.getGeometry().setFlatCoordinates(o.getLayout(),o.getFlatCoordinates())}else this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},N.prototype.addToDrawing_=function(e){var t,r,a=e.coordinate,i=this.sketchFeature_.getGeometry();this.mode_===N.Mode_.LINE_STRING?(this.finishCoordinate_=a.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():t=!0),r.push(a.slice()),this.geometryFunction_(r,i)):this.mode_===N.Mode_.POLYGON&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():t=!0),r.push(a.slice()),t&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),t&&this.finishDrawing()},N.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry();this.mode_===N.Mode_.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===N.Mode_.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},N.prototype.finishDrawing=function(){var e=this.abortDrawing_(),t=this.sketchCoords_,r=e.getGeometry();this.mode_===N.Mode_.LINE_STRING?(t.pop(),this.geometryFunction_(t,r)):this.mode_===N.Mode_.POLYGON&&(t[0].pop(),this.geometryFunction_(t,r),t=r.getCoordinates()),this.type_===p.default.MULTI_POINT?e.setGeometry(new m.default([t])):this.type_===p.default.MULTI_LINE_STRING?e.setGeometry(new g.default([t])):this.type_===p.default.MULTI_POLYGON&&e.setGeometry(new S.default([t])),this.dispatchEvent(new N.Event(A,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)},N.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),e},N.prototype.extend=function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new N.Event(E,this.sketchFeature_))},N.prototype.shouldStopEvent=f.FALSE,N.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},N.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing_(),this.overlay_.setMap(t?e:null)},N.createRegularPolygon=function(e,t){return function(r,a){var i=r[0],n=r[1],o=Math.sqrt(s.default.squaredDistance(i,n)),l=a||Object(v.fromCircle)(new h.default(i),e),u=t||Math.atan((n[1]-i[1])/(n[0]-i[0]));return Object(v.makeRegular)(l,i,o,u),l}},N.createBox=function(){return function(e,t){var r=Object(c.boundingExtent)(e),a=t||new v.default(null);return a.setCoordinates([[Object(c.getBottomLeft)(r),Object(c.getBottomRight)(r),Object(c.getTopRight)(r),Object(c.getTopLeft)(r),Object(c.getBottomLeft)(r)]]),a}},N.getMode_=function(e){var t;return e===p.default.POINT||e===p.default.MULTI_POINT?t=N.Mode_.POINT:e===p.default.LINE_STRING||e===p.default.MULTI_LINE_STRING?t=N.Mode_.LINE_STRING:e===p.default.POLYGON||e===p.default.MULTI_POLYGON?t=N.Mode_.POLYGON:e===p.default.CIRCLE&&(t=N.Mode_.CIRCLE),t},N.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},N.Event=function(e,t){u.default.call(this,e),this.feature=t},Object(a.inherits)(N.Event,u.default);t.default=N},79:function(e,t,r){"use strict";var a=r(55),i=r(15),n={readBoolean:function(e){var t=a.default.getAllTextContent(e,!1);return n.readBooleanString(t)},readBooleanString:function(e){var t=/^\s*(true|1)|(false|0)\s*$/.exec(e);return t?void 0!==t[1]||!1:void 0},readDateTime:function(e){var t=a.default.getAllTextContent(e,!1),r=Date.parse(t);return isNaN(r)?void 0:r/1e3},readDecimal:function(e){var t=a.default.getAllTextContent(e,!1);return n.readDecimalString(t)},readDecimalString:function(e){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);return t?parseFloat(t[1]):void 0},readNonNegativeInteger:function(e){var t=a.default.getAllTextContent(e,!1);return n.readNonNegativeIntegerString(t)},readNonNegativeIntegerString:function(e){var t=/^\s*(\d+)\s*$/.exec(e);return t?parseInt(t[1],10):void 0},readString:function(e){return a.default.getAllTextContent(e,!1).trim()},writeBooleanTextNode:function(e,t){n.writeStringTextNode(e,t?"1":"0")},writeCDATASection:function(e,t){e.appendChild(a.default.DOCUMENT.createCDATASection(t))},writeDateTimeTextNode:function(e,t){var r=new Date(1e3*t),n=r.getUTCFullYear()+"-"+i.default.padNumber(r.getUTCMonth()+1,2)+"-"+i.default.padNumber(r.getUTCDate(),2)+"T"+i.default.padNumber(r.getUTCHours(),2)+":"+i.default.padNumber(r.getUTCMinutes(),2)+":"+i.default.padNumber(r.getUTCSeconds(),2)+"Z";e.appendChild(a.default.DOCUMENT.createTextNode(n))},writeDecimalTextNode:function(e,t){var r=t.toPrecision();e.appendChild(a.default.DOCUMENT.createTextNode(r))},writeNonNegativeIntegerTextNode:function(e,t){var r=t.toString();e.appendChild(a.default.DOCUMENT.createTextNode(r))},writeStringTextNode:function(e,t){e.appendChild(a.default.DOCUMENT.createTextNode(t))}};t.a=n},80:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),i=r(4),n=r(24),o=r(13),s=r(44),l=r(46),u=function(e,t,r){s.a.call(this);var a=t||0;this.setCenterAndRadius(e,a,r)};Object(a.inherits)(u,s.a),u.prototype.clone=function(){var e=new u(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},u.prototype.closestPointXY=function(e,t,r,a){var i=this.flatCoordinates,n=e-i[0],o=t-i[1],s=n*n+o*o;if(s<a){var l;if(0===s)for(l=0;l<this.stride;++l)r[l]=i[l];else{var u=this.getRadius()/Math.sqrt(s);for(r[0]=i[0]+u*n,r[1]=i[1]+u*o,l=2;l<this.stride;++l)r[l]=i[l]}return r.length=this.stride,s}return a},u.prototype.containsXY=function(e,t){var r=this.flatCoordinates,a=e-r[0],i=t-r[1];return a*a+i*i<=this.getRadiusSquared_()},u.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},u.prototype.computeExtent=function(e){var t=this.flatCoordinates,r=t[this.stride]-t[0];return Object(i.createOrUpdate)(t[0]-r,t[1]-r,t[0]+r,t[1]+r,e)},u.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},u.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t},u.prototype.getType=function(){return o.default.CIRCLE},u.prototype.intersectsExtent=function(e){var t=this.getExtent();if(Object(i.intersects)(e,t)){var r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||(e[1]<=r[1]&&e[3]>=r[1]||Object(i.forEachCorner)(e,this.intersectsCoordinate,this))}return!1},u.prototype.setCenter=function(e){var t,r=this.stride,a=this.flatCoordinates[r]-this.flatCoordinates[0],i=e.slice();for(i[r]=i[0]+a,t=1;t<r;++t)i[r+t]=e[t];this.setFlatCoordinates(this.layout,i)},u.prototype.setCenterAndRadius=function(e,t,r){if(e){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var a,i,o=this.flatCoordinates,s=l.a.coordinate(o,0,e,this.stride);for(o[s++]=o[0]+t,a=1,i=this.stride;a<i;++a)o[s++]=o[a];o.length=s,this.changed()}else this.setFlatCoordinates(n.default.XY,null)},u.prototype.getCoordinates=function(){},u.prototype.setCoordinates=function(e,t){},u.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},u.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},u.prototype.transform,t.default=u},86:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=g(r(21)),i=g(r(3)),n=g(r(68)),o=(g(r(40)),g(r(107)),g(r(139))),s=g(r(133)),l=g(r(2)),u=g(r(82)),d=g(r(20)),c=g(r(143)),f=g(r(18)),h=g(r(65)),p=g(r(78)),_=g(r(17));function g(e){return e&&e.__esModule?e:{default:e}}ngeo.interaction.MeasureBaseOptions;var m=function e(t){var r=void 0!==t?t:{};u.default.call(this,{handleEvent:e.handleEvent_}),this.helpTooltipElement_=null,this.helpTooltipOverlay_=null,this.measureTooltipElement_=null,this.measureTooltipOverlay_=null,this.measureTooltipOverlayCoord_=null,this.sketchFeature=null,this.continueMsg=null,this.decimals=r.decimals,this.precision=r.precision,this.displayHelpTooltip_=void 0===r.displayHelpTooltip||r.displayHelpTooltip,this.startMsg,void 0!==r.startMsg?this.startMsg=r.startMsg:(this.startMsg=document.createElement("span"),this.startMsg.textContent="Click to start drawing."),this.changeEventKey_=null,this.postcomposeEventKey_=null;var a=void 0!==r.style?r.style:[new _.default({fill:new h.default({color:"rgba(255, 255, 255, 0.2)"})}),new _.default({stroke:new p.default({color:"white",width:5})}),new _.default({stroke:new p.default({color:"#ffcc33",width:3})})];this.vectorLayer_=new d.default({source:new f.default,style:a}),this.drawInteraction_=this.createDrawInteraction(r.sketchStyle,this.vectorLayer_.getSource()),this.shouldHandleDrawInteractionActiveChange_=!0,l.default.listen(this.drawInteraction_,"change:active",this.handleDrawInteractionActiveChange_,this),l.default.listen(this.drawInteraction_,"drawstart",this.onDrawStart_,this),l.default.listen(this.drawInteraction_,"drawend",this.onDrawEnd_,this),l.default.listen(this,"change:active",this.updateState_,this)};ol.inherits(m,u.default),m.SPHERE_WGS84=new s.default(c.default.RADIUS),m.getFormattedArea=function(e,t,r,a){var i=e.clone().transform(t,"EPSG:4326").getLinearRing(0).getCoordinates();return a(Math.abs(m.SPHERE_WGS84.geodesicArea(i)),"m²","square",r)},m.getFormattedCircleArea=function(e,t,r){return r(Math.PI*Math.pow(e.getRadius(),2),"m²","square",t)},m.getFormattedLength=function(e,t,r,a){for(var i=0,n=e.getCoordinates(),o=0,s=n.length-1;o<s;++o){var l=ol.proj.transform(n[o],t,"EPSG:4326"),u=ol.proj.transform(n[o+1],t,"EPSG:4326");i+=m.SPHERE_WGS84.haversineDistance(l,u)}return a(i,"m","unit",r)},m.getFormattedPoint=function(e,t,r,a){return r(e.getCoordinates(),t,a)},m.handleEvent_=function(e){if("pointermove"!=e.type||e.dragging)return!0;var t=this.startMsg;return null!==this.sketchFeature&&(t=this.continueMsg),this.displayHelpTooltip_&&(n.default.removeChildren(this.helpTooltipElement_),this.helpTooltipElement_.appendChild(t),this.helpTooltipOverlay_.setPosition(e.coordinate)),!0},m.prototype.getDrawInteraction=function(){return this.drawInteraction_},m.prototype.createDrawInteraction=function(e,t){},m.prototype.setMap=function(e){u.default.prototype.setMap.call(this,e),this.vectorLayer_.setMap(e);var t=this.drawInteraction_.getMap();null!==t&&t.removeInteraction(this.drawInteraction_),null!==e&&e.addInteraction(this.drawInteraction_)},m.prototype.onDrawStart_=function(e){var t=this;this.sketchFeature=e.feature,this.vectorLayer_.getSource().clear(!0),this.createMeasureTooltip_();var r=this.sketchFeature.getGeometry();i.default.assert(void 0!==r),this.changeEventKey_=l.default.listen(r,"change",function(){t.handleMeasure(function(e,r){null!==r&&(t.measureTooltipElement_.innerHTML=e,t.measureTooltipOverlayCoord_=r)})}),this.postcomposeEventKey_=l.default.listen(this.getMap(),"postcompose",function(){t.measureTooltipOverlay_.setPosition(t.measureTooltipOverlayCoord_)})},m.prototype.onDrawEnd_=function(e){this.measureTooltipElement_.classList.add("ngeo-tooltip-static"),this.measureTooltipOverlay_.setOffset([0,-7]);var t=new a.default("measureend",{feature:this.sketchFeature});this.dispatchEvent(t),this.sketchFeature=null,i.default.assert(null!==this.changeEventKey_),i.default.assert(null!==this.postcomposeEventKey_),l.default.unlistenByKey(this.changeEventKey_),l.default.unlistenByKey(this.postcomposeEventKey_),this.changeEventKey_=null,this.postcomposeEventKey_=null},m.prototype.createHelpTooltip_=function(){this.removeHelpTooltip_(),this.displayHelpTooltip_&&(this.helpTooltipElement_=document.createElement("div"),this.helpTooltipElement_.classList.add("tooltip"),this.helpTooltipOverlay_=new o.default({element:this.helpTooltipElement_,offset:[15,0],positioning:"center-left"}),this.getMap().addOverlay(this.helpTooltipOverlay_))},m.prototype.removeHelpTooltip_=function(){this.displayHelpTooltip_&&(this.getMap().removeOverlay(this.helpTooltipOverlay_),null!==this.helpTooltipElement_&&this.helpTooltipElement_.parentNode.removeChild(this.helpTooltipElement_),this.helpTooltipElement_=null,this.helpTooltipOverlay_=null)},m.prototype.createMeasureTooltip_=function(){this.removeMeasureTooltip_(),this.measureTooltipElement_=document.createElement("div"),this.measureTooltipElement_.classList.add("tooltip"),this.measureTooltipElement_.classList.add("ngeo-tooltip-measure"),this.measureTooltipOverlay_=new o.default({element:this.measureTooltipElement_,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),this.getMap().addOverlay(this.measureTooltipOverlay_)},m.prototype.removeMeasureTooltip_=function(){null!==this.measureTooltipElement_&&(this.measureTooltipElement_.parentNode.removeChild(this.measureTooltipElement_),this.measureTooltipElement_=null,this.measureTooltipOverlay_=null,this.measureTooltipOverlayCoord_=null)},m.prototype.updateState_=function(){var e=this.getActive();this.shouldHandleDrawInteractionActiveChange_=!1,this.drawInteraction_.setActive(e),this.shouldHandleDrawInteractionActiveChange_=!0,this.getMap()&&(e?this.measureTooltipOverlay_||(this.createMeasureTooltip_(),this.createHelpTooltip_()):(this.vectorLayer_.getSource().clear(!0),this.getMap().removeOverlay(this.measureTooltipOverlay_),this.removeMeasureTooltip_(),this.removeHelpTooltip_()))},m.prototype.handleMeasure=function(e){},m.prototype.getTooltipElement=function(){return this.measureTooltipElement_},m.prototype.handleDrawInteractionActiveChange_=function(){this.shouldHandleDrawInteractionActiveChange_&&this.setActive(this.drawInteraction_.getActive())},t.default=m},97:function(e,t,r){"use strict";var a=r(0),i=r(8),n=r(69),o=r(117),s=r(55),l=function(){this.xmlSerializer_=new XMLSerializer,n.a.call(this)};Object(a.inherits)(l,n.a),l.prototype.getType=function(){return o.a.XML},l.prototype.readFeature=function(e,t){if(s.default.isDocument(e))return this.readFeatureFromDocument(e,t);if(s.default.isNode(e))return this.readFeatureFromNode(e,t);if("string"==typeof e){var r=s.default.parse(e);return this.readFeatureFromDocument(r,t)}return null},l.prototype.readFeatureFromDocument=function(e,t){var r=this.readFeaturesFromDocument(e,t);return r.length>0?r[0]:null},l.prototype.readFeatureFromNode=function(e,t){return null},l.prototype.readFeatures=function(e,t){if(s.default.isDocument(e))return this.readFeaturesFromDocument(e,t);if(s.default.isNode(e))return this.readFeaturesFromNode(e,t);if("string"==typeof e){var r=s.default.parse(e);return this.readFeaturesFromDocument(r,t)}return[]},l.prototype.readFeaturesFromDocument=function(e,t){var r,a=[];for(r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Object(i.extend)(a,this.readFeaturesFromNode(r,t));return a},l.prototype.readFeaturesFromNode=function(e,t){},l.prototype.readGeometry=function(e,t){if(s.default.isDocument(e))return this.readGeometryFromDocument(e,t);if(s.default.isNode(e))return this.readGeometryFromNode(e,t);if("string"==typeof e){var r=s.default.parse(e);return this.readGeometryFromDocument(r,t)}return null},l.prototype.readGeometryFromDocument=function(e,t){return null},l.prototype.readGeometryFromNode=function(e,t){return null},l.prototype.readProjection=function(e){if(s.default.isDocument(e))return this.readProjectionFromDocument(e);if(s.default.isNode(e))return this.readProjectionFromNode(e);if("string"==typeof e){var t=s.default.parse(e);return this.readProjectionFromDocument(t)}return null},l.prototype.readProjectionFromDocument=function(e){return this.defaultDataProjection},l.prototype.readProjectionFromNode=function(e){return this.defaultDataProjection},l.prototype.writeFeature=function(e,t){var r=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(r)},l.prototype.writeFeatureNode=function(e,t){return null},l.prototype.writeFeatures=function(e,t){var r=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(r)},l.prototype.writeFeaturesNode=function(e,t){return null},l.prototype.writeGeometry=function(e,t){var r=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(r)},l.prototype.writeGeometryNode=function(e,t){return null},t.a=l},98:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(65),i=r(137),n=function(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.text_=t.text,this.textAlign_=t.textAlign,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new a.default({color:n.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:i.a.POINT,this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding};n.DEFAULT_FILL_COLOR_="#333",n.prototype.clone=function(){return new n({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},n.prototype.getOverflow=function(){return this.overflow_},n.prototype.getFont=function(){return this.font_},n.prototype.getMaxAngle=function(){return this.maxAngle_},n.prototype.getPlacement=function(){return this.placement_},n.prototype.getOffsetX=function(){return this.offsetX_},n.prototype.getOffsetY=function(){return this.offsetY_},n.prototype.getFill=function(){return this.fill_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getStroke=function(){return this.stroke_},n.prototype.getText=function(){return this.text_},n.prototype.getTextAlign=function(){return this.textAlign_},n.prototype.getTextBaseline=function(){return this.textBaseline_},n.prototype.getBackgroundFill=function(){return this.backgroundFill_},n.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},n.prototype.getPadding=function(){return this.padding_},n.prototype.setOverflow=function(e){this.overflow_=e},n.prototype.setFont=function(e){this.font_=e},n.prototype.setMaxAngle=function(e){this.maxAngle_=e},n.prototype.setOffsetX=function(e){this.offsetX_=e},n.prototype.setOffsetY=function(e){this.offsetY_=e},n.prototype.setPlacement=function(e){this.placement_=e},n.prototype.setFill=function(e){this.fill_=e},n.prototype.setRotation=function(e){this.rotation_=e},n.prototype.setScale=function(e){this.scale_=e},n.prototype.setStroke=function(e){this.stroke_=e},n.prototype.setText=function(e){this.text_=e},n.prototype.setTextAlign=function(e){this.textAlign_=e},n.prototype.setTextBaseline=function(e){this.textBaseline_=e},n.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},n.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},n.prototype.setPadding=function(e){this.padding_=e},t.default=n}},[301]);
//# sourceMappingURL=drawfeature.min.js.map