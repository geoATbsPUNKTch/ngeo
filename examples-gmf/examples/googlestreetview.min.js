webpackJsonp([19],{106:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(1);(n=o)&&n.__esModule;t.default=function(e,t){this.getActive=function(){return e[t]},this.setActive=function(i){e[t]=i}}},11:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n="1.3.0"},12:function(e,t,i){"use strict";t.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},130:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(1)),o=a(i(3));a(i(106));function a(e){return e&&e.__esModule?e:{default:e}}var r=function(e){this.groups_={},this.scope_=e};r.$inject=["$rootScope"],r.$inject=["$rootScope"],r.prototype.registerTool=function(e,t,i){var n=this,a=this.groups_[e];a||(a=this.groups_[e]=[]);var r=this.scope_.$watch(t.getActive,function(i,o){i!==o&&(i?n.deactivateTools_(e,t):n.activateDefault_(e))});if(a.push({tool:t,defaultTool:i||!1,unlisten:r}),o.default.ENABLE_ASSERTS){var s=0;a.forEach(function(e){e.defaultTool&&s++}),o.default.assert(s<=1,"more than one default tool in group "+e)}},r.prototype.unregisterTool=function(e,t){var i=this.groups_[e];if(i)for(var n=0;n<i.length;n++)if(i[n].tool==t){i[n].unlisten(),i.splice(n,1);break}},r.prototype.unregisterGroup=function(e){var t=this.groups_[e];if(t){for(var i=0;i<t.length;i++)t[i].unlisten();delete this.groups_[e]}},r.prototype.activateTool=function(e){e.setActive(!0)},r.prototype.deactivateTool=function(e){e.setActive(!1)},r.prototype.deactivateTools_=function(e,t){for(var i=this.groups_[e],n=0;n<i.length;n++)t!=i[n].tool&&i[n].tool.setActive(!1)},r.prototype.activateDefault_=function(e){for(var t=this.groups_[e],i=null,n=!1,o=0;o<t.length;o++)n=n||t[o].tool.getActive(),t[o].defaultTool&&(i=t[o].tool);n||null===i||i.setActive(!0)},(r.module=angular.module("ngeoToolActivateMgr",[])).service("ngeoToolActivateMgr",r),n.default.module.requires.push(r.module.name),t.default=r},16:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),o=i(0),a=i(63),r=i(56),s=i(2),u=i(9),l=i(4),c=function(e,t,i,n,o,s){a.a.call(this,e,t,i,r.a.IDLE),this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=r.a.IDLE,this.imageLoadFunction_=s};Object(o.inherits)(c,a.a),c.prototype.getImage=function(){return this.image_},c.prototype.handleImageError_=function(){this.state=r.a.ERROR,this.unlistenImage_(),this.changed()},c.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(l.getHeight)(this.extent)/this.image_.height),this.state=r.a.LOADED,this.unlistenImage_(),this.changed()},c.prototype.load=function(){this.state!=r.a.IDLE&&this.state!=r.a.ERROR||(this.state=r.a.LOADING,this.changed(),this.imageListenerKeys_=[s.default.listenOnce(this.image_,u.a.ERROR,this.handleImageError_,this),s.default.listenOnce(this.image_,u.a.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},c.prototype.setImage=function(e){this.image_=e},c.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.default.unlistenByKey),this.imageListenerKeys_=null};var h=c,f=i(10),d=i(5),p=i(6),g=i(28),_=i(57),v=i(12),m=i(15),y=i(22),S=function(e){var t=e||{};_.default.call(this,{attributions:t.attributions,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:_.default.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5};Object(o.inherits)(S,_.default),S.GETFEATUREINFO_IMAGE_SIZE_=[101,101],S.prototype.getGetFeatureInfoUrl=function(e,t,i,o){if(void 0!==this.url_){var a=Object(p.get)(i),r=this.getProjection();r&&r!==a&&(t=g.a.calculateSourceResolution(r,a,e,t),e=Object(p.transform)(e,a,r));var s=Object(l.getForViewAndSize)(e,t,0,S.GETFEATUREINFO_IMAGE_SIZE_),u={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};d.default.assign(u,this.params_,o);var c=Math.floor((e[0]-s[0])/t),h=Math.floor((s[3]-e[1])/t);return u[this.v13_?"I":"X"]=c,u[this.v13_?"J":"Y"]=h,this.getRequestUrl_(s,S.GETFEATUREINFO_IMAGE_SIZE_,1,r||a,u)}},S.prototype.getParams=function(){return this.params_},S.prototype.getImageInternal=function(e,t,i,o){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var a=t/i,r=Object(l.getCenter)(e),c=Math.ceil(Object(l.getWidth)(e)/a),f=Math.ceil(Object(l.getHeight)(e)/a),p=Object(l.getForViewAndSize)(r,a,0,[c,f]),g=Math.ceil(this.ratio_*Object(l.getWidth)(e)/a),_=Math.ceil(this.ratio_*Object(l.getHeight)(e)/a),v=Object(l.getForViewAndSize)(r,a,0,[g,_]),m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==t&&m.getPixelRatio()==i&&Object(l.containsExtent)(m.getExtent(),p))return m;var y={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};d.default.assign(y,this.params_),this.imageSize_[0]=Math.round(Object(l.getWidth)(v)/a),this.imageSize_[1]=Math.round(Object(l.getHeight)(v)/a);var S=this.getRequestUrl_(v,this.imageSize_,i,o,y);return this.image_=new h(v,t,i,S,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),s.default.listen(this.image_,u.a.CHANGE,this.handleImageChange,this),this.image_},S.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},S.prototype.getRequestUrl_=function(e,t,i,n,o){if(Object(f.a)(void 0!==this.url_,9),o[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=i)switch(this.serverType_){case v.a.GEOSERVER:var a=90*i+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+a:o.FORMAT_OPTIONS="dpi:"+a;break;case v.a.MAPSERVER:o.MAP_RESOLUTION=90*i;break;case v.a.CARMENTA_SERVER:case v.a.QGIS:o.DPI=90*i;break;default:Object(f.a)(!1,8)}o.WIDTH=t[0],o.HEIGHT=t[1];var r,s=n.getAxisOrientation();return r=this.v13_&&"ne"==s.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,o.BBOX=r.join(","),y.default.appendParams(this.url_,o)},S.prototype.getUrl=function(){return this.url_},S.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},S.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},S.prototype.updateParams=function(e){d.default.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},S.prototype.updateV13_=function(){var e=this.params_.VERSION||n.a;this.v13_=m.default.compareVersions(e,"1.3")>=0};t.default=S},21:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(0)),o=a(i(43));function a(e){return e&&e.__esModule?e:{default:e}}var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.default.call(this,e),this.detail=t};n.default.inherits(r,o.default),t.default=r},23:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11),o=i(0),a=i(10),r=i(4),s=i(5),u=i(14),l=i(6),c=i(28),h=i(60),f=i(41),d=i(12),p=i(61),g=i(15),_=i(22),v=function(e){var t=e||{},i=t.params||{},n=!("TRANSPARENT"in i)||i.TRANSPARENT;f.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=i,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=Object(r.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())};Object(o.inherits)(v,f.a),v.prototype.getGetFeatureInfoUrl=function(e,t,i,o){var a=Object(l.get)(i),u=this.getProjection(),f=this.getTileGrid();f||(f=this.getTileGridForProjection(a));var d=f.getTileCoordForCoordAndResolution(e,t);if(!(f.getResolutions().length<=d[0])){var p=f.getResolution(d[0]),g=f.getTileCoordExtent(d,this.tmpExtent_),_=h.default.toSize(f.getTileSize(d[0]),this.tmpSize),v=this.gutter_;0!==v&&(_=h.default.buffer(_,v,this.tmpSize),g=Object(r.buffer)(g,p*v,g)),u&&u!==a&&(p=c.a.calculateSourceResolution(u,a,e,p),g=Object(l.transformExtent)(g,a,u),e=Object(l.transform)(e,a,u));var m={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};s.default.assign(m,this.params_,o);var y=Math.floor((e[0]-g[0])/p),S=Math.floor((g[3]-e[1])/p);return m[this.v13_?"I":"X"]=y,m[this.v13_?"J":"Y"]=S,this.getRequestUrl_(d,_,g,1,u||a,m)}},v.prototype.getGutterInternal=function(){return this.gutter_},v.prototype.getParams=function(){return this.params_},v.prototype.getRequestUrl_=function(e,t,i,n,o,r){var s=this.urls;if(s){if(r.WIDTH=t[0],r.HEIGHT=t[1],r[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=n)switch(this.serverType_){case d.a.GEOSERVER:var l=90*n+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+l:r.FORMAT_OPTIONS="dpi:"+l;break;case d.a.MAPSERVER:r.MAP_RESOLUTION=90*n;break;case d.a.CARMENTA_SERVER:case d.a.QGIS:r.DPI=90*n;break;default:Object(a.a)(!1,52)}var c,h,f=o.getAxisOrientation(),g=i;if(this.v13_&&"ne"==f.substr(0,2))c=i[0],g[0]=i[1],g[1]=c,c=i[2],g[2]=i[3],g[3]=c;if(r.BBOX=g.join(","),1==s.length)h=s[0];else h=s[Object(u.modulo)(p.a.hash(e),s.length)];return _.default.appendParams(h,r)}},v.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},v.prototype.getKeyForParams_=function(){var e=0,t=[];for(var i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")},v.prototype.fixedTileUrlFunction=function(e,t,i){var o=this.getTileGrid();if(o||(o=this.getTileGridForProjection(i)),!(o.getResolutions().length<=e[0])){1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);var a=o.getResolution(e[0]),u=o.getTileCoordExtent(e,this.tmpExtent_),l=h.default.toSize(o.getTileSize(e[0]),this.tmpSize),c=this.gutter_;0!==c&&(l=h.default.buffer(l,c,this.tmpSize),u=Object(r.buffer)(u,a*c,u)),1!=t&&(l=h.default.scale(l,t,this.tmpSize));var f={SERVICE:"WMS",VERSION:n.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return s.default.assign(f,this.params_),this.getRequestUrl_(e,l,u,t,i,f)}},v.prototype.updateParams=function(e){s.default.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())},v.prototype.updateV13_=function(){var e=this.params_.VERSION||n.a;this.v13_=g.default.compareVersions(e,"1.3")>=0},t.default=v},25:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(1);(n=a)&&n.__esModule;var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.inRange_=!1!==t.inRange,this.visible_=!0===t.visible,this.attributes=t.attributes||null,this.id_=t.id,this.identifierAttribute_=t.identifierAttribute,this.maxResolution_=t.maxResolution,this.minResolution_=t.minResolution,this.name_=t.name}return o(e,[{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){this.attributes=e}},{key:"inRange",get:function(){return this.inRange_},set:function(e){this.inRange_=e}},{key:"visible",get:function(){return this.visible_},set:function(e){this.visible_=e}},{key:"id",get:function(){return this.id_}},{key:"identifierAttribute",get:function(){return this.identifierAttribute_}},{key:"maxResolution",get:function(){return this.maxResolution_}},{key:"minResolution",get:function(){return this.minResolution_}},{key:"name",get:function(){return this.name_}},{key:"queryable",get:function(){return!1}},{key:"supportsDynamicInRange",get:function(){return null!==this.maxResolution||null!==this.minResolution}}]),e}();t.default=r},26:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(1)),o=a(i(47));function a(e){return e&&e.__esModule?e:{default:e}}var r={};n.default.module.value("ngeoDataSources",new o.default),t.default=r},29:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(i(1)),o=h(i(0)),a=h(i(20)),r=h(i(5)),s=h(i(18)),u=h(i(17)),l=h(i(3)),c=h(i(36));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(){this.featureUidToGroupIndex_={},this.groups_=[],this.source_=new s.default({useSpatialIndex:!1}),this.layer_=new a.default({source:this.source_,style:this.styleFunction_.bind(this),updateWhileAnimating:!0,updateWhileInteracting:!0})};f.prototype.addFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var i=o.default.getUid(e).toString();this.featureUidToGroupIndex_[i]=t,this.groups_[t].features[i]=e,this.source_.addFeature(e)},f.prototype.removeFeature=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length);var i=o.default.getUid(e).toString();delete this.featureUidToGroupIndex_[i],delete this.groups_[t].features[i],this.source_.removeFeature(e)},f.prototype.clear=function(e){l.default.assert(e>=0),l.default.assert(e<this.groups_.length);var t=this.groups_[e];for(var i in t.features)this.removeFeature(t.features[i],e);l.default.assert(r.default.isEmpty(t.features))},f.prototype.getLayer=function(){return this.layer_},f.prototype.getFeatureOverlay=function(){var e=this.groups_.length;return this.groups_.push({styleFunction:u.default.defaultFunction,features:{}}),new c.default(this,e)},f.prototype.init=function(e){this.layer_.setMap(e)},f.prototype.setStyle=function(e,t){l.default.assert(t>=0),l.default.assert(t<this.groups_.length),this.groups_[t].styleFunction=null===e?u.default.defaultFunction:u.default.createFunction(e)},f.prototype.styleFunction_=function(e,t){var i=o.default.getUid(e).toString();l.default.assert(i in this.featureUidToGroupIndex_);var n=this.featureUidToGroupIndex_[i];return this.groups_[n].styleFunction(e,t)},(f.module=angular.module("ngeoFeatureOverlayMgr",[c.default.module.name])).service("ngeoFeatureOverlayMgr",f),n.default.module.requires.push(f.module.name),t.default=f},3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={assert:function(e,t,i){},assertNumber:function(e,t,i){},assertString:function(e,t,i){},assertFunction:function(e,t,i){},assertObject:function(e,t,i){},assertArray:function(e,t,i){},assertBoolean:function(e,t,i){},assertElement:function(e,t,i){},assertInstanceof:function(e,t,i,n){},assertObjectPrototypeIsIntact:function(){}};t.default=n},310:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i(!function(){var e=new Error('Cannot find module "examples/googlestreetview.css"');throw e.code="MODULE_NOT_FOUND",e}()),i(59);var n=g(i(7)),o=g(i(31)),a=g(i(62)),r=g(i(48)),s=g(i(65)),u=g(i(78)),l=g(i(17)),c=g(i(98)),h=g(i(311)),f=g(i(32)),d=g(i(106)),p=g(i(130));function g(e){return e&&e.__esModule?e:{default:e}}app.module=angular.module("app",[ngeo.module.name,f.default.name,h.default.name,p.default.module.name]),app.MainController=function(e,t){this.radius=500,this.style=new l.default({text:new c.default({fill:new s.default({color:"#279B61"}),font:"normal 30px FontAwesome",offsetY:-15,stroke:new u.default({color:"#ffffff",width:3}),text:""})}),this.map=new n.default({layers:[new a.default({source:new r.default})],view:new o.default({center:[-7910687,6178318],zoom:17})}),e.init(this.map),this.googleStreetViewActive=!0;var i=new d.default(this,"googleStreetViewActive");t.registerTool("mapTools",i,!0),this.dummyActive=!1;var h=new d.default(this,"dummyActive");t.registerTool("mapTools",h,!1)},app.MainController.$inject=["ngeoFeatureOverlayMgr","ngeoToolActivateMgr"],app.module.controller("MainController",app.MainController),t.default={}},311:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(1)),o=a(i(312));function a(e){return e&&e.__esModule?e:{default:e}}var r=angular.module("ngeoGooglestreetviewModule",[n.default.module.name,o.default.name]);t.default=r},312:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=f(i(8)),a=f(i(2)),r=f(i(6)),s=f(i(40)),u=f(i(19)),l=f(i(27)),c=f(i(1)),h=f(i(29));function f(e){return e&&e.__esModule?e:{default:e}}var d=angular.module("ngeoGooglestreetview",[h.default.module.name]);c.default.module.requires.push(d.name),c.default.googlestreetview.Controller_=function(){function e(t,i,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.active,i.$watch(function(){return o.active},this.handleActiveChange_.bind(this)),this.featureStyle,this.map,this.radius,this.scope_=i,this.feature_=new s.default,this.featureOverlay_=goog.asserts.assert(n.getFeatureOverlay()),this.listenerKeys_=[],this.location=null,this.noDataAtLocation=!1,this.panorama_=new google.maps.StreetViewPanorama(t[0],{pov:{heading:0,pitch:0},visible:!1,zoom:1}),this.panoramaListener_=null,this.point_=new l.default([0,0]),this.feature_.setGeometry(this.point_),this.streetViewService_=new google.maps.StreetViewService,this.panoramaPositionChanging_=!1}return n(e,[{key:"$onInit",value:function(){var e=this;this.scope_.$watch(function(){return e.location},this.handleLocationChange_.bind(this)),this.scope_.$watch(function(){var t=e.active,i=null!==e.location;return t&&i},this.handleReadyChange_.bind(this)),this.scope_.$watch(function(){var t=e.active,i=null!==e.location,n=!1===e.noDataAtLocation;return t&&i&&n},function(t,i){t!==i&&(e.panorama_.setVisible(t),t?e.panoramaListener_=google.maps.event.addListener(e.panorama_,"position_changed",e.handlePanoramaPositionChange_.bind(e)):e.panoramaListener_&&(google.maps.event.removeListener(e.panoramaListener_),e.panoramaListener_=null))}),this.featureStyle&&this.feature_.setStyle(this.featureStyle)}},{key:"handleActiveChange_",value:function(e){var t=this.listenerKeys_;e?t.push(a.default.listen(this.map,"click",this.handleMapClick_,this)):(u.default.unByKey(t),t.length=0)}},{key:"handleLocationChange_",value:function(e,t){if(!(e===t||Array.isArray(e)&&Array.isArray(t)&&o.default.equals(e,t))&&(this.point_.setCoordinates(e),e&&!this.panoramaPositionChanging_)){var i=this.toLonLat_(e);this.streetViewService_.getPanorama({location:{lat:i[1],lng:i[0]},radius:this.radius},this.handleStreetViewServiceGetPanorama_.bind(this))}}},{key:"handleMapClick_",value:function(e){this.location=e.coordinate,this.scope_.$apply()}},{key:"handleReadyChange_",value:function(e,t){e!==t&&(e?this.featureOverlay_.addFeature(this.feature_):this.featureOverlay_.removeFeature(this.feature_))}},{key:"handleStreetViewServiceGetPanorama_",value:function(e,t){var i=this.panorama_;t===google.maps.StreetViewStatus.OK?(this.noDataAtLocation=!1,i.setPosition(e.location.latLng)):this.noDataAtLocation=!0,this.scope_.$apply()}},{key:"handlePanoramaPositionChange_",value:function(){this.panoramaPositionChanging_=!0;var e=this.panorama_.getPosition(),t=[e.lng(),e.lat()],i=this.fromLonLat_(t);this.location=i,this.scope_.$apply(),this.panoramaPositionChanging_=!1}},{key:"fromLonLat_",value:function(e){return r.default.fromLonLat(e,this.map.getView().getProjection())}},{key:"toLonLat_",value:function(e){return r.default.toLonLat(e,this.map.getView().getProjection())}}]),e}(),d.component("ngeoGooglestreetview",{bindings:{active:"<",featureStyle:"<?",map:"<",radius:"<?"},controller:c.default.googlestreetview.Controller_,templateUrl:function(){return c.default.baseModuleTemplateUrl+"/googlestreetview/component.html"}}),t.default=d},32:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(i(1)),o=c(i(33)),a=c(i(34)),r=c(i(29)),s=c(i(37)),u=c(i(38)),l=c(i(39));function c(e){return e&&e.__esModule?e:{default:e}}var h=angular.module("ngeoMapModule",[n.default.module.name,o.default.module.name,a.default.name,r.default.module.name,s.default.name,u.default.name,l.default.name]);t.default=h},33:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(i(3)),o=d(i(1)),a=d(i(21)),r=d(i(0)),s=d(i(19)),u=d(i(52)),l=d(i(50)),c=d(i(16)),h=d(i(23)),f=d(i(58));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(){s.default.call(this),this.mapUids_={}};r.default.inherits(p,s.default),p.prototype.get=function(e){return r.default.getUid(e).toString()in this.mapUids_?e.getLayers().item(0):null},p.prototype.set=function(e,t){var i=r.default.getUid(e).toString(),o=this.get(e);null!==o?(n.default.assert(i in this.mapUids_),null!==t?e.getLayers().setAt(0,t):(e.getLayers().removeAt(0),delete this.mapUids_[i])):null!==t&&(e.getLayers().insertAt(0,t),this.mapUids_[i]=!0);var s=new a.default("change",{current:t,previous:o});return this.dispatchEvent(s),o},p.prototype.updateDimensions=function(e,t){var i=this.get(e);if(i){var o=[i];i instanceof u.default&&(o=i.getLayers().getArray()),o.forEach(function(e){if(n.default.assertInstanceof(e,l.default),e){var i=!1,o={};for(var a in e.get("dimensions")){var r=t[a];void 0!==r&&(o[a]=r,i=!0)}if(i){var s=e.getSource();s instanceof f.default?(s.updateDimensions(o),s.refresh()):(s instanceof h.default||s instanceof c.default)&&(s.updateParams(o),s.refresh())}}})}},(p.module=angular.module("ngeoBackgroundLayerMgr",[])).service("ngeoBackgroundLayerMgr",p),o.default.module.requires.push(p.module.name),t.default=p},34:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(3)),o=s(i(1)),a=(s(i(35)),s(i(2))),r=s(i(7));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoMap",[]);o.default.module.requires.push(u.name),u.directive_=function(e,t){return{restrict:"A",link:function(i,o,s){var u=s.ngeoMap,l=i.$eval(u);n.default.assertInstanceof(l,r.default),l.setTarget(o[0]),t.map=l;var c=s.ngeoMapManageResize;if(i.$eval(c)){var h=s.ngeoMapResizeTransition,f=i.$eval(h);a.default.listen(e,"resize",function(){if(f){var t=Date.now(),i=!0;!function n(){l.updateSize(),l.renderSync(),i&&e.requestAnimationFrame(n),Date.now()-t>f&&(i=!1)}()}else l.updateSize()})}}}},u.directive_.$inject=["$window","ngeoSyncDataSourcesMap"],u.directive("ngeoMap",u.directive_),t.default=u},35:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=c(i(1)),a=c(i(25)),r=(c(i(26)),c(i(2))),s=c(i(19)),u=c(i(31)),l=c(i(3));function c(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ngeoDataSources_=t,this.map_=null,this.listenerKeys_=[],r.default.listen(this.ngeoDataSources_,"add",this.handleDataSourcesAdd_,this)}return e.$inject=["ngeoDataSources"],n(e,[{key:"bindMap_",value:function(e){var t=e.getView();this.listenerKeys_.push(r.default.listen(t,"change:resolution",this.handleViewResolutionChange_,this));var i=t.getResolution();l.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"unbindMap_",value:function(e){s.default.unByKey(this.listenerKeys_),this.listenerKeys_=[]}},{key:"handleViewResolutionChange_",value:function(e){var t=e.target;l.default.assertInstanceof(t,u.default);var i=t.getResolution();l.default.assertNumber(i),this.syncDataSourcesToResolution_(i)}},{key:"syncDataSourcesToResolution_",value:function(e){var t=this;this.ngeoDataSources_.forEach(function(i){t.syncDataSourceToResolution_(i,e)})}},{key:"syncDataSourceToResolution_",value:function(e,t){if(e.supportsDynamicInRange){var i=e.maxResolution,n=e.minResolution,o=(null===n||void 0===n||t>=n)&&(null===i||void 0===i||t<=i);e.inRange=o}}},{key:"handleDataSourcesAdd_",value:function(e){var t=l.default.assertInstanceof(e.element,a.default);if(this.map_){var i=this.map_.getView().getResolution();l.default.assertNumber(i),this.syncDataSourceToResolution_(t,i)}}},{key:"map",set:function(e){this.map_&&this.unbindMap_(this.map_),this.map_=e,e&&this.bindMap_(e)}}]),e}();o.default.module.service("ngeoSyncDataSourcesMap",h),t.default=h},36:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(i(1)),o=(a(i(0)),a(i(2)));function a(e){return e&&e.__esModule?e:{default:e}}var r=function(e,t){this.manager_=e,this.features_=null,this.index_=t};r.prototype.addFeature=function(e){this.manager_.addFeature(e,this.index_)},r.prototype.removeFeature=function(e){this.manager_.removeFeature(e,this.index_)},r.prototype.clear=function(){this.manager_.clear(this.index_)},r.prototype.setFeatures=function(e){null!==this.features_&&(this.features_.clear(),o.default.unlisten(this.features_,"add",this.handleFeatureAdd_,this),o.default.unlisten(this.features_,"remove",this.handleFeatureRemove_,this)),null!==e&&(e.forEach(function(e){this.addFeature(e)},this),o.default.listen(e,"add",this.handleFeatureAdd_,this),o.default.listen(e,"remove",this.handleFeatureRemove_,this)),this.features_=e},r.prototype.setStyle=function(e){this.manager_.setStyle(e,this.index_)},r.prototype.handleFeatureAdd_=function(e){var t=e.element;this.addFeature(t)},r.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature(t)},r.module=angular.module("ngeoFeatureOverlay",[]),n.default.module.requires.push(r.module.name),t.default=r},37:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i(1),a=(n=o)&&n.__esModule?n:{default:n};var r=angular.module("ngeoRecenter",[]);a.default.module.requires.push(r.name),r.directive_=function(){return{restrict:"A",link:function(e,t,i){var n=i.ngeoRecenterMap,o=e.$eval(n);function a(t){var i=t.attr("ngeo-extent");if(void 0!==i){var n=o.getSize();o.getView().fit(e.$eval(i),{size:n})}var a=t.attr("ngeo-zoom");void 0!==a&&o.getView().setZoom(e.$eval(a))}t.on("click","*",function(e){a(angular.element($(this)))}),t.on("change",function(e){var t=e.target.options[e.target.selectedIndex];a(angular.element(t))})}}},r.directive("ngeoRecenter",r.directive_),t.default=r},38:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(i(3)),o=r(i(1)),a=r(i(7));function r(e){return e&&e.__esModule?e:{default:e}}var s=angular.module("ngeoResizemap",[]);o.default.module.requires.push(s.name),s.directive_=function(e){return{restrict:"A",link:function(t,i,o){var r=o.ngeoResizemap,s=t.$eval(r);n.default.assertInstanceof(s,a.default);var u=o.ngeoResizemapState;n.default.assert(void 0!==u);var l=void 0,c=void 0,h=function t(){s.updateSize(),s.renderSync(),Date.now()-l<1e3&&(c=e.requestAnimationFrame(t))};i.on("transitionend",function(){s.updateSize(),s.renderSync()}),t.$watch(u,function(t,i){t!=i&&(l=Date.now(),e.cancelAnimationFrame(c),c=e.requestAnimationFrame(h))})}}},s.directive("ngeoResizemap",s.directive_),t.default=s},39:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(i(1)),o=s(i(8)),a=s(i(7)),r=s(i(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=angular.module("ngeoScaleselector",[]);n.default.module.requires.push(u.name),u.value("ngeoScaleselectorTemplateUrl",function(e,t){var i=t.ngeoScaleselectorTemplateurl;return void 0!==i?i:n.default.baseModuleTemplateUrl+"/map/scaleselector.html"}),u.directive_=function(e){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:e}},u.directive("ngeoScaleselector",u.directive_),u.ScaleselectorController_=function(e,t,i){var n=this,s=i.ngeoScaleselector;this.scales=e.$eval(s),goog.asserts.assert(void 0!==this.scales),this.zoomLevels,e.$watch(function(){return Object.keys(n.scales).length},function(e){n.zoomLevels=Object.keys(n.scales).map(Number),n.zoomLevels.sort(o.default.numberSafeCompareFunction)});var l=i.ngeoScaleselectorMap;this.map_=e.$eval(l),goog.asserts.assertInstanceof(this.map_,a.default);var c=i.ngeoScaleselectorOptions,h=e.$eval(c);if(this.options=u.ScaleselectorController_.getOptions_(h),this.$scope_=e,this.resolutionChangeKey_=null,this.currentScale=void 0,null!==this.map_.getView()){var f=this.map_.getView().getZoom();void 0!==f&&(this.currentScale=this.getScale(f))}r.default.listen(this.map_,"change:view",this.handleViewChange_,this),this.registerResolutionChangeListener_(),e.scaleselectorCtrl=this},u.ScaleselectorController_.getOptions_=function(e){var t=!1;return void 0!==e&&(t=1==e.dropup),{dropup:t}},u.ScaleselectorController_.prototype.getScale=function(e){return this.scales[e]},u.ScaleselectorController_.prototype.changeZoom=function(e){this.map_.getView().setZoom(e)},u.ScaleselectorController_.prototype.handleResolutionChange_=function(e){var t=this,i=this.map_.getView(),n=this.scales[i.getZoom()];void 0!==n&&this.$scope_.$applyAsync(function(){t.currentScale=n})},u.ScaleselectorController_.prototype.handleViewChange_=function(e){this.registerResolutionChangeListener_(),this.handleResolutionChange_(null)},u.ScaleselectorController_.prototype.registerResolutionChangeListener_=function(){null!==this.resolutionChangeKey_&&r.default.unlistenByKey(this.resolutionChangeKey_);var e=this.map_.getView();this.resolutionChangeKey_=r.default.listen(e,"change:resolution",this.handleResolutionChange_,this)},u.controller("NgeoScaleselectorController",u.ScaleselectorController_),t.default=u},48:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),o=i(49),a=function(e){var t,i=e||{};t=void 0!==i.attributions?i.attributions:[a.ATTRIBUTION];var n=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",r=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";o.a.call(this,{attributions:t,cacheSize:i.cacheSize,crossOrigin:n,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:r,wrapX:i.wrapX})};Object(n.inherits)(a,o.a),a.ATTRIBUTION='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',t.default=a},49:function(e,t,i){"use strict";var n=i(0),o=i(41),a=i(71),r=function(e){var t=e||{},i=void 0!==t.projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:a.a.createXYZ({extent:a.a.extentFromProjection(i),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});o.a.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,opaque:t.opaque,projection:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition})};Object(n.inherits)(r,o.a),t.a=r},98:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(65),o=i(137),a=function(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.text_=t.text,this.textAlign_=t.textAlign,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new n.default({color:a.DEFAULT_FILL_COLOR_}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:o.a.POINT,this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding};a.DEFAULT_FILL_COLOR_="#333",a.prototype.clone=function(){return new a({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},a.prototype.getOverflow=function(){return this.overflow_},a.prototype.getFont=function(){return this.font_},a.prototype.getMaxAngle=function(){return this.maxAngle_},a.prototype.getPlacement=function(){return this.placement_},a.prototype.getOffsetX=function(){return this.offsetX_},a.prototype.getOffsetY=function(){return this.offsetY_},a.prototype.getFill=function(){return this.fill_},a.prototype.getRotateWithView=function(){return this.rotateWithView_},a.prototype.getRotation=function(){return this.rotation_},a.prototype.getScale=function(){return this.scale_},a.prototype.getStroke=function(){return this.stroke_},a.prototype.getText=function(){return this.text_},a.prototype.getTextAlign=function(){return this.textAlign_},a.prototype.getTextBaseline=function(){return this.textBaseline_},a.prototype.getBackgroundFill=function(){return this.backgroundFill_},a.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},a.prototype.getPadding=function(){return this.padding_},a.prototype.setOverflow=function(e){this.overflow_=e},a.prototype.setFont=function(e){this.font_=e},a.prototype.setMaxAngle=function(e){this.maxAngle_=e},a.prototype.setOffsetX=function(e){this.offsetX_=e},a.prototype.setOffsetY=function(e){this.offsetY_=e},a.prototype.setPlacement=function(e){this.placement_=e},a.prototype.setFill=function(e){this.fill_=e},a.prototype.setRotation=function(e){this.rotation_=e},a.prototype.setScale=function(e){this.scale_=e},a.prototype.setStroke=function(e){this.stroke_=e},a.prototype.setText=function(e){this.text_=e},a.prototype.setTextAlign=function(e){this.textAlign_=e},a.prototype.setTextBaseline=function(e){this.textBaseline_=e},a.prototype.setBackgroundFill=function(e){this.backgroundFill_=e},a.prototype.setBackgroundStroke=function(e){this.backgroundStroke_=e},a.prototype.setPadding=function(e){this.padding_=e},t.default=a}},[310]);
//# sourceMappingURL=googlestreetview.min.js.map